/*! For license information please see main.d8b1be43.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},446:function(e,t,n){"use strict";var r=n(740),i=n(181),o=n(933),a=n(293),s=n(386);function u(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l,c=u(r),h=((l={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",l["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",l["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",l["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",l["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",l["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",l["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",l["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",l["recaptcha-error"]="ReCAPTCHA error.",l),f=new a.ErrorFactory("appCheck","AppCheck",h),d=new Map,p={activated:!1,tokenObservers:[]},v={enabled:!1};function m(e){return d.get(e)||p}function g(e,t){d.set(e,t)}function y(){return v}var b="https://content-firebaseappcheck.googleapis.com/v1beta",_=3e4,w=96e4,x=function(){function e(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return e.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},e.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},e.prototype.isRunning=function(){return!!this.pending},e.prototype.process=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new a.Deferred,[4,(r=this.getNextRun(e),new Promise((function(e){setTimeout(e,r)})))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new a.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return t=n.sent(),this.retryPolicy(t)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}var r}))}))},e.prototype.getNextRun=function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t},e}();function E(){return self.grecaptcha}function S(e){if(!m(e).activated)throw f.create("use-before-activation",{appName:e.name})}function A(e){return a.base64.encodeString(JSON.stringify(e),!1)}function T(e,t){var n=e.url,r=e.body;return o.__awaiter(this,void 0,void 0,(function(){var e,i,a,s,u,l,c,h,d,p;return o.__generator(this,(function(o){switch(o.label){case 0:e={"Content-Type":"application/json"},(i=t.getImmediate({optional:!0}))&&(e["X-Firebase-Client"]=i.getPlatformInfoString()),a={method:"POST",body:JSON.stringify(r),headers:e},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,a)];case 2:return s=o.sent(),[3,4];case 3:throw u=o.sent(),f.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==s.status)throw f.create("fetch-status-error",{httpStatus:s.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,s.json()];case 6:return l=o.sent(),[3,8];case 7:throw c=o.sent(),f.create("fetch-parse-error",{originalErrorMessage:c.message});case 8:if(!(h=l.ttl.match(/^([\d.]+)(s)$/))||!h[2]||isNaN(Number(h[1])))throw f.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+l.ttl});return d=1e3*Number(h[1]),p=Date.now(),[2,{token:l.attestationToken,expireTimeMillis:p+d,issuedAtTimeMillis:p}]}}))}))}function C(e,t){var n=e.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:b+"/projects/"+r+"/apps/"+i+":exchangeRecaptchaToken?key="+o,body:{recaptcha_token:t}}}function M(e,t){var n=e.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:b+"/projects/"+r+"/apps/"+i+":exchangeDebugToken?key="+o,body:{debug_token:t}}}var k="firebase-app-check-store",I="debug-token",R=null;function P(){return R||(R=new Promise((function(e,t){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(t){e(t.target.result)},n.onerror=function(e){var n;t(f.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(e){var t=e.target.result;if(0===e.oldVersion)t.createObjectStore(k,{keyPath:"compositeKey"})}}catch(r){t(f.create("storage-open",{originalErrorMessage:r.message}))}})),R)}function D(e){return L(O(e))}function N(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,P()];case 1:return n=o.sent(),r=n.transaction(k,"readwrite"),i=r.objectStore(k),a=i.put({compositeKey:e,value:t}),[2,new Promise((function(e,t){a.onsuccess=function(t){e()},r.onerror=function(e){var n;t(f.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function L(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,P()];case 1:return t=o.sent(),n=t.transaction(k,"readonly"),r=n.objectStore(k),i=r.get(e),[2,new Promise((function(e,t){i.onsuccess=function(t){var n=t.target.result;e(n?n.value:void 0)},n.onerror=function(e){var n;t(f.create("storage-get",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function O(e){return e.options.appId+"-"+e.name}var B=new s.Logger("@firebase/app-check");function F(e,t){return a.isIndexedDBAvailable()?function(e,t){return N(O(e),t)}(e,t).catch((function(e){B.warn("Failed to write token to indexeddb. Error: "+e)})):Promise.resolve()}function U(){return o.__awaiter(this,void 0,void 0,(function(){var e,t;return o.__generator(this,(function(n){switch(n.label){case 0:e=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,L(I)];case 2:return e=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return e?[2,e]:(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),(r=t,N(I,r)).catch((function(e){return B.warn("Failed to persist debug token to indexeddb. Error: "+e)})),console.log("AppCheck debug token: "+t+". You will need to whitelist it in the Firebase console for it to work"),[2,t])}var r}))}))}function j(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){if((e=y()).enabled&&e.token)return[2,e.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}var H={error:"UNKNOWN_ERROR"};function G(e,t,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,(function(){var r,i,a,s,u,l,c,h,f,d;return o.__generator(this,(function(p){switch(p.label){case 0:return S(e),r=m(e),i=r.token,a=void 0,i?[3,2]:[4,r.cachedTokenPromise];case 1:(s=p.sent())&&q(s)&&(i=s,g(e,o.__assign(o.__assign({},r),{token:i})),W(e,{token:i.token})),p.label=2;case 2:return!n&&i&&q(i)?[2,{token:i.token}]:y().enabled?(l=T,c=M,h=[e],[4,j()]):[3,6];case 3:return[4,l.apply(void 0,[c.apply(void 0,h.concat([p.sent()])),t])];case 4:return u=p.sent(),[4,F(e,u)];case 5:return p.sent(),g(e,o.__assign(o.__assign({},r),{token:u})),[2,{token:u.token}];case 6:return p.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=p.sent(),[3,9];case 8:return f=p.sent(),B.error(f),a=f,[3,9];case 9:return i?[3,10]:(d=function(e){return{token:A(H),error:e}}(a),[3,12]);case 10:return d={token:i.token},g(e,o.__assign(o.__assign({},r),{token:i})),[4,F(e,i)];case 11:p.sent(),p.label=12;case 12:return W(e,d),[2,d]}}))}))}function z(e,t,n,r,i){var a=m(e),s={next:r,error:i,type:n},u=o.__assign(o.__assign({},a),{tokenObservers:o.__spreadArray(o.__spreadArray([],a.tokenObservers),[s])});if(!u.tokenRefresher){var l=function(e,t){var n=this;return new x((function(){return o.__awaiter(n,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return m(e).token?[3,2]:[4,G(e,t)];case 1:return n=r.sent(),[3,4];case 2:return[4,G(e,t,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}}))}))}),(function(){return!0}),(function(){var t=m(e);if(t.token){var n=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5,r=t.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),_,w)}(e,t);u.tokenRefresher=l}if(!u.tokenRefresher.isRunning()&&a.isTokenAutoRefreshEnabled&&u.tokenRefresher.start(),a.token&&q(a.token)){var c=a.token;Promise.resolve().then((function(){return r({token:c.token})})).catch((function(){}))}else null==a.token&&a.cachedTokenPromise.then((function(e){e&&q(e)&&r({token:e.token})})).catch((function(){}));g(e,u)}function V(e,t){var n=m(e),r=n.tokenObservers.filter((function(e){return e.next!==t}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),g(e,o.__assign(o.__assign({},n),{tokenObservers:r}))}function W(e,t){for(var n=0,r=m(e).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(o){}}}function q(e){return e.expireTimeMillis-Date.now()>0}var K="https://www.google.com/recaptcha/api.js";function J(e,t){var n=m(e),r=new a.Deferred;g(e,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+e.name,s=document.createElement("div");s.id=i,s.style.display="none",document.body.appendChild(s);var u=E();return u?u.ready((function(){X(e,t,u,i),r.resolve(u)})):function(e){var t=document.createElement("script");t.src=""+K,t.onload=e,document.head.appendChild(t)}((function(){var n=E();if(!n)throw new Error("no recaptcha");n.ready((function(){X(e,t,n,i),r.resolve(n)}))})),r.promise}function Q(e){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(n){switch(n.label){case 0:return S(e),[4,m(e).reCAPTCHAState.initialized.promise];case 1:return t=n.sent(),[2,new Promise((function(n,r){var i=m(e).reCAPTCHAState;t.ready((function(){n(t.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function X(e,t,n,r){var i=n.render(r,{sitekey:t,size:"invisible"}),a=m(e);g(e,o.__assign(o.__assign({},a),{reCAPTCHAState:o.__assign(o.__assign({},a.reCAPTCHAState),{widgetId:i})}))}var Y=function(){function e(e){this._siteKey=e}return e.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){switch(t.label){case 0:if(!this._app||!this._platformLoggerProvider)throw f.create("use-before-activation",{appName:""});t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Q(this._app)];case 2:return e=t.sent(),[3,4];case 3:throw t.sent(),f.create("recaptcha-error");case 4:return[2,T(C(this._app,e),this._platformLoggerProvider)]}}))}))},e.prototype.initialize=function(e,t){this._app=e,this._platformLoggerProvider=t,J(e,this._siteKey).catch((function(){}))},e}(),Z=function(){function e(e){this._customProviderOptions=e}return e.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,t,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!this._app)throw f.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return e=r.sent(),t=a.issuedAtTime(e.token),n=null!==t&&t<Date.now()&&t>0?1e3*t:Date.now(),[2,o.__assign(o.__assign({},e),{issuedAtTimeMillis:n})]}}))}))},e.prototype.initialize=function(e){this._app=e},e}();function $(e,t,n,r){var i=m(e);if(i.activated)throw f.create("already-activated",{appName:e.name});var s=o.__assign(o.__assign({},i),{activated:!0});s.cachedTokenPromise=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!a.isIndexedDBAvailable())return[3,5];t=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,D(e)];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),B.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,t];case 5:return[2,void 0]}}))}))}(e).then((function(t){return t&&q(t)&&g(e,o.__assign(o.__assign({},m(e)),{token:t})),t})),s.provider="string"===typeof t?new Y(t):t instanceof Y||t instanceof Z?t:new Z({getToken:t.getToken}),s.isTokenAutoRefreshEnabled=void 0===r?e.automaticDataCollectionEnabled:r,g(e,s),s.provider.initialize(e,n)}function ee(e,t){return{app:e,activate:function(n,r){return $(e,n,t,r)},setTokenAutoRefreshEnabled:function(t){return function(e,t){var n=m(e);n.tokenRefresher&&(!0===t?n.tokenRefresher.start():n.tokenRefresher.stop()),g(e,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:t}))}(e,t)},getToken:function(n){return function(e,t,n){return o.__awaiter(this,void 0,void 0,(function(){var r;return o.__generator(this,(function(i){switch(i.label){case 0:return[4,G(e,t,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}}))}))}(e,t,n)},onTokenChanged:function(n,r,i){return function(e,t,n,r,i){var o=function(){},a=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?a=n.error.bind(n):r&&(a=r),z(e,t,"EXTERNAL",o,a),function(){return V(e,o)}}(e,t,n,r)},INTERNAL:{delete:function(){for(var t=0,n=m(e).tokenObservers;t<n.length;t++){var r=n[t];V(e,r.next)}return Promise.resolve()}}}}var te="app-check-internal";!function(e){e.INTERNAL.registerComponent(new i.Component("appCheck",(function(e){return ee(e.getProvider("app").getImmediate(),e.getProvider("platform-logger"))}),"PUBLIC").setServiceProps({ReCaptchaV3Provider:Y,CustomProvider:Z}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider(te).initialize()}))),e.INTERNAL.registerComponent(new i.Component(te,(function(e){return function(e,t){return{getToken:function(n){return G(e,t,n)},addTokenListener:function(n){return z(e,t,"INTERNAL",n)},removeTokenListener:function(t){return V(e,t)}}}(e.getProvider("app").getImmediate(),e.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT")),e.registerVersion("@firebase/app-check","0.3.2")}(c.default),function(){var e=a.getGlobal();if("string"===typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===e.FIREBASE_APPCHECK_DEBUG_TOKEN){var t=y();t.enabled=!0;var n=new a.Deferred;t.token=n,"string"===typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(U())}}()},933:function(e,t,n){"use strict";n.r(t),n.d(t,{__extends:function(){return i},__assign:function(){return o},__rest:function(){return a},__decorate:function(){return s},__param:function(){return u},__metadata:function(){return l},__awaiter:function(){return c},__generator:function(){return h},__createBinding:function(){return f},__exportStar:function(){return d},__values:function(){return p},__read:function(){return v},__spread:function(){return m},__spreadArrays:function(){return g},__spreadArray:function(){return y},__await:function(){return b},__asyncGenerator:function(){return _},__asyncDelegator:function(){return w},__asyncValues:function(){return x},__makeTemplateObject:function(){return E},__importStar:function(){return A},__importDefault:function(){return T},__classPrivateFieldGet:function(){return C},__classPrivateFieldSet:function(){return M}});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function l(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var f=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function d(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||f(t,e,n)}function p(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function g(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function y(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function _(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof b?Promise.resolve(n.value.v).then(u,l):c(o[0][2],n)}catch(r){c(o[0][3],r)}var n}function u(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:b(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function x(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var S=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&f(t,e,n);return S(t,e),t}function T(e){return e&&e.__esModule?e:{default:e}}function C(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function M(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}},740:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w},firebase:function(){return _}});var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.create;Object.create;var i,o,a=n(293),s=n(181),u=n(386),l=((i={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i["invalid-log-argument"]="First argument to `onLog` must be null or a function.",i),c=new a.ErrorFactory("app","Firebase",l),h="@firebase/app",f="[DEFAULT]",d=((o={})[h]="fire-core",o["@firebase/analytics"]="fire-analytics",o["@firebase/app-check"]="fire-app-check",o["@firebase/auth"]="fire-auth",o["@firebase/database"]="fire-rtdb",o["@firebase/functions"]="fire-fn",o["@firebase/installations"]="fire-iid",o["@firebase/messaging"]="fire-fcm",o["@firebase/performance"]="fire-perf",o["@firebase/remote-config"]="fire-rc",o["@firebase/storage"]="fire-gcs",o["@firebase/firestore"]="fire-fst",o["fire-js"]="fire-js",o["firebase-wrapper"]="fire-js-all",o),p=new u.Logger("@firebase/app"),v=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=(0,a.deepCopy)(e),this.container=new s.ComponentContainer(t.name),this._addComponent(new s.Component("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(e){return r._addComponent(e)}))}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){var n;void 0===t&&(t=f),this.checkDestroyed_();var r=this.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=f),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){p.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw c.create("app-deleted",{appName:this.name_})},e}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var m=function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"===typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!==typeof s||!s)throw c.create("bad-app-name",{appName:String(s)});if((0,a.contains)(t,s))throw c.create("duplicate-app",{appName:s});var u=new e(n,o,r);return t[s]=u,u},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=d[e])&&void 0!==r?r:e;n&&(i+="-"+n);var a=i.match(/\s|\//),u=t.match(/\s|\//);if(a||u){var l=['Unable to register library "'+i+'" with version "'+t+'":'];return a&&l.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&l.push("and"),u&&l.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void p.warn(l.join(" "))}o(new s.Component(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(e,t){if(null!==e&&"function"!==typeof e)throw c.create("invalid-log-argument");(0,u.setUserLogHandler)(e,t)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function i(e){if(e=e||f,!(0,a.contains)(t,e))throw c.create("no-app",{appName:e});return t[e]}function o(o){var s=o.name;if(n.has(s))return p.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(e){if(void 0===e&&(e=i()),"function"!==typeof e[s])throw c.create("invalid-app-argument",{appName:s});return e[s]()};void 0!==o.serviceProps&&(0,a.deepExtend)(u,o.serviceProps),r[s]=u,e.prototype[s]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,s).apply(this,o.multipleInstances?e:[])}}for(var l=0,h=Object.keys(t);l<h.length;l++){var f=h[l];t[f]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r}(v);return t.INTERNAL=r(r({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,a.deepExtend)(t,e)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),t}(),g=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if((0,a.isBrowser)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,a.isNode)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,e)};var _=m;!function(e,t){e.INTERNAL.registerComponent(new s.Component("platform-logger",(function(e){return new g(e)}),"PRIVATE")),e.registerVersion(h,"0.6.30",t),e.registerVersion("fire-js","")}(_);var w=_},181:function(e,t,n){"use strict";n.r(t),n.d(t,{Component:function(){return l},ComponentContainer:function(){return f},Provider:function(){return h}});function r(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function i(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function o(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function s(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var u=n(293),l=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),c="[DEFAULT]",h=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new u.Deferred;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:c})}catch(d){}try{for(var r=o(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var s=a(i.value,2),u=s[0],l=s[1],h=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService({instanceIdentifier:h});l.resolve(f)}catch(d){}}}catch(p){t={error:p}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=c),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return r(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(s(s([],a(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),a(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=c),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=c),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var r=e.options,i=void 0===r?{}:r,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:s,options:i});try{for(var l=o(this.instancesDeferred.entries()),c=l.next();!c.done;c=l.next()){var h=a(c.value,2),f=h[0],d=h[1];s===this.normalizeInstanceIdentifier(f)&&d.resolve(u)}}catch(p){t={error:p}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return u},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&e(o,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,r,i=this.onInitCallbacks.get(t);if(i)try{for(var a=o(i),s=a.next();!s.done;s=a.next()){var u=s.value;try{u(e,t)}catch(l){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===c?void 0:t),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=c),this.component?this.component.multipleInstances?e:c:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();var f=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new h(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},172:function(e,t,n){"use strict";var r=n(740),i=n(181),o=n(293),a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},a(e,t)};function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u.apply(this,arguments)};function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function c(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function h(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(R){i={error:R}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function d(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var p=n(386);e=n.hmd(e);var v="";function m(e){v=e}var g=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,o.stringify)(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,o.jsonEval)(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),y=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return(0,o.contains)(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),b=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new g(t)}}catch(n){}return new y},_=b("localStorage"),w=b("sessionStorage"),x=new p.Logger("@firebase/database"),E=function(){var e=1;return function(){return e++}}(),S=function(e){var t=(0,o.stringToByteArray)(e),n=new o.Sha1;n.update(t);var r=n.digest();return o.base64.encodeByteArray(r)},A=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r="",i=0;i<t.length;i++){var a=t[i];Array.isArray(a)||a&&"object"===typeof a&&"number"===typeof a.length?r+=e.apply(null,a):r+="object"===typeof a?(0,o.stringify)(a):a,r+=" "}return r},T=null,C=!0,M=function(e,t){(0,o.assert)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(x.logLevel=p.LogLevel.VERBOSE,T=x.log.bind(x),t&&w.set("logging_enabled",!0)):"function"===typeof e?T=e:(T=null,w.remove("logging_enabled"))},k=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===C&&(C=!1,null===T&&!0===w.get("logging_enabled")&&M(!0)),T){var n=A.apply(null,e);T(n)}},I=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];k.apply(void 0,d([e],f(t)))}},R=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+A.apply(void 0,d([],f(e)));x.error(n)},P=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+A.apply(void 0,d([],f(e)));throw x.error(n),new Error(n)},D=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+A.apply(void 0,d([],f(e)));x.warn(n)},N=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},L="[MIN_NAME]",O="[MAX_NAME]",B=function(e,t){if(e===t)return 0;if(e===L||t===O)return-1;if(t===L||e===O)return 1;var n=K(e),r=K(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},F=function(e,t){return e===t?0:e<t?-1:1},U=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,o.stringify)(t))},j=function e(t){if("object"!==typeof t||null===t)return(0,o.stringify)(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=(0,o.stringify)(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},H=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function G(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var z=function(e){(0,o.assert)(!N(e),"Invalid JSON number");var t,n,r,i,a,s=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),s))+s,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var l=u.join(""),c="";for(a=0;a<64;a+=8){var h=parseInt(l.substr(a,8),2).toString(16);1===h.length&&(h="0"+h),c+=h}return c.toLowerCase()};var V=new RegExp("^-?(0*)\\d{1,10}$"),W=-2147483648,q=2147483647,K=function(e){if(V.test(e)){var t=Number(e);if(t>=W&&t<=q)return t}return null},J=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw D("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Q=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},X=function(){function e(e,t){var n=this;this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((function(e){return n.appCheck=e}))}return e.prototype.getToken=function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))},e.prototype.addTokenChangeListener=function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){D('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},e}(),Y=function(){function e(e,t,n){var r=this;this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(e){return r.auth_=e}))}return e.prototype.getToken=function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(k("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))},e.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))},e.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',D(e)},e}(),Z=function(){function e(e){this.accessToken=e}return e.prototype.getToken=function(e){return Promise.resolve({accessToken:this.accessToken})},e.prototype.addTokenChangeListener=function(e){e(this.accessToken)},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){},e.OWNER="owner",e}(),$="5",ee=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,te="websocket",ne="long_polling",re=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_.get("host:"+e)||this._host}return e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&_.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+e+this.host+"/"+t},e}();function ie(e,t,n){var r;if((0,o.assert)("string"===typeof t,"typeof type must == string"),(0,o.assert)("object"===typeof n,"typeof params must == object"),t===te)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==ne)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return G(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var oe=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),(0,o.contains)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return(0,o.deepCopy)(this.counters_)},e}(),ae={},se={};function ue(e){var t=e.toString();return ae[t]||(ae[t]=new oe),ae[t]}var le=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&J((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},e}(),ce="start",he="close",fe=function(){function e(e,t,n,r,i,o,a){var s=this;this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=I(e),this.stats_=ue(t),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),ie(t,ne,e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new le(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if((0,o.isNodeSdk)()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new de((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=f(e,5),i=r[0],o=r[1],a=r[2];if(r[3],r[4],n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===ce)n.id=o,n.password=a;else{if(i!==he)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=f(e,2),i=r[0],o=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=$,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&ee.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!(0,o.isNodeSdk)()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=(0,o.stringify)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=(0,o.base64Encode)(t),r=H(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!(0,o.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=(0,o.stringify)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),de=function(){function e(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.isNodeSdk)())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=E(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var s="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(u){k("frame writing exception"),u.stack&&k(u.stack),k(u)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||k("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))},e.prototype.addTag=function(e,t){var n=this;(0,o.isNodeSdk)()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){k("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},e}(),pe=null;"undefined"!==typeof MozWebSocket?pe=MozWebSocket:"undefined"!==typeof WebSocket&&(pe=WebSocket);var ve=function(){function e(t,n,r,i,o,a,s){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=I(this.connId),this.stats_=ue(n),this.connURL=e.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(e,t,n,r){var i={};return i.v=$,!(0,o.isNodeSdk)()&&"undefined"!==typeof location&&location.hostname&&ee.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),ie(e,te,i)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_.set("previous_websocket_failure",!0);try{if((0,o.isNodeSdk)()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+v+"/"+process.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/edtech",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},s=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;s&&(i.proxy={origin:s}),this.mySock=new pe(this.connURL,[],i)}else{i={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new pe(this.connURL,[],i)}}catch(l){this.log_("Error instantiating WebSocket.");var u=l.message||l.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==pe&&!e.forceDisallow_},e.previouslyFailed=function(){return _.isInMemoryStorage||!0===_.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){_.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=(0,o.jsonEval)(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if((0,o.assert)(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=(0,o.stringify)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=H(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),me=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[fe,ve]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=ve&&ve.isAvailable(),o=i&&!ve.previouslyFailed();if(t.webSocketOnly&&(i||D("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[ve];else{var a=this.transports_=[];try{for(var s=h(e.ALL_TRANSPORTS),u=s.next();!u.done;u=s.next()){var l=u.value;l&&l.isAvailable()&&a.push(l)}}catch(c){n={error:c}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),ge=function(){function e(e,t,n,r,i,o,a,s,u,l){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=I("c:"+this.id+":"),this.transportManager_=new me(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Q((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=U("t",e),n=U("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=U("t",e),n=U("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=U("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?R("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):R("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),$!==n&&D("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Q((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Q((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),ye=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.refreshAppCheckToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),be=function(){function e(e){this.allowedEvents_=e,this.listeners_={},(0,o.assert)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=d([],f(this.listeners_[e])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){(0,o.assert)(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)},e}(),_e=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||(0,o.isMobileCordova)()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}return s(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return(0,o.assert)("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(be),we=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e}();function xe(){return new we("")}function Ee(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Se(e){return e.pieces_.length-e.pieceNum_}function Ae(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new we(e.pieces_,t)}function Te(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Ce(e,t){return void 0===t&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function Me(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new we(t,0)}function ke(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof we)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new we(n,0)}function Ie(e){return e.pieceNum_>=e.pieces_.length}function Re(e,t){var n=Ee(e),r=Ee(t);if(null===n)return t;if(n===r)return Re(Ae(e),Ae(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Pe(e,t){for(var n=Ce(e,0),r=Ce(t,0),i=0;i<n.length&&i<r.length;i++){var o=B(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function De(e,t){if(Se(e)!==Se(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ne(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Se(e)>Se(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Le=function(e,t){this.errorPrefix_=t,this.parts_=Ce(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.stringLength)(this.parts_[n]);Oe(this)};function Oe(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Be(e))}function Be(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Fe,Ue,je=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(n="visibilitychange",t="hidden"):"undefined"!==typeof document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):"undefined"!==typeof document.msHidden?(n="msvisibilitychange",t="msHidden"):"undefined"!==typeof document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))}),!1),r}return s(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return(0,o.assert)("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(be),He=1e3,Ge=function(e){function t(n,r,i,a,s,u,l,c){var h=e.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=a,h.onServerInfoUpdate_=s,h.authTokenProvider_=u,h.appCheckTokenProvider_=l,h.authOverride_=c,h.id=t.nextPersistentConnectionId_++,h.log_=I("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=He,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,c&&!(0,o.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return je.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&_e.getInstance().on("online",h.onOnline_,h),h}return s(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_((0,o.stringify)(i)),(0,o.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.get=function(e){var t=this;this.initConnection_();var n=new o.Deferred,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise},t.prototype.listen=function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),(0,o.assert)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.assert)(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,s),this.connected_&&this.sendListen_(s)},t.prototype.sendGet_=function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};e.tag&&(a.q=r._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;t.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===e&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),e.onComplete&&e.onComplete(u,s))}))},t.warnOnListenWarnings_=function(e,t){if(e&&"object"===typeof e&&(0,o.contains)(e,"w")){var n=(0,o.safeGet)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();D("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||(0,o.isAdmin)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.refreshAppCheckToken=function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=(0,o.isValidFormat)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},t.prototype.tryAppCheck=function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))},t.prototype.unlisten=function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,o.assert)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},t.prototype.onDisconnectPut=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){this.initConnection_();var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+(0,o.stringify)(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):R("Unrecognized action received from server: "+(0,o.stringify)(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;(0,o.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))},t.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=He,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=He,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=He),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){return l(this,void 0,void 0,(function(){var e,n,r,i,a,s,u,l,h,d,p,v,m,g,y=this;return c(this,(function(c){switch(c.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+t.nextConnectionId_++,a=this.lastSessionId,s=!1,u=null,l=function(){u?u.close():(s=!0,r())},h=function(e){(0,o.assert)(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:l,sendRequest:h},d=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)])];case 2:return p=f.apply(void 0,[c.sent(),2]),v=p[0],m=p[1],s?k("getToken() completed but was canceled"):(k("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=m&&m.token,u=new ge(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,(function(e){D(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),a)),[3,4];case 3:return g=c.sent(),this.log_("Failed to get token: "+g),s||(this.repoInfo_.nodeAdmin&&D(g),l()),[3,4];case 4:return[2]}}))}))},t.prototype.interrupt=function(e){k("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){k("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,o.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=He,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map((function(e){return j(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new we(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){k("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onAppCheckRevoked_=function(e,t){k("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=h(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,h(a.values())),u=s.next();!u.done;u=s.next()){var l=u.value;this.sendListen_(l)}}catch(d){n={error:d}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(p){e={error:p}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)},t.prototype.sendConnectStats_=function(){var e={},t="js";(0,o.isNodeSdk)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+v.replace(/\./g,"-")]=1,(0,o.isMobileCordova)()?e["framework.cordova"]=1:(0,o.isReactNative)()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=_e.getInstance().currentlyOnline();return(0,o.isEmpty)(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(ye),ze=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),Ve=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new ze(L,e),r=new ze(L,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return ze.MIN},e}(),We=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return Fe},set:function(e){Fe=e},enumerable:!1,configurable:!0}),t.prototype.compare=function(e,t){return B(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw(0,o.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return ze.MIN},t.prototype.maxPost=function(){return new ze(O,Fe)},t.prototype.makePost=function(e,t){return(0,o.assert)("string"===typeof e,"KeyIndex indexValue must always be a string."),new ze(e,Fe)},t.prototype.toString=function(){return".key"},t}(Ve),qe=new We,Ke=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),Je=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Xe.EMPTY_NODE,this.right=null!=o?o:Xe.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return Xe.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Xe.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),Qe=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Je(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),Xe=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Je.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Je.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new Ke(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new Ke(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new Ke(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new Ke(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new Qe,e}();function Ye(e,t){return B(e.name,t.name)}function Ze(e,t){return B(e,t)}var $e,et,tt,nt=function(e){return"number"===typeof e?"number:"+z(e):"string:"+e},rt=function(e){if(e.isLeafNode()){var t=e.val();(0,o.assert)("string"===typeof t||"number"===typeof t||"object"===typeof t&&(0,o.contains)(t,".sv"),"Priority must be a string or number.")}else(0,o.assert)(e===Ue||e.isEmpty(),"priority of unexpected type.");(0,o.assert)(e===Ue||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},it=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,(0,o.assert)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),rt(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return $e},set:function(e){$e=e},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return Ie(t)?this:".priority"===Ee(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=Ee(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.assert)(".priority"!==r||1===Se(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ae(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+nt(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?z(this.value_):this.value_,this.lazyHash_=S(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:((0,o.assert)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return(0,o.assert)(i>=0,"Unknown leaf type: "+n),(0,o.assert)(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();var ot,at,st=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?B(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return ze.MIN},t.prototype.maxPost=function(){return new ze(O,new it("[PRIORITY-POST]",tt))},t.prototype.makePost=function(e,t){var n=et(e);return new ze(t,new it("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(Ve),ut=new st,lt=Math.log(2),ct=function(){function e(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/lt,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),ht=function(e,t,n,r){e.sort(t);var i=function t(r,i){var o,a,s=i-r;if(0===s)return null;if(1===s)return o=e[r],a=n?n(o):o,new Je(a,o.node,Je.BLACK,null,null);var u=parseInt(s/2,10)+r,l=t(r,u),c=t(u+1,i);return o=e[u],a=n?n(o):o,new Je(a,o.node,Je.BLACK,l,c)},o=function(t){for(var r=null,o=null,a=e.length,s=function(t,r){var o=a-t,s=a;a-=t;var l=i(o+1,s),c=e[o],h=n?n(c):c;u(new Je(h,c.node,r,null,l))},u=function(e){r?(r.left=e,r=e):(o=e,r=e)},l=0;l<t.count;++l){var c=t.nextBitIsOne(),h=Math.pow(2,t.count-(l+1));c?s(h,Je.BLACK):(s(h,Je.BLACK),s(h,Je.RED))}return o}(new ct(e.length));return new Xe(r||t,o)},ft={},dt=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return(0,o.assert)(ft&&ut,"ChildrenNode.ts has not been loaded"),ot=ot||new e({".priority":ft},{".priority":ut})},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=(0,o.safeGet)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Xe?t:null},e.prototype.hasIndex=function(e){return(0,o.contains)(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){(0,o.assert)(t!==qe,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,s=n.getIterator(ze.Wrap),l=s.getNext();l;)a=a||t.isDefinedOn(l.node),i.push(l),l=s.getNext();r=a?ht(i,t.getCompare()):ft;var c=t.toString(),h=u({},this.indexSet_);h[c]=t;var f=u({},this.indexes_);return f[c]=r,new e(f,h)},e.prototype.addToIndexes=function(t,n){var r=this;return new e((0,o.map)(this.indexes_,(function(e,i){var a=(0,o.safeGet)(r.indexSet_,i);if((0,o.assert)(a,"Missing index implementation for "+i),e===ft){if(a.isDefinedOn(t.node)){for(var s=[],u=n.getIterator(ze.Wrap),l=u.getNext();l;)l.name!==t.name&&s.push(l),l=u.getNext();return s.push(t),ht(s,a.getCompare())}return ft}var c=n.get(t.name),h=e;return c&&(h=h.remove(new ze(t.name,c))),h.insert(t,t.node)})),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e((0,o.map)(this.indexes_,(function(e){if(e===ft)return e;var r=n.get(t.name);return r?e.remove(new ze(t.name,r)):e})),this.indexSet_)},e}(),pt=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&rt(this.priorityNode_),this.children_.isEmpty()&&(0,o.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return at||(at=new e(new Xe(Ze),null,dt.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||at},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?at:t},e.prototype.getChild=function(e){var t=Ee(e);return null===t?this:this.getImmediateChild(t).getChild(Ae(e))},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if((0,o.assert)(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new ze(t,n),i=void 0,a=void 0;n.isEmpty()?(i=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),a=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?at:this.priorityNode_;return new e(i,s,a)},e.prototype.updateChild=function(e,t){var n=Ee(e);if(null===n)return t;(0,o.assert)(".priority"!==Ee(e)||1===Se(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Ae(e),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(ut,(function(a,s){n[a]=s.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!t&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+nt(this.getPriority().val())+":"),this.forEachChild(ut,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":S(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new ze(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new ze(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new ze(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,ze.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,ze.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===vt?-1:0},e.prototype.withIndex=function(t){if(t===qe||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===qe||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(ut),r=t.getIterator(ut),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===qe?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),vt=new(function(e){function t(){return e.call(this,new Xe(Ze),pt.EMPTY_NODE,dt.Default)||this}return s(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return pt.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(pt));Object.defineProperties(ze,{MIN:{value:new ze(L,pt.EMPTY_NODE)},MAX:{value:new ze(O,vt)}}),We.__EMPTY_NODE=pt.EMPTY_NODE,it.__childrenNodeConstructor=pt,Ue=vt,function(e){tt=e}(vt);function mt(e,t){if(void 0===t&&(t=null),null===e)return pt.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),(0,o.assert)(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new it(e,mt(t));if(e instanceof Array){var n=pt.EMPTY_NODE;return G(e,(function(t,r){if((0,o.contains)(e,t)&&"."!==t.substring(0,1)){var i=mt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(mt(t))}var r=[],i=!1;if(G(e,(function(e,t){if("."!==e.substring(0,1)){var n=mt(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new ze(e,n)))}})),0===r.length)return pt.EMPTY_NODE;var a=ht(r,Ye,(function(e){return e.name}),Ze);if(i){var s=ht(r,ut.getCompare());return new pt(a,mt(t),new dt({".priority":s},{".priority":ut}))}return new pt(a,mt(t),dt.Default)}!function(e){et=e}(mt);var gt=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,(0,o.assert)(!Ie(t)&&".priority"!==Ee(t),"Can't create PathIndex with empty path or .priority key"),n}return s(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?B(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=mt(e),r=pt.EMPTY_NODE.updateChild(this.indexPath_,n);return new ze(t,r)},t.prototype.maxPost=function(){var e=pt.EMPTY_NODE.updateChild(this.indexPath_,vt);return new ze(O,e)},t.prototype.toString=function(){return Ce(this.indexPath_,0).join("/")},t}(Ve),yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?B(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return ze.MIN},t.prototype.maxPost=function(){return ze.MAX},t.prototype.makePost=function(e,t){var n=mt(e);return new ze(t,n)},t.prototype.toString=function(){return".value"},t}(Ve),bt=new yt,_t="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",wt=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=_t.charAt(n%64),n=Math.floor(n/64);(0,o.assert)(0===n,"Cannot push at time == 0");var s=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)s+=_t.charAt(t[r]);return(0,o.assert)(20===s.length,"nextPushId: Length should be 20."),s}}(),xt=function(e){if("2147483647"===e)return"-";var t=K(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return O;var o=n[i],a=_t.charAt(_t.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},Et=function(e){if("-2147483648"===e)return L;var t=K(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=_t.charAt(_t.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function St(e){return{type:"value",snapshotNode:e}}function At(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Tt(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ct(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Mt=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,a){(0,o.assert)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(Tt(t,s)):(0,o.assert)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(At(t,n)):a.trackChildChange(Ct(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(ut,(function(e,r){t.hasChild(e)||n.trackChildChange(Tt(e,r))})),t.isLeafNode()||t.forEachChild(ut,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Ct(t,r,i))}else n.trackChildChange(At(t,r))}))),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?pt.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),kt=function(){function e(t){this.indexedFilter_=new Mt(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new ze(t,n))||(n=pt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=pt.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(pt.EMPTY_NODE);var i=this;return t.forEachChild(ut,(function(e,t){i.matches(new ze(e,t))||(r=r.updateImmediateChild(e,pt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),It=function(){function e(e){this.rangedFilter_=new kt(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new ze(t,n))||(n=pt.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=pt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=pt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(pt.EMPTY_NODE);var s=void 0,u=void 0,l=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var c=this.index_.getCompare();l=function(e,t){return c(t,e)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){a=i.getNext();!h&&l(s,a)<=0&&(h=!0),h&&o<this.limit_&&l(a,u)<=0?o++:r=r.updateImmediateChild(a.name,pt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(e,t){return s(t,e)}}else a=this.index_.getCompare();var u=e;(0,o.assert)(u.numChildren()===this.limit_,"");var l=new ze(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(u.hasChild(t)){for(var f=u.getImmediateChild(t),d=r.getChildAfterChild(this.index_,c,this.reverse_);null!=d&&(d.name===t||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:a(d,l);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(Ct(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Tt(t,f));var v=u.updateImmediateChild(t,pt.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(At(d.name,d.node)),v.updateImmediateChild(d.name,d.node)):v}return n.isEmpty()?e:h&&a(c,l)>=0?(null!=i&&(i.trackChildChange(Tt(c.name,c.node)),i.trackChildChange(At(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,pt.EMPTY_NODE)):e},e}(),Rt=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ut}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},e.prototype.getIndexStartValue=function(){return(0,o.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return(0,o.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:L},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return(0,o.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return(0,o.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:O},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return(0,o.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===ut},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();function Pt(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Dt(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Nt(e,t){var n=e.copy();return n.index_=t,n}function Lt(e){var t,n={};return e.isDefault()||(e.index_===ut?t="$priority":e.index_===bt?t="$value":e.index_===qe?t="$key":((0,o.assert)(e.index_ instanceof gt,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=(0,o.stringify)(t),e.startSet_&&(n.startAt=(0,o.stringify)(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+(0,o.stringify)(e.indexStartName_))),e.endSet_&&(n.endAt=(0,o.stringify)(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+(0,o.stringify)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function Ot(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==ut&&(t.i=e.index_.toString()),t}var Bt=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.repoInfo_=t,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=I("p:rest:"),o.listens_={},o}return s(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:((0,o.assert)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())},t.prototype.listen=function(e,n,r,i){var a=this,s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);var u=t.getListenId_(e,r),l={};this.listens_[u]=l;var c=Lt(e._queryParams);this.restRequest_(s+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(s,n,!1,r),(0,o.safeGet)(a.listens_,u)===l)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.get=function(e){var t=this,n=Lt(e._queryParams),r=e._path.toString(),i=new o.Deferred;return this.restRequest_(r+".json",n,(function(e,n){var o=n;404===e&&(o=null,e=null),null===e?(t.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;return void 0===t&&(t={}),t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=f(i,2),s=a[0],u=a[1];s&&s.accessToken&&(t.auth=s.accessToken),u&&u.token&&(t.ac=u.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+(0,o.querystring)(t);r.log_("Sending REST request for "+l);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(n&&4===c.readyState){r.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=(0,o.jsonEval)(c.responseText)}catch(t){D("Failed to parse JSON response for "+l+": "+c.responseText)}n(null,e)}else 401!==c.status&&404!==c.status&&D("Got unsuccessful REST response for "+l+" Status: "+c.status),n(c.status);n=null}},c.open("GET",l,!0),c.send()}))},t}(ye),Ft=function(){function e(){this.rootNode_=pt.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}();function Ut(){return{value:null,children:new Map}}function jt(e,t,n){if(Ie(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Ee(t);e.children.has(r)||e.children.set(r,Ut()),jt(e.children.get(r),t=Ae(t),n)}}function Ht(e,t){if(Ie(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(ut,(function(t,n){jt(e,new we(t),n)})),Ht(e,t)}if(e.children.size>0){var r=Ee(t);if(t=Ae(t),e.children.has(r))Ht(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function Gt(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Gt(r,new we(t.toString()+"/"+e),n)}))}var zt,Vt=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=u({},e);return this.last_&&G(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t},e}(),Wt=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Vt(e);var n=1e4+2e4*Math.random();Q(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;G(t,(function(t,i){i>0&&(0,o.contains)(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Q(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}();function qt(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(zt||(zt={}));var Kt,Jt=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=zt.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return e.prototype.operationForChild=function(t){if(Ie(this.path)){if(null!=this.affectedTree.value)return(0,o.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new we(t));return new e(xe(),n,this.revert)}return(0,o.assert)(Ee(this.path)===t,"operationForChild called for unrelated child."),new e(Ae(this.path),this.affectedTree,this.revert)},e}(),Qt=function(){function e(e,t){this.source=e,this.path=t,this.type=zt.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return Ie(this.path)?new e(this.source,xe()):new e(this.source,Ae(this.path))},e}(),Xt=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=zt.OVERWRITE}return e.prototype.operationForChild=function(t){return Ie(this.path)?new e(this.source,xe(),this.snap.getImmediateChild(t)):new e(this.source,Ae(this.path),this.snap)},e}(),Yt=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=zt.MERGE}return e.prototype.operationForChild=function(t){if(Ie(this.path)){var n=this.children.subtree(new we(t));return n.isEmpty()?null:n.value?new Xt(this.source,xe(),n.value):new e(this.source,xe(),n)}return(0,o.assert)(Ee(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Ae(this.path),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),Zt=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(Ie(e))return this.isFullyInitialized()&&!this.filtered_;var t=Ee(e);return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),$t=function(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()};function en(e,t,n,r,i,a){var s=r.filter((function(e){return e.type===n}));s.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw(0,o.assertionError)("Should only compare child_ events.");var r=new ze(t.childName,t.snapshotNode),i=new ze(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),s.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function tn(e,t){return{eventCache:e,serverCache:t}}function nn(e,t,n,r){return tn(new Zt(t,n,r),e.serverCache)}function rn(e,t,n,r){return tn(e.eventCache,new Zt(t,n,r))}function on(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function an(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var sn=function(){function e(e,t){void 0===t&&(Kt||(Kt=new Xe(F)),t=Kt),this.value=e,this.children=t}return e.fromObject=function(t){var n=new e(null);return G(t,(function(e,t){n=n.set(new we(e),t)})),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:xe(),value:this.value};if(Ie(e))return null;var n=Ee(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Ae(e),t);return null!=i?{path:ke(new we(n),i.path),value:i.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))},e.prototype.subtree=function(t){if(Ie(t))return this;var n=Ee(t),r=this.children.get(n);return null!==r?r.subtree(Ae(t)):new e(null)},e.prototype.set=function(t,n){if(Ie(t))return new e(n,this.children);var r=Ee(t),i=(this.children.get(r)||new e(null)).set(Ae(t),n),o=this.children.insert(r,i);return new e(this.value,o)},e.prototype.remove=function(t){if(Ie(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Ee(t),r=this.children.get(n);if(r){var i=r.remove(Ae(t)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new e(null):new e(this.value,o)}return this},e.prototype.get=function(e){if(Ie(e))return this.value;var t=Ee(e),n=this.children.get(t);return n?n.get(Ae(e)):null},e.prototype.setTree=function(t,n){if(Ie(t))return n;var r=Ee(t),i=(this.children.get(r)||new e(null)).setTree(Ae(t),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new e(this.value,o)},e.prototype.fold=function(e){return this.fold_(xe(),e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(ke(e,r),t)})),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,xe(),t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Ie(e))return null;var i=Ee(e),o=this.children.get(i);return o?o.findOnPath_(Ae(e),ke(t,i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,xe(),t)},e.prototype.foreachOnPath_=function(t,n,r){if(Ie(t))return this;this.value&&r(n,this.value);var i=Ee(t),o=this.children.get(i);return o?o.foreachOnPath_(Ae(t),ke(n,i),r):new e(null)},e.prototype.foreach=function(e){this.foreach_(xe(),e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(ke(e,n),t)})),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))},e}(),un=function(){function e(e){this.writeTree_=e}return e.empty=function(){return new e(new sn(null))},e}();function ln(e,t,n){if(Ie(t))return new un(new sn(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,a=Re(i,t);return o=o.updateChild(a,n),new un(e.writeTree_.set(i,o))}var s=new sn(n),u=e.writeTree_.setTree(t,s);return new un(u)}function cn(e,t,n){var r=e;return G(n,(function(e,n){r=ln(r,ke(t,e),n)})),r}function hn(e,t){if(Ie(t))return un.empty();var n=e.writeTree_.setTree(t,new sn(null));return new un(n)}function fn(e,t){return null!=dn(e,t)}function dn(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Re(n.path,t)):null}function pn(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ut,(function(e,n){t.push(new ze(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new ze(e,n.value))})),t}function vn(e,t){if(Ie(t))return e;var n=dn(e,t);return new un(null!=n?new sn(n):e.writeTree_.subtree(t))}function mn(e){return e.writeTree_.isEmpty()}function gn(e,t){return yn(xe(),e.writeTree_,t)}function yn(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?((0,o.assert)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=yn(ke(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(ke(e,".priority"),r)),n}function bn(e,t){return Pn(t,e)}function _n(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));(0,o.assert)(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,s=e.allWrites.length-1;i&&s>=0;){var u=e.allWrites[s];u.visible&&(s>=n&&wn(u,r.path)?i=!1:Ne(r.path,u.path)&&(a=!0)),s--}if(i){if(a)return function(e){e.visibleWrites=En(e.allWrites,xn,xe()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=hn(e.visibleWrites,r.path):G(r.children,(function(t){e.visibleWrites=hn(e.visibleWrites,ke(r.path,t))}));return!0}return!1}function wn(e,t){if(e.snap)return Ne(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Ne(ke(e.path,n),t))return!0;return!1}function xn(e){return e.visible}function En(e,t,n){for(var r=un.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var s=a.path,u=void 0;if(a.snap)Ne(n,s)?r=ln(r,u=Re(n,s),a.snap):Ne(s,n)&&(u=Re(s,n),r=ln(r,xe(),a.snap.getChild(u)));else{if(!a.children)throw(0,o.assertionError)("WriteRecord should have .snap or .children");if(Ne(n,s))r=cn(r,u=Re(n,s),a.children);else if(Ne(s,n))if(Ie(u=Re(s,n)))r=cn(r,xe(),a.children);else{var l=(0,o.safeGet)(a.children,Ee(u));if(l){var c=l.getChild(Ae(u));r=ln(r,xe(),c)}}}}}return r}function Sn(e,t,n,r,i){if(r||i){var o=vn(e.visibleWrites,t);if(!i&&mn(o))return n;if(i||null!=n||fn(o,xe())){return gn(En(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Ne(e.path,t)||Ne(t,e.path))}),t),n||pt.EMPTY_NODE)}return null}var a=dn(e.visibleWrites,t);if(null!=a)return a;var s=vn(e.visibleWrites,t);return mn(s)?n:null!=n||fn(s,xe())?gn(s,n||pt.EMPTY_NODE):null}function An(e,t,n,r){return Sn(e.writeTree,e.treePath,t,n,r)}function Tn(e,t){return function(e,t,n){var r=pt.EMPTY_NODE,i=dn(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ut,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var o=vn(e.visibleWrites,t);return n.forEachChild(ut,(function(e,t){var n=gn(vn(o,new we(e)),t);r=r.updateImmediateChild(e,n)})),pn(o).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return pn(vn(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Cn(e,t,n,r){return function(e,t,n,r,i){(0,o.assert)(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=ke(t,n);if(fn(e.visibleWrites,a))return null;var s=vn(e.visibleWrites,a);return mn(s)?i.getChild(n):gn(s,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Mn(e,t){return function(e,t){return dn(e.visibleWrites,t)}(e.writeTree,ke(e.treePath,t))}function kn(e,t,n,r,i,o){return function(e,t,n,r,i,o,a){var s,u=vn(e.visibleWrites,t),l=dn(u,xe());if(null!=l)s=l;else{if(null==n)return[];s=gn(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();d&&c.length<i;)0!==h(d,r)&&c.push(d),d=f.getNext();return c}(e.writeTree,e.treePath,t,n,r,i,o)}function In(e,t,n){return function(e,t,n,r){var i=ke(t,n),o=dn(e.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?gn(vn(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Rn(e,t){return Pn(ke(e.treePath,t),e.writeTree)}function Pn(e,t){return{treePath:e,writeTree:t}}var Dn=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;(0,o.assert)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,o.assert)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Ct(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Tt(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,At(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw(0,o.assertionError)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Ct(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),Nn=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),Ln=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Zt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return In(this.writes_,e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:an(this.viewCache_),i=kn(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]},e}();function On(e,t,n,r,i){var a,s,u=new Dn;if(n.type===zt.OVERWRITE){var l=n;l.source.fromUser?a=Un(e,t,l.path,l.snap,r,i,u):((0,o.assert)(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.serverCache.isFiltered()&&!Ie(l.path),a=Fn(e,t,l.path,l.snap,r,i,s,u))}else if(n.type===zt.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,o,a){var s=t;return r.foreach((function(r,u){var l=ke(n,r);jn(t,Ee(l))&&(s=Un(e,s,l,u,i,o,a))})),r.foreach((function(r,u){var l=ke(n,r);jn(t,Ee(l))||(s=Un(e,s,l,u,i,o,a))})),s}(e,t,c.path,c.children,r,i,u):((0,o.assert)(c.source.fromServer,"Unknown source."),s=c.source.tagged||t.serverCache.isFiltered(),a=Gn(e,t,c.path,c.children,r,i,s,u))}else if(n.type===zt.ACK_USER_WRITE){var h=n;a=h.revert?function(e,t,n,r,i,a){var s;if(null!=Mn(r,n))return t;var u=new Ln(r,t,i),l=t.eventCache.getNode(),c=void 0;if(Ie(n)||".priority"===Ee(n)){var h=void 0;if(t.serverCache.isFullyInitialized())h=An(r,an(t));else{var f=t.serverCache.getNode();(0,o.assert)(f instanceof pt,"serverChildren would be complete if leaf node"),h=Tn(r,f)}h=h,c=e.filter.updateFullNode(l,h,a)}else{var d=Ee(n),p=In(r,d,t.serverCache);null==p&&t.serverCache.isCompleteForChild(d)&&(p=l.getImmediateChild(d)),(c=null!=p?e.filter.updateChild(l,d,p,Ae(n),u,a):t.eventCache.getNode().hasChild(d)?e.filter.updateChild(l,d,pt.EMPTY_NODE,Ae(n),u,a):l).isEmpty()&&t.serverCache.isFullyInitialized()&&(s=An(r,an(t))).isLeafNode()&&(c=e.filter.updateFullNode(c,s,a))}return s=t.serverCache.isFullyInitialized()||null!=Mn(r,xe()),nn(t,c,s,e.filter.filtersNodes())}(e,t,h.path,r,i,u):function(e,t,n,r,i,o,a){if(null!=Mn(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(Ie(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Fn(e,t,n,u.getNode().getChild(n),i,o,s,a);if(Ie(n)){var l=new sn(null);return u.getNode().forEachChild(qe,(function(e,t){l=l.set(new we(e),t)})),Gn(e,t,n,l,i,o,s,a)}return t}var c=new sn(null);return r.foreach((function(e,t){var r=ke(n,e);u.isCompleteForPath(r)&&(c=c.set(e,u.getNode().getChild(r)))})),Gn(e,t,n,c,i,o,s,a)}(e,t,h.path,h.affectedTree,r,i,u)}else{if(n.type!==zt.LISTEN_COMPLETE)throw(0,o.assertionError)("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var o=t.serverCache,a=rn(t,o.getNode(),o.isFullyInitialized()||Ie(n),o.isFiltered());return Bn(e,a,n,r,Nn,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=on(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(St(on(t)))}}(t,a,f),{viewCache:a,changes:f}}function Bn(e,t,n,r,i,a){var s=t.eventCache;if(null!=Mn(r,n))return t;var u=void 0,l=void 0;if(Ie(n))if((0,o.assert)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=an(t),h=Tn(r,c instanceof pt?c:pt.EMPTY_NODE);u=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=An(r,an(t));u=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var d=Ee(n);if(".priority"===d){(0,o.assert)(1===Se(n),"Can't have a priority with additional path components");var p=s.getNode(),v=Cn(r,n,p,l=t.serverCache.getNode());u=null!=v?e.filter.updatePriority(p,v):s.getNode()}else{var m=Ae(n),g=void 0;if(s.isCompleteForChild(d)){l=t.serverCache.getNode();var y=Cn(r,n,s.getNode(),l);g=null!=y?s.getNode().getImmediateChild(d).updateChild(m,y):s.getNode().getImmediateChild(d)}else g=In(r,d,t.serverCache);u=null!=g?e.filter.updateChild(s.getNode(),d,g,m,i,a):s.getNode()}}return nn(t,u,s.isFullyInitialized()||Ie(n),e.filter.filtersNodes())}function Fn(e,t,n,r,i,o,a,s){var u,l=t.serverCache,c=a?e.filter:e.filter.getIndexedFilter();if(Ie(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){var h=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),h,null)}else{var f=Ee(n);if(!l.isCompleteForPath(n)&&Se(n)>1)return t;var d=Ae(n),p=l.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?c.updatePriority(l.getNode(),p):c.updateChild(l.getNode(),f,p,d,Nn,null)}var v=rn(t,u,l.isFullyInitialized()||Ie(n),c.filtersNodes());return Bn(e,v,n,i,new Ln(i,v,o),s)}function Un(e,t,n,r,i,o,a){var s,u,l=t.eventCache,c=new Ln(i,t,o);if(Ie(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,a),s=nn(t,u,!0,e.filter.filtersNodes());else{var h=Ee(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=nn(t,u,l.isFullyInitialized(),l.isFiltered());else{var f=Ae(n),d=l.getNode().getImmediateChild(h),p=void 0;if(Ie(f))p=r;else{var v=c.getCompleteChild(h);p=null!=v?".priority"===Te(f)&&v.getChild(Me(f)).isEmpty()?v:v.updateChild(f,r):pt.EMPTY_NODE}if(d.equals(p))s=t;else s=nn(t,e.filter.updateChild(l.getNode(),h,p,f,c,a),l.isFullyInitialized(),e.filter.filtersNodes())}}return s}function jn(e,t){return e.eventCache.isCompleteForChild(t)}function Hn(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Gn(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,l=t;u=Ie(n)?r:new sn(null).setTree(n,r);var c=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(c.hasChild(n)){var u=Hn(0,t.serverCache.getNode().getImmediateChild(n),r);l=Fn(e,l,new we(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!c.hasChild(n)&&!u){var h=Hn(0,t.serverCache.getNode().getImmediateChild(n),r);l=Fn(e,l,new we(n),h,i,o,a,s)}})),l}var zn,Vn=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new Mt(r.getIndex()),o=(n=r).loadsAllData()?new Mt(n.getIndex()):n.hasLimit()?new It(n):new kt(n);this.processor_=function(e){return{filter:e}}(o);var a=t.serverCache,s=t.eventCache,u=i.updateFullNode(pt.EMPTY_NODE,a.getNode(),null),l=o.updateFullNode(pt.EMPTY_NODE,s.getNode(),null),c=new Zt(u,a.isFullyInitialized(),i.filtersNodes()),h=new Zt(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=tn(h,c),this.eventGenerator_=new $t(this.query_)}return Object.defineProperty(e.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),e}();function Wn(e,t){var n=an(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Ie(t)&&!n.getImmediateChild(Ee(t)).isEmpty())?n.getChild(t):null}function qn(e){return 0===e.eventRegistrations_.length}function Kn(e,t,n){var r=[];if(n){(0,o.assert)(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],s=0;s<e.eventRegistrations_.length;++s){var u=e.eventRegistrations_[s];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(s+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function Jn(e,t,n,r){t.type===zt.MERGE&&null!==t.source.queryId&&((0,o.assert)(an(e.viewCache_),"We should always have a full cache before handling merges"),(0,o.assert)(on(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,s=e.viewCache_,u=On(e.processor_,s,t,n,r);return i=e.processor_,a=u.viewCache,(0,o.assert)(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,o.assert)(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),(0,o.assert)(u.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,Qn(e,u.changes,u.viewCache.eventCache.getNode(),null)}function Qn(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],o=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),en(e,i,"child_removed",t,r,n),en(e,i,"child_added",t,r,n),en(e,i,"child_moved",o,r,n),en(e,i,"child_changed",t,r,n),en(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Xn,Yn=function(){this.views=new Map};function Zn(e,t,n,r){var i,a,s=t.source.queryId;if(null!==s){var u=e.views.get(s);return(0,o.assert)(null!=u,"SyncTree gave us an op for an invalid query."),Jn(u,t,n,r)}var l=[];try{for(var c=h(e.views.values()),f=c.next();!f.done;f=c.next()){u=f.value;l=l.concat(Jn(u,t,n,r))}}catch(d){i={error:d}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return l}function $n(e,t,n,r,i){var o=t._queryIdentifier,a=e.views.get(o);if(!a){var s=An(n,i?r:null),u=!1;s?u=!0:r instanceof pt?(s=Tn(n,r),u=!1):(s=pt.EMPTY_NODE,u=!1);var l=tn(new Zt(s,u,!1),new Zt(r,i,!1));return new Vn(t,l)}return a}function er(e,t,n,r,i,o){var a=$n(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ut,(function(e,t){r.push(At(e,t))})),n.isFullyInitialized()&&r.push(St(n.getNode())),Qn(e,r,n.getNode(),t)}(a,n)}function tr(e,t,n,r){var i,a,s=t._queryIdentifier,u=[],l=[],c=ar(e);if("default"===s)try{for(var d=h(e.views.entries()),p=d.next();!p.done;p=d.next()){var v=f(p.value,2),m=v[0],g=v[1];l=l.concat(Kn(g,n,r)),qn(g)&&(e.views.delete(m),g.query._queryParams.loadsAllData()||u.push(g.query))}}catch(y){i={error:y}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}else(g=e.views.get(s))&&(l=l.concat(Kn(g,n,r)),qn(g)&&(e.views.delete(s),g.query._queryParams.loadsAllData()||u.push(g.query)));return c&&!ar(e)&&u.push(new((0,o.assert)(zn,"Reference.ts has not been loaded"),zn)(t._repo,t._path)),{removed:u,events:l}}function nr(e){var t,n,r=[];try{for(var i=h(e.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function rr(e,t){var n,r,i=null;try{for(var o=h(e.views.values()),a=o.next();!a.done;a=o.next()){var s=a.value;i=i||Wn(s,t)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function ir(e,t){if(t._queryParams.loadsAllData())return sr(e);var n=t._queryIdentifier;return e.views.get(n)}function or(e,t){return null!=ir(e,t)}function ar(e){return null!=sr(e)}function sr(e){var t,n;try{for(var r=h(e.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null}var ur=1,lr=function(e){this.listenProvider_=e,this.syncPointTree_=new sn(null),this.pendingWriteTree_={visibleWrites:un.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function cr(e,t,n,r,i){return function(e,t,n,r,i){(0,o.assert)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=ln(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?yr(e,new Xt({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function hr(e,t,n,r){!function(e,t,n,r){(0,o.assert)(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=cn(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=sn.fromObject(n);return yr(e,new Yt({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function fr(e,t,n){void 0===n&&(n=!1);var r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(_n(e.pendingWriteTree_,t)){var i=new sn(null);return null!=r.snap?i=i.set(xe(),!0):G(r.children,(function(e){i=i.set(new we(e),!0)})),yr(e,new Jt(r.path,i,n))}return[]}function dr(e,t,n){return yr(e,new Xt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function pr(e,t,n,r){var i=t._path,o=e.syncPointTree_.get(i),a=[];if(o&&("default"===t._queryIdentifier||or(o,t))){var s=tr(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var u=s.removed;a=s.events;var l=-1!==u.findIndex((function(e){return e._queryParams.loadsAllData()})),c=e.syncPointTree_.findOnPath(i,(function(e,t){return ar(t)}));if(l&&!c){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&ar(t))return[sr(t)];var r=[];return t&&(r=nr(t)),G(n,(function(e,t){r=r.concat(t)})),r}))}(h),d=0;d<f.length;++d){var p=f[d],v=p.query,m=wr(e,p);e.listenProvider_.startListening(Cr(v),xr(e,v),m.hashFn,m.onComplete)}}if(!c&&u.length>0&&!r)if(l){e.listenProvider_.stopListening(Cr(t),null)}else u.forEach((function(t){var n=e.queryToTagMap.get(Er(t));e.listenProvider_.stopListening(Cr(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=Er(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}(e,u)}return a}function vr(e,t,n){var r=t._path,i=null,a=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=Re(e,r);i=i||rr(t,n),a=a||ar(t)}));var s,u=e.syncPointTree_.get(r);(u?(a=a||ar(u),i=i||rr(u,xe())):(u=new Yn,e.syncPointTree_=e.syncPointTree_.set(r,u)),null!=i)?s=!0:(s=!1,i=pt.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=rr(t,xe());n&&(i=i.updateImmediateChild(e,n))})));var l=or(u,t);if(!l&&!t._queryParams.loadsAllData()){var c=Er(t);(0,o.assert)(!e.queryToTagMap.has(c),"View does not exist, but we have a tag");var h=ur++;e.queryToTagMap.set(c,h),e.tagToQueryMap.set(h,c)}var f=er(u,t,n,bn(e.pendingWriteTree_,r),i,s);if(!l&&!a){var d=ir(u,t);f=f.concat(function(e,t,n){var r=t._path,i=xr(e,t),a=wr(e,n),s=e.listenProvider_.startListening(Cr(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)(0,o.assert)(!ar(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var l=u.fold((function(e,t,n){if(!Ie(e)&&t&&ar(t))return[sr(t).query];var r=[];return t&&(r=r.concat(nr(t).map((function(e){return e.query})))),G(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<l.length;++c){var h=l[c];e.listenProvider_.stopListening(Cr(h),xr(e,h))}return s}(e,t,d))}return f}function mr(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=rr(n,Re(e,t));if(r)return r}));return Sn(r,t,i,n,!0)}function gr(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=Re(e,n);r=r||rr(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||rr(i,xe()):(i=new Yn,e.syncPointTree_=e.syncPointTree_.set(n,i));var o=null!=r,a=o?new Zt(r,!0,!1):null;return function(e){return on(e.viewCache_)}($n(i,t,bn(e.pendingWriteTree_,t._path),o?a.getNode():pt.EMPTY_NODE,o))}function yr(e,t){return br(t,e.syncPointTree_,null,bn(e.pendingWriteTree_,xe()))}function br(e,t,n,r){if(Ie(e.path))return _r(e,t,n,r);var i=t.get(xe());null==n&&null!=i&&(n=rr(i,xe()));var o=[],a=Ee(e.path),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var l=n?n.getImmediateChild(a):null,c=Rn(r,a);o=o.concat(br(s,u,l,c))}return i&&(o=o.concat(Zn(i,e,r,n))),o}function _r(e,t,n,r){var i=t.get(xe());null==n&&null!=i&&(n=rr(i,xe()));var o=[];return t.children.inorderTraversal((function(t,i){var a=n?n.getImmediateChild(t):null,s=Rn(r,t),u=e.operationForChild(t);u&&(o=o.concat(_r(u,i,a,s)))})),i&&(o=o.concat(Zn(i,e,r,n))),o}function wr(e,t){var n=t.query,r=xr(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||pt.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=Sr(e,n);if(r){var i=Ar(r),o=i.path,a=i.queryId,s=Re(o,t);return Tr(e,o,new Qt(qt(a),s))}return[]}(e,n._path,r):function(e,t){return yr(e,new Qt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return pr(e,n,null,i)}}}function xr(e,t){var n=Er(t);return e.queryToTagMap.get(n)}function Er(e){return e._path.toString()+"$"+e._queryIdentifier}function Sr(e,t){return e.tagToQueryMap.get(t)}function Ar(e){var t=e.indexOf("$");return(0,o.assert)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new we(e.substr(0,t))}}function Tr(e,t,n){var r=e.syncPointTree_.get(t);return(0,o.assert)(r,"Missing sync point for query tag that we're tracking"),Zn(r,n,bn(e.pendingWriteTree_,t),null)}function Cr(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new((0,o.assert)(Xn,"Reference.ts has not been loaded"),Xn)(e._repo,e._path):e}var Mr=function(){function e(e){this.node_=e}return e.prototype.getImmediateChild=function(t){return new e(this.node_.getImmediateChild(t))},e.prototype.node=function(){return this.node_},e}(),kr=function(){function e(e,t){this.syncTree_=e,this.path_=t}return e.prototype.getImmediateChild=function(t){var n=ke(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return mr(this.syncTree_,this.path_)},e}(),Ir=function(e,t,n){return e&&"object"===typeof e?((0,o.assert)(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Rr(e[".sv"],t,n):"object"===typeof e[".sv"]?Pr(e[".sv"],t):void(0,o.assert)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Rr=function(e,t,n){if("timestamp"===e)return n.timestamp;(0,o.assert)(!1,"Unexpected server value: "+e)},Pr=function(e,t,n){e.hasOwnProperty("increment")||(0,o.assert)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&(0,o.assert)(!1,"Unexpected increment value: "+r);var i=t.node();if((0,o.assert)(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},Dr=function(e,t,n,r){return Lr(t,new kr(n,e),r)},Nr=function(e,t,n){return Lr(e,new Mr(t),n)};function Lr(e,t,n){var r,i=e.getPriority().val(),o=Ir(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var a=e,s=Ir(a.getValue(),t,n);return s!==a.getValue()||o!==a.getPriority().val()?new it(s,mt(o)):e}var u=e;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new it(o))),u.forEachChild(ut,(function(e,i){var o=Lr(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))})),r}var Or=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n={children:{},childCount:0}),this.name=e,this.parent=t,this.node=n};function Br(e,t){for(var n=t instanceof we?t:new we(t),r=e,i=Ee(n);null!==i;){var a=(0,o.safeGet)(r.node.children,i)||{children:{},childCount:0};r=new Or(i,r,a),i=Ee(n=Ae(n))}return r}function Fr(e){return e.node.value}function Ur(e,t){e.node.value=t,Vr(e)}function jr(e){return e.node.childCount>0}function Hr(e,t){G(e.node.children,(function(n,r){t(new Or(n,e,r))}))}function Gr(e,t,n,r){n&&!r&&t(e),Hr(e,(function(e){Gr(e,t,!0,r)})),n&&r&&t(e)}function zr(e){return new we(null===e.parent?e.name:zr(e.parent)+"/"+e.name)}function Vr(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Fr(e)&&!jr(e)}(n),i=(0,o.contains)(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Vr(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Vr(e))}(e.parent,e.name,e)}var Wr=/[\[\].#$\/\u0000-\u001F\u007F]/,qr=/[\[\].#$\u0000-\u001F\u007F]/,Kr=10485760,Jr=function(e){return"string"===typeof e&&0!==e.length&&!Wr.test(e)},Qr=function(e){return"string"===typeof e&&0!==e.length&&!qr.test(e)},Xr=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!N(e)||e&&"object"===typeof e&&(0,o.contains)(e,".sv")},Yr=function(e,t,n,r){r&&void 0===t||Zr((0,o.errorPrefix)(e,"value"),t,n)},Zr=function e(t,n,r){var i=r instanceof we?new Le(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Be(i));if("function"===typeof n)throw new Error(t+"contains a function "+Be(i)+" with contents = "+n.toString());if(N(n))throw new Error(t+"contains "+n.toString()+" "+Be(i));if("string"===typeof n&&n.length>Kr/3&&(0,o.stringLength)(n)>Kr)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+Be(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,s=!1;if(G(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(s=!0,!Jr(n)))throw new Error(t+" contains an invalid key ("+n+") "+Be(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,o.stringLength)(t),Oe(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=(0,o.stringLength)(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&s)throw new Error(t+' contains ".value" child '+Be(i)+" in addition to actual children.")}},$r=function(e,t,n,r){if(!r||void 0!==t){var i=(0,o.errorPrefix)(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];G(t,(function(e,t){var r=new we(e);if(Zr(i,t,ke(n,r)),".priority"===Te(r)&&!Xr(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=Ce(r=t[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Jr(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Pe);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&Ne(a,r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,a)}},ei=function(e,t,n){if(!n||void 0!==t){if(N(t))throw new Error((0,o.errorPrefix)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Xr(t))throw new Error((0,o.errorPrefix)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ti=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.errorPrefix)(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ni=function(e,t,n,r){if((!r||void 0!==n)&&!Jr(n))throw new Error((0,o.errorPrefix)(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ri=function(e,t,n,r){if((!r||void 0!==n)&&!Qr(n))throw new Error((0,o.errorPrefix)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ii=function(e,t){if(".info"===Ee(t))throw new Error(e+" failed = Can't modify data under /.info/")},oi=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Jr(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Qr(e)}(n))throw new Error((0,o.errorPrefix)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ai=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error((0,o.errorPrefix)(e,t)+"must be a boolean.")},si=function(){this.eventLists_=[],this.recursionDepth_=0};function ui(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i.getPath();null===n||De(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function li(e,t,n){ui(e,n),hi(e,(function(e){return De(e,t)}))}function ci(e,t,n){ui(e,n),hi(e,(function(e){return Ne(e,t)||Ne(t,e)}))}function hi(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(fi(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function fi(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();T&&k("event: "+n.toString()),J(r)}}}var di="repo_interrupt",pi=function(){function e(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new si,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ut(),this.transactionQueueTree_=new Or,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e}();function vi(e,t,n){if(e.stats_=ue(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Bt(e.repoInfo_,(function(t,n,r,i){yi(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return bi(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.stringify)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Ge(e.repoInfo_,t,(function(t,n,r,i){yi(e,t,n,r,i)}),(function(t){bi(e,t)}),(function(t){!function(e,t){G(t,(function(t,n){_i(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return se[n]||(se[n]=t()),se[n]}(e.repoInfo_,(function(){return new Wt(e.stats_,e.server_)})),e.infoData_=new Ft,e.infoSyncTree_=new lr({startListening:function(t,n,r,i){var o=[],a=e.infoData_.getNode(t._path);return a.isEmpty()||(o=dr(e.infoSyncTree_,t._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),_i(e,"connected",!1),e.serverSyncTree_=new lr({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var o=i(n,r);ci(e.eventQueue_,t._path,o)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function mi(e){var t=e.infoData_.getNode(new we(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function gi(e){return(t=(t={timestamp:mi(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function yi(e,t,n,r,i){e.dataUpdateCount++;var a=new we(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var s=[];if(i)if(r){var u=(0,o.map)(n,(function(e){return mt(e)}));s=function(e,t,n,r){var i=Sr(e,r);if(i){var o=Ar(i),a=o.path,s=o.queryId,u=Re(a,t),l=sn.fromObject(n);return Tr(e,a,new Yt(qt(s),u,l))}return[]}(e.serverSyncTree_,a,u,i)}else{var l=mt(n);s=function(e,t,n,r){var i=Sr(e,r);if(null!=i){var o=Ar(i),a=o.path,s=o.queryId,u=Re(a,t);return Tr(e,a,new Xt(qt(s),u,n))}return[]}(e.serverSyncTree_,a,l,i)}else if(r){var c=(0,o.map)(n,(function(e){return mt(e)}));s=function(e,t,n){var r=sn.fromObject(n);return yr(e,new Yt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var h=mt(n);s=dr(e.serverSyncTree_,a,h)}var f=a;s.length>0&&(f=Ri(e,a)),ci(e.eventQueue_,f,s)}function bi(e,t){_i(e,"connected",t),!1===t&&function(e){Ci(e,"onDisconnectEvents");var t=gi(e),n=Ut();Gt(e.onDisconnect_,xe(),(function(r,i){var o=Dr(r,i,e.serverSyncTree_,t);jt(n,r,o)}));var r=[];Gt(n,xe(),(function(t,n){r=r.concat(dr(e.serverSyncTree_,t,n));var i=Oi(e,t);Ri(e,i)})),e.onDisconnect_=Ut(),ci(e.eventQueue_,xe(),r)}(e)}function _i(e,t,n){var r=new we("/.info/"+t),i=mt(n);e.infoData_.updateSnapshot(r,i);var o=dr(e.infoSyncTree_,r,i);ci(e.eventQueue_,r,o)}function wi(e){return e.nextWriteId_++}function xi(e,t,n,r,i){Ci(e,"set",{path:t.toString(),value:n,priority:r});var o=gi(e),a=mt(n,r),s=mr(e.serverSyncTree_,t),u=Nr(a,s,o),l=wi(e),c=cr(e.serverSyncTree_,t,u,l,!0);ui(e.eventQueue_,c),e.server_.put(t.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||D("set at "+t+" failed: "+n);var a=fr(e.serverSyncTree_,l,!o);ci(e.eventQueue_,t,a),Mi(e,i,n,r)}));var h=Oi(e,t);Ri(e,h),ci(e.eventQueue_,h,[])}function Ei(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&Ht(e.onDisconnect_,t),Mi(e,n,r,i)}))}function Si(e,t,n,r){var i=mt(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,o){"ok"===n&&jt(e.onDisconnect_,t,i),Mi(e,r,n,o)}))}function Ai(e,t,n){var r;r=".info"===Ee(t._path)?pr(e.infoSyncTree_,t,n):pr(e.serverSyncTree_,t,n),li(e.eventQueue_,t._path,r)}function Ti(e){e.persistentConnection_&&e.persistentConnection_.interrupt(di)}function Ci(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),k.apply(void 0,d([r],f(t)))}function Mi(e,t,n,r){t&&J((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var o=new Error(i);o.code=e,t(o)}}))}function ki(e,t,n){return mr(e.serverSyncTree_,t,n)||pt.EMPTY_NODE}function Ii(e,t){if(void 0===t&&(t=e.transactionQueueTree_),t||Li(e,t),Fr(t)){var n=Di(e,t);(0,o.assert)(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=ki(e,t,r),a=i,s=i.hash(),u=0;u<n.length;u++){var l=n[u];(0,o.assert)(0===l.status,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;var c=Re(t,l.path);a=a.updateChild(c,l.currentOutputSnapshotRaw)}var h=a.val(!0),f=t;e.server_.put(f.toString(),h,(function(r){Ci(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(t){n[t].status=2,i=i.concat(fr(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&o.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)a(s);Li(e,Br(e.transactionQueueTree_,t)),Ii(e,e.transactionQueueTree_),ci(e.eventQueue_,t,i);for(s=0;s<o.length;s++)J(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)3===n[s].status?n[s].status=4:n[s].status=0;else{D("transaction at "+f.toString()+" failed: "+r);for(s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r}Ri(e,t)}}),s)}(e,zr(t),n)}else jr(t)&&Hr(t,(function(t){Ii(e,t)}))}function Ri(e,t){var n=Pi(e,t),r=zr(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})).map((function(e){return e.currentWriteId})),s=function(s){var u,l,c=t[s],h=Re(n,c.path),f=!1;if((0,o.assert)(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)f=!0,u=c.abortReason,i=i.concat(fr(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)f=!0,u="maxretry",i=i.concat(fr(e.serverSyncTree_,c.currentWriteId,!0));else{var d=ki(e,c.path,a);c.currentInputSnapshot=d;var p=t[s].update(d.val());if(void 0!==p){Zr("transaction failed: Data returned ",p,c.path);var v=mt(p);"object"===typeof p&&null!=p&&(0,o.contains)(p,".priority")||(v=v.updatePriority(d.getPriority()));var m=c.currentWriteId,g=gi(e),y=Nr(v,d,g);c.currentOutputSnapshotRaw=v,c.currentOutputSnapshotResolved=y,c.currentWriteId=wi(e),a.splice(a.indexOf(m),1),i=(i=i.concat(cr(e.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(fr(e.serverSyncTree_,m,!0))}else f=!0,u="nodata",i=i.concat(fr(e.serverSyncTree_,c.currentWriteId,!0))}ci(e.eventQueue_,n,i),i=[],f&&(t[s].status=2,l=t[s].unwatcher,setTimeout(l,Math.floor(0)),t[s].onComplete&&("nodata"===u?r.push((function(){return t[s].onComplete(null,!1,t[s].currentInputSnapshot)})):r.push((function(){return t[s].onComplete(new Error(u),!1,null)}))))},u=0;u<t.length;u++)s(u);Li(e,e.transactionQueueTree_);for(u=0;u<r.length;u++)J(r[u]);Ii(e,e.transactionQueueTree_)}(e,Di(e,n),r),r}function Pi(e,t){var n,r=e.transactionQueueTree_;for(n=Ee(t);null!==n&&void 0===Fr(r);)r=Br(r,n),n=Ee(t=Ae(t));return r}function Di(e,t){var n=[];return Ni(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Ni(e,t,n){var r=Fr(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Hr(t,(function(t){Ni(e,t,n)}))}function Li(e,t){var n=Fr(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Ur(t,n.length>0?n:void 0)}Hr(t,(function(t){Li(e,t)}))}function Oi(e,t){var n=zr(Pi(e,t)),r=Br(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Bi(e,t)})),Bi(e,r),Gr(r,(function(t){Bi(e,t)})),n}function Bi(e,t){var n=Fr(t);if(n){for(var r=[],i=[],a=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?((0,o.assert)(a===s-1,"All SENT items should be at beginning of queue."),a=s,n[s].status=3,n[s].abortReason="set"):((0,o.assert)(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(fr(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Ur(t,void 0):n.length=a+1,ci(e.eventQueue_,zr(t),i);for(s=0;s<r.length;s++)J(r[s])}}var Fi=function(e,t){var n=Ui(e),r=n.namespace;"firebase.com"===n.domain&&P(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||P("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&D("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new re(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new we(n.pathString)}},Ui=function(e){var t="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"===typeof e){var l=e.indexOf("//");l>=0&&(s=e.substring(0,l-1),e=e.substring(l+2));var c=e.indexOf("/");-1===c&&(c=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(c,f)),c<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}t+="/"+i}return t}(e.substring(c,f)));var d=function(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var i=h(e.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):D("Invalid query segment '"+a+"' in query '"+e+"'")}}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,f)));(l=t.indexOf(":"))>=0?(a="https"===s||"wss"===s,u=parseInt(t.substring(l+1),10)):l=t.length;var p=t.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var v=t.indexOf(".");r=t.substring(0,v).toLowerCase(),n=t.substring(v+1),o=r}"ns"in d&&(o=d.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},ji=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.stringify)(this.snapshot.exportVal())},e}(),Hi=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),Gi=function(){function e(e,t){this.snapshotCallback=e,this.cancelCallback=t}return e.prototype.onValue=function(e,t){this.snapshotCallback.call(null,e,t)},e.prototype.onCancel=function(e){return(0,o.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)},Object.defineProperty(e.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),e.prototype.matches=function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context},e}(),zi=function(){function e(e,t){this._repo=e,this._path=t}return e.prototype.cancel=function(){var e=new o.Deferred;return Ei(this._repo,this._path,e.wrapCallback((function(){}))),e.promise},e.prototype.remove=function(){ii("OnDisconnect.remove",this._path);var e=new o.Deferred;return Si(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise},e.prototype.set=function(e){ii("OnDisconnect.set",this._path),Yr("OnDisconnect.set",e,this._path,!1);var t=new o.Deferred;return Si(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise},e.prototype.setWithPriority=function(e,t){ii("OnDisconnect.setWithPriority",this._path),Yr("OnDisconnect.setWithPriority",e,this._path,!1),ei("OnDisconnect.setWithPriority",t,!1);var n=new o.Deferred;return function(e,t,n,r,i){var o=mt(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),(function(n,r){"ok"===n&&jt(e.onDisconnect_,t,o),Mi(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise},e.prototype.update=function(e){ii("OnDisconnect.update",this._path),$r("OnDisconnect.update",e,this._path,!1);var t=new o.Deferred;return function(e,t,n,r){if((0,o.isEmpty)(n))return k("onDisconnect().update() called with empty data.  Don't do anything."),void Mi(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,o){"ok"===i&&G(n,(function(n,r){var i=mt(r);jt(e.onDisconnect_,ke(t,n),i)})),Mi(0,r,i,o)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise},e}(),Vi=function(){function e(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(e.prototype,"key",{get:function(){return Ie(this._path)?null:Te(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Ji(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryIdentifier",{get:function(){var e=Ot(this._queryParams),t=j(e);return"{}"===t?"default":t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryObject",{get:function(){return Ot(this._queryParams)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!((t=(0,o.getModularInstance)(t))instanceof e))return!1;var n=this._repo===t._repo,r=De(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i},e.prototype.toJSON=function(){return this.toString()},e.prototype.toString=function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)},e}();function Wi(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function qi(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===qe){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==L)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==O)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===ut){if(null!=t&&!Xr(t)||null!=n&&!Xr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.assert)(e.getIndex()instanceof gt||e.getIndex()===bt,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ki(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ji=function(e){function t(t,n){return e.call(this,t,n,new Rt,!1)||this}return s(t,e),Object.defineProperty(t.prototype,"parent",{get:function(){var e=Me(this._path);return null===e?null:new t(this._repo,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e},enumerable:!1,configurable:!0}),t}(Vi),Qi=function(){function e(e,t,n){this._node=e,this.ref=t,this._index=n}return Object.defineProperty(e.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),e.prototype.child=function(t){var n=new we(t),r=Zi(this.ref,t);return new e(this._node.getChild(n),r,ut)},e.prototype.exists=function(){return!this._node.isEmpty()},e.prototype.exportVal=function(){return this._node.val(!0)},e.prototype.forEach=function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,Zi(n.ref,r),ut))}))},e.prototype.hasChild=function(e){var t=new we(e);return!this._node.getChild(t).isEmpty()},e.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},e.prototype.toJSON=function(){return this.exportVal()},e.prototype.val=function(){return this._node.val()},e}();function Xi(e,t){return(e=(0,o.getModularInstance)(e))._checkNotDeleted("ref"),void 0!==t?Zi(e._root,t):e._root}function Yi(e,t){(e=(0,o.getModularInstance)(e))._checkNotDeleted("refFromURL");var n=Fi(t,e._repo.repoInfo_.nodeAdmin);oi("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||P("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),Xi(e,n.path.toString())}function Zi(e,t){var n,r,i,a;return null===Ee((e=(0,o.getModularInstance)(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),ri(n,r,i,a)):ri("child","path",t,!1),new Ji(e._repo,ke(e._path,t))}function $i(e,t){e=(0,o.getModularInstance)(e),ii("push",e._path),Yr("push",t,e._path,!0);var n,r=mi(e._repo),i=wt(r),a=Zi(e,i),s=Zi(e,i);return n=null!=t?to(s,t).then((function(){return s})):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function eo(e){return ii("remove",e._path),to(e,null)}function to(e,t){e=(0,o.getModularInstance)(e),ii("set",e._path),Yr("set",t,e._path,!1);var n=new o.Deferred;return xi(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function no(e,t){e=(0,o.getModularInstance)(e),ii("setPriority",e._path),ei("setPriority",t,!1);var n=new o.Deferred;return xi(e._repo,ke(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function ro(e,t,n){if(ii("setWithPriority",e._path),Yr("setWithPriority",t,e._path,!1),ei("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new o.Deferred;return xi(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function io(e,t){$r("update",t,e._path,!1);var n=new o.Deferred;return function(e,t,n,r){Ci(e,"update",{path:t.toString(),value:n});var i=!0,o=gi(e),a={};if(G(n,(function(n,r){i=!1,a[n]=Dr(ke(t,n),mt(r),e.serverSyncTree_,o)})),i)k("update() called with empty data.  Don't do anything."),Mi(0,r,"ok",void 0);else{var s=wi(e),u=hr(e.serverSyncTree_,t,a,s);ui(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var o="ok"===n;o||D("update at "+t+" failed: "+n);var a=fr(e.serverSyncTree_,s,!o),u=a.length>0?Ri(e,t):t;ci(e.eventQueue_,u,a),Mi(0,r,n,i)})),G(n,(function(n){var r=Oi(e,ke(t,n));Ri(e,r)})),ci(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function oo(e){return function(e,t){var n=gr(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=mt(n).withIndex(t._queryParams.getIndex()),i=dr(e.serverSyncTree_,t._path,r);return li(e.eventQueue_,t._path,i),Promise.resolve(r)}),(function(n){return Ci(e,"get for query "+(0,o.stringify)(t)+" failed: "+n),Promise.reject(new Error(n))}))}((e=(0,o.getModularInstance)(e))._repo,e).then((function(t){return new Qi(t,new Ji(e._repo,e._path),e._queryParams.getIndex())}))}var ao=function(){function e(e){this.callbackContext=e}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t._queryParams.getIndex();return new ji("value",this,new Qi(e.snapshotNode,new Ji(t._repo,t._path),n))},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new Hi(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))},e.prototype.hasAnyCallback=function(){return null!==this.callbackContext},e}(),so=function(){function e(e,t){this.eventType=e,this.callbackContext=t}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new Hi(this,e,t):null},e.prototype.createEvent=function(e,t){(0,o.assert)(null!=e.childName,"Child events should have a childName.");var n=Zi(new Ji(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new ji(e.type,this,new Qi(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}},e.prototype.matches=function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))},e.prototype.hasAnyCallback=function(){return!!this.callbackContext},e}();function uo(e,t,n,r,i){var o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(t,n){Ai(e._repo,e,l),a(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new Gi(n,o||void 0),l="value"===t?new ao(u):new so(t,u);return function(e,t,n){var r;r=".info"===Ee(t._path)?vr(e.infoSyncTree_,t,n):vr(e.serverSyncTree_,t,n),li(e.eventQueue_,t._path,r)}(e._repo,e,l),function(){return Ai(e._repo,e,l)}}function lo(e,t,n,r){return uo(e,"value",t,n,r)}function co(e,t,n,r){return uo(e,"child_added",t,n,r)}function ho(e,t,n,r){return uo(e,"child_changed",t,n,r)}function fo(e,t,n,r){return uo(e,"child_moved",t,n,r)}function po(e,t,n,r){return uo(e,"child_removed",t,n,r)}function vo(e,t,n){var r=null,i=n?new Gi(n):null;"value"===t?r=new ao(i):t&&(r=new so(t,i)),Ai(e._repo,e,r)}var mo=function(){},go=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return s(t,e),t.prototype._apply=function(e){Yr("endAt",this._value,e._path,!0);var t=Dt(e._queryParams,this._value,this._key);if(Ki(t),qi(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vi(e._repo,e._path,t,e._orderByCalled)},t}(mo);function yo(e,t){return ni("endAt","key",t,!0),new go(e,t)}var bo=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return s(t,e),t.prototype._apply=function(e){Yr("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===qe?("string"===typeof t&&(t=Et(t)),r=Dt(e,t,n)):r=Dt(e,t,null==n?L:Et(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(Ki(t),qi(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vi(e._repo,e._path,t,e._orderByCalled)},t}(mo);function _o(e,t){return ni("endBefore","key",t,!0),new bo(e,t)}var wo=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return s(t,e),t.prototype._apply=function(e){Yr("startAt",this._value,e._path,!0);var t=Pt(e._queryParams,this._value,this._key);if(Ki(t),qi(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Vi(e._repo,e._path,t,e._orderByCalled)},t}(mo);function xo(e,t){return void 0===e&&(e=null),ni("startAt","key",t,!0),new wo(e,t)}var Eo=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return s(t,e),t.prototype._apply=function(e){Yr("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;e.index_===qe?("string"===typeof t&&(t=xt(t)),r=Pt(e,t,n)):r=Pt(e,t,null==n?O:xt(n));return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Ki(t),qi(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Vi(e._repo,e._path,t,e._orderByCalled)},t}(mo);function So(e,t){return ni("startAfter","key",t,!0),new Eo(e,t)}var Ao=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return s(t,e),t.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vi(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)},t}(mo);function To(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Ao(e)}var Co=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return s(t,e),t.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vi(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)},t}(mo);function Mo(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Co(e)}var ko=function(e){function t(t){var n=e.call(this)||this;return n._path=t,n}return s(t,e),t.prototype._apply=function(e){Wi(e,"orderByChild");var t=new we(this._path);if(Ie(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new gt(t),r=Nt(e._queryParams,n);return qi(r),new Vi(e._repo,e._path,r,!0)},t}(mo);function Io(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ri("orderByChild","path",e,!1),new ko(e)}var Ro=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype._apply=function(e){Wi(e,"orderByKey");var t=Nt(e._queryParams,qe);return qi(t),new Vi(e._repo,e._path,t,!0)},t}(mo);function Po(){return new Ro}var Do=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype._apply=function(e){Wi(e,"orderByPriority");var t=Nt(e._queryParams,ut);return qi(t),new Vi(e._repo,e._path,t,!0)},t}(mo);function No(){return new Do}var Lo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype._apply=function(e){Wi(e,"orderByValue");var t=Nt(e._queryParams,bt);return qi(t),new Vi(e._repo,e._path,t,!0)},t}(mo);function Oo(){return new Lo}var Bo=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return s(t,e),t.prototype._apply=function(e){if(Yr("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new go(this._value,this._key)._apply(new wo(this._value,this._key)._apply(e))},t}(mo);function Fo(e,t){return ni("equalTo","key",t,!0),new Bo(e,t)}function Uo(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=(0,o.getModularInstance)(e);try{for(var s=h(r),u=s.next();!u.done;u=s.next()){var l=u.value;a=l._apply(a)}}catch(c){t={error:c}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return a}!function(e){(0,o.assert)(!zn,"__referenceConstructor has already been defined"),zn=e}(Ji),function(e){(0,o.assert)(!Xn,"__referenceConstructor has already been defined"),Xn=e}(Ji);var jo={},Ho=!1;function Go(e,t,n,r,i){var o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||P("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),k("Using default host for project ",e.options.projectId),o=e.options.projectId+"-default-rtdb.firebaseio.com");var a,s=Fi(o,i),u=s.repoInfo,l=void 0;"undefined"!==typeof process&&(l={NODE_ENV:"production",PUBLIC_URL:"/edtech",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),l?(a=!0,o="http://"+l+"?ns="+u.namespace,u=(s=Fi(o,i)).repoInfo):a=!s.repoInfo.secure;var c=i&&a?new Z(Z.OWNER):new Y(e.name,e.options,t);oi("Invalid Firebase Database URL",s),Ie(s.path)||P("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=jo[t.name];i||(i={},jo[t.name]=i);var o=i[e.toURLString()];o&&P("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new pi(e,Ho,n,r),i[e.toURLString()]=o,o}(u,e,c,new X(e.name,n));return new zo(h,e)}var zo=function(){function e(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}return Object.defineProperty(e.prototype,"_repo",{get:function(){return this._instanceStarted||(vi(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Ji(this._repo,xe())),this._rootInternal},enumerable:!1,configurable:!0}),e.prototype._delete=function(){return null!==this._rootInternal&&(!function(e,t){var n=jo[t];n&&n[e.key]===e||P("Database "+t+"("+e.repoInfo_+") has already been deleted."),Ti(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},e.prototype._checkNotDeleted=function(e){null===this._rootInternal&&P("Cannot call "+e+" on a deleted database.")},e}();function Vo(e,t,n,r){void 0===r&&(r={}),(e=(0,o.getModularInstance)(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&P("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&P('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Z(Z.OWNER);else if(r.mockUserToken){var s="string"===typeof r.mockUserToken?r.mockUserToken:(0,o.createMockUserToken)(r.mockUserToken,e.app.options.projectId);a=new Z(s)}!function(e,t,n,r){e.repoInfo_=new re(t+":"+n,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}(i,t,n,a)}function Wo(e){(e=(0,o.getModularInstance)(e))._checkNotDeleted("goOffline"),Ti(e._repo)}function qo(e){var t;(e=(0,o.getModularInstance)(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(di)}var Ko={".sv":"timestamp"};var Jo=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();function Qo(e,t,n){var r;if(e=(0,o.getModularInstance)(e),ii("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new o.Deferred,s=lo(e,(function(){}));return function(e,t,n,r,i,a){Ci(e,"transaction on "+t);var s={path:t,update:n,onComplete:r,status:null,order:E(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=ki(e,t,void 0);s.currentInputSnapshot=u;var l=s.update(u.val());if(void 0===l)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{Zr("transaction failed: Data returned ",l,s.path),s.status=0;var c=Br(e.transactionQueueTree_,t),h=Fr(c)||[];h.push(s),Ur(c,h);var f=void 0;"object"===typeof l&&null!==l&&(0,o.contains)(l,".priority")?(f=(0,o.safeGet)(l,".priority"),(0,o.assert)(Xr(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(mr(e.serverSyncTree_,t)||pt.EMPTY_NODE).getPriority().val();var d=gi(e),p=mt(l,f),v=Nr(p,u,d);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=v,s.currentWriteId=wi(e);var m=cr(e.serverSyncTree_,t,v,s.currentWriteId,s.applyLocally);ci(e.eventQueue_,t,m),Ii(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new Qi(r,new Ji(e._repo,e._path),ut),a.resolve(new Jo(n,i)))}),s,i),a.promise}var Xo=function(){function e(e){this._delegate=e}return e.prototype.cancel=function(e){(0,o.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),(0,o.validateCallback)("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},e.prototype.remove=function(e){(0,o.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),(0,o.validateCallback)("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},e.prototype.set=function(e,t){(0,o.validateArgCount)("OnDisconnect.set",1,2,arguments.length),(0,o.validateCallback)("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},e.prototype.setWithPriority=function(e,t,n){(0,o.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,o.validateCallback)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r},e.prototype.update=function(e,t){if((0,o.validateArgCount)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,D("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,o.validateCallback)("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i},e}(),Yo=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return(0,o.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),Zo=function(){function e(e,t){this._database=e,this._delegate=t}return e.prototype.val=function(){return(0,o.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},e.prototype.exportVal=function(){return(0,o.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},e.prototype.toJSON=function(){return(0,o.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.exists=function(){return(0,o.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},e.prototype.child=function(t){return(0,o.validateArgCount)("DataSnapshot.child",0,1,arguments.length),t=String(t),ri("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))},e.prototype.hasChild=function(e){return(0,o.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),ri("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)},e.prototype.getPriority=function(){return(0,o.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},e.prototype.forEach=function(t){var n=this;return(0,o.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),(0,o.validateCallback)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))},e.prototype.hasChildren=function(){return(0,o.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(e.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return(0,o.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},e.prototype.getRef=function(){return(0,o.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),new ea(this._database,this._delegate.ref)},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),$o=function(){function e(e,t){this.database=e,this._delegate=t}return e.prototype.on=function(t,n,r,i){var a,s=this;(0,o.validateArgCount)("Query.on",2,4,arguments.length),(0,o.validateCallback)("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),l=function(e,t){n.call(u.context,new Zo(s.database,e),t)};l.userCallback=n,l.context=u.context;var c=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return lo(this._delegate,l,c),n;case"child_added":return co(this._delegate,l,c),n;case"child_removed":return po(this._delegate,l,c),n;case"child_changed":return ho(this._delegate,l,c),n;case"child_moved":return fo(this._delegate,l,c),n;default:throw new Error((0,o.errorPrefix)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},e.prototype.off=function(e,t,n){if((0,o.validateArgCount)("Query.off",0,3,arguments.length),ti("Query.off",e,!0),(0,o.validateCallback)("Query.off","callback",t,!0),(0,o.validateContextObject)("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,vo(this._delegate,e,r)}else vo(this._delegate,e)},e.prototype.get=function(){var e=this;return oo(this._delegate).then((function(t){return new Zo(e.database,t)}))},e.prototype.once=function(t,n,r,i){var a=this;(0,o.validateArgCount)("Query.once",1,4,arguments.length),(0,o.validateCallback)("Query.once","callback",n,!0);var s=e.getCancelAndContextArgs_("Query.once",r,i),u=new o.Deferred,l=function(e,t){var r=new Zo(a.database,e);n&&n.call(s.context,r,t),u.resolve(r)};l.userCallback=n,l.context=s.context;var c=function(e){s.cancel&&s.cancel.call(s.context,e),u.reject(e)};switch(t){case"value":lo(this._delegate,l,c,{onlyOnce:!0});break;case"child_added":co(this._delegate,l,c,{onlyOnce:!0});break;case"child_removed":po(this._delegate,l,c,{onlyOnce:!0});break;case"child_changed":ho(this._delegate,l,c,{onlyOnce:!0});break;case"child_moved":fo(this._delegate,l,c,{onlyOnce:!0});break;default:throw new Error((0,o.errorPrefix)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},e.prototype.limitToFirst=function(t){return(0,o.validateArgCount)("Query.limitToFirst",1,1,arguments.length),new e(this.database,Uo(this._delegate,To(t)))},e.prototype.limitToLast=function(t){return(0,o.validateArgCount)("Query.limitToLast",1,1,arguments.length),new e(this.database,Uo(this._delegate,Mo(t)))},e.prototype.orderByChild=function(t){return(0,o.validateArgCount)("Query.orderByChild",1,1,arguments.length),new e(this.database,Uo(this._delegate,Io(t)))},e.prototype.orderByKey=function(){return(0,o.validateArgCount)("Query.orderByKey",0,0,arguments.length),new e(this.database,Uo(this._delegate,Po()))},e.prototype.orderByPriority=function(){return(0,o.validateArgCount)("Query.orderByPriority",0,0,arguments.length),new e(this.database,Uo(this._delegate,No()))},e.prototype.orderByValue=function(){return(0,o.validateArgCount)("Query.orderByValue",0,0,arguments.length),new e(this.database,Uo(this._delegate,Oo()))},e.prototype.startAt=function(t,n){return void 0===t&&(t=null),(0,o.validateArgCount)("Query.startAt",0,2,arguments.length),new e(this.database,Uo(this._delegate,xo(t,n)))},e.prototype.startAfter=function(t,n){return void 0===t&&(t=null),(0,o.validateArgCount)("Query.startAfter",0,2,arguments.length),new e(this.database,Uo(this._delegate,So(t,n)))},e.prototype.endAt=function(t,n){return void 0===t&&(t=null),(0,o.validateArgCount)("Query.endAt",0,2,arguments.length),new e(this.database,Uo(this._delegate,yo(t,n)))},e.prototype.endBefore=function(t,n){return void 0===t&&(t=null),(0,o.validateArgCount)("Query.endBefore",0,2,arguments.length),new e(this.database,Uo(this._delegate,_o(t,n)))},e.prototype.equalTo=function(t,n){return(0,o.validateArgCount)("Query.equalTo",1,2,arguments.length),new e(this.database,Uo(this._delegate,Fo(t,n)))},e.prototype.toString=function(){return(0,o.validateArgCount)("Query.toString",0,0,arguments.length),this._delegate.toString()},e.prototype.toJSON=function(){return(0,o.validateArgCount)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.isEqual=function(t){if((0,o.validateArgCount)("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,(0,o.validateCallback)(e,"cancel",r.cancel,!0),r.context=n,(0,o.validateContextObject)(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error((0,o.errorPrefix)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return new ea(this.database,new Ji(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),e}(),ea=function(e){function t(t,n){var r=e.call(this,t,new Vi(n._repo,n._path,new Rt,!1))||this;return r.database=t,r._delegate=n,r}return s(t,e),t.prototype.getKey=function(){return(0,o.validateArgCount)("Reference.key",0,0,arguments.length),this._delegate.key},t.prototype.child=function(e){return(0,o.validateArgCount)("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new t(this.database,Zi(this._delegate,e))},t.prototype.getParent=function(){(0,o.validateArgCount)("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new t(this.database,e):null},t.prototype.getRoot=function(){return(0,o.validateArgCount)("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)},t.prototype.set=function(e,t){(0,o.validateArgCount)("Reference.set",1,2,arguments.length),(0,o.validateCallback)("Reference.set","onComplete",t,!0);var n=to(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},t.prototype.update=function(e,t){if((0,o.validateArgCount)("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,D("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ii("Reference.update",this._delegate._path),(0,o.validateCallback)("Reference.update","onComplete",t,!0);var i=io(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i},t.prototype.setWithPriority=function(e,t,n){(0,o.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),(0,o.validateCallback)("Reference.setWithPriority","onComplete",n,!0);var r=ro(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r},t.prototype.remove=function(e){(0,o.validateArgCount)("Reference.remove",0,1,arguments.length),(0,o.validateCallback)("Reference.remove","onComplete",e,!0);var t=eo(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},t.prototype.transaction=function(e,t,n){var r=this;(0,o.validateArgCount)("Reference.transaction",1,3,arguments.length),(0,o.validateCallback)("Reference.transaction","transactionUpdate",e,!1),(0,o.validateCallback)("Reference.transaction","onComplete",t,!0),ai("Reference.transaction","applyLocally",n,!0);var i=Qo(this._delegate,e,{applyLocally:n}).then((function(e){return new Yo(e.committed,new Zo(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i},t.prototype.setPriority=function(e,t){(0,o.validateArgCount)("Reference.setPriority",1,2,arguments.length),(0,o.validateCallback)("Reference.setPriority","onComplete",t,!0);var n=no(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},t.prototype.push=function(e,n){var r=this;(0,o.validateArgCount)("Reference.push",0,2,arguments.length),(0,o.validateCallback)("Reference.push","onComplete",n,!0);var i=$i(this._delegate,e),a=i.then((function(e){return new t(r.database,e)}));n&&a.then((function(){return n(null)}),(function(e){return n(e)}));var s=new t(this.database,i);return s.then=a.then.bind(a),s.catch=a.catch.bind(a,void 0),s},t.prototype.onDisconnect=function(){return ii("Reference.onDisconnect",this._delegate._path),new Xo(new zi(this._delegate._repo,this._delegate._path))},Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}($o),ta=function(){function e(e,t){var n=this;this._delegate=e,this.app=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),Vo(this._delegate,e,t,n)},e.prototype.ref=function(e){if((0,o.validateArgCount)("database.ref",0,1,arguments.length),e instanceof ea){var t=Yi(this._delegate,e.toString());return new ea(this,t)}t=Xi(this._delegate,e);return new ea(this,t)},e.prototype.refFromURL=function(e){var t="database.refFromURL";(0,o.validateArgCount)(t,1,1,arguments.length);var n=Yi(this._delegate,e);return new ea(this,n)},e.prototype.goOffline=function(){return(0,o.validateArgCount)("database.goOffline",0,0,arguments.length),Wo(this._delegate)},e.prototype.goOnline=function(){return(0,o.validateArgCount)("database.goOnline",0,0,arguments.length),qo(this._delegate)},e.ServerValue={TIMESTAMP:Ko,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}},e}();var na=Object.freeze({__proto__:null,forceLongPolling:function(){ve.forceDisallow(),fe.forceAllow()},forceWebSockets:function(){fe.forceDisallow()},isWebSocketsAvailable:function(){return ve.isAvailable()},setSecurityDebugCallback:function(e,t){e._delegate._repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){!function(e,t){if(void 0===t&&(t=!1),"undefined"!==typeof console){var n;t?(e.statsListener_||(e.statsListener_=new Vt(e.stats_)),n=e.statsListener_.get()):n=e.stats_.get();var r=Object.keys(n).reduce((function(e,t){return Math.max(t.length,e)}),0);G(n,(function(e,t){for(var n=e,i=e.length;i<r+2;i++)n+=" ";console.log(n+t)}))}}(e._delegate._repo,t)},statsIncrementCounter:function(e,t){!function(e,t){var n,r;e.stats_.incrementCounter(t),n=e.statsReporter_,r=t,n.statsToReport_[r]=!0}(e._delegate._repo,t)},dataUpdateCount:function(e){return e._delegate._repo.dataUpdateCount},interceptServerData:function(e,t){return function(e,t){e.interceptServerDataCallback_=t}(e._delegate._repo,t)},initStandalone:function(e){var t=e.app,n=e.url,r=e.version,o=e.customAuthImpl,a=e.namespace,s=e.nodeAdmin,u=void 0!==s&&s;m(r);var l=new i.Provider("auth-internal",new i.ComponentContainer("database-standalone"));return l.setComponent(new i.Component("auth-internal",(function(){return o}),"PRIVATE")),{instance:new ta(Go(t,l,void 0,n,u),t),namespace:a}}}),ra=Ge;Ge.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Ge.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var ia=ge,oa=re,aa=Object.freeze({__proto__:null,DataConnection:ra,RealTimeConnection:ia,hijackHash:function(e){var t=Ge.prototype.put;return Ge.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){Ge.prototype.put=t}},ConnectionTarget:oa,queryIdentifier:function(e){return e._delegate._queryIdentifier},forceRestClient:function(e){!function(e){Ho=e}(e)}}),sa=ta.ServerValue;!function(t){m(t.SDK_VERSION);var n=t.INTERNAL.registerComponent(new i.Component("database",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new ta(Go(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:ea,Query:$o,Database:ta,DataSnapshot:Zo,enableLogging:M,INTERNAL:na,ServerValue:sa,TEST_ACCESS:aa}).setMultipleInstances(!0));t.registerVersion("@firebase/database","0.11.0"),(0,o.isNodeSdk)()&&(e.exports=n)}(r.default)},494:function(e,t){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,o=new Promise((function(o,a){n(i=e[t].apply(e,r)).then(o,a)}));return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new c(e,i.request)}))}function o(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function a(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function s(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function u(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function l(e){this._index=e}function c(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function f(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function d(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new f(n)}function p(e){this._db=e}function v(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new d(o.result,e.oldVersion,o.transaction))}),i.then((function(e){return new p(e)}))}function m(e){return r(indexedDB,"deleteDatabase",[e])}o(l,"_index",["name","keyPath","multiEntry","unique"]),a(l,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(l,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(c,"_cursor",["direction","key","primaryKey","value"]),a(c,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(c.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new c(e,t._request)}))}))})})),h.prototype.createIndex=function(){return new l(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new l(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[h,l].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[l,h].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=v,e.deleteDb=m,Object.defineProperty(e,"__esModule",{value:!0})}(t)},386:function(e,t,n){"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.r(t),n.d(t,{LogLevel:function(){return o},Logger:function(){return h},setLogLevel:function(){return f},setUserLogHandler:function(){return d}});var o,a=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,l=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),c=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var o=(new Date).toISOString(),a=l[t];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[a].apply(console,r(["["+o+"]  "+e.name+":"],n))}},h=function(){function e(e){this.name=e,this._logLevel=u,this._logHandler=c,this._userLogHandler=null,a.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"===typeof e?s[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],e)),this._logHandler.apply(this,r([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],e)),this._logHandler.apply(this,r([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],e)),this._logHandler.apply(this,r([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],e)),this._logHandler.apply(this,r([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],e)),this._logHandler.apply(this,r([this,o.ERROR],e))},e}();function f(e){a.forEach((function(t){t.setLogLevel(e)}))}function d(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:o[n].toLowerCase(),message:s,args:i,type:t.name})}},r=0,i=a;r<i.length;r++){n(i[r])}}},365:function(e,t){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,o=new Promise((function(o,a){n(i=e[t].apply(e,r)).then(o,a)}));return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new c(e,i.request)}))}function o(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function a(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function s(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function u(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function l(e){this._index=e}function c(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function f(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function d(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new f(n)}function p(e){this._db=e}function v(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new d(o.result,e.oldVersion,o.transaction))}),i.then((function(e){return new p(e)}))}function m(e){return r(indexedDB,"deleteDatabase",[e])}o(l,"_index",["name","keyPath","multiEntry","unique"]),a(l,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(l,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(c,"_cursor",["direction","key","primaryKey","value"]),a(c,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(c.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new c(e,t._request)}))}))})})),h.prototype.createIndex=function(){return new l(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new l(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[h,l].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[l,h].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=v,e.deleteDb=m,Object.defineProperty(e,"__esModule",{value:!0})}(t)},293:function(e,t,n){"use strict";n.r(t),n.d(t,{CONSTANTS:function(){return o},Deferred:function(){return v},ErrorFactory:function(){return D},FirebaseError:function(){return P},MAX_VALUE_MILLIS:function(){return ce},RANDOM_FACTOR:function(){return he},Sha1:function(){return Z},areCookiesEnabled:function(){return I},assert:function(){return a},assertionError:function(){return s},async:function(){return te},base64:function(){return l},base64Decode:function(){return f},base64Encode:function(){return c},base64urlEncodeWithoutPadding:function(){return h},calculateBackoffMillis:function(){return fe},contains:function(){return z},createMockUserToken:function(){return m},createSubscribe:function(){return $},decode:function(){return F},deepCopy:function(){return d},deepEqual:function(){return K},deepExtend:function(){return p},errorPrefix:function(){return ie},extractQuerystring:function(){return Y},getGlobal:function(){return R},getModularInstance:function(){return pe},getUA:function(){return g},isAdmin:function(){return G},isBrowser:function(){return _},isBrowserExtension:function(){return w},isElectron:function(){return E},isEmpty:function(){return W},isIE:function(){return S},isIndexedDBAvailable:function(){return M},isMobileCordova:function(){return y},isNode:function(){return b},isNodeSdk:function(){return T},isReactNative:function(){return x},isSafari:function(){return C},isUWP:function(){return A},isValidFormat:function(){return H},isValidTimestamp:function(){return U},issuedAtTime:function(){return j},jsonEval:function(){return O},map:function(){return q},ordinal:function(){return de},querystring:function(){return Q},querystringDecode:function(){return X},safeGet:function(){return V},stringLength:function(){return le},stringToByteArray:function(){return ue},stringify:function(){return B},validateArgCount:function(){return re},validateCallback:function(){return ae},validateContextObject:function(){return se},validateIndexedDBOpenable:function(){return k},validateNamespace:function(){return oe}});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};Object.create;Object.create;var o={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},a=function(e,t){if(!e)throw s(t)},s=function(e){return new Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},u=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|l>>6,d=63&l;u||(d=64,a||(f=64)),r.push(n[c],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(u(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var l=o<<2|a>>4;if(r.push(l),64!==s){var c=a<<4&240|s>>2;if(r.push(c),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},c=function(e){var t=u(e);return l.encodeByteArray(t,!0)},h=function(e){return c(e).replace(/\./g,"")},f=function(e){try{return l.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function d(e){return p(void 0,e)}function p(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=p(e[n],t[n]));return e}var v=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function m(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=i({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[h(JSON.stringify({alg:"none",type:"JWT"})),h(JSON.stringify(a)),""].join(".")}function g(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function y(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function b(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function _(){return"object"===typeof self&&self.self===self}function w(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function x(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function E(){return g().indexOf("Electron/")>=0}function S(){var e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function A(){return g().indexOf("MSAppHost/")>=0}function T(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN}function C(){return!b()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function M(){return"indexedDB"in self&&null!=indexedDB}function k(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(o){t(o)}}))}function I(){return!(!navigator||!navigator.cookieEnabled)}function R(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}var P=function(e){function t(n,r,i){var o=e.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,D.prototype.create),o}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error),D=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?N(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new P(i,s,r);return u},e}();function N(e,t){return e.replace(L,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var L=/\{\$([^}]+)}/g;function O(e){return JSON.parse(e)}function B(e){return JSON.stringify(e)}var F=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=O(f(o[0])||""),n=O(f(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:t,claims:n,data:r,signature:i}},U=function(e){var t=F(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"===typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},j=function(e){var t=F(e).claims;return"object"===typeof t&&t.hasOwnProperty("iat")?t.iat:null},H=function(e){var t=F(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},G=function(e){var t=F(e).claims;return"object"===typeof t&&!0===t.admin};function z(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function V(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function W(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function q(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function K(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,o=n;i<o.length;i++){var a=o[i];if(!r.includes(a))return!1;var s=e[a],u=t[a];if(J(s)&&J(u)){if(!K(s,u))return!1}else if(s!==u)return!1}for(var l=0,c=r;l<c.length;l++){a=c[l];if(!n.includes(a))return!1}return!0}function J(e){return null!==e&&"object"===typeof e}function Q(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""}function X(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Y(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Z=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],l=this.chain_[2],c=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=c^u&(l^c),a=1518500249):(o=u^l^c,a=1859775393):r<60?(o=u&l|c&(u|l),a=2400959708):(o=u^l^c,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=c,c=l,l=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();function $(e,t){var n=new ee(e,t);return n.subscribe.bind(n)}var ee=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"===typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ne),void 0===r.error&&(r.error=ne),void 0===r.complete&&(r.complete=ne);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function te(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}}function ne(){}var re=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function ie(e,t){return e+" failed: "+t+" argument "}function oe(e,t,n){if((!n||t)&&"string"!==typeof t)throw new Error(ie(e,"namespace")+"must be a valid firebase namespace.")}function ae(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(ie(e,t)+"must be a valid function.")}function se(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(ie(e,t)+"must be a valid context object.")}var ue=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,a(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},le=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},ce=144e5,he=.5;function fe(e,t,n){void 0===t&&(t=1e3),void 0===n&&(n=2);var r=t*Math.pow(n,e),i=Math.round(he*r*(Math.random()-.5)*2);return Math.min(ce,r+i)}function de(e){return Number.isFinite(e)?e+function(e){var t=(e=Math.abs(e))%100;if(t>=10&&t<=20)return"th";var n=e%10;if(1===n)return"st";if(2===n)return"nd";if(3===n)return"rd";return"th"}(e):""+e}function pe(e){return e&&e._delegate?e._delegate:e}},485:function(e){function t(e,t,n){var r,i,o,a,s;function u(){var l=Date.now()-a;l<t&&l>=0?r=setTimeout(u,t-l):(r=null,n||(s=e.apply(o,i),o=i=null))}null==t&&(t=100);var l=function(){o=this,i=arguments,a=Date.now();var l=n&&!r;return r||(r=setTimeout(u,t)),l&&(s=e.apply(o,i),o=i=null),s};return l.clear=function(){r&&(clearTimeout(r),r=null)},l.flush=function(){r&&(s=e.apply(o,i),o=i=null,clearTimeout(r),r=null)},l}t.debounce=t,e.exports=t},262:function(e){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!==i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n}},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,o){for(var a,s,u=i(e),l=1;l<arguments.length;l++){for(var c in a=Object(arguments[l]))n.call(a,c)&&(u[c]=a[c]);if(t){s=t(a);for(var h=0;h<s.length;h++)r.call(a,s[h])&&(u[s[h]]=a[s[h]])}}return u}},463:function(e,t,n){"use strict";var r=n(791),i=n(725),o=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,u={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(f.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,E=60106,S=60107,A=60108,T=60114,C=60109,M=60110,k=60112,I=60113,R=60120,P=60115,D=60116,N=60121,L=60128,O=60129,B=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;x=U("react.element"),E=U("react.portal"),S=U("react.fragment"),A=U("react.strict_mode"),T=U("react.profiler"),C=U("react.provider"),M=U("react.context"),k=U("react.forward_ref"),I=U("react.suspense"),R=U("react.suspense_list"),P=U("react.memo"),D=U("react.lazy"),N=U("react.block"),U("react.scope"),L=U("react.opaque.id"),O=U("react.debug_trace_mode"),B=U("react.offscreen"),F=U("react.legacy_hidden")}var j,H="function"===typeof Symbol&&Symbol.iterator;function G(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=H&&e[H]||e["@@iterator"])?e:null}function z(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var V=!1;function W(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function q(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case T:return"Profiler";case A:return"StrictMode";case I:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case M:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case P:return K(e.type);case N:return K(e._render);case D:t=e._payload,e=e._init;try{return K(e(t))}catch(n){}}return null}function J(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=J(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=J(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,J(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+J(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:J(n)}}function le(e,t){var n=J(t.value),r=J(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml",fe="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ge=(me=function(e,t){if(e.namespaceURI!==fe||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_e=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(be).forEach((function(e){_e.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var Ee=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Se(e,t){if(t){if(Ee[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function Ae(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Me=null,ke=null;function Ie(e){if(e=ri(e)){if("function"!==typeof Ce)throw Error(a(280));var t=e.stateNode;t&&(t=oi(t),Ce(e.stateNode,e.type,t))}}function Re(e){Me?ke?ke.push(e):ke=[e]:Me=e}function Pe(){if(Me){var e=Me,t=ke;if(ke=Me=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function De(e,t){return e(t)}function Ne(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Oe=De,Be=!1,Fe=!1;function Ue(){null===Me&&null===ke||(Le(),Pe())}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=oi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var He=!1;if(h)try{var Ge={};Object.defineProperty(Ge,"passive",{get:function(){He=!0}}),window.addEventListener("test",Ge,Ge),window.removeEventListener("test",Ge,Ge)}catch(me){He=!1}function ze(e,t,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Ve=!1,We=null,qe=!1,Ke=null,Je={onError:function(e){Ve=!0,We=e}};function Qe(e,t,n,r,i,o,a,s,u){Ve=!1,We=null,ze.apply(Je,arguments)}function Xe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ze(e){if(Xe(e)!==e)throw Error(a(188))}function $e(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Xe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ze(i),e;if(o===r)return Ze(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,ot=!1,at=[],st=null,ut=null,lt=null,ct=new Map,ht=new Map,ft=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(t.pointerId)}}function mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=pt(t,n,r,i,o),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function gt(e){var t=ni(e.target);if(null!==t){var n=Xe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function bt(e,t,n){yt(e)&&n.delete(t)}function _t(){for(ot=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==st&&yt(st)&&(st=null),null!==ut&&yt(ut)&&(ut=null),null!==lt&&yt(lt)&&(lt=null),ct.forEach(bt),ht.forEach(bt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,_t)))}function xt(e){function t(t){return wt(t,e)}if(0<at.length){wt(at[0],e);for(var n=1;n<at.length;n++){var r=at[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&wt(st,e),null!==ut&&wt(ut,e),null!==lt&&wt(lt,e),ct.forEach(t),ht.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)gt(n),null===n.blockedOn&&ft.shift()}function Et(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var St={animationend:Et("Animation","AnimationEnd"),animationiteration:Et("Animation","AnimationIteration"),animationstart:Et("Animation","AnimationStart"),transitionend:Et("Transition","TransitionEnd")},At={},Tt={};function Ct(e){if(At[e])return At[e];if(!St[e])return e;var t,n=St[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return At[e]=n[t];return e}h&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete St.animationend.animation,delete St.animationiteration.animation,delete St.animationstart.animation),"TransitionEvent"in window||delete St.transitionend.transition);var Mt=Ct("animationend"),kt=Ct("animationiteration"),It=Ct("animationstart"),Rt=Ct("transitionend"),Pt=new Map,Dt=new Map,Nt=["abort","abort",Mt,"animationEnd",kt,"animationIteration",It,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Dt.set(r,t),Pt.set(r,i),l(i,[r])}}(0,o.unstable_now)();var Ot=8;function Bt(e){if(0!==(1&e))return Ot=15,1;if(0!==(2&e))return Ot=14,2;if(0!==(4&e))return Ot=13,4;var t=24&e;return 0!==t?(Ot=12,t):0!==(32&e)?(Ot=11,32):0!==(t=192&e)?(Ot=10,t):0!==(256&e)?(Ot=9,256):0!==(t=3584&e)?(Ot=8,t):0!==(4096&e)?(Ot=7,4096):0!==(t=4186112&e)?(Ot=6,t):0!==(t=62914560&e)?(Ot=5,t):67108864&e?(Ot=4,67108864):0!==(134217728&e)?(Ot=3,134217728):0!==(t=805306368&e)?(Ot=2,t):0!==(1073741824&e)?(Ot=1,1073741824):(Ot=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Ot=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=Ot=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=Bt(u),i=Ot):0!==(s&=o)&&(r=Bt(s),i=Ot)}else 0!==(o=n&~a)?(r=Bt(o),i=Ot):0!==s&&(r=Bt(s),i=Ot);if(0===r)return 0;if(r=n&((0>(r=31-Vt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&a)){if(Bt(t),i<=Ot)return t;Ot=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Vt(t)),r|=e[n],t&=~i;return r}function Ut(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function jt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ht(24&~t))?jt(10,t):e;case 10:return 0===(e=Ht(192&~t))?jt(8,t):e;case 8:return 0===(e=Ht(3584&~t))&&(0===(e=Ht(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Ht(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function Ht(e){return e&-e}function Gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Vt(t)]=n}var Vt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Wt(e)/qt|0)|0},Wt=Math.log,qt=Math.LN2;var Kt=o.unstable_UserBlockingPriority,Jt=o.unstable_runWithPriority,Qt=!0;function Xt(e,t,n,r){Be||Le();var i=Zt,o=Be;Be=!0;try{Ne(i,e,t,n,r)}finally{(Be=o)||Ue()}}function Yt(e,t,n,r){Jt(Kt,Zt.bind(null,e,t,n,r))}function Zt(e,t,n,r){var i;if(Qt)if((i=0===(4&t))&&0<at.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),at.push(e);else{var o=$t(e,t,n,r);if(null===o)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(o,e,t,n,r),void at.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=mt(st,e,t,n,r,i),!0;case"dragenter":return ut=mt(ut,e,t,n,r,i),!0;case"mouseover":return lt=mt(lt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ct.set(o,mt(ct.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ht.set(o,mt(ht.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function $t(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var o=Xe(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Ye(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function on(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function sn(){return!1}function un(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?an:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var ln,cn,hn,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(fn),pn=i({},fn,{view:0,detail:0}),vn=un(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hn&&(hn&&"mousemove"===e.type?(ln=e.screenX-hn.screenX,cn=e.screenY-hn.screenY):cn=ln=0,hn=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),gn=un(mn),yn=un(i({},mn,{dataTransfer:0})),bn=un(i({},pn,{relatedTarget:0})),_n=un(i({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=un(wn),En=un(i({},fn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},An={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Mn(){return Cn}var kn=i({},pn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=on(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?An[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mn,charCode:function(e){return"keypress"===e.type?on(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?on(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=un(kn),Rn=un(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mn})),Dn=un(i({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=un(Nn),On=[9,13,27,32],Bn=h&&"CompositionEvent"in window,Fn=null;h&&"documentMode"in document&&(Fn=document.documentMode);var Un=h&&"TextEvent"in window&&!Fn,jn=h&&(!Bn||Fn&&8<Fn&&11>=Fn),Hn=String.fromCharCode(32),Gn=!1;function zn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Jn(e,t,n,r){Re(r),0<(t=Br(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Xn=null;function Yn(e){kr(e,0)}function Zn(e){if(Y(ii(e)))return e}function $n(e,t){if("change"===e)return t}var er=!1;if(h){var tr;if(h){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Qn&&(Qn.detachEvent("onpropertychange",or),Xn=Qn=null)}function or(e){if("value"===e.propertyName&&Zn(Xn)){var t=[];if(Jn(t,Xn,e,Te(e)),e=Yn,Be)e(t);else{Be=!0;try{De(e,t)}finally{Be=!1,Ue()}}}}function ar(e,t,n){"focusin"===e?(ir(),Xn=n,(Qn=t).attachEvent("onpropertychange",or)):"focusout"===e&&ir()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(Xn)}function ur(e,t){if("click"===e)return Zn(t)}function lr(e,t){if("input"===e||"change"===e)return Zn(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},hr=Object.prototype.hasOwnProperty;function fr(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!hr.call(t,n[r])||!cr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=h&&"documentMode"in document&&11>=document.documentMode,br=null,_r=null,wr=null,xr=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==br||br!==Z(r)||("selectionStart"in(r=br)&&gr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&fr(wr,r)||(wr=r,0<(r=Br(_r,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=br)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Nt,2);for(var Sr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ar=0;Ar<Sr.length;Ar++)Dt.set(Sr[Ar],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,l){if(Qe.apply(this,arguments),Ve){if(!Ve)throw Error(a(198));var c=We;Ve=!1,We=null,qe||(qe=!0,Ke=c)}}(r,t,void 0,e),e.currentTarget=null}function kr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Mr(i,s,l),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Mr(i,s,l),o=u}}}if(qe)throw e=Ke,qe=!1,Ke=null,e}function Ir(e,t){var n=ai(t),r=e+"__bubble";n.has(r)||(Nr(t,e,2,!1),n.add(r))}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){e[Rr]||(e[Rr]=!0,s.forEach((function(t){Cr.has(t)||Dr(t,!1,e,null),Dr(t,!0,e,null)})))}function Dr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Cr.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=ai(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Nr(o,e,i,t),a.add(s))}function Nr(e,t,n,r){var i=Dt.get(t);switch(void 0===i?2:i){case 0:i=Xt;break;case 1:i=Yt;break;default:i=Zt}n=i.bind(null,t,n,e),i=void 0,!He||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=ni(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{Oe(e,t,n)}finally{Fe=!1,Ue()}}((function(){var r=o,i=Te(n),a=[];e:{var s=Pt.get(e);if(void 0!==s){var u=dn,l=e;switch(e){case"keypress":if(0===on(n))break e;case"keydown":case"keyup":u=In;break;case"focusin":l="focus",u=bn;break;case"focusout":l="blur",u=bn;break;case"beforeblur":case"afterblur":u=bn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Pn;break;case Mt:case kt:case It:u=_n;break;case Rt:u=Dn;break;case"scroll":u=vn;break;case"wheel":u=Ln;break;case"copy":case"cut":case"paste":u=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Rn}var c=0!==(4&t),h=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=je(p,f))&&c.push(Or(p,v,d)))),h)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(l=n.relatedTarget||n.fromElement)||!ni(l)&&!l[ei])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?ni(l):null)&&(l!==(h=Xe(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=gn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Rn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:ii(u),d=null==l?s:ii(l),(s=new c(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,ni(i)===r&&((c=new c(f,p+"enter",l,n,i)).target=d,c.relatedTarget=h,v=c),h=v,u&&l)e:{for(f=l,p=0,d=c=u;d;d=Fr(d))p++;for(d=0,v=f;v;v=Fr(v))d++;for(;0<p-d;)c=Fr(c),p--;for(;0<d-p;)f=Fr(f),d--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=Fr(c),f=Fr(f)}c=null}else c=null;null!==u&&Ur(a,s,u,c,!1),null!==l&&null!==h&&Ur(a,h,l,c,!0)}if("select"===(u=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=$n;else if(Kn(s))if(er)m=lr;else{m=sr;var g=ar}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ur);switch(m&&(m=m(e,r))?Jn(a,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ie(s,"number",s.value)),g=r?ii(r):window,e){case"focusin":(Kn(g)||"true"===g.contentEditable)&&(br=g,_r=r,wr=null);break;case"focusout":wr=_r=br=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,Er(a,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Er(a,n,i)}var y;if(Bn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(y=rn()):(tn="value"in(en=i)?en.value:en.textContent,Wn=!0)),0<(g=Br(r,b)).length&&(b=new En(b,e,null,n,i),a.push({event:b,listeners:g}),y?b.data=y:null!==(y=Vn(n))&&(b.data=y))),(y=Un?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Gn=!0,Hn);case"textInput":return(e=t.data)===Hn&&Gn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Bn&&zn(e,t)?(e=rn(),nn=tn=en=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Br(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}kr(a,t)}))}function Or(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Br(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=je(e,n))&&r.unshift(Or(e,o,i)),null!=(o=je(e,t))&&r.push(Or(e,o,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ur(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=je(n,o))&&a.unshift(Or(n,u,s)):i||null!=(u=je(n,o))&&a.push(Or(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function jr(){}var Hr=null,Gr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Vr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Wr="function"===typeof setTimeout?setTimeout:void 0,qr="function"===typeof clearTimeout?clearTimeout:void 0;function Kr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Jr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Qr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Xr=0;var Yr=Math.random().toString(36).slice(2),Zr="__reactFiber$"+Yr,$r="__reactProps$"+Yr,ei="__reactContainer$"+Yr,ti="__reactEvents$"+Yr;function ni(e){var t=e[Zr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Zr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Qr(e);null!==e;){if(n=e[Zr])return n;e=Qr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Zr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function oi(e){return e[$r]||null}function ai(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],ui=-1;function li(e){return{current:e}}function ci(e){0>ui||(e.current=si[ui],si[ui]=null,ui--)}function hi(e,t){ui++,si[ui]=e.current,e.current=t}var fi={},di=li(fi),pi=li(!1),vi=fi;function mi(e,t){var n=e.type.contextTypes;if(!n)return fi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function gi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function yi(){ci(pi),ci(di)}function bi(e,t,n){if(di.current!==fi)throw Error(a(168));hi(di,t),hi(pi,n)}function _i(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,K(t)||"Unknown",o));return i({},n,r)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fi,vi=di.current,hi(di,e),hi(pi,pi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=_i(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,ci(pi),ci(di),hi(di,e)):ci(pi),hi(pi,n)}var Ei=null,Si=null,Ai=o.unstable_runWithPriority,Ti=o.unstable_scheduleCallback,Ci=o.unstable_cancelCallback,Mi=o.unstable_shouldYield,ki=o.unstable_requestPaint,Ii=o.unstable_now,Ri=o.unstable_getCurrentPriorityLevel,Pi=o.unstable_ImmediatePriority,Di=o.unstable_UserBlockingPriority,Ni=o.unstable_NormalPriority,Li=o.unstable_LowPriority,Oi=o.unstable_IdlePriority,Bi={},Fi=void 0!==ki?ki:function(){},Ui=null,ji=null,Hi=!1,Gi=Ii(),zi=1e4>Gi?Ii:function(){return Ii()-Gi};function Vi(){switch(Ri()){case Pi:return 99;case Di:return 98;case Ni:return 97;case Li:return 96;case Oi:return 95;default:throw Error(a(332))}}function Wi(e){switch(e){case 99:return Pi;case 98:return Di;case 97:return Ni;case 96:return Li;case 95:return Oi;default:throw Error(a(332))}}function qi(e,t){return e=Wi(e),Ai(e,t)}function Ki(e,t,n){return e=Wi(e),Ti(e,t,n)}function Ji(){if(null!==ji){var e=ji;ji=null,Ci(e)}Qi()}function Qi(){if(!Hi&&null!==Ui){Hi=!0;var e=0;try{var t=Ui;qi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(n){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ti(Pi,Ji),n}finally{Hi=!1}}}var Xi=w.ReactCurrentBatchConfig;function Yi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Zi=li(null),$i=null,eo=null,to=null;function no(){to=eo=$i=null}function ro(e){var t=Zi.current;ci(Zi),e.type._context._currentValue=t}function io(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function oo(e,t){$i=e,to=eo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ba=!0),e.firstContext=null)}function ao(e,t){if(to!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(to=e,t=1073741823),t={context:e,observedBits:t,next:null},null===eo){if(null===$i)throw Error(a(308));eo=t,$i.dependencies={lanes:0,firstContext:t,responders:null}}else eo=eo.next=t;return e._currentValue}var so=!1;function uo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function lo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function co(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ho(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function po(e,t,n,r){var o=e.updateQueue;so=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var l=u,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var h=e.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==s&&(null===f?h.firstBaseUpdate=c:f.next=c,h.lastBaseUpdate=l)}}if(null!==a){for(f=o.baseState,s=0,h=c=l=null;;){u=a.lane;var d=a.eventTime;if((r&u)===u){null!==h&&(h=h.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,v=a;switch(u=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,u);break e}f=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,f,u):p)||void 0===u)break e;f=i({},f,u);break e;case 2:so=!0}}null!==a.callback&&(e.flags|=32,null===(u=o.effects)?o.effects=[a]:u.push(a))}else d={eventTime:d,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(c=h=d,l=f):h=h.next=d,s|=u;if(null===(a=a.next)){if(null===(u=o.shared.pending))break;a=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===h&&(l=f),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=h,Hs|=s,e.lanes=s,e.memoizedState=f}}function vo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var mo=(new r.Component).refs;function go(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var yo={isMounted:function(e){return!!(e=e._reactInternals)&&Xe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=fu(),i=du(e),o=co(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),ho(e,o),pu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=fu(),i=du(e),o=co(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),ho(e,o),pu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fu(),r=du(e),i=co(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),ho(e,i),pu(e,r,n)}};function bo(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!fr(n,r)||!fr(i,o))}function _o(e,t,n){var r=!1,i=fi,o=t.contextType;return"object"===typeof o&&null!==o?o=ao(o):(i=gi(t)?vi:di.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):fi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=yo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function wo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&yo.enqueueReplaceState(t,t.state,null)}function xo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=mo,uo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=ao(o):(o=gi(t)?vi:di.current,i.context=mi(e,o)),po(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(go(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&yo.enqueueReplaceState(i,i.state,null),po(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var Eo=Array.isArray;function So(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===mo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ao(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function To(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=qu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Xu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=So(e,t,n),r.return=e,r):((r=Ku(n.type,n.key,n.props,null,e.mode,r)).ref=So(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Yu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Ju(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Xu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Ku(t.type,t.key,t.props,null,e.mode,n)).ref=So(e,null,t),n.return=e,n;case E:return(t=Yu(t,e.mode,n)).return=e,t}if(Eo(t)||G(t))return(t=Ju(t,e.mode,n,null)).return=e,t;Ao(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===S?h(e,t,n.props.children,r,i):l(e,t,n,r):null;case E:return n.key===i?c(e,t,n,r):null}if(Eo(n)||G(n))return null!==i?null:h(e,t,n,r,null);Ao(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===S?h(t,e,r.props.children,i,r.key):l(t,e,r,i);case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Eo(r)||G(r))return h(t,e=e.get(n)||null,r,i,null);Ao(t,r)}return null}function v(i,a,s,u){for(var l=null,c=null,h=a,v=a=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var g=d(i,h,s[v],u);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(i,h),a=o(g,a,v),null===c?l=g:c.sibling=g,c=g,h=m}if(v===s.length)return n(i,h),l;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===c?l=h:c.sibling=h,c=h);return l}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),a=o(m,a,v),null===c?l=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(i,e)})),l}function m(i,s,u,l){var c=G(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var h=c=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=d(i,v,y.value,l);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(i,v),s=o(b,s,m),null===h?c=b:h.sibling=b,h=b,v=g}if(y.done)return n(i,v),c;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=f(i,y.value,l))&&(s=o(y,s,m),null===h?c=y:h.sibling=y,h=y);return c}for(v=r(i,v);!y.done;m++,y=u.next())null!==(y=p(v,i,m,y.value,l))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===h?c=y:h.sibling=y,h=y);return e&&v.forEach((function(e){return t(i,e)})),c}return function(e,r,o,u){var l="object"===typeof o&&null!==o&&o.type===S&&null===o.key;l&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case x:e:{for(c=o.key,l=r;null!==l;){if(l.key===c){if(7===l.tag){if(o.type===S){n(e,l.sibling),(r=i(l,o.props.children)).return=e,e=r;break e}}else if(l.elementType===o.type){n(e,l.sibling),(r=i(l,o.props)).ref=So(e,l,o),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}o.type===S?((r=Ju(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=Ku(o.type,o.key,o.props,null,e.mode,u)).ref=So(e,r,o),u.return=e,e=u)}return s(e);case E:e:{for(l=o.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Yu(o,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Xu(o,e.mode,u)).return=e,e=r),s(e);if(Eo(o))return v(e,r,o,u);if(G(o))return m(e,r,o,u);if(c&&Ao(e,o),"undefined"===typeof o&&!l)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,K(e.type)||"Component"))}return n(e,r)}}var Co=To(!0),Mo=To(!1),ko={},Io=li(ko),Ro=li(ko),Po=li(ko);function Do(e){if(e===ko)throw Error(a(174));return e}function No(e,t){switch(hi(Po,t),hi(Ro,e),hi(Io,ko),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ci(Io),hi(Io,t)}function Lo(){ci(Io),ci(Ro),ci(Po)}function Oo(e){Do(Po.current);var t=Do(Io.current),n=pe(t,e.type);t!==n&&(hi(Ro,e),hi(Io,n))}function Bo(e){Ro.current===e&&(ci(Io),ci(Ro))}var Fo=li(0);function Uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jo=null,Ho=null,Go=!1;function zo(e,t){var n=Vu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Vo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Wo(e){if(Go){var t=Ho;if(t){var n=t;if(!Vo(e,t)){if(!(t=Jr(n.nextSibling))||!Vo(e,t))return e.flags=-1025&e.flags|2,Go=!1,void(jo=e);zo(jo,n)}jo=e,Ho=Jr(t.firstChild)}else e.flags=-1025&e.flags|2,Go=!1,jo=e}}function qo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;jo=e}function Ko(e){if(e!==jo)return!1;if(!Go)return qo(e),Go=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Vr(t,e.memoizedProps))for(t=Ho;t;)zo(e,t),t=Jr(t.nextSibling);if(qo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ho=Jr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ho=null}}else Ho=jo?Jr(e.stateNode.nextSibling):null;return!0}function Jo(){Ho=jo=null,Go=!1}var Qo=[];function Xo(){for(var e=0;e<Qo.length;e++)Qo[e]._workInProgressVersionPrimary=null;Qo.length=0}var Yo=w.ReactCurrentDispatcher,Zo=w.ReactCurrentBatchConfig,$o=0,ea=null,ta=null,na=null,ra=!1,ia=!1;function oa(){throw Error(a(321))}function aa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function sa(e,t,n,r,i,o){if($o=o,ea=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yo.current=null===e||null===e.memoizedState?Da:Na,e=n(r,i),ia){o=0;do{if(ia=!1,!(25>o))throw Error(a(301));o+=1,na=ta=null,t.updateQueue=null,Yo.current=La,e=n(r,i)}while(ia)}if(Yo.current=Pa,t=null!==ta&&null!==ta.next,$o=0,na=ta=ea=null,ra=!1,t)throw Error(a(300));return e}function ua(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===na?ea.memoizedState=na=e:na=na.next=e,na}function la(){if(null===ta){var e=ea.alternate;e=null!==e?e.memoizedState:null}else e=ta.next;var t=null===na?ea.memoizedState:na.next;if(null!==t)na=t,ta=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ta=e).memoizedState,baseState:ta.baseState,baseQueue:ta.baseQueue,queue:ta.queue,next:null},null===na?ea.memoizedState=na=e:na=na.next=e}return na}function ca(e,t){return"function"===typeof t?t(e):t}function ha(e){var t=la(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ta,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,l=i;do{var c=l.lane;if(($o&c)===c)null!==u&&(u=u.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===e?l.eagerState:e(r,l.action);else{var h={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(s=u=h,o=r):u=u.next=h,ea.lanes|=c,Hs|=c}l=l.next}while(null!==l&&l!==i);null===u?o=r:u.next=s,cr(r,t.memoizedState)||(Ba=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fa(e){var t=la(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);cr(o,t.memoizedState)||(Ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function da(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=($o&e)===e)&&(t._workInProgressVersionPrimary=r,Qo.push(t))),e)return n(t._source);throw Qo.push(t),Error(a(350))}function pa(e,t,n,r){var i=Ds;if(null===i)throw Error(a(349));var o=t._getVersion,s=o(t._source),u=Yo.current,l=u.useState((function(){return da(i,t,n)})),c=l[1],h=l[0];l=na;var f=e.memoizedState,d=f.refs,p=d.getSnapshot,v=f.source;f=f.subscribe;var m=ea;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=c;var e=o(t._source);if(!cr(s,e)){e=n(t._source),cr(h,e)||(c(e),e=du(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,a=e;0<a;){var u=31-Vt(a),l=1<<u;r[u]|=e,a&=~l}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=du(m);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,r]),cr(p,n)&&cr(v,t)&&cr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:ca,lastRenderedState:h}).dispatch=c=Ra.bind(null,ea,e),l.queue=e,l.baseQueue=null,h=da(i,t,n),l.memoizedState=l.baseState=h),h}function va(e,t,n){return pa(la(),e,t,n)}function ma(e){var t=ua();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ca,lastRenderedState:e}).dispatch=Ra.bind(null,ea,e),[t.memoizedState,e]}function ga(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ea.updateQueue)?(t={lastEffect:null},ea.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ya(e){return e={current:e},ua().memoizedState=e}function ba(){return la().memoizedState}function _a(e,t,n,r){var i=ua();ea.flags|=e,i.memoizedState=ga(1|t,n,void 0,void 0===r?null:r)}function wa(e,t,n,r){var i=la();r=void 0===r?null:r;var o=void 0;if(null!==ta){var a=ta.memoizedState;if(o=a.destroy,null!==r&&aa(r,a.deps))return void ga(t,n,o,r)}ea.flags|=e,i.memoizedState=ga(1|t,n,o,r)}function xa(e,t){return _a(516,4,e,t)}function Ea(e,t){return wa(516,4,e,t)}function Sa(e,t){return wa(4,2,e,t)}function Aa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ta(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wa(4,2,Aa.bind(null,t,e),n)}function Ca(){}function Ma(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&aa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ka(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&aa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ia(e,t){var n=Vi();qi(98>n?98:n,(function(){e(!0)})),qi(97<n?97:n,(function(){var n=Zo.transition;Zo.transition=1;try{e(!1),t()}finally{Zo.transition=n}}))}function Ra(e,t,n){var r=fu(),i=du(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===ea||null!==a&&a===ea)ia=ra=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,cr(u,s))return}catch(l){}pu(e,i,r)}}var Pa={readContext:ao,useCallback:oa,useContext:oa,useEffect:oa,useImperativeHandle:oa,useLayoutEffect:oa,useMemo:oa,useReducer:oa,useRef:oa,useState:oa,useDebugValue:oa,useDeferredValue:oa,useTransition:oa,useMutableSource:oa,useOpaqueIdentifier:oa,unstable_isNewReconciler:!1},Da={readContext:ao,useCallback:function(e,t){return ua().memoizedState=[e,void 0===t?null:t],e},useContext:ao,useEffect:xa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,_a(4,2,Aa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _a(4,2,e,t)},useMemo:function(e,t){var n=ua();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ua();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ra.bind(null,ea,e),[r.memoizedState,e]},useRef:ya,useState:ma,useDebugValue:Ca,useDeferredValue:function(e){var t=ma(e),n=t[0],r=t[1];return xa((function(){var t=Zo.transition;Zo.transition=1;try{r(e)}finally{Zo.transition=t}}),[e]),n},useTransition:function(){var e=ma(!1),t=e[0];return ya(e=Ia.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=ua();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},pa(r,e,t,n)},useOpaqueIdentifier:function(){if(Go){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Xr++).toString(36))),Error(a(355))})),n=ma(t)[1];return 0===(2&ea.mode)&&(ea.flags|=516,ga(5,(function(){n("r:"+(Xr++).toString(36))}),void 0,null)),t}return ma(t="r:"+(Xr++).toString(36)),t},unstable_isNewReconciler:!1},Na={readContext:ao,useCallback:Ma,useContext:ao,useEffect:Ea,useImperativeHandle:Ta,useLayoutEffect:Sa,useMemo:ka,useReducer:ha,useRef:ba,useState:function(){return ha(ca)},useDebugValue:Ca,useDeferredValue:function(e){var t=ha(ca),n=t[0],r=t[1];return Ea((function(){var t=Zo.transition;Zo.transition=1;try{r(e)}finally{Zo.transition=t}}),[e]),n},useTransition:function(){var e=ha(ca)[0];return[ba().current,e]},useMutableSource:va,useOpaqueIdentifier:function(){return ha(ca)[0]},unstable_isNewReconciler:!1},La={readContext:ao,useCallback:Ma,useContext:ao,useEffect:Ea,useImperativeHandle:Ta,useLayoutEffect:Sa,useMemo:ka,useReducer:fa,useRef:ba,useState:function(){return fa(ca)},useDebugValue:Ca,useDeferredValue:function(e){var t=fa(ca),n=t[0],r=t[1];return Ea((function(){var t=Zo.transition;Zo.transition=1;try{r(e)}finally{Zo.transition=t}}),[e]),n},useTransition:function(){var e=fa(ca)[0];return[ba().current,e]},useMutableSource:va,useOpaqueIdentifier:function(){return fa(ca)[0]},unstable_isNewReconciler:!1},Oa=w.ReactCurrentOwner,Ba=!1;function Fa(e,t,n,r){t.child=null===e?Mo(t,null,n,r):Co(t,e.child,n,r)}function Ua(e,t,n,r,i){n=n.render;var o=t.ref;return oo(t,i),r=sa(e,t,n,r,o,i),null===e||Ba?(t.flags|=1,Fa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,os(e,t,i))}function ja(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||Wu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ku(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ha(e,t,a,r,i,o))}return a=e.child,0===(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:fr)(i,r)&&e.ref===t.ref)?os(e,t,o):(t.flags|=1,(e=qu(a,r)).ref=t.ref,e.return=t,t.child=e)}function Ha(e,t,n,r,i,o){if(null!==e&&fr(e.memoizedProps,r)&&e.ref===t.ref){if(Ba=!1,0===(o&i))return t.lanes=e.lanes,os(e,t,o);0!==(16384&e.flags)&&(Ba=!0)}return Va(e,t,n,r,o)}function Ga(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xu(t,n);else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xu(t,e),null;t.memoizedState={baseLanes:0},xu(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,xu(t,r);return Fa(e,t,i,n),t.child}function za(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Va(e,t,n,r,i){var o=gi(n)?vi:di.current;return o=mi(t,o),oo(t,i),n=sa(e,t,n,r,o,i),null===e||Ba?(t.flags|=1,Fa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,os(e,t,i))}function Wa(e,t,n,r,i){if(gi(n)){var o=!0;wi(t)}else o=!1;if(oo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),_o(t,n,r),xo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=ao(l):l=mi(t,l=gi(n)?vi:di.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==l)&&wo(t,a,r,l),so=!1;var f=t.memoizedState;a.state=f,po(t,r,a,i),u=t.memoizedState,s!==r||f!==u||pi.current||so?("function"===typeof c&&(go(t,n,c,r),u=t.memoizedState),(s=so||bo(t,n,s,r,f,u,l))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4)):("function"===typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,lo(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Yi(t.type,s),a.props=l,h=t.pendingProps,f=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=ao(u):u=mi(t,u=gi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||f!==u)&&wo(t,a,r,u),so=!1,f=t.memoizedState,a.state=f,po(t,r,a,i);var p=t.memoizedState;s!==h||f!==p||pi.current||so?("function"===typeof d&&(go(t,n,d,r),p=t.memoizedState),(l=so||bo(t,n,l,r,f,p,u))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return qa(e,t,n,r,o,i)}function qa(e,t,n,r,i,o){za(e,t);var a=0!==(64&t.flags);if(!r&&!a)return i&&xi(t,n,!1),os(e,t,o);r=t.stateNode,Oa.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Co(t,e.child,null,o),t.child=Co(t,null,s,o)):Fa(e,t,s,o),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Ka(e){var t=e.stateNode;t.pendingContext?bi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&bi(0,t.context,!1),No(e,t.containerInfo)}var Ja,Qa,Xa,Ya={dehydrated:null,retryLane:0};function Za(e,t,n){var r,i=t.pendingProps,o=Fo.current,a=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),hi(Fo,1&o),null===e?(void 0!==i.fallback&&Wo(t),e=i.children,o=i.fallback,a?(e=$a(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ya,e):"number"===typeof i.unstable_expectedLoadTime?(e=$a(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ya,t.lanes=33554432,e):((n=Qu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=ts(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Ya,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function $a(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Qu(t,i,0,null),n=Ju(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=qu(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=qu(a,s),null!==e?r=qu(e,r):(r=Ju(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),io(e.return,t)}function rs(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Fa(e,t,r.children,n),0!==(2&(r=Fo.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(hi(Fo,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,o,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function os(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Hs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=qu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=qu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function as(e,t){if(!Go)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return gi(t.type)&&yi(),null;case 3:return Lo(),ci(pi),ci(di),Xo(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ko(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Bo(t);var o=Do(Po.current);if(n=t.type,null!==e&&null!=t.stateNode)Qa(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=Do(Io.current),Ko(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Zr]=t,r[$r]=s,n){case"dialog":Ir("cancel",r),Ir("close",r);break;case"iframe":case"object":case"embed":Ir("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Ir(Tr[e],r);break;case"source":Ir("error",r);break;case"img":case"image":case"link":Ir("error",r),Ir("load",r);break;case"details":Ir("toggle",r);break;case"input":ee(r,s),Ir("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ir("invalid",r);break;case"textarea":ue(r,s),Ir("invalid",r)}for(var l in Se(n,s),e=null,s)s.hasOwnProperty(l)&&(o=s[l],"children"===l?"string"===typeof o?r.textContent!==o&&(e=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(e=["children",""+o]):u.hasOwnProperty(l)&&null!=o&&"onScroll"===l&&Ir("scroll",r));switch(n){case"input":X(r),re(r,s,!0);break;case"textarea":X(r),ce(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=jr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(l=9===o.nodeType?o:o.ownerDocument,e===he&&(e=de(n)),e===he?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Zr]=t,e[$r]=r,Ja(e,t),t.stateNode=e,l=Ae(n,r),n){case"dialog":Ir("cancel",e),Ir("close",e),o=r;break;case"iframe":case"object":case"embed":Ir("load",e),o=r;break;case"video":case"audio":for(o=0;o<Tr.length;o++)Ir(Tr[o],e);o=r;break;case"source":Ir("error",e),o=r;break;case"img":case"image":case"link":Ir("error",e),Ir("load",e),o=r;break;case"details":Ir("toggle",e),o=r;break;case"input":ee(e,r),o=$(e,r),Ir("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Ir("invalid",e);break;case"textarea":ue(e,r),o=se(e,r),Ir("invalid",e);break;default:o=r}Se(n,o);var c=o;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];"style"===s?xe(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&ge(e,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&ye(e,h):"number"===typeof h&&ye(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Ir("scroll",e):null!=h&&_(e,s,h,l))}switch(n){case"input":X(e),re(e,r,!1);break;case"textarea":X(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+J(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ae(e,!!r.multiple,s,!1):null!=r.defaultValue&&ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=jr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Xa(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));n=Do(Po.current),Do(Io.current),Ko(t)?(r=t.stateNode,n=t.memoizedProps,r[Zr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Zr]=t,t.stateNode=r)}return null;case 13:return ci(Fo),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ko(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fo.current)?0===Fs&&(Fs=3):(0!==Fs&&3!==Fs||(Fs=4),null===Ds||0===(134217727&Hs)&&0===(134217727&Gs)||yu(Ds,Ls))),(r||n)&&(t.flags|=4),null);case 4:return Lo(),null===e&&Pr(t.stateNode.containerInfo),null;case 10:return ro(t),null;case 19:if(ci(Fo),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(l=r.rendering))if(s)as(r,!1);else{if(0!==Fs||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(l=Uo(e))){for(t.flags|=64,as(r,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return hi(Fo,1&Fo.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>qs&&(t.flags|=64,s=!0,as(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Uo(l))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),as(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!Go)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>qs&&1073741824!==n&&(t.flags|=64,s=!0,as(r,!1),t.lanes=33554432);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=r.last)?n.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Fo.current,hi(Fo,s?1&t|2:1&t),n):null;case 23:case 24:return Eu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function us(e){switch(e.tag){case 1:gi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Lo(),ci(pi),ci(di),Xo(),0!==(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return Bo(e),null;case 13:return ci(Fo),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ci(Fo),null;case 4:return Lo(),null;case 10:return ro(e),null;case 23:case 24:return Eu(),null;default:return null}}function ls(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function cs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Ja=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Qa=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Do(Io.current);var a,s=null;switch(n){case"input":o=$(e,o),r=$(e,r),s=[];break;case"option":o=oe(e,o),r=oe(e,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=se(e,o),r=se(e,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=jr)}for(h in Se(n,r),n=null,o)if(!r.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var l=o[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(l=null!=o?o[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(null!=c||null!=l))if("style"===h)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Ir("scroll",e),s||l===c||(s=[])):"object"===typeof c&&null!==c&&c.$$typeof===L?c.toString():(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},Xa=function(e,t,n,r){n!==r&&(t.flags|=4)};var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=co(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xs||(Xs=!0,Ys=r),cs(0,t)},n}function ds(e,t,n){(n=co(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return cs(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Zs?Zs=new Set([this]):Zs.add(this),cs(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){ju(e,n)}else t.current=null}function ms(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Yi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Kr(t.stateNode.containerInfo))}throw Error(a(163))}function gs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Bu(n,e),Ou(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Yi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&vo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}vo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))))}throw Error(a(163))}function ys(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function bs(e,t){if(Si&&"function"===typeof Si.onCommitFiberUnmount)try{Si.onCommitFiberUnmount(Ei,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Bu(t,n);else{r=t;try{i()}catch(o){ju(r,o)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){ju(t,o)}break;case 5:vs(t);break;case 4:As(e,t)}}function _s(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ws(e){return 5===e.tag||3===e.tag||4===e.tag}function xs(e){e:{for(var t=e.return;null!==t;){if(ws(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ws(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Es(e,n,t):Ss(e,n,t)}function Es(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=jr));else if(4!==r&&null!==(e=e.child))for(Es(e,t,n),e=e.sibling;null!==e;)Es(e,t,n),e=e.sibling}function Ss(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Ss(e,t,n),e=e.sibling;null!==e;)Ss(e,t,n),e=e.sibling}function As(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,l=u;;)if(bs(s,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break e;for(;null===l.sibling;){if(null===l.return||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(bs(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Ts(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[$r]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ae(e,i),t=Ae(e,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?xe(n,u):"dangerouslySetInnerHTML"===s?ge(n,u):"children"===s?ye(n,u):_(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":le(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ae(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ae(n,!!r.multiple,r.defaultValue,!0):ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ws=zi(),ys(t.child,!0)),void Cs(t);case 19:return void Cs(t);case 23:case 24:return void ys(t,null!==t.memoizedState)}throw Error(a(163))}function Cs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=Gu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ms(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var ks=Math.ceil,Is=w.ReactCurrentDispatcher,Rs=w.ReactCurrentOwner,Ps=0,Ds=null,Ns=null,Ls=0,Os=0,Bs=li(0),Fs=0,Us=null,js=0,Hs=0,Gs=0,zs=0,Vs=null,Ws=0,qs=1/0;function Ks(){qs=zi()+500}var Js,Qs=null,Xs=!1,Ys=null,Zs=null,$s=!1,eu=null,tu=90,nu=[],ru=[],iu=null,ou=0,au=null,su=-1,uu=0,lu=0,cu=null,hu=!1;function fu(){return 0!==(48&Ps)?zi():-1!==su?su:su=zi()}function du(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Vi()?1:2;if(0===uu&&(uu=js),0!==Xi.transition){0!==lu&&(lu=null!==Vs?Vs.pendingLanes:0),e=uu;var t=4186112&~lu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Vi(),0!==(4&Ps)&&98===e?e=jt(12,uu):e=jt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<ou)throw ou=0,au=null,Error(a(185));if(null===(e=vu(e,t)))return null;zt(e,t,n),e===Ds&&(Gs|=t,4===Fs&&yu(e,Ls));var r=Vi();1===t?0!==(8&Ps)&&0===(48&Ps)?bu(e):(mu(e,n),0===Ps&&(Ks(),Ji())):(0===(4&Ps)||98!==r&&99!==r||(null===iu?iu=new Set([e]):iu.add(e)),mu(e,n)),Vs=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function mu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Vt(s),l=1<<u,c=o[u];if(-1===c){if(0===(l&r)||0!==(l&i)){c=t,Bt(l);var h=Ot;o[u]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=t&&(e.expiredLanes|=l);s&=~l}if(r=Ft(e,e===Ds?Ls:0),t=Ot,0===r)null!==n&&(n!==Bi&&Ci(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Bi&&Ci(n)}15===t?(n=bu.bind(null,e),null===Ui?(Ui=[n],ji=Ti(Pi,Qi)):Ui.push(n),n=Bi):14===t?n=Ki(99,bu.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),n=Ki(n,gu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function gu(e){if(su=-1,lu=uu=0,0!==(48&Ps))throw Error(a(327));var t=e.callbackNode;if(Lu()&&e.callbackNode!==t)return null;var n=Ft(e,e===Ds?Ls:0);if(0===n)return null;var r=n,i=Ps;Ps|=16;var o=Tu();for(Ds===e&&Ls===r||(Ks(),Su(e,r));;)try{ku();break}catch(u){Au(e,u)}if(no(),Is.current=o,Ps=i,null!==Ns?r=0:(Ds=null,Ls=0,r=Fs),0!==(js&Gs))Su(e,0);else if(0!==r){if(2===r&&(Ps|=64,e.hydrate&&(e.hydrate=!1,Kr(e.containerInfo)),0!==(n=Ut(e))&&(r=Cu(e,n))),1===r)throw t=Us,Su(e,0),yu(e,n),mu(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:case 5:Pu(e);break;case 3:if(yu(e,n),(62914560&n)===n&&10<(r=Ws+500-zi())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){fu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Wr(Pu.bind(null,e),r);break}Pu(e);break;case 4:if(yu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Vt(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ks(n/1960))-n)){e.timeoutHandle=Wr(Pu.bind(null,e),n);break}Pu(e);break;default:throw Error(a(329))}}return mu(e,zi()),e.callbackNode===t?gu.bind(null,e):null}function yu(e,t){for(t&=~zs,t&=~Gs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vt(t),r=1<<n;e[n]=-1,t&=~r}}function bu(e){if(0!==(48&Ps))throw Error(a(327));if(Lu(),e===Ds&&0!==(e.expiredLanes&Ls)){var t=Ls,n=Cu(e,t);0!==(js&Gs)&&(n=Cu(e,t=Ft(e,t)))}else n=Cu(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Ps|=64,e.hydrate&&(e.hydrate=!1,Kr(e.containerInfo)),0!==(t=Ut(e))&&(n=Cu(e,t))),1===n)throw n=Us,Su(e,0),yu(e,t),mu(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pu(e),mu(e,zi()),null}function _u(e,t){var n=Ps;Ps|=1;try{return e(t)}finally{0===(Ps=n)&&(Ks(),Ji())}}function wu(e,t){var n=Ps;Ps&=-2,Ps|=8;try{return e(t)}finally{0===(Ps=n)&&(Ks(),Ji())}}function xu(e,t){hi(Bs,Os),Os|=t,js|=t}function Eu(){Os=Bs.current,ci(Bs)}function Su(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,qr(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&yi();break;case 3:Lo(),ci(pi),ci(di),Xo();break;case 5:Bo(r);break;case 4:Lo();break;case 13:case 19:ci(Fo);break;case 10:ro(r);break;case 23:case 24:Eu()}n=n.return}Ds=e,Ns=qu(e.current,null),Ls=Os=js=t,Fs=0,Us=null,zs=Gs=Hs=0}function Au(e,t){for(;;){var n=Ns;try{if(no(),Yo.current=Pa,ra){for(var r=ea.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ra=!1}if($o=0,na=ta=ea=null,ia=!1,Rs.current=null,null===n||null===n.return){Fs=1,Us=t,Ns=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=Ls,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&Fo.current),f=a;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=f.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!h)}}if(d){var m=f.updateQueue;if(null===m){var g=new Set;g.add(l),f.updateQueue=g}else m.add(l);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=co(-1,1);y.tag=2,ho(s,y)}s.lanes|=1;break e}u=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new hs,u=new Set,b.set(l,u)):void 0===(u=b.get(l))&&(u=new Set,b.set(l,u)),!u.has(s)){u.add(s);var _=Hu.bind(null,o,l,s);l.then(_,_)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((K(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Fs&&(Fs=2),u=ls(u,s),f=a;do{switch(f.tag){case 3:o=u,f.flags|=4096,t&=-t,f.lanes|=t,fo(f,fs(0,o,t));break e;case 1:o=u;var w=f.type,x=f.stateNode;if(0===(64&f.flags)&&("function"===typeof w.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Zs||!Zs.has(x)))){f.flags|=4096,t&=-t,f.lanes|=t,fo(f,ds(f,o,t));break e}}f=f.return}while(null!==f)}Ru(n)}catch(E){t=E,Ns===n&&null!==n&&(Ns=n=n.return);continue}break}}function Tu(){var e=Is.current;return Is.current=Pa,null===e?Pa:e}function Cu(e,t){var n=Ps;Ps|=16;var r=Tu();for(Ds===e&&Ls===t||Su(e,t);;)try{Mu();break}catch(i){Au(e,i)}if(no(),Ps=n,Is.current=r,null!==Ns)throw Error(a(261));return Ds=null,Ls=0,Fs}function Mu(){for(;null!==Ns;)Iu(Ns)}function ku(){for(;null!==Ns&&!Mi();)Iu(Ns)}function Iu(e){var t=Js(e.alternate,e,Os);e.memoizedProps=e.pendingProps,null===t?Ru(e):Ns=t,Rs.current=null}function Ru(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Os)))return void(Ns=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Os)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Ns=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ns=t);Ns=t=e}while(null!==t);0===Fs&&(Fs=5)}function Pu(e){var t=Vi();return qi(99,Du.bind(null,e,t)),null}function Du(e,t){do{Lu()}while(null!==eu);if(0!==(48&Ps))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<o;){var l=31-Vt(o),c=1<<l;i[l]=0,s[l]=-1,u[l]=-1,o&=~c}if(null!==iu&&0===(24&r)&&iu.has(e)&&iu.delete(e),e===Ds&&(Ns=Ds=null,Ls=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ps,Ps|=32,Rs.current=null,Hr=Qt,gr(s=mr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(c=u.getSelection&&u.getSelection())&&0!==c.rangeCount){u=c.anchorNode,o=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{u.nodeType,l.nodeType}catch(T){u=null;break e}var h=0,f=-1,d=-1,p=0,v=0,m=s,g=null;t:for(;;){for(var y;m!==u||0!==o&&3!==m.nodeType||(f=h+o),m!==l||0!==c&&3!==m.nodeType||(d=h+c),3===m.nodeType&&(h+=m.nodeValue.length),null!==(y=m.firstChild);)g=m,m=y;for(;;){if(m===s)break t;if(g===u&&++p===o&&(f=h),g===l&&++v===c&&(d=h),null!==(y=m.nextSibling))break;g=(m=g).parentNode}m=y}u=-1===f||-1===d?null:{start:f,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;Gr={focusedElem:s,selectionRange:u},Qt=!1,cu=null,hu=!1,Qs=r;do{try{Nu()}catch(T){if(null===Qs)throw Error(a(330));ju(Qs,T),Qs=Qs.nextEffect}}while(null!==Qs);cu=null,Qs=r;do{try{for(s=e;null!==Qs;){var b=Qs.flags;if(16&b&&ye(Qs.stateNode,""),128&b){var _=Qs.alternate;if(null!==_){var w=_.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&b){case 2:xs(Qs),Qs.flags&=-3;break;case 6:xs(Qs),Qs.flags&=-3,Ts(Qs.alternate,Qs);break;case 1024:Qs.flags&=-1025;break;case 1028:Qs.flags&=-1025,Ts(Qs.alternate,Qs);break;case 4:Ts(Qs.alternate,Qs);break;case 8:As(s,u=Qs);var x=u.alternate;_s(u),null!==x&&_s(x)}Qs=Qs.nextEffect}}catch(T){if(null===Qs)throw Error(a(330));ju(Qs,T),Qs=Qs.nextEffect}}while(null!==Qs);if(w=Gr,_=mr(),b=w.focusedElem,s=w.selectionRange,_!==b&&b&&b.ownerDocument&&vr(b.ownerDocument.documentElement,b)){null!==s&&gr(b)&&(_=s.start,void 0===(w=s.end)&&(w=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(w,b.value.length)):(w=(_=b.ownerDocument||document)&&_.defaultView||window).getSelection&&(w=w.getSelection(),u=b.textContent.length,x=Math.min(s.start,u),s=void 0===s.end?x:Math.min(s.end,u),!w.extend&&x>s&&(u=s,s=x,x=u),u=pr(b,x),o=pr(b,s),u&&o&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==o.node||w.focusOffset!==o.offset)&&((_=_.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),x>s?(w.addRange(_),w.extend(o.node,o.offset)):(_.setEnd(o.node,o.offset),w.addRange(_))))),_=[];for(w=b;w=w.parentNode;)1===w.nodeType&&_.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<_.length;b++)(w=_[b]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Qt=!!Hr,Gr=Hr=null,e.current=n,Qs=r;do{try{for(b=e;null!==Qs;){var E=Qs.flags;if(36&E&&gs(b,Qs.alternate,Qs),128&E){_=void 0;var S=Qs.ref;if(null!==S){var A=Qs.stateNode;Qs.tag,_=A,"function"===typeof S?S(_):S.current=_}}Qs=Qs.nextEffect}}catch(T){if(null===Qs)throw Error(a(330));ju(Qs,T),Qs=Qs.nextEffect}}while(null!==Qs);Qs=null,Fi(),Ps=i}else e.current=n;if($s)$s=!1,eu=e,tu=t;else for(Qs=r;null!==Qs;)t=Qs.nextEffect,Qs.nextEffect=null,8&Qs.flags&&((E=Qs).sibling=null,E.stateNode=null),Qs=t;if(0===(r=e.pendingLanes)&&(Zs=null),1===r?e===au?ou++:(ou=0,au=e):ou=0,n=n.stateNode,Si&&"function"===typeof Si.onCommitFiberRoot)try{Si.onCommitFiberRoot(Ei,n,void 0,64===(64&n.current.flags))}catch(T){}if(mu(e,zi()),Xs)throw Xs=!1,e=Ys,Ys=null,e;return 0!==(8&Ps)||Ji(),null}function Nu(){for(;null!==Qs;){var e=Qs.alternate;hu||null===cu||(0!==(8&Qs.flags)?et(Qs,cu)&&(hu=!0):13===Qs.tag&&Ms(e,Qs)&&et(Qs,cu)&&(hu=!0));var t=Qs.flags;0!==(256&t)&&ms(e,Qs),0===(512&t)||$s||($s=!0,Ki(97,(function(){return Lu(),null}))),Qs=Qs.nextEffect}}function Lu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,qi(e,Fu)}return!1}function Ou(e,t){nu.push(t,e),$s||($s=!0,Ki(97,(function(){return Lu(),null})))}function Bu(e,t){ru.push(t,e),$s||($s=!0,Ki(97,(function(){return Lu(),null})))}function Fu(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Ps))throw Error(a(331));var t=Ps;Ps|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(l){if(null===o)throw Error(a(330));ju(o,l)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var u=i.create;i.destroy=u()}catch(l){if(null===o)throw Error(a(330));ju(o,l)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Ps=t,Ji(),!0}function Uu(e,t,n){ho(e,t=fs(0,t=ls(n,t),1)),t=fu(),null!==(e=vu(e,1))&&(zt(e,1,t),mu(e,t))}function ju(e,t){if(3===e.tag)Uu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Uu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Zs||!Zs.has(r))){var i=ds(n,e=ls(t,e),1);if(ho(n,i),i=fu(),null!==(n=vu(n,1)))zt(n,1,i),mu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Zs||!Zs.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function Hu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=fu(),e.pingedLanes|=e.suspendedLanes&n,Ds===e&&(Ls&n)===n&&(4===Fs||3===Fs&&(62914560&Ls)===Ls&&500>zi()-Ws?Su(e,0):zs|=n),mu(e,t)}function Gu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Vi()?1:2:(0===uu&&(uu=js),0===(t=Ht(62914560&~uu))&&(t=4194304))),n=fu(),null!==(e=vu(e,t))&&(zt(e,t,n),mu(e,n))}function zu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Vu(e,t,n,r){return new zu(e,t,n,r)}function Wu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function qu(e,t){var n=e.alternate;return null===n?((n=Vu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ku(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Wu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Ju(n.children,i,o,t);case O:s=8,i|=16;break;case A:s=8,i|=1;break;case T:return(e=Vu(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=o,e;case I:return(e=Vu(13,n,t,i)).type=I,e.elementType=I,e.lanes=o,e;case R:return(e=Vu(19,n,t,i)).elementType=R,e.lanes=o,e;case B:return Qu(n,i,o,t);case F:return(e=Vu(24,n,t,i)).elementType=F,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case M:s=9;break e;case k:s=11;break e;case P:s=14;break e;case D:s=16,r=null;break e;case N:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Vu(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ju(e,t,n,r){return(e=Vu(7,e,r,t)).lanes=n,e}function Qu(e,t,n,r){return(e=Vu(23,e,r,t)).elementType=B,e.lanes=n,e}function Xu(e,t,n){return(e=Vu(6,e,null,t)).lanes=n,e}function Yu(e,t,n){return(t=Vu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Gt(0),this.expirationTimes=Gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gt(0),this.mutableSourceEagerHydrationData=null}function $u(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function el(e,t,n,r){var i=t.current,o=fu(),s=du(i);e:if(n){t:{if(Xe(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(gi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var l=n.type;if(gi(l)){n=_i(n,l,u);break e}}n=u}else n=fi;return null===t.context?t.context=n:t.pendingContext=n,(t=co(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ho(i,t),pu(i,s,o),s}function tl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rl(e,t){nl(e,t),(e=e.alternate)&&nl(e,t)}function il(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Zu(e,t,null!=n&&!0===n.hydrate),t=Vu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,uo(t),e[ei]=n.current,Pr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ol(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function al(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=tl(a);s.call(e)}}el(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new il(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var e=tl(a);u.call(e)}}wu((function(){el(t,a,e,i)}))}return tl(a)}function sl(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ol(t))throw Error(a(200));return $u(e,t,null,n)}Js=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Ba=!0;else{if(0===(n&r)){switch(Ba=!1,t.tag){case 3:Ka(t),Jo();break;case 5:Oo(t);break;case 1:gi(t.type)&&wi(t);break;case 4:No(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;hi(Zi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Za(e,t,n):(hi(Fo,1&Fo.current),null!==(t=os(e,t,n))?t.sibling:null);hi(Fo,1&Fo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),hi(Fo,Fo.current),r)break;return null;case 23:case 24:return t.lanes=0,Ga(e,t,n)}return os(e,t,n)}Ba=0!==(16384&e.flags)}else Ba=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),oo(t,n),i=sa(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gi(r)){var o=!0;wi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,uo(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&go(t,r,s,e),i.updater=yo,t.stateNode=i,i._reactInternals=t,xo(t,r,e,n),t=qa(null,t,r,!0,o,n)}else t.tag=0,Fa(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"===typeof e)return Wu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===k)return 11;if(e===P)return 14}return 2}(i),e=Yi(i,e),o){case 0:t=Va(null,t,i,e,n);break e;case 1:t=Wa(null,t,i,e,n);break e;case 11:t=Ua(null,t,i,e,n);break e;case 14:t=ja(null,t,i,Yi(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Va(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Wa(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 3:if(Ka(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,lo(e,t),po(t,r,null,n),(r=t.memoizedState.element)===i)Jo(),t=os(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(Ho=Jr(t.stateNode.containerInfo.firstChild),jo=t,o=Go=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],Qo.push(o);for(n=Mo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fa(e,t,r,n),Jo();t=t.child}return t;case 5:return Oo(t),null===e&&Wo(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Vr(r,i)?s=null:null!==o&&Vr(r,o)&&(t.flags|=16),za(e,t),Fa(e,t,s,n),t.child;case 6:return null===e&&Wo(t),null;case 13:return Za(e,t,n);case 4:return No(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Co(t,null,r,n):Fa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ua(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 7:return Fa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fa(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var u=t.type._context;if(hi(Zi,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=cr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!pi.current){t=os(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&o)){1===u.tag&&((c=co(-1,n&-n)).tag=2,ho(u,c)),u.lanes|=n,null!==(c=u.alternate)&&(c.lanes|=n),io(u.return,n),l.lanes|=n;break}c=c.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Fa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,oo(t,n),r=r(i=ao(i,o.unstable_observedBits)),t.flags|=1,Fa(e,t,r,n),t.child;case 14:return o=Yi(i=t.type,t.pendingProps),ja(e,t,i,o=Yi(i.type,o),r,n);case 15:return Ha(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,gi(r)?(e=!0,wi(t)):e=!1,oo(t,n),_o(t,r,i),xo(t,r,i,n),qa(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return Ga(e,t,n)}throw Error(a(156,t.tag))},il.prototype.render=function(e){el(e,this._internalRoot,null,null)},il.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;el(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(pu(e,4,fu()),rl(e,4))},nt=function(e){13===e.tag&&(pu(e,67108864,fu()),rl(e,67108864))},rt=function(e){if(13===e.tag){var t=fu(),n=du(e);pu(e,n,t),rl(e,n)}},it=function(e,t){return t()},Ce=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=oi(r);if(!i)throw Error(a(90));Y(r),ne(r,i)}}}break;case"textarea":le(e,n);break;case"select":null!=(t=n.value)&&ae(e,!!n.multiple,t,!1)}},De=_u,Ne=function(e,t,n,r,i){var o=Ps;Ps|=4;try{return qi(98,e.bind(null,t,n,r,i))}finally{0===(Ps=o)&&(Ks(),Ji())}},Le=function(){0===(49&Ps)&&(function(){if(null!==iu){var e=iu;iu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,mu(e,zi())}))}Ji()}(),Lu())},Oe=function(e,t){var n=Ps;Ps|=2;try{return e(t)}finally{0===(Ps=n)&&(Ks(),Ji())}};var ul={Events:[ri,ii,oi,Re,Pe,Lu,{current:!1}]},ll={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cl={bundleType:ll.bundleType,version:ll.version,rendererPackageName:ll.rendererPackageName,rendererConfig:ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:ll.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hl.isDisabled&&hl.supportsFiber)try{Ei=hl.inject(cl),Si=hl}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ul,t.createPortal=sl,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ps;if(0!==(48&n))return e(t);Ps|=1;try{if(e)return qi(99,e.bind(null,t))}finally{Ps=n,Ji()}},t.hydrate=function(e,t,n){if(!ol(t))throw Error(a(200));return al(null,e,t,!0,n)},t.render=function(e,t,n){if(!ol(t))throw Error(a(200));return al(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ol(e))throw Error(a(40));return!!e._reactRootContainer&&(wu((function(){al(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=_u,t.unstable_createPortal=function(e,t){return sl(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ol(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return al(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},721:function(e,t,n){(e=n.nmd(e)).exports=function(t){var r={},i=n(725),o=n(791),a=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=60103,c=60106,h=60107,f=60108,d=60114,p=60109,v=60110,m=60112,g=60113,y=60120,b=60115,_=60116,w=60121,x=60129,E=60130,S=60131;if("function"===typeof Symbol&&Symbol.for){var A=Symbol.for;l=A("react.element"),c=A("react.portal"),h=A("react.fragment"),f=A("react.strict_mode"),d=A("react.profiler"),p=A("react.provider"),v=A("react.context"),m=A("react.forward_ref"),g=A("react.suspense"),y=A("react.suspense_list"),b=A("react.memo"),_=A("react.lazy"),w=A("react.block"),A("react.scope"),x=A("react.debug_trace_mode"),E=A("react.offscreen"),S=A("react.legacy_hidden")}var T="function"===typeof Symbol&&Symbol.iterator;function C(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}function M(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case h:return"Fragment";case c:return"Portal";case d:return"Profiler";case f:return"StrictMode";case g:return"Suspense";case y:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case v:return(e.displayName||"Context")+".Consumer";case p:return(e._context.displayName||"Context")+".Provider";case m:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case b:return M(e.type);case w:return M(e._render);case _:t=e._payload,e=e._init;try{return M(e(t))}catch(n){}}return null}function k(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function I(e){if(k(e)!==e)throw Error(s(188))}function R(e){var t=e.alternate;if(!t){if(null===(t=k(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return I(i),e;if(o===r)return I(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=o;break}if(u===r){a=!0,r=i,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,r=i;break}if(u===r){a=!0,r=o,n=i;break}u=u.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}function P(e){if(!(e=R(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function D(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var N,L=t.getPublicInstance,O=t.getRootHostContext,B=t.getChildHostContext,F=t.prepareForCommit,U=t.resetAfterCommit,j=t.createInstance,H=t.appendInitialChild,G=t.finalizeInitialChildren,z=t.prepareUpdate,V=t.shouldSetTextContent,W=t.createTextInstance,q=t.scheduleTimeout,K=t.cancelTimeout,J=t.noTimeout,Q=t.isPrimaryRenderer,X=t.supportsMutation,Y=t.supportsPersistence,Z=t.supportsHydration,$=t.getInstanceFromNode,ee=t.makeOpaqueHydratingObject,te=t.makeClientId,ne=t.beforeActiveInstanceBlur,re=t.afterActiveInstanceBlur,ie=t.preparePortalMount,oe=t.supportsTestSelectors,ae=t.findFiberRoot,se=t.getBoundingRect,ue=t.getTextContent,le=t.isHiddenSubtree,ce=t.matchAccessibilityRole,he=t.setFocusIfFocusable,fe=t.setupIntersectionObserver,de=t.appendChild,pe=t.appendChildToContainer,ve=t.commitTextUpdate,me=t.commitMount,ge=t.commitUpdate,ye=t.insertBefore,be=t.insertInContainerBefore,_e=t.removeChild,we=t.removeChildFromContainer,xe=t.resetTextContent,Ee=t.hideInstance,Se=t.hideTextInstance,Ae=t.unhideInstance,Te=t.unhideTextInstance,Ce=t.clearContainer,Me=t.cloneInstance,ke=t.createContainerChildSet,Ie=t.appendChildToContainerChildSet,Re=t.finalizeContainerChildren,Pe=t.replaceContainerChildren,De=t.cloneHiddenInstance,Ne=t.cloneHiddenTextInstance,Le=t.canHydrateInstance,Oe=t.canHydrateTextInstance,Be=t.isSuspenseInstancePending,Fe=t.isSuspenseInstanceFallback,Ue=t.getNextHydratableSibling,je=t.getFirstHydratableChild,He=t.hydrateInstance,Ge=t.hydrateTextInstance,ze=t.getNextHydratableInstanceAfterSuspenseInstance,Ve=t.commitHydratedContainer,We=t.commitHydratedSuspenseInstance;function qe(e){if(void 0===N)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var Ke=!1;function Je(e,t){if(!e||Ke)return"";Ke=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{Ke=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?qe(e):""}var Qe=[],Xe=-1;function Ye(e){return{current:e}}function Ze(e){0>Xe||(e.current=Qe[Xe],Qe[Xe]=null,Xe--)}function $e(e,t){Xe++,Qe[Xe]=e.current,e.current=t}var et={},tt=Ye(et),nt=Ye(!1),rt=et;function it(e,t){var n=e.type.contextTypes;if(!n)return et;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ot(e){return null!==(e=e.childContextTypes)&&void 0!==e}function at(){Ze(nt),Ze(tt)}function st(e,t,n){if(tt.current!==et)throw Error(s(168));$e(tt,t),$e(nt,n)}function ut(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(s(108,M(t)||"Unknown",o));return i({},n,r)}function lt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||et,rt=tt.current,$e(tt,e),$e(nt,nt.current),!0}function ct(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=ut(e,t,rt),r.__reactInternalMemoizedMergedChildContext=e,Ze(nt),Ze(tt),$e(tt,e)):Ze(nt),$e(nt,n)}var ht=null,ft=null;(0,a.unstable_now)();var dt=0,pt=8;function vt(e){if(0!==(1&e))return pt=15,1;if(0!==(2&e))return pt=14,2;if(0!==(4&e))return pt=13,4;var t=24&e;return 0!==t?(pt=12,t):0!==(32&e)?(pt=11,32):0!==(t=192&e)?(pt=10,t):0!==(256&e)?(pt=9,256):0!==(t=3584&e)?(pt=8,t):0!==(4096&e)?(pt=7,4096):0!==(t=4186112&e)?(pt=6,t):0!==(t=62914560&e)?(pt=5,t):67108864&e?(pt=4,67108864):0!==(134217728&e)?(pt=3,134217728):0!==(t=805306368&e)?(pt=2,t):0!==(1073741824&e)?(pt=1,1073741824):(pt=8,e)}function mt(e,t){var n=e.pendingLanes;if(0===n)return pt=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=pt=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=vt(u),i=pt):0!==(s&=o)&&(r=vt(s),i=pt)}else 0!==(o=n&~a)?(r=vt(o),i=pt):0!==s&&(r=vt(s),i=pt);if(0===r)return 0;if(r=n&((0>(r=31-xt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&a)){if(vt(t),i<=pt)return t;pt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-xt(t)),r|=e[n],t&=~i;return r}function gt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function yt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=bt(24&~t))?yt(10,t):e;case 10:return 0===(e=bt(192&~t))?yt(8,t):e;case 8:return 0===(e=bt(3584&~t))&&(0===(e=bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=bt(805306368&~t))&&(t=268435456),t}throw Error(s(358,e))}function bt(e){return e&-e}function _t(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function wt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-xt(t)]=n}var xt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Et(e)/St|0)|0},Et=Math.log,St=Math.LN2;var At=a.unstable_runWithPriority,Tt=a.unstable_scheduleCallback,Ct=a.unstable_cancelCallback,Mt=a.unstable_shouldYield,kt=a.unstable_requestPaint,It=a.unstable_now,Rt=a.unstable_getCurrentPriorityLevel,Pt=a.unstable_ImmediatePriority,Dt=a.unstable_UserBlockingPriority,Nt=a.unstable_NormalPriority,Lt=a.unstable_LowPriority,Ot=a.unstable_IdlePriority,Bt={},Ft=void 0!==kt?kt:function(){},Ut=null,jt=null,Ht=!1,Gt=It(),zt=1e4>Gt?It:function(){return It()-Gt};function Vt(){switch(Rt()){case Pt:return 99;case Dt:return 98;case Nt:return 97;case Lt:return 96;case Ot:return 95;default:throw Error(s(332))}}function Wt(e){switch(e){case 99:return Pt;case 98:return Dt;case 97:return Nt;case 96:return Lt;case 95:return Ot;default:throw Error(s(332))}}function qt(e,t){return e=Wt(e),At(e,t)}function Kt(e,t,n){return e=Wt(e),Tt(e,t,n)}function Jt(){if(null!==jt){var e=jt;jt=null,Ct(e)}Qt()}function Qt(){if(!Ht&&null!==Ut){Ht=!0;var e=0;try{var t=Ut;qt(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ut=null}catch(n){throw null!==Ut&&(Ut=Ut.slice(e+1)),Tt(Pt,Jt),n}finally{Ht=!1}}}var Xt=u.ReactCurrentBatchConfig;var Yt="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Zt=Object.prototype.hasOwnProperty;function $t(e,t){if(Yt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Zt.call(t,n[r])||!Yt(e[n[r]],t[n[r]]))return!1;return!0}function en(e){switch(e.tag){case 5:return qe(e.type);case 16:return qe("Lazy");case 13:return qe("Suspense");case 19:return qe("SuspenseList");case 0:case 2:case 15:return e=Je(e.type,!1);case 11:return e=Je(e.type.render,!1);case 22:return e=Je(e.type._render,!1);case 1:return e=Je(e.type,!0);default:return""}}function tn(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var nn=Ye(null),rn=null,on=null,an=null;function sn(){an=on=rn=null}function un(e,t){e=e.type._context,Q?($e(nn,e._currentValue),e._currentValue=t):($e(nn,e._currentValue2),e._currentValue2=t)}function ln(e){var t=nn.current;Ze(nn),e=e.type._context,Q?e._currentValue=t:e._currentValue2=t}function cn(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function hn(e,t){rn=e,an=on=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Gr=!0),e.firstContext=null)}function fn(e,t){if(an!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(an=e,t=1073741823),t={context:e,observedBits:t,next:null},null===on){if(null===rn)throw Error(s(308));on=t,rn.dependencies={lanes:0,firstContext:t,responders:null}}else on=on.next=t;return Q?e._currentValue:e._currentValue2}var dn=!1;function pn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function vn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gn(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function yn(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bn(e,t,n,r){var o=e.updateQueue;dn=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var l=u,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var h=e.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==s&&(null===f?h.firstBaseUpdate=c:f.next=c,h.lastBaseUpdate=l)}}if(null!==a){for(f=o.baseState,s=0,h=c=l=null;;){u=a.lane;var d=a.eventTime;if((r&u)===u){null!==h&&(h=h.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,v=a;switch(u=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,u);break e}f=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,f,u):p)||void 0===u)break e;f=i({},f,u);break e;case 2:dn=!0}}null!==a.callback&&(e.flags|=32,null===(u=o.effects)?o.effects=[a]:u.push(a))}else d={eventTime:d,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(c=h=d,l=f):h=h.next=d,s|=u;if(null===(a=a.next)){if(null===(u=o.shared.pending))break;a=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===h&&(l=f),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=h,ho|=s,e.lanes=s,e.memoizedState=f}}function _n(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var wn=(new o.Component).refs;function xn(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var En={isMounted:function(e){return!!(e=e._reactInternals)&&k(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Bo(),i=Fo(e),o=mn(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),gn(e,o),Uo(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Bo(),i=Fo(e),o=mn(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),gn(e,o),Uo(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Bo(),r=Fo(e),i=mn(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),gn(e,i),Uo(e,r,n)}};function Sn(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!$t(n,r)||!$t(i,o))}function An(e,t,n){var r=!1,i=et,o=t.contextType;return"object"===typeof o&&null!==o?o=fn(o):(i=ot(t)?rt:tt.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?it(e,i):et),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=En,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Tn(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&En.enqueueReplaceState(t,t.state,null)}function Cn(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=wn,pn(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=fn(o):(o=ot(t)?rt:tt.current,i.context=it(e,o)),bn(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(xn(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&En.enqueueReplaceState(i,i.state,null),bn(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var Mn=Array.isArray;function kn(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===wn&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function In(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Rn(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Sa(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ma(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=kn(e,t,n),r.return=e,r):((r=Aa(n.type,n.key,n.props,null,e.mode,r)).ref=kn(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ka(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,o){return null===t||7!==t.tag?((t=Ta(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function v(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Ma(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case l:return(n=Aa(t.type,t.key,t.props,null,e.mode,n)).ref=kn(e,null,t),n.return=e,n;case c:return(t=ka(t,e.mode,n)).return=e,t}if(Mn(t)||C(t))return(t=Ta(t,e.mode,n,null)).return=e,t;In(e,t)}return null}function m(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===i?n.type===h?p(e,t,n.props.children,r,i):f(e,t,n,r):null;case c:return n.key===i?d(e,t,n,r):null}if(Mn(n)||C(n))return null!==i?null:p(e,t,n,r,null);In(e,n)}return null}function g(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case l:return e=e.get(null===r.key?n:r.key)||null,r.type===h?p(t,e,r.props.children,i,r.key):f(t,e,r,i);case c:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Mn(r)||C(r))return p(t,e=e.get(n)||null,r,i,null);In(t,r)}return null}function y(i,a,s,u){for(var l=null,c=null,h=a,f=a=0,d=null;null!==h&&f<s.length;f++){h.index>f?(d=h,h=null):d=h.sibling;var p=m(i,h,s[f],u);if(null===p){null===h&&(h=d);break}e&&h&&null===p.alternate&&t(i,h),a=o(p,a,f),null===c?l=p:c.sibling=p,c=p,h=d}if(f===s.length)return n(i,h),l;if(null===h){for(;f<s.length;f++)null!==(h=v(i,s[f],u))&&(a=o(h,a,f),null===c?l=h:c.sibling=h,c=h);return l}for(h=r(i,h);f<s.length;f++)null!==(d=g(h,i,f,s[f],u))&&(e&&null!==d.alternate&&h.delete(null===d.key?f:d.key),a=o(d,a,f),null===c?l=d:c.sibling=d,c=d);return e&&h.forEach((function(e){return t(i,e)})),l}function b(i,a,u,l){var c=C(u);if("function"!==typeof c)throw Error(s(150));if(null==(u=c.call(u)))throw Error(s(151));for(var h=c=null,f=a,d=a=0,p=null,y=u.next();null!==f&&!y.done;d++,y=u.next()){f.index>d?(p=f,f=null):p=f.sibling;var b=m(i,f,y.value,l);if(null===b){null===f&&(f=p);break}e&&f&&null===b.alternate&&t(i,f),a=o(b,a,d),null===h?c=b:h.sibling=b,h=b,f=p}if(y.done)return n(i,f),c;if(null===f){for(;!y.done;d++,y=u.next())null!==(y=v(i,y.value,l))&&(a=o(y,a,d),null===h?c=y:h.sibling=y,h=y);return c}for(f=r(i,f);!y.done;d++,y=u.next())null!==(y=g(f,i,d,y.value,l))&&(e&&null!==y.alternate&&f.delete(null===y.key?d:y.key),a=o(y,a,d),null===h?c=y:h.sibling=y,h=y);return e&&f.forEach((function(e){return t(i,e)})),c}return function(e,r,o,u){var f="object"===typeof o&&null!==o&&o.type===h&&null===o.key;f&&(o=o.props.children);var d="object"===typeof o&&null!==o;if(d)switch(o.$$typeof){case l:e:{for(d=o.key,f=r;null!==f;){if(f.key===d){if(7===f.tag){if(o.type===h){n(e,f.sibling),(r=i(f,o.props.children)).return=e,e=r;break e}}else if(f.elementType===o.type){n(e,f.sibling),(r=i(f,o.props)).ref=kn(e,f,o),r.return=e,e=r;break e}n(e,f);break}t(e,f),f=f.sibling}o.type===h?((r=Ta(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=Aa(o.type,o.key,o.props,null,e.mode,u)).ref=kn(e,r,o),u.return=e,e=u)}return a(e);case c:e:{for(f=o.key;null!==r;){if(r.key===f){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=ka(o,e.mode,u)).return=e,e=r}return a(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Ma(o,e.mode,u)).return=e,e=r),a(e);if(Mn(o))return y(e,r,o,u);if(C(o))return b(e,r,o,u);if(d&&In(e,o),"undefined"===typeof o&&!f)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,M(e.type)||"Component"))}return n(e,r)}}var Pn=Rn(!0),Dn=Rn(!1),Nn={},Ln=Ye(Nn),On=Ye(Nn),Bn=Ye(Nn);function Fn(e){if(e===Nn)throw Error(s(174));return e}function Un(e,t){$e(Bn,t),$e(On,e),$e(Ln,Nn),e=O(t),Ze(Ln),$e(Ln,e)}function jn(){Ze(Ln),Ze(On),Ze(Bn)}function Hn(e){var t=Fn(Bn.current),n=Fn(Ln.current);n!==(t=B(n,e.type,t))&&($e(On,e),$e(Ln,t))}function Gn(e){On.current===e&&(Ze(Ln),Ze(On))}var zn=Ye(0);function Vn(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Be(n)||Fe(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wn=null,qn=null,Kn=!1;function Jn(e,t){var n=xa(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Qn(e,t){switch(e.tag){case 5:return null!==(t=Le(t,e.type,e.pendingProps))&&(e.stateNode=t,!0);case 6:return null!==(t=Oe(t,e.pendingProps))&&(e.stateNode=t,!0);default:return!1}}function Xn(e){if(Kn){var t=qn;if(t){var n=t;if(!Qn(e,t)){if(!(t=Ue(n))||!Qn(e,t))return e.flags=-1025&e.flags|2,Kn=!1,void(Wn=e);Jn(Wn,n)}Wn=e,qn=je(t)}else e.flags=-1025&e.flags|2,Kn=!1,Wn=e}}function Yn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Wn=e}function Zn(e){if(!Z||e!==Wn)return!1;if(!Kn)return Yn(e),Kn=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!V(t,e.memoizedProps))for(t=qn;t;)Jn(e,t),t=Ue(t);if(Yn(e),13===e.tag){if(!Z)throw Error(s(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));qn=ze(e)}else qn=Wn?Ue(e.stateNode):null;return!0}function $n(){Z&&(qn=Wn=null,Kn=!1)}var er=[];function tr(){for(var e=0;e<er.length;e++){var t=er[e];Q?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}er.length=0}var nr=u.ReactCurrentDispatcher,rr=u.ReactCurrentBatchConfig,ir=0,or=null,ar=null,sr=null,ur=!1,lr=!1;function cr(){throw Error(s(321))}function hr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yt(e[n],t[n]))return!1;return!0}function fr(e,t,n,r,i,o){if(ir=o,or=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,nr.current=null===e||null===e.memoizedState?Fr:Ur,e=n(r,i),lr){o=0;do{if(lr=!1,!(25>o))throw Error(s(301));o+=1,sr=ar=null,t.updateQueue=null,nr.current=jr,e=n(r,i)}while(lr)}if(nr.current=Br,t=null!==ar&&null!==ar.next,ir=0,sr=ar=or=null,ur=!1,t)throw Error(s(300));return e}function dr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===sr?or.memoizedState=sr=e:sr=sr.next=e,sr}function pr(){if(null===ar){var e=or.alternate;e=null!==e?e.memoizedState:null}else e=ar.next;var t=null===sr?or.memoizedState:sr.next;if(null!==t)sr=t,ar=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ar=e).memoizedState,baseState:ar.baseState,baseQueue:ar.baseQueue,queue:ar.queue,next:null},null===sr?or.memoizedState=sr=e:sr=sr.next=e}return sr}function vr(e,t){return"function"===typeof t?t(e):t}function mr(e){var t=pr(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ar,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=a=o=null,l=i;do{var c=l.lane;if((ir&c)===c)null!==u&&(u=u.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===e?l.eagerState:e(r,l.action);else{var h={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(a=u=h,o=r):u=u.next=h,or.lanes|=c,ho|=c}l=l.next}while(null!==l&&l!==i);null===u?o=r:u.next=a,Yt(r,t.memoizedState)||(Gr=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function gr(e){var t=pr(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);Yt(o,t.memoizedState)||(Gr=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function yr(e,t,n){var r=t._getVersion;r=r(t._source);var i=Q?t._workInProgressVersionPrimary:t._workInProgressVersionSecondary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(ir&e)===e)&&(Q?t._workInProgressVersionPrimary=r:t._workInProgressVersionSecondary=r,er.push(t))),e)return n(t._source);throw er.push(t),Error(s(350))}function br(e,t,n,r){var i=ro;if(null===i)throw Error(s(349));var o=t._getVersion,a=o(t._source),u=nr.current,l=u.useState((function(){return yr(i,t,n)})),c=l[1],h=l[0];l=sr;var f=e.memoizedState,d=f.refs,p=d.getSnapshot,v=f.source;f=f.subscribe;var m=or;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=c;var e=o(t._source);if(!Yt(a,e)){e=n(t._source),Yt(h,e)||(c(e),e=Fo(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,s=e;0<s;){var u=31-xt(s),l=1<<u;r[u]|=e,s&=~l}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=Fo(m);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,r]),Yt(p,n)&&Yt(v,t)&&Yt(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:vr,lastRenderedState:h}).dispatch=c=Or.bind(null,or,e),l.queue=e,l.baseQueue=null,h=yr(i,t,n),l.memoizedState=l.baseState=h),h}function _r(e,t,n){return br(pr(),e,t,n)}function wr(e){var t=dr();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:vr,lastRenderedState:e}).dispatch=Or.bind(null,or,e),[t.memoizedState,e]}function xr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=or.updateQueue)?(t={lastEffect:null},or.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Er(e){return e={current:e},dr().memoizedState=e}function Sr(){return pr().memoizedState}function Ar(e,t,n,r){var i=dr();or.flags|=e,i.memoizedState=xr(1|t,n,void 0,void 0===r?null:r)}function Tr(e,t,n,r){var i=pr();r=void 0===r?null:r;var o=void 0;if(null!==ar){var a=ar.memoizedState;if(o=a.destroy,null!==r&&hr(r,a.deps))return void xr(t,n,o,r)}or.flags|=e,i.memoizedState=xr(1|t,n,o,r)}function Cr(e,t){return Ar(516,4,e,t)}function Mr(e,t){return Tr(516,4,e,t)}function kr(e,t){return Tr(4,2,e,t)}function Ir(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Rr(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Tr(4,2,Ir.bind(null,t,e),n)}function Pr(){}function Dr(e,t){var n=pr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&hr(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Nr(e,t){var n=pr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&hr(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Lr(e,t){var n=Vt();qt(98>n?98:n,(function(){e(!0)})),qt(97<n?97:n,(function(){var n=rr.transition;rr.transition=1;try{e(!1),t()}finally{rr.transition=n}}))}function Or(e,t,n){var r=Bo(),i=Fo(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===or||null!==a&&a===or)lr=ur=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,Yt(u,s))return}catch(l){}Uo(e,i,r)}}var Br={readContext:fn,useCallback:cr,useContext:cr,useEffect:cr,useImperativeHandle:cr,useLayoutEffect:cr,useMemo:cr,useReducer:cr,useRef:cr,useState:cr,useDebugValue:cr,useDeferredValue:cr,useTransition:cr,useMutableSource:cr,useOpaqueIdentifier:cr,unstable_isNewReconciler:!1},Fr={readContext:fn,useCallback:function(e,t){return dr().memoizedState=[e,void 0===t?null:t],e},useContext:fn,useEffect:Cr,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ar(4,2,Ir.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ar(4,2,e,t)},useMemo:function(e,t){var n=dr();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=dr();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Or.bind(null,or,e),[r.memoizedState,e]},useRef:Er,useState:wr,useDebugValue:Pr,useDeferredValue:function(e){var t=wr(e),n=t[0],r=t[1];return Cr((function(){var t=rr.transition;rr.transition=1;try{r(e)}finally{rr.transition=t}}),[e]),n},useTransition:function(){var e=wr(!1),t=e[0];return Er(e=Lr.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=dr();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},br(r,e,t,n)},useOpaqueIdentifier:function(){if(Kn){var e=!1,t=ee((function(){throw e||(e=!0,n(te())),Error(s(355))})),n=wr(t)[1];return 0===(2&or.mode)&&(or.flags|=516,xr(5,(function(){n(te())}),void 0,null)),t}return wr(t=te()),t},unstable_isNewReconciler:!1},Ur={readContext:fn,useCallback:Dr,useContext:fn,useEffect:Mr,useImperativeHandle:Rr,useLayoutEffect:kr,useMemo:Nr,useReducer:mr,useRef:Sr,useState:function(){return mr(vr)},useDebugValue:Pr,useDeferredValue:function(e){var t=mr(vr),n=t[0],r=t[1];return Mr((function(){var t=rr.transition;rr.transition=1;try{r(e)}finally{rr.transition=t}}),[e]),n},useTransition:function(){var e=mr(vr)[0];return[Sr().current,e]},useMutableSource:_r,useOpaqueIdentifier:function(){return mr(vr)[0]},unstable_isNewReconciler:!1},jr={readContext:fn,useCallback:Dr,useContext:fn,useEffect:Mr,useImperativeHandle:Rr,useLayoutEffect:kr,useMemo:Nr,useReducer:gr,useRef:Sr,useState:function(){return gr(vr)},useDebugValue:Pr,useDeferredValue:function(e){var t=gr(vr),n=t[0],r=t[1];return Mr((function(){var t=rr.transition;rr.transition=1;try{r(e)}finally{rr.transition=t}}),[e]),n},useTransition:function(){var e=gr(vr)[0];return[Sr().current,e]},useMutableSource:_r,useOpaqueIdentifier:function(){return gr(vr)[0]},unstable_isNewReconciler:!1},Hr=u.ReactCurrentOwner,Gr=!1;function zr(e,t,n,r){t.child=null===e?Dn(t,null,n,r):Pn(t,e.child,n,r)}function Vr(e,t,n,r,i){n=n.render;var o=t.ref;return hn(t,i),r=fr(e,t,n,r,o,i),null===e||Gr?(t.flags|=1,zr(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,hi(e,t,i))}function Wr(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||Ea(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Aa(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,qr(e,t,a,r,i,o))}return a=e.child,0===(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:$t)(i,r)&&e.ref===t.ref)?hi(e,t,o):(t.flags|=1,(e=Sa(a,r)).ref=t.ref,e.return=t,t.child=e)}function qr(e,t,n,r,i,o){if(null!==e&&$t(e.memoizedProps,r)&&e.ref===t.ref){if(Gr=!1,0===(o&i))return t.lanes=e.lanes,hi(e,t,o);0!==(16384&e.flags)&&(Gr=!0)}return Qr(e,t,n,r,o)}function Kr(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},Ko(t,n);else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Ko(t,e),null;t.memoizedState={baseLanes:0},Ko(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ko(t,r);return zr(e,t,i,n),t.child}function Jr(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Qr(e,t,n,r,i){var o=ot(n)?rt:tt.current;return o=it(t,o),hn(t,i),n=fr(e,t,n,r,o,i),null===e||Gr?(t.flags|=1,zr(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,hi(e,t,i))}function Xr(e,t,n,r,i){if(ot(n)){var o=!0;lt(t)}else o=!1;if(hn(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),An(t,n,r),Cn(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=fn(l):l=it(t,l=ot(n)?rt:tt.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==l)&&Tn(t,a,r,l),dn=!1;var f=t.memoizedState;a.state=f,bn(t,r,a,i),u=t.memoizedState,s!==r||f!==u||nt.current||dn?("function"===typeof c&&(xn(t,n,c,r),u=t.memoizedState),(s=dn||Sn(t,n,s,r,f,u,l))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4)):("function"===typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,vn(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:tn(t.type,s),a.props=l,h=t.pendingProps,f=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=fn(u):u=it(t,u=ot(n)?rt:tt.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||f!==u)&&Tn(t,a,r,u),dn=!1,f=t.memoizedState,a.state=f,bn(t,r,a,i);var p=t.memoizedState;s!==h||f!==p||nt.current||dn?("function"===typeof d&&(xn(t,n,d,r),p=t.memoizedState),(l=dn||Sn(t,n,l,r,f,p,u))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return Yr(e,t,n,r,o,i)}function Yr(e,t,n,r,i,o){Jr(e,t);var a=0!==(64&t.flags);if(!r&&!a)return i&&ct(t,n,!1),hi(e,t,o);r=t.stateNode,Hr.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Pn(t,e.child,null,o),t.child=Pn(t,null,s,o)):zr(e,t,s,o),t.memoizedState=r.state,i&&ct(t,n,!0),t.child}function Zr(e){var t=e.stateNode;t.pendingContext?st(0,t.pendingContext,t.pendingContext!==t.context):t.context&&st(0,t.context,!1),Un(e,t.containerInfo)}var $r,ei,ti,ni,ri={dehydrated:null,retryLane:0};function ii(e,t,n){var r,i=t.pendingProps,o=zn.current,a=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),$e(zn,1&o),null===e?(void 0!==i.fallback&&Xn(t),e=i.children,o=i.fallback,a?(e=oi(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=ri,e):"number"===typeof i.unstable_expectedLoadTime?(e=oi(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=ri,t.lanes=33554432,e):((n=Ca({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=si(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=ri,i):(n=ai(e,t,i.children,n),t.memoizedState=null,n))}function oi(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Ca(t,i,0,null),n=Ta(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function ai(e,t,n,r){var i=e.child;return e=i.sibling,n=Sa(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function si(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Sa(a,s),null!==e?r=Sa(e,r):(r=Ta(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ui(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),cn(e.return,t)}function li(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function ci(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(zr(e,t,r.children,n),0!==(2&(r=zn.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ui(e,n);else if(19===e.tag)ui(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if($e(zn,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Vn(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),li(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Vn(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}li(t,!0,n,null,o,t.lastEffect);break;case"together":li(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function hi(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ho|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Sa(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Sa(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function fi(e){e.flags|=4}if(X)$r=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)H(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ei=function(){},ti=function(e,t,n,r,i){if((e=e.memoizedProps)!==r){var o=t.stateNode,a=Fn(Ln.current);n=z(o,n,e,r,i,a),(t.updateQueue=n)&&fi(t)}},ni=function(e,t,n,r){n!==r&&fi(t)};else if(Y){$r=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=De(o,i.type,i.memoizedProps,i)),H(e,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=Ne(o,i.memoizedProps,i)),H(e,o);else if(4!==i.tag){if(13===i.tag&&0!==(4&i.flags)&&(o=null!==i.memoizedState)){var a=i.child;if(null!==a&&(null!==a.child&&(a.child.return=a,$r(e,a,!0,o)),null!==(o=a.sibling))){o.return=i,i=o;continue}}if(null!==i.child){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var di=function e(t,n,r,i){for(var o=n.child;null!==o;){if(5===o.tag){var a=o.stateNode;r&&i&&(a=De(a,o.type,o.memoizedProps,o)),Ie(t,a)}else if(6===o.tag)a=o.stateNode,r&&i&&(a=Ne(a,o.memoizedProps,o)),Ie(t,a);else if(4!==o.tag){if(13===o.tag&&0!==(4&o.flags)&&(a=null!==o.memoizedState)){var s=o.child;if(null!==s&&(null!==s.child&&(s.child.return=s,e(t,s,!0,a)),null!==(a=s.sibling))){a.return=o,o=a;continue}}if(null!==o.child){o.child.return=o,o=o.child;continue}}if(o===n)break;for(;null===o.sibling;){if(null===o.return||o.return===n)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};ei=function(e){var t=e.stateNode;if(null!==e.firstEffect){var n=t.containerInfo,r=ke(n);di(r,e,!1,!1),t.pendingChildren=r,fi(e),Re(n,r)}},ti=function(e,t,n,r,i){var o=e.stateNode,a=e.memoizedProps;if((e=null===t.firstEffect)&&a===r)t.stateNode=o;else{var s=t.stateNode,u=Fn(Ln.current),l=null;a!==r&&(l=z(s,n,a,r,i,u)),e&&null===l?t.stateNode=o:(o=Me(o,l,n,a,r,t,e,s),G(o,n,r,i,u)&&fi(t),t.stateNode=o,e?fi(t):$r(o,t,!1,!1))}},ni=function(e,t,n,r){n!==r?(e=Fn(Bn.current),n=Fn(Ln.current),t.stateNode=W(r,e,n,t),fi(t)):t.stateNode=e.stateNode}}else ei=function(){},ti=function(){},ni=function(){};function pi(e,t){if(!Kn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function vi(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return ot(t.type)&&at(),null;case 3:return jn(),Ze(nt),Ze(tt),tr(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Zn(t)?fi(t):r.hydrate||(t.flags|=256)),ei(t),null;case 5:Gn(t);var i=Fn(Bn.current);if(n=t.type,null!==e&&null!=t.stateNode)ti(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(s(166));return null}if(e=Fn(Ln.current),Zn(t)){if(!Z)throw Error(s(175));e=He(t.stateNode,t.type,t.memoizedProps,i,e,t),t.updateQueue=e,null!==e&&fi(t)}else{var o=j(n,r,i,e,t);$r(o,t,!1,!1),t.stateNode=o,G(o,n,r,i,e)&&fi(t)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)ni(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(e=Fn(Bn.current),i=Fn(Ln.current),Zn(t)){if(!Z)throw Error(s(176));Ge(t.stateNode,t.memoizedProps,t)&&fi(t)}else t.stateNode=W(r,e,i,t)}return null;case 13:return Ze(zn),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,i=!1,null===e?void 0!==t.memoizedProps.fallback&&Zn(t):i=null!==e.memoizedState,r&&!i&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&zn.current)?0===uo&&(uo=3):(0!==uo&&3!==uo||(uo=4),null===ro||0===(134217727&ho)&&0===(134217727&fo)||zo(ro,oo))),Y&&r&&(t.flags|=4),X&&(r||i)&&(t.flags|=4),null);case 4:return jn(),ei(t),null===e&&ie(t.stateNode.containerInfo),null;case 10:return ln(t),null;case 19:if(Ze(zn),null===(r=t.memoizedState))return null;if(i=0!==(64&t.flags),null===(o=r.rendering))if(i)pi(r,!1);else{if(0!==uo||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(o=Vn(e))){for(t.flags|=64,pi(r,!1),null!==(e=o.updateQueue)&&(t.updateQueue=e,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,e=n,r=t.child;null!==r;)n=e,(i=r).flags&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,null===(o=i.alternate)?(i.childLanes=0,i.lanes=n,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext}),r=r.sibling;return $e(zn,1&zn.current|2),t.child}e=e.sibling}null!==r.tail&&zt()>go&&(t.flags|=64,i=!0,pi(r,!1),t.lanes=33554432)}else{if(!i)if(null!==(e=Vn(o))){if(t.flags|=64,i=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),pi(r,!0),null===r.tail&&"hidden"===r.tailMode&&!o.alternate&&!Kn)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zt()-r.renderingStartTime>go&&1073741824!==n&&(t.flags|=64,i=!0,pi(r,!1),t.lanes=33554432);r.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=r.last)?e.sibling=o:t.child=o,r.last=o)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zt(),e.sibling=null,t=zn.current,$e(zn,i?1&t|2:1&t),e):null;case 23:case 24:return Jo(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(s(156,t.tag))}function mi(e){switch(e.tag){case 1:ot(e.type)&&at();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(jn(),Ze(nt),Ze(tt),tr(),0!==(64&(t=e.flags)))throw Error(s(285));return e.flags=-4097&t|64,e;case 5:return Gn(e),null;case 13:return Ze(zn),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return Ze(zn),null;case 4:return jn(),null;case 10:return ln(e),null;case 23:case 24:return Jo(),null;default:return null}}function gi(e,t){try{var n="",r=t;do{n+=en(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function yi(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var bi="function"===typeof WeakMap?WeakMap:Map;function _i(e,t,n){(n=mn(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){wo||(wo=!0,xo=r),yi(0,t)},n}function wi(e,t,n){(n=mn(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return yi(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Eo?Eo=new Set([this]):Eo.add(this),yi(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var xi="function"===typeof WeakSet?WeakSet:Set;function Ei(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){ha(e,n)}else t.current=null}function Si(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:tn(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(X&&256&t.flags&&Ce(t.stateNode.containerInfo))}throw Error(s(163))}function Ai(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function Ti(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(ua(n,e),sa(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:tn(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&_n(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=L(n.child.stateNode);break;case 1:e=n.child.stateNode}_n(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&me(e,n.type,n.memoizedProps,n));case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(Z&&null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&We(n)))))}throw Error(s(163))}function Ci(e,t){if(X)for(var n=e;;){if(5===n.tag){var r=n.stateNode;t?Ee(r):Ae(n.stateNode,n.memoizedProps)}else if(6===n.tag)r=n.stateNode,t?Se(r):Te(r,n.memoizedProps);else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function Mi(e,t){if(ft&&"function"===typeof ft.onCommitFiberUnmount)try{ft.onCommitFiberUnmount(ht,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))ua(t,n);else{r=t;try{i()}catch(o){ha(r,o)}}n=n.next}while(n!==e)}break;case 1:if(Ei(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){ha(t,o)}break;case 5:Ei(t);break;case 4:X?Li(e,t):Y&&Y&&(t=t.stateNode.containerInfo,e=ke(t),Pe(t,e))}}function ki(e,t){for(var n=t;;)if(Mi(e,n),null===n.child||X&&4===n.tag){if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}else n.child.return=n,n=n.child}function Ii(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Ri(e){return 5===e.tag||3===e.tag||4===e.tag}function Pi(e){if(X){e:{for(var t=e.return;null!==t;){if(Ri(t))break e;t=t.return}throw Error(s(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.flags&&(xe(t),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Ri(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Di(e,n,t):Ni(e,n,t)}}function Di(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?be(n,e,t):pe(n,e);else if(4!==r&&null!==(e=e.child))for(Di(e,t,n),e=e.sibling;null!==e;)Di(e,t,n),e=e.sibling}function Ni(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?ye(n,e,t):de(n,e);else if(4!==r&&null!==(e=e.child))for(Ni(e,t,n),e=e.sibling;null!==e;)Ni(e,t,n),e=e.sibling}function Li(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(s(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag)ki(e,i),r?we(n,i.stateNode):_e(n,i.stateNode);else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(Mi(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Oi(e,t){if(X){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void Ai(3,t);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&ge(n,o,i,e,r,t)}return;case 6:if(null===t.stateNode)throw Error(s(162));return n=t.memoizedProps,void ve(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(Z&&(t=t.stateNode,t.hydrate&&(t.hydrate=!1,Ve(t.containerInfo))));case 13:return Bi(t),void Fi(t);case 19:return void Fi(t);case 23:case 24:return void Ci(t,null!==t.memoizedState)}throw Error(s(163))}switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void Ai(3,t);case 12:case 23:case 24:return;case 13:return Bi(t),void Fi(t);case 19:return void Fi(t);case 3:Z&&((n=t.stateNode).hydrate&&(n.hydrate=!1,Ve(n.containerInfo)))}e:if(Y){switch(t.tag){case 1:case 5:case 6:case 20:break e;case 3:case 4:t=t.stateNode,Pe(t.containerInfo,t.pendingChildren);break e}throw Error(s(163))}}function Bi(e){null!==e.memoizedState&&(mo=zt(),X&&Ci(e.child,!0))}function Fi(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new xi),t.forEach((function(t){var r=da.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ui(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var ji=0,Hi=1,Gi=2,zi=3,Vi=4;if("function"===typeof Symbol&&Symbol.for){var Wi=Symbol.for;ji=Wi("selector.component"),Hi=Wi("selector.has_pseudo_class"),Gi=Wi("selector.role"),zi=Wi("selector.test_id"),Vi=Wi("selector.text")}function qi(e){var t=$(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(s(364));return t}if(null===(e=ae(e)))throw Error(s(362));return e.stateNode.current}function Ki(e,t){switch(t.$$typeof){case ji:if(e.type===t.value)return!0;break;case Hi:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],o=t[i];if(5!==r.tag||!le(r)){for(;null!=o&&Ki(r,o);)o=t[++i];if(i===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,i),r=r.sibling}}t=!1}return t;case Gi:if(5===e.tag&&ce(e.stateNode,t.value))return!0;break;case Vi:if((5===e.tag||6===e.tag)&&(null!==(e=ue(e))&&0<=e.indexOf(t.value)))return!0;break;case zi:if(5===e.tag&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(s(365,t))}return!1}function Ji(e){switch(e.$$typeof){case ji:return"<"+(M(e.value)||"Unknown")+">";case Hi:return":has("+(Ji(e)||"")+")";case Gi:return'[role="'+e.value+'"]';case Vi:return'"'+e.value+'"';case zi:return'[data-testname="'+e.value+'"]';default:throw Error(s(365,e))}}function Qi(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],o=e[r++],a=t[o];if(5!==i.tag||!le(i)){for(;null!=a&&Ki(i,a);)a=t[++o];if(o===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,o),i=i.sibling}}return n}function Xi(e,t){if(!oe)throw Error(s(363));e=Qi(e=qi(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(5===r.tag)le(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}var Yi=null;var Zi=Math.ceil,$i=u.ReactCurrentDispatcher,eo=u.ReactCurrentOwner,to=u.IsSomeRendererActing,no=0,ro=null,io=null,oo=0,ao=0,so=Ye(0),uo=0,lo=null,co=0,ho=0,fo=0,po=0,vo=null,mo=0,go=1/0;function yo(){go=zt()+500}var bo,_o=null,wo=!1,xo=null,Eo=null,So=!1,Ao=null,To=90,Co=[],Mo=[],ko=null,Io=0,Ro=null,Po=-1,Do=0,No=0,Lo=null,Oo=!1;function Bo(){return 0!==(48&no)?zt():-1!==Po?Po:Po=zt()}function Fo(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Vt()?1:2;if(0===Do&&(Do=co),0!==Xt.transition){0!==No&&(No=null!==vo?vo.pendingLanes:0),e=Do;var t=4186112&~No;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Vt(),0!==(4&no)&&98===e?e=yt(12,Do):e=yt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),Do),e}function Uo(e,t,n){if(50<Io)throw Io=0,Ro=null,Error(s(185));if(null===(e=jo(e,t)))return null;wt(e,t,n),e===ro&&(fo|=t,4===uo&&zo(e,oo));var r=Vt();1===t?0!==(8&no)&&0===(48&no)?Vo(e):(Ho(e,n),0===no&&(yo(),Jt())):(0===(4&no)||98!==r&&99!==r||(null===ko?ko=new Set([e]):ko.add(e)),Ho(e,n)),vo=e}function jo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Ho(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var u=31-xt(a),l=1<<u,c=o[u];if(-1===c){if(0===(l&r)||0!==(l&i)){c=t,vt(l);var h=pt;o[u]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=t&&(e.expiredLanes|=l);a&=~l}if(r=mt(e,e===ro?oo:0),t=pt,0===r)null!==n&&(n!==Bt&&Ct(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Bt&&Ct(n)}15===t?(n=Vo.bind(null,e),null===Ut?(Ut=[n],jt=Tt(Pt,Qt)):Ut.push(n),n=Bt):14===t?n=Kt(99,Vo.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,e))}}(t),n=Kt(n,Go.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function Go(e){if(Po=-1,No=Do=0,0!==(48&no))throw Error(s(327));var t=e.callbackNode;if(aa()&&e.callbackNode!==t)return null;var n=mt(e,e===ro?oo:0);if(0===n)return null;var r=n,i=no;no|=16;var o=Yo();for(ro===e&&oo===r||(yo(),Qo(e,r));;)try{ea();break}catch(u){Xo(e,u)}if(sn(),$i.current=o,no=i,null!==io?r=0:(ro=null,oo=0,r=uo),0!==(co&fo))Qo(e,0);else if(0!==r){if(2===r&&(no|=64,e.hydrate&&(e.hydrate=!1,Ce(e.containerInfo)),0!==(n=gt(e))&&(r=Zo(e,n))),1===r)throw t=lo,Qo(e,0),zo(e,n),Ho(e,zt()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(s(345));case 2:case 5:ra(e);break;case 3:if(zo(e,n),(62914560&n)===n&&10<(r=mo+500-zt())){if(0!==mt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){Bo(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=q(ra.bind(null,e),r);break}ra(e);break;case 4:if(zo(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-xt(n);o=1<<a,(a=r[a])>i&&(i=a),n&=~o}if(n=i,10<(n=(120>(n=zt()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Zi(n/1960))-n)){e.timeoutHandle=q(ra.bind(null,e),n);break}ra(e);break;default:throw Error(s(329))}}return Ho(e,zt()),e.callbackNode===t?Go.bind(null,e):null}function zo(e,t){for(t&=~po,t&=~fo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-xt(t),r=1<<n;e[n]=-1,t&=~r}}function Vo(e){if(0!==(48&no))throw Error(s(327));if(aa(),e===ro&&0!==(e.expiredLanes&oo)){var t=oo,n=Zo(e,t);0!==(co&fo)&&(n=Zo(e,t=mt(e,t)))}else n=Zo(e,t=mt(e,0));if(0!==e.tag&&2===n&&(no|=64,e.hydrate&&(e.hydrate=!1,Ce(e.containerInfo)),0!==(t=gt(e))&&(n=Zo(e,t))),1===n)throw n=lo,Qo(e,0),zo(e,t),Ho(e,zt()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,ra(e),Ho(e,zt()),null}function Wo(e,t){var n=no;no|=1;try{return e(t)}finally{0===(no=n)&&(yo(),Jt())}}function qo(e,t){var n=no;if(0!==(48&n))return e(t);no|=1;try{if(e)return qt(99,e.bind(null,t))}finally{no=n,Jt()}}function Ko(e,t){$e(so,ao),ao|=t,co|=t}function Jo(){ao=so.current,Ze(so)}function Qo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==J&&(e.timeoutHandle=J,K(n)),null!==io)for(n=io.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&at();break;case 3:jn(),Ze(nt),Ze(tt),tr();break;case 5:Gn(r);break;case 4:jn();break;case 13:case 19:Ze(zn);break;case 10:ln(r);break;case 23:case 24:Jo()}n=n.return}ro=e,io=Sa(e.current,null),oo=ao=co=t,uo=0,lo=null,po=fo=ho=0}function Xo(e,t){for(;;){var n=io;try{if(sn(),nr.current=Br,ur){for(var r=or.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ur=!1}if(ir=0,sr=ar=or=null,lr=!1,eo.current=null,null===n||null===n.return){uo=1,lo=t,io=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=oo,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&zn.current),f=a;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=f.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!h)}}if(d){var m=f.updateQueue;if(null===m){var g=new Set;g.add(l),f.updateQueue=g}else m.add(l);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=mn(-1,1);y.tag=2,gn(s,y)}s.lanes|=1;break e}u=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new bi,u=new Set,b.set(l,u)):void 0===(u=b.get(l))&&(u=new Set,b.set(l,u)),!u.has(s)){u.add(s);var _=fa.bind(null,o,l,s);l.then(_,_)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((M(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==uo&&(uo=2),u=gi(u,s),f=a;do{switch(f.tag){case 3:o=u,f.flags|=4096,t&=-t,f.lanes|=t,yn(f,_i(0,o,t));break e;case 1:o=u;var w=f.type,x=f.stateNode;if(0===(64&f.flags)&&("function"===typeof w.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Eo||!Eo.has(x)))){f.flags|=4096,t&=-t,f.lanes|=t,yn(f,wi(f,o,t));break e}}f=f.return}while(null!==f)}na(n)}catch(E){t=E,io===n&&null!==n&&(io=n=n.return);continue}break}}function Yo(){var e=$i.current;return $i.current=Br,null===e?Br:e}function Zo(e,t){var n=no;no|=16;var r=Yo();for(ro===e&&oo===t||Qo(e,t);;)try{$o();break}catch(i){Xo(e,i)}if(sn(),no=n,$i.current=r,null!==io)throw Error(s(261));return ro=null,oo=0,uo}function $o(){for(;null!==io;)ta(io)}function ea(){for(;null!==io&&!Mt();)ta(io)}function ta(e){var t=bo(e.alternate,e,ao);e.memoizedProps=e.pendingProps,null===t?na(e):io=t,eo.current=null}function na(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=vi(n,t,ao)))return void(io=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&ao)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=mi(t)))return n.flags&=2047,void(io=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(io=t);io=t=e}while(null!==t);0===uo&&(uo=5)}function ra(e){var t=Vt();return qt(99,ia.bind(null,e,t)),null}function ia(e,t){do{aa()}while(null!==Ao);if(0!==(48&no))throw Error(s(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,u=e.expirationTimes;0<o;){var l=31-xt(o),c=1<<l;i[l]=0,a[l]=-1,u[l]=-1,o&=~c}if(null!==ko&&0===(24&r)&&ko.has(e)&&ko.delete(e),e===ro&&(io=ro=null,oo=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){i=no,no|=32,eo.current=null,Lo=F(e.containerInfo),Oo=!1,_o=r;do{try{oa()}catch(y){if(null===_o)throw Error(s(330));ha(_o,y),_o=_o.nextEffect}}while(null!==_o);Lo=null,_o=r;do{try{for(a=e;null!==_o;){var h=_o.flags;if(16&h&&X&&xe(_o.stateNode),128&h){var f=_o.alternate;if(null!==f){var d=f.ref;null!==d&&("function"===typeof d?d(null):d.current=null)}}switch(1038&h){case 2:Pi(_o),_o.flags&=-3;break;case 6:Pi(_o),_o.flags&=-3,Oi(_o.alternate,_o);break;case 1024:_o.flags&=-1025;break;case 1028:_o.flags&=-1025,Oi(_o.alternate,_o);break;case 4:Oi(_o.alternate,_o);break;case 8:u=a,o=_o,X?Li(u,o):ki(u,o);var p=o.alternate;Ii(o),null!==p&&Ii(p)}_o=_o.nextEffect}}catch(y){if(null===_o)throw Error(s(330));ha(_o,y),_o=_o.nextEffect}}while(null!==_o);Oo&&re(),U(e.containerInfo),e.current=n,_o=r;do{try{for(h=e;null!==_o;){var v=_o.flags;if(36&v&&Ti(h,_o.alternate,_o),128&v){f=void 0;var m=_o.ref;if(null!==m){var g=_o.stateNode;if(5===_o.tag)f=L(g);else f=g;"function"===typeof m?m(f):m.current=f}}_o=_o.nextEffect}}catch(y){if(null===_o)throw Error(s(330));ha(_o,y),_o=_o.nextEffect}}while(null!==_o);_o=null,Ft(),no=i}else e.current=n;if(So)So=!1,Ao=e,To=t;else for(_o=r;null!==_o;)t=_o.nextEffect,_o.nextEffect=null,8&_o.flags&&((v=_o).sibling=null,v.stateNode=null),_o=t;if(0===(r=e.pendingLanes)&&(Eo=null),1===r?e===Ro?Io++:(Io=0,Ro=e):Io=0,n=n.stateNode,ft&&"function"===typeof ft.onCommitFiberRoot)try{ft.onCommitFiberRoot(ht,n,void 0,64===(64&n.current.flags))}catch(y){}if(Ho(e,zt()),wo)throw wo=!1,e=xo,xo=null,e;return 0!==(8&no)||Jt(),null}function oa(){for(;null!==_o;){var e=_o.alternate;Oo||null===Lo||(0!==(8&_o.flags)?D(_o,Lo)&&(Oo=!0,ne()):13===_o.tag&&Ui(e,_o)&&D(_o,Lo)&&(Oo=!0,ne()));var t=_o.flags;0!==(256&t)&&Si(e,_o),0===(512&t)||So||(So=!0,Kt(97,(function(){return aa(),null}))),_o=_o.nextEffect}}function aa(){if(90!==To){var e=97<To?97:To;return To=90,qt(e,la)}return!1}function sa(e,t){Co.push(t,e),So||(So=!0,Kt(97,(function(){return aa(),null})))}function ua(e,t){Mo.push(t,e),So||(So=!0,Kt(97,(function(){return aa(),null})))}function la(){if(null===Ao)return!1;var e=Ao;if(Ao=null,0!==(48&no))throw Error(s(331));var t=no;no|=32;var n=Mo;Mo=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"===typeof a)try{a()}catch(l){if(null===o)throw Error(s(330));ha(o,l)}}for(n=Co,Co=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var u=i.create;i.destroy=u()}catch(l){if(null===o)throw Error(s(330));ha(o,l)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return no=t,Jt(),!0}function ca(e,t,n){gn(e,t=_i(0,t=gi(n,t),1)),t=Bo(),null!==(e=jo(e,1))&&(wt(e,1,t),Ho(e,t))}function ha(e,t){if(3===e.tag)ca(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){ca(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Eo||!Eo.has(r))){var i=wi(n,e=gi(t,e),1);if(gn(n,i),i=Bo(),null!==(n=jo(n,1)))wt(n,1,i),Ho(n,i);else if("function"===typeof r.componentDidCatch&&(null===Eo||!Eo.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function fa(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Bo(),e.pingedLanes|=e.suspendedLanes&n,ro===e&&(oo&n)===n&&(4===uo||3===uo&&(62914560&oo)===oo&&500>zt()-mo?Qo(e,0):po|=n),Ho(e,t)}function da(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Vt()?1:2:(0===Do&&(Do=co),0===(t=bt(62914560&~Do))&&(t=4194304))),n=Bo(),null!==(e=jo(e,t))&&(wt(e,t,n),Ho(e,n))}bo=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||nt.current)Gr=!0;else{if(0===(n&r)){switch(Gr=!1,t.tag){case 3:Zr(t),$n();break;case 5:Hn(t);break;case 1:ot(t.type)&&lt(t);break;case 4:Un(t,t.stateNode.containerInfo);break;case 10:un(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?ii(e,t,n):($e(zn,1&zn.current),null!==(t=hi(e,t,n))?t.sibling:null);$e(zn,1&zn.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return ci(e,t,n);t.flags|=64}var i=t.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),$e(zn,zn.current),r)break;return null;case 23:case 24:return t.lanes=0,Kr(e,t,n)}return hi(e,t,n)}Gr=0!==(16384&e.flags)}else Gr=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=it(t,tt.current),hn(t,n),i=fr(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ot(r)){var o=!0;lt(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,pn(t);var a=r.getDerivedStateFromProps;"function"===typeof a&&xn(t,r,a,e),i.updater=En,t.stateNode=i,i._reactInternals=t,Cn(t,r,e,n),t=Yr(null,t,r,!0,o,n)}else t.tag=0,zr(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"===typeof e)return Ea(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===m)return 11;if(e===b)return 14}return 2}(i),e=tn(i,e),o){case 0:t=Qr(null,t,i,e,n);break e;case 1:t=Xr(null,t,i,e,n);break e;case 11:t=Vr(null,t,i,e,n);break e;case 14:t=Wr(null,t,i,tn(i.type,e),r,n);break e}throw Error(s(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Qr(e,t,r,i=t.elementType===r?i:tn(r,i),n);case 1:return r=t.type,i=t.pendingProps,Xr(e,t,r,i=t.elementType===r?i:tn(r,i),n);case 3:if(Zr(t),r=t.updateQueue,null===e||null===r)throw Error(s(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,vn(e,t),bn(t,r,null,n),(r=t.memoizedState.element)===i)$n(),t=hi(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(Z?(qn=je(t.stateNode.containerInfo),Wn=t,o=Kn=!0):o=!1),o){if(Z&&null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)o=e[i],a=e[i+1],Q?o._workInProgressVersionPrimary=a:o._workInProgressVersionSecondary=a,er.push(o);for(n=Dn(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else zr(e,t,r,n),$n();t=t.child}return t;case 5:return Hn(t),null===e&&Xn(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,V(r,i)?a=null:null!==o&&V(r,o)&&(t.flags|=16),Jr(e,t),zr(e,t,a,n),t.child;case 6:return null===e&&Xn(t),null;case 13:return ii(e,t,n);case 4:return Un(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Pn(t,null,r,n):zr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Vr(e,t,r,i=t.elementType===r?i:tn(r,i),n);case 7:return zr(e,t,t.pendingProps,n),t.child;case 8:case 12:return zr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,un(t,o=i.value),null!==a){var u=a.value;if(0===(o=Yt(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(a.children===i.children&&!nt.current){t=hi(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var l=u.dependencies;if(null!==l){a=u.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&o)){1===u.tag&&((c=mn(-1,n&-n)).tag=2,gn(u,c)),u.lanes|=n,null!==(c=u.alternate)&&(c.lanes|=n),cn(u.return,n),l.lanes|=n;break}c=c.next}}else a=10===u.tag&&u.type===t.type?null:u.child;if(null!==a)a.return=u;else for(a=u;null!==a;){if(a===t){a=null;break}if(null!==(u=a.sibling)){u.return=a.return,a=u;break}a=a.return}u=a}}zr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,hn(t,n),r=r(i=fn(i,o.unstable_observedBits)),t.flags|=1,zr(e,t,r,n),t.child;case 14:return o=tn(i=t.type,t.pendingProps),Wr(e,t,i,o=tn(i.type,o),r,n);case 15:return qr(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tn(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ot(r)?(e=!0,lt(t)):e=!1,hn(t,n),An(t,r,i),Cn(t,r,i,n),Yr(null,t,r,!0,e,n);case 19:return ci(e,t,n);case 23:case 24:return Kr(e,t,n)}throw Error(s(156,t.tag))};var pa={current:!1},va=a.unstable_flushAllWithoutAsserting,ma="function"===typeof va;function ga(){if(void 0!==va)return va();for(var e=!1;aa();)e=!0;return e}function ya(t){try{ga(),function(t){if(null===Yi)try{var n=("require"+Math.random()).slice(0,7);Yi=(e&&e[n]).call(e,"timers").setImmediate}catch(r){Yi=function(e){var t=new MessageChannel;t.port1.onmessage=e,t.port2.postMessage(void 0)}}Yi(t)}((function(){ga()?ya(t):t()}))}catch(n){t(n)}}var ba=0,_a=!1;function wa(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function xa(e,t,n,r){return new wa(e,t,n,r)}function Ea(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Sa(e,t){var n=e.alternate;return null===n?((n=xa(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Aa(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Ea(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case h:return Ta(n.children,i,o,t);case x:a=8,i|=16;break;case f:a=8,i|=1;break;case d:return(e=xa(12,n,t,8|i)).elementType=d,e.type=d,e.lanes=o,e;case g:return(e=xa(13,n,t,i)).type=g,e.elementType=g,e.lanes=o,e;case y:return(e=xa(19,n,t,i)).elementType=y,e.lanes=o,e;case E:return Ca(n,i,o,t);case S:return(e=xa(24,n,t,i)).elementType=S,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case p:a=10;break e;case v:a=9;break e;case m:a=11;break e;case b:a=14;break e;case _:a=16,r=null;break e;case w:a=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=xa(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ta(e,t,n,r){return(e=xa(7,e,r,t)).lanes=n,e}function Ca(e,t,n,r){return(e=xa(23,e,r,t)).elementType=E,e.lanes=n,e}function Ma(e,t,n){return(e=xa(6,e,null,t)).lanes=n,e}function ka(e,t,n){return(t=xa(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ia(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=J,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=_t(0),this.expirationTimes=_t(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_t(0),Z&&(this.mutableSourceEagerHydrationData=null)}function Ra(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return null===(e=P(t))?null:e.stateNode}function Pa(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Da(e,t){Pa(e,t),(e=e.alternate)&&Pa(e,t)}function Na(e){return null===(e=P(e))?null:e.stateNode}function La(){return null}return r.IsThisRendererActing=pa,r.act=function(e){function t(){ba--,to.current=n,pa.current=r}!1===_a&&(_a=!0,console.error("act(...) is not supported in production builds of React, and might not behave as expected.")),ba++;var n=to.current,r=pa.current;to.current=!0,pa.current=!0;try{var i=Wo(e)}catch(o){throw t(),o}if(null!==i&&"object"===typeof i&&"function"===typeof i.then)return{then:function(e,r){i.then((function(){1<ba||!0===ma&&!0===n?(t(),e()):ya((function(n){t(),n?r(n):e()}))}),(function(e){t(),r(e)}))}};try{1!==ba||!1!==ma&&!1!==n||ga(),t()}catch(o){throw t(),o}return{then:function(e){e()}}},r.attemptContinuousHydration=function(e){13===e.tag&&(Uo(e,67108864,Bo()),Da(e,67108864))},r.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=Bo(),n=Fo(e);Uo(e,n,t),Da(e,n)}},r.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.hydrate){var n=vt(t.pendingLanes);t.expiredLanes|=n&t.pendingLanes,Ho(t,zt()),0===(48&no)&&(yo(),Jt())}break;case 13:var r=Bo();qo((function(){return Uo(e,1,r)})),Da(e,4)}},r.attemptUserBlockingHydration=function(e){13===e.tag&&(Uo(e,4,Bo()),Da(e,4))},r.batchedEventUpdates=function(e,t){var n=no;no|=2;try{return e(t)}finally{0===(no=n)&&(yo(),Jt())}},r.batchedUpdates=Wo,r.createComponentSelector=function(e){return{$$typeof:ji,value:e}},r.createContainer=function(e,t,n){return e=new Ia(e,t,n),t=xa(3,null,null,2===t?7:1===t?3:0),e.current=t,t.stateNode=e,pn(t),e},r.createHasPsuedoClassSelector=function(e){return{$$typeof:Hi,value:e}},r.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:c,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},r.createRoleSelector=function(e){return{$$typeof:Gi,value:e}},r.createTestNameSelector=function(e){return{$$typeof:zi,value:e}},r.createTextSelector=function(e){return{$$typeof:Vi,value:e}},r.deferredUpdates=function(e){return qt(97,e)},r.discreteUpdates=function(e,t,n,r,i){var o=no;no|=4;try{return qt(98,e.bind(null,t,n,r,i))}finally{0===(no=o)&&(yo(),Jt())}},r.findAllNodes=Xi,r.findBoundingRects=function(e,t){if(!oe)throw Error(s(363));t=Xi(e,t),e=[];for(var n=0;n<t.length;n++)e.push(se(t[n]));for(t=e.length-1;0<t;t--)for(var r=(n=e[t]).x,i=r+n.width,o=n.y,a=o+n.height,u=t-1;0<=u;u--)if(t!==u){var l=e[u],c=l.x,h=c+l.width,f=l.y,d=f+l.height;if(r>=c&&o>=f&&i<=h&&a<=d){e.splice(t,1);break}if(!(r!==c||n.width!==l.width||d<o||f>a)){f>o&&(l.height+=f-o,l.y=o),d<a&&(l.height=a-f),e.splice(t,1);break}if(!(o!==f||n.height!==l.height||h<r||c>i)){c>r&&(l.width+=c-r,l.x=r),h<i&&(l.width=i-c),e.splice(t,1);break}}return e},r.findHostInstance=Ra,r.findHostInstanceWithNoPortals=function(e){return null===(e=function(e){if(!(e=R(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child&&4!==t.tag)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}(e))?null:20===e.tag?e.stateNode.instance:e.stateNode},r.findHostInstanceWithWarning=function(e){return Ra(e)},r.flushControlled=function(e){var t=no;no|=1;try{qt(99,e)}finally{0===(no=t)&&(yo(),Jt())}},r.flushDiscreteUpdates=function(){0===(49&no)&&(function(){if(null!==ko){var e=ko;ko=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,Ho(e,zt())}))}Jt()}(),aa())},r.flushPassiveEffects=aa,r.flushSync=qo,r.focusWithin=function(e,t){if(!oe)throw Error(s(363));for(t=Qi(e=qi(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!le(n)){if(5===n.tag&&he(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},r.getCurrentUpdateLanePriority=function(){return dt},r.getFindAllNodesFailureDescription=function(e,t){if(!oe)throw Error(s(363));var n=0,r=[];e=[qi(e),0];for(var i=0;i<e.length;){var o=e[i++],a=e[i++],u=t[a];if((5!==o.tag||!le(o))&&(Ki(o,u)&&(r.push(Ji(u)),++a>n&&(n=a)),a<t.length))for(o=o.child;null!==o;)e.push(o,a),o=o.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Ji(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},r.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?L(e.child.stateNode):e.child.stateNode:null},r.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:u.ReactCurrentDispatcher,findHostInstanceByFiber:Na,findFiberByHostInstance:e.findFiberByHostInstance||La,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t.isDisabled&&t.supportsFiber)try{ht=t.inject(e),ft=t}catch(n){}e=!0}return e},r.observeVisibleRects=function(e,t,n,r){if(!oe)throw Error(s(363));e=Xi(e,t);var i=fe(e,n,r).disconnect;return{disconnect:function(){i()}}},r.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},r.runWithPriority=function(e,t){var n=dt;try{return dt=e,t()}finally{dt=n}},r.shouldSuspend=function(){return!1},r.unbatchedUpdates=function(e,t){var n=no;no&=-2,no|=8;try{return e(t)}finally{0===(no=n)&&(yo(),Jt())}},r.updateContainer=function(e,t,n,r){var i=t.current,o=Bo(),a=Fo(i);e:if(n){t:{if(k(n=n._reactInternals)!==n||1!==n.tag)throw Error(s(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(ot(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(s(171))}if(1===n.tag){var l=n.type;if(ot(l)){n=ut(n,l,u);break e}}n=u}else n=et;return null===t.context?t.context=n:t.pendingContext=n,(t=mn(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),gn(i,t),Uo(i,a,o),a},r}},258:function(e,t,n){"use strict";e.exports=n(721)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),t.Fragment=o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,o={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:o,_owner:a.current}}t.jsx=l,t.jsxs=l},117:function(e,t,n){"use strict";var r=n(725),i=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,s=60110,u=60112;t.Suspense=60113;var l=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),o=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),a=h("react.provider"),s=h("react.context"),u=h("react.forward_ref"),t.Suspense=h("react.suspense"),l=h("react.memo"),c=h("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=y.prototype=new g;b.constructor=y,r(b,m.prototype),b.isPureReactComponent=!0;var _={current:null},w=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,r)&&!x.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:i,type:e,key:a,ref:s,props:o,_owner:_.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var A=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case o:u=!0}}if(u)return a=a(u=e),e=""===r?"."+T(u,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(A,"$&/")+"/"),C(a,t,n,"",(function(e){return e}))):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+e)),t.push(a)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=r+T(s=e[l],l);u+=C(s,t,n,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=C(s=s.value,t,n,c=r+T(s,l++),a);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function M(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function k(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var I={current:null};function R(){var e=I.current;if(null===e)throw Error(d(321));return e}var P={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:M,forEach:function(e,t,n){M(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return M(e,(function(){t++})),t},toArray:function(e){return M(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var o=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!x.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];o.children=l}return{$$typeof:i,type:e.type,key:a,ref:s,props:o,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(R){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),a=new M(r||[]);return o._invoke=function(e,t,n){var r=h;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=A(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=c(e,t,n);if("normal"===u.type){if(r=n.done?p:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=l;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",v={};function m(){}function g(){}function y(){}var b={};u(b,o,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(k([])));w&&w!==n&&r.call(w,o)&&(b=w);var x=y.prototype=m.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"===typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(h).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function A(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=c(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function k(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:I}}function I(){return{value:t,done:!0}}return g.prototype=y,u(x,"constructor",y),u(y,"constructor",g),g.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(x),u(x,s,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:k(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,o;if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,c=null,h=function e(){if(null!==l)try{var n=t.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==l?setTimeout(n,0,e):(l=e,setTimeout(h,0))},r=function(e,t){c=setTimeout(e,t)},i=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,g=-1,y=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var _=new MessageChannel,w=_.port2;_.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();b=e+y;try{m(!0,e)?w.postMessage(null):(v=!1,m=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,w.postMessage(null))},r=function(e,n){g=f((function(){e(t.unstable_now())}),n)},i=function(){d(g),g=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<A(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>A(a,n))void 0!==u&&0>A(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>A(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function A(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],C=[],M=1,k=null,I=3,R=!1,P=!1,D=!1;function N(e){for(var t=E(C);null!==t;){if(null===t.callback)S(C);else{if(!(t.startTime<=e))break;S(C),t.sortIndex=t.expirationTime,x(T,t)}t=E(C)}}function L(e){if(D=!1,N(e),!P)if(null!==E(T))P=!0,n(O);else{var t=E(C);null!==t&&r(L,t.startTime-e)}}function O(e,n){P=!1,D&&(D=!1,i()),R=!0;var o=I;try{for(N(n),k=E(T);null!==k&&(!(k.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=k.callback;if("function"===typeof a){k.callback=null,I=k.priorityLevel;var s=a(k.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?k.callback=s:k===E(T)&&S(T),N(n)}else S(T);k=E(T)}if(null!==k)var u=!0;else{var l=E(C);null!==l&&r(L,l.startTime-n),u=!1}return u}finally{k=null,I=o,R=!1}}var B=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||R||(P=!0,n(O))},t.unstable_getCurrentPriorityLevel=function(){return I},t.unstable_getFirstCallbackNode=function(){return E(T)},t.unstable_next=function(e){switch(I){case 1:case 2:case 3:var t=3;break;default:t=I}var n=I;I=t;try{return e()}finally{I=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=B,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=I;I=e;try{return t()}finally{I=n}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:M++,callback:o,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>s?(e.sortIndex=a,x(C,e),null===E(T)&&e===E(C)&&(D?i():D=!0,r(L,a-s))):(e.sortIndex=u,x(T,e),P||R||(P=!0,n(O))),e},t.unstable_wrapCallback=function(e){var t=I;return function(){var n=I;I=t;try{return e.apply(this,arguments)}finally{I=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},817:function(e,t,n){"use strict";e.exports=n.p+"static/media/HumanMuscle.21ea9fbd077d99949b89.jpeg"},355:function(e,t,n){"use strict";e.exports=n.p+"static/media/google_logo.817fc47ec0a54e16b482.png"},829:function(e,t,n){"use strict";e.exports=n.p+"static/media/humanBrain.9d8ab875259295d330d1.jpeg"},439:function(e,t,n){"use strict";e.exports=n.p+"static/media/humanLungs.09be8b8d6a4d2336888a.jpeg"},523:function(e,t,n){"use strict";e.exports=n.p+"static/media/humanSkull.e89369550fdde7108ba7.jpeg"},655:function(e,t,n){"use strict";e.exports=n.p+"static/media/humanStomach.0f80a02a8321d7f9512a.jpeg"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".f0daed87.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="warwick-hack-2022:";n.l=function(r,i,o,a){if(e[r])e[r].push(i);else{var s,u;if(void 0!==o)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var h=l[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+o){s=h;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/edtech/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,o,a=r[0],s=r[1],u=r[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);l<a.length;l++)o=a[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkwarwick_hack_2022=self.webpackChunkwarwick_hack_2022||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:function(){return lx},AddEquation:function(){return Pw},AddOperation:function(){return ix},AdditiveAnimationBlendMode:function(){return OE},AdditiveBlending:function(){return Mw},AlphaFormat:function(){return Gx},AlwaysDepth:function(){return Qw},AlwaysStencilFunc:function(){return sS},AmbientLight:function(){return qD},AmbientLightProbe:function(){return lN},AnimationClip:function(){return gD},AnimationLoader:function(){return AD},AnimationMixer:function(){return zN},AnimationObjectGroup:function(){return HN},AnimationUtils:function(){return iD},ArcCurve:function(){return BR},ArrayCamera:function(){return oI},ArrowHelper:function(){return PL},Audio:function(){return wN},AudioAnalyser:function(){return CN},AudioContext:function(){return aN},AudioListener:function(){return _N},AudioLoader:function(){return sN},AxesHelper:function(){return DL},AxisHelper:function(){return uO},BackSide:function(){return xw},BasicDepthPacking:function(){return GE},BasicShadowMap:function(){return gw},BinaryTextureLoader:function(){return dO},Bone:function(){return qI},BooleanKeyframeTrack:function(){return cD},BoundingBoxHelper:function(){return lO},Box2:function(){return $N},Box3:function(){return aA},Box3Helper:function(){return kL},BoxBufferGeometry:function(){return aC},BoxGeometry:function(){return aC},BoxHelper:function(){return ML},BufferAttribute:function(){return xT},BufferGeometry:function(){return jT},BufferGeometryLoader:function(){return eN},ByteType:function(){return Px},Cache:function(){return bD},Camera:function(){return hC},CameraHelper:function(){return EL},CanvasRenderer:function(){return vO},CanvasTexture:function(){return SR},CatmullRomCurve3:function(){return zR},CineonToneMapping:function(){return ux},CircleBufferGeometry:function(){return AR},CircleGeometry:function(){return AR},ClampToEdgeWrapping:function(){return bx},Clock:function(){return pN},Color:function(){return KS},ColorKeyframeTrack:function(){return hD},CompressedTexture:function(){return ER},CompressedTextureLoader:function(){return TD},ConeBufferGeometry:function(){return CR},ConeGeometry:function(){return CR},CubeCamera:function(){return pC},CubeReflectionMapping:function(){return fx},CubeRefractionMapping:function(){return dx},CubeTexture:function(){return vC},CubeTextureLoader:function(){return MD},CubeUVReflectionMapping:function(){return mx},CubeUVRefractionMapping:function(){return gx},CubicBezierCurve:function(){return KR},CubicBezierCurve3:function(){return JR},CubicInterpolant:function(){return aD},CullFaceBack:function(){return pw},CullFaceFront:function(){return vw},CullFaceFrontBack:function(){return mw},CullFaceNone:function(){return dw},Curve:function(){return LR},CurvePath:function(){return tP},CustomBlending:function(){return Rw},CustomToneMapping:function(){return cx},CylinderBufferGeometry:function(){return TR},CylinderGeometry:function(){return TR},Cylindrical:function(){return YN},DataTexture:function(){return KI},DataTexture2DArray:function(){return lM},DataTexture3D:function(){return vM},DataTextureLoader:function(){return kD},DataUtils:function(){return BL},DecrementStencilOp:function(){return XE},DecrementWrapStencilOp:function(){return ZE},DefaultLoadingManager:function(){return wD},DepthFormat:function(){return Kx},DepthStencilFormat:function(){return Jx},DepthTexture:function(){return lI},DirectionalLight:function(){return WD},DirectionalLightHelper:function(){return _L},DiscreteInterpolant:function(){return uD},DodecahedronBufferGeometry:function(){return kR},DodecahedronGeometry:function(){return kR},DoubleSide:function(){return Ew},DstAlphaFactor:function(){return zw},DstColorFactor:function(){return Ww},DynamicBufferAttribute:function(){return ZL},DynamicCopyUsage:function(){return vS},DynamicDrawUsage:function(){return lS},DynamicReadUsage:function(){return fS},EdgesGeometry:function(){return NR},EdgesHelper:function(){return cO},EllipseCurve:function(){return OR},EqualDepth:function(){return Zw},EqualStencilFunc:function(){return nS},EquirectangularReflectionMapping:function(){return px},EquirectangularRefractionMapping:function(){return vx},Euler:function(){return VA},EventDispatcher:function(){return _S},ExtrudeBufferGeometry:function(){return DP},ExtrudeGeometry:function(){return DP},FaceColors:function(){return HL},FileLoader:function(){return SD},FlatShading:function(){return Sw},Float16BufferAttribute:function(){return IT},Float32Attribute:function(){return aO},Float32BufferAttribute:function(){return RT},Float64Attribute:function(){return sO},Float64BufferAttribute:function(){return PT},FloatType:function(){return Bx},Fog:function(){return mI},FogExp2:function(){return vI},Font:function(){return xO},FontLoader:function(){return wO},FramebufferTexture:function(){return xR},FrontSide:function(){return ww},Frustum:function(){return EC},GLBufferAttribute:function(){return qN},GLSL1:function(){return gS},GLSL3:function(){return yS},GreaterDepth:function(){return ex},GreaterEqualDepth:function(){return $w},GreaterEqualStencilFunc:function(){return aS},GreaterStencilFunc:function(){return iS},GridHelper:function(){return vL},Group:function(){return aI},HalfFloatType:function(){return Fx},HemisphereLight:function(){return PD},HemisphereLightHelper:function(){return pL},HemisphereLightProbe:function(){return uN},IcosahedronBufferGeometry:function(){return LP},IcosahedronGeometry:function(){return LP},ImageBitmapLoader:function(){return oN},ImageLoader:function(){return CD},ImageUtils:function(){return JS},ImmediateRenderObject:function(){return EO},IncrementStencilOp:function(){return QE},IncrementWrapStencilOp:function(){return YE},InstancedBufferAttribute:function(){return YI},InstancedBufferGeometry:function(){return ZD},InstancedInterleavedBuffer:function(){return WN},InstancedMesh:function(){return nR},Int16Attribute:function(){return nO},Int16BufferAttribute:function(){return TT},Int32Attribute:function(){return iO},Int32BufferAttribute:function(){return MT},Int8Attribute:function(){return $L},Int8BufferAttribute:function(){return ET},IntType:function(){return Lx},InterleavedBuffer:function(){return yI},InterleavedBufferAttribute:function(){return _I},Interpolant:function(){return oD},InterpolateDiscrete:function(){return kE},InterpolateLinear:function(){return IE},InterpolateSmooth:function(){return RE},InvertStencilOp:function(){return $E},JSONLoader:function(){return mO},KeepStencilOp:function(){return KE},KeyframeTrack:function(){return lD},LOD:function(){return UI},LatheBufferGeometry:function(){return OP},LatheGeometry:function(){return OP},Layers:function(){return WA},LensFlare:function(){return yO},LessDepth:function(){return Xw},LessEqualDepth:function(){return Yw},LessEqualStencilFunc:function(){return rS},LessStencilFunc:function(){return tS},Light:function(){return RD},LightProbe:function(){return QD},Line:function(){return lR},Line3:function(){return nL},LineBasicMaterial:function(){return rR},LineCurve:function(){return QR},LineCurve3:function(){return XR},LineDashedMaterial:function(){return nD},LineLoop:function(){return dR},LinePieces:function(){return UL},LineSegments:function(){return fR},LineStrip:function(){return FL},LinearEncoding:function(){return jE},LinearFilter:function(){return Tx},LinearInterpolant:function(){return sD},LinearMipMapLinearFilter:function(){return Ix},LinearMipMapNearestFilter:function(){return Mx},LinearMipmapLinearFilter:function(){return kx},LinearMipmapNearestFilter:function(){return Cx},LinearToneMapping:function(){return ax},Loader:function(){return xD},LoaderUtils:function(){return YD},LoadingManager:function(){return _D},LoopOnce:function(){return TE},LoopPingPong:function(){return ME},LoopRepeat:function(){return CE},LuminanceAlphaFormat:function(){return qx},LuminanceFormat:function(){return Wx},MOUSE:function(){return hw},Material:function(){return yT},MaterialLoader:function(){return XD},Math:function(){return DS},MathUtils:function(){return DS},Matrix3:function(){return LS},Matrix4:function(){return NA},MaxEquation:function(){return Ow},Mesh:function(){return iC},MeshBasicMaterial:function(){return bT},MeshDepthMaterial:function(){return $k},MeshDistanceMaterial:function(){return eI},MeshFaceMaterial:function(){return zL},MeshLambertMaterial:function(){return eD},MeshMatcapMaterial:function(){return tD},MeshNormalMaterial:function(){return $P},MeshPhongMaterial:function(){return YP},MeshPhysicalMaterial:function(){return XP},MeshStandardMaterial:function(){return QP},MeshToonMaterial:function(){return ZP},MinEquation:function(){return Lw},MirroredRepeatWrapping:function(){return _x},MixOperation:function(){return rx},MultiMaterial:function(){return VL},MultiplyBlending:function(){return Iw},MultiplyOperation:function(){return nx},NearestFilter:function(){return wx},NearestMipMapLinearFilter:function(){return Ax},NearestMipMapNearestFilter:function(){return Ex},NearestMipmapLinearFilter:function(){return Sx},NearestMipmapNearestFilter:function(){return xx},NeverDepth:function(){return Jw},NeverStencilFunc:function(){return eS},NoBlending:function(){return Tw},NoColors:function(){return jL},NoToneMapping:function(){return ox},NormalAnimationBlendMode:function(){return LE},NormalBlending:function(){return Cw},NotEqualDepth:function(){return tx},NotEqualStencilFunc:function(){return oS},NumberKeyframeTrack:function(){return fD},Object3D:function(){return oT},ObjectLoader:function(){return tN},ObjectSpaceNormalMap:function(){return WE},OctahedronBufferGeometry:function(){return BP},OctahedronGeometry:function(){return BP},OneFactor:function(){return Fw},OneMinusDstAlphaFactor:function(){return Vw},OneMinusDstColorFactor:function(){return qw},OneMinusSrcAlphaFactor:function(){return Gw},OneMinusSrcColorFactor:function(){return jw},OrthographicCamera:function(){return OC},PCFShadowMap:function(){return yw},PCFSoftShadowMap:function(){return bw},PMREMGenerator:function(){return ZC},ParametricGeometry:function(){return bO},Particle:function(){return qL},ParticleBasicMaterial:function(){return QL},ParticleSystem:function(){return KL},ParticleSystemMaterial:function(){return XL},Path:function(){return nP},PerspectiveCamera:function(){return fC},Plane:function(){return _C},PlaneBufferGeometry:function(){return TC},PlaneGeometry:function(){return TC},PlaneHelper:function(){return IL},PointCloud:function(){return WL},PointCloudMaterial:function(){return JL},PointLight:function(){return zD},PointLightHelper:function(){return cL},Points:function(){return bR},PointsMaterial:function(){return pR},PolarGridHelper:function(){return mL},PolyhedronBufferGeometry:function(){return MR},PolyhedronGeometry:function(){return MR},PositionalAudio:function(){return TN},PropertyBinding:function(){return jN},PropertyMixer:function(){return MN},QuadraticBezierCurve:function(){return YR},QuadraticBezierCurve3:function(){return ZR},Quaternion:function(){return nA},QuaternionKeyframeTrack:function(){return pD},QuaternionLinearInterpolant:function(){return dD},REVISION:function(){return cw},RGBADepthPacking:function(){return zE},RGBAFormat:function(){return Vx},RGBAIntegerFormat:function(){return $x},RGBA_ASTC_10x10_Format:function(){return xE},RGBA_ASTC_10x5_Format:function(){return bE},RGBA_ASTC_10x6_Format:function(){return _E},RGBA_ASTC_10x8_Format:function(){return wE},RGBA_ASTC_12x10_Format:function(){return EE},RGBA_ASTC_12x12_Format:function(){return SE},RGBA_ASTC_4x4_Format:function(){return hE},RGBA_ASTC_5x4_Format:function(){return fE},RGBA_ASTC_5x5_Format:function(){return dE},RGBA_ASTC_6x5_Format:function(){return pE},RGBA_ASTC_6x6_Format:function(){return vE},RGBA_ASTC_8x5_Format:function(){return mE},RGBA_ASTC_8x6_Format:function(){return gE},RGBA_ASTC_8x8_Format:function(){return yE},RGBA_BPTC_Format:function(){return AE},RGBA_ETC2_EAC_Format:function(){return cE},RGBA_PVRTC_2BPPV1_Format:function(){return sE},RGBA_PVRTC_4BPPV1_Format:function(){return aE},RGBA_S3TC_DXT1_Format:function(){return tE},RGBA_S3TC_DXT3_Format:function(){return nE},RGBA_S3TC_DXT5_Format:function(){return rE},RGBFormat:function(){return zx},RGB_ETC1_Format:function(){return uE},RGB_ETC2_Format:function(){return lE},RGB_PVRTC_2BPPV1_Format:function(){return oE},RGB_PVRTC_4BPPV1_Format:function(){return iE},RGB_S3TC_DXT1_Format:function(){return eE},RGFormat:function(){return Yx},RGIntegerFormat:function(){return Zx},RawShaderMaterial:function(){return BC},Ray:function(){return DA},Raycaster:function(){return KN},RectAreaLight:function(){return KD},RedFormat:function(){return Qx},RedIntegerFormat:function(){return Xx},ReinhardToneMapping:function(){return sx},RepeatWrapping:function(){return yx},ReplaceStencilOp:function(){return JE},ReverseSubtractEquation:function(){return Nw},RingBufferGeometry:function(){return FP},RingGeometry:function(){return FP},Scene:function(){return gI},SceneUtils:function(){return gO},ShaderChunk:function(){return CC},ShaderLib:function(){return kC},ShaderMaterial:function(){return cC},ShadowMaterial:function(){return JP},Shape:function(){return rP},ShapeBufferGeometry:function(){return UP},ShapeGeometry:function(){return UP},ShapePath:function(){return NL},ShapeUtils:function(){return IP},ShortType:function(){return Dx},Skeleton:function(){return XI},SkeletonHelper:function(){return uL},SkinnedMesh:function(){return WI},SmoothShading:function(){return Aw},Sphere:function(){return AA},SphereBufferGeometry:function(){return jP},SphereGeometry:function(){return jP},Spherical:function(){return XN},SphericalHarmonics3:function(){return JD},SplineCurve:function(){return $R},SpotLight:function(){return FD},SpotLightHelper:function(){return iL},Sprite:function(){return LI},SpriteMaterial:function(){return xI},SrcAlphaFactor:function(){return Hw},SrcAlphaSaturateFactor:function(){return Kw},SrcColorFactor:function(){return Uw},StaticCopyUsage:function(){return pS},StaticDrawUsage:function(){return uS},StaticReadUsage:function(){return hS},StereoCamera:function(){return dN},StreamCopyUsage:function(){return mS},StreamDrawUsage:function(){return cS},StreamReadUsage:function(){return dS},StringKeyframeTrack:function(){return vD},SubtractEquation:function(){return Dw},SubtractiveBlending:function(){return kw},TOUCH:function(){return fw},TangentSpaceNormalMap:function(){return VE},TetrahedronBufferGeometry:function(){return HP},TetrahedronGeometry:function(){return HP},TextGeometry:function(){return _O},Texture:function(){return XS},TextureLoader:function(){return ID},TorusBufferGeometry:function(){return GP},TorusGeometry:function(){return GP},TorusKnotBufferGeometry:function(){return zP},TorusKnotGeometry:function(){return zP},Triangle:function(){return mT},TriangleFanDrawMode:function(){return UE},TriangleStripDrawMode:function(){return FE},TrianglesDrawMode:function(){return BE},TubeBufferGeometry:function(){return VP},TubeGeometry:function(){return VP},UVMapping:function(){return hx},Uint16Attribute:function(){return rO},Uint16BufferAttribute:function(){return CT},Uint32Attribute:function(){return oO},Uint32BufferAttribute:function(){return kT},Uint8Attribute:function(){return eO},Uint8BufferAttribute:function(){return ST},Uint8ClampedAttribute:function(){return tO},Uint8ClampedBufferAttribute:function(){return AT},Uniform:function(){return VN},UniformsLib:function(){return MC},UniformsUtils:function(){return lC},UnsignedByteType:function(){return Rx},UnsignedInt248Type:function(){return Hx},UnsignedIntType:function(){return Ox},UnsignedShort4444Type:function(){return Ux},UnsignedShort5551Type:function(){return jx},UnsignedShortType:function(){return Nx},VSMShadowMap:function(){return _w},Vector2:function(){return NS},Vector3:function(){return rA},Vector4:function(){return ZS},VectorKeyframeTrack:function(){return mD},Vertex:function(){return YL},VertexColors:function(){return GL},VideoTexture:function(){return wR},WebGL1Renderer:function(){return pI},WebGLCubeRenderTarget:function(){return mC},WebGLMultipleRenderTargets:function(){return eA},WebGLMultisampleRenderTarget:function(){return tA},WebGLRenderTarget:function(){return $S},WebGLRenderTargetCube:function(){return pO},WebGLRenderer:function(){return dI},WebGLUtils:function(){return iI},WireframeGeometry:function(){return WP},WireframeHelper:function(){return hO},WrapAroundEnding:function(){return NE},XHRLoader:function(){return fO},ZeroCurvatureEnding:function(){return PE},ZeroFactor:function(){return Bw},ZeroSlopeEnding:function(){return DE},ZeroStencilOp:function(){return qE},_SRGBAFormat:function(){return bS},sRGBEncoding:function(){return HE}});var t=n(791),r=n(164);function i(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||a(e,t)||s()}var l=n(740);(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};var r=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,e];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}return globalThis}(this);function i(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function o(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:i(e)}}!function(e,n){if(n){var i=r;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];a in i||(i[a]={}),i=i[a]}(n=n(o=i[e=e[e.length-1]]))!=o&&null!=n&&t(i,e,{configurable:!0,writable:!0,value:n})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.a=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var a=r.setTimeout;n.prototype.c=function(e){a(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(A){this.f(A)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.s(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.h(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(n){return void this.g(n)}"function"==typeof t?this.u(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new n;return t.prototype.s=function(e){var t=this.f();e.Ra(t.resolve,t.reject)},t.prototype.u=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(A){n.reject(A)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(Wn){o(Wn)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.Ra(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Ra=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=o(e),a=r.next();!a.done;a=r.next())i(a.value).Ra(t,n)}))},t.all=function(e){var n=o(e),r=n.next();return r.done?i([]):new t((function(e,t){function o(t){return function(n){a[t]=n,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).Ra(o(a.length-1),t),r=n.next()}while(!r.done)}))},t}));var a=a||{},s=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function h(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&u.test(e)?e:""}function f(){}function d(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function p(e){var t=d(e);return"array"==t||"object"==t&&"number"==typeof e.length}function v(e){return"function"==d(e)}function m(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function g(e){return Object.prototype.hasOwnProperty.call(e,y)&&e[y]||(e[y]=++b)}var y="closure_uid_"+(1e9*Math.random()>>>0),b=0;function _(e,t,n){return e.call.apply(e.bind,arguments)}function w(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function x(e,t,n){return(x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:w).apply(null,arguments)}function E(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var S=Date.now;function T(e,t){function n(){}n.prototype=t.prototype,e.bb=t.prototype,e.prototype=new n,e.prototype.constructor=e}function C(e){return e}function M(e,t,n){this.code=R+e,this.message=t||P[e]||"",this.a=n||null}function k(e){var t=e&&e.code;return t?new M(t.substring(R.length),e.message,e.serverResponse):null}T(M,Error),M.prototype.w=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},M.prototype.toJSON=function(){return this.w()};var I,R="auth/",P={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},D={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function N(e){for(var t in D)if(D[t].id===e)return{firebaseEndpoint:(e=D[t]).Ua,secureTokenEndpoint:e.$a,identityPlatformEndpoint:e.Xa};return null}function L(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(wU){return!1}}function O(e){if(Error.captureStackTrace)Error.captureStackTrace(this,O);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function B(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");O.call(this,n+e[r])}function F(e,t){throw new B("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function U(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function j(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function H(){this.b=this.a=null}I=N("__EID__")?"__EID__":void 0,T(O,Error),O.prototype.name="CustomError",T(B,O),B.prototype.name="AssertionError",U.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var G=new U((function(){return new V}),(function(e){e.reset()}));function z(){var e=wt,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function V(){this.next=this.b=this.a=null}H.prototype.add=function(e,t){var n=G.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},V.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},V.prototype.reset=function(){this.next=this.b=this.a=null};var W=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},q=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};var K=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],i=0,o="string"===typeof e?e.split(""):e,a=0;a<n;a++)if(a in o){var s=o[a];t.call(void 0,s,a,e)&&(r[i++]=s)}return r},J=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i="string"===typeof e?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},Q=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function X(e,t){return 0<=W(e,t)}function Y(e,t){var n;return(n=0<=(t=W(e,t)))&&Array.prototype.splice.call(e,t,1),n}function Z(e,t){!function(e,t){for(var n="string"===typeof e?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&1==Array.prototype.splice.call(e,r,1).length&&0}))}function $(e){return Array.prototype.concat.apply([],arguments)}function ee(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}var te,ne=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},re=/&/g,ie=/</g,oe=/>/g,ae=/"/g,se=/'/g,ue=/\x00/g,le=/[\x00&<>"']/;function ce(e,t){return-1!=e.indexOf(t)}function he(e,t){return e<t?-1:e>t?1:0}e:{var fe=s.navigator;if(fe){var de=fe.userAgent;if(de){te=de;break e}}te=""}function pe(e){return ce(te,e)}function ve(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function me(e){for(var t in e)return!1;return!0}function ge(e){var t,n={};for(t in e)n[t]=e[t];return n}var ye="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function be(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<ye.length;o++)n=ye[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _e(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break e}}catch(a){}i=null}if(i&&"undefined"!=typeof i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(m(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(a){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;F("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}function we(e,t){this.a=e===Ae&&t||"",this.b=Se}function xe(e){return e instanceof we&&e.constructor===we&&e.b===Se?e.a:(F("expected object of type Const, got '"+e+"'"),"type_error:Const")}we.prototype.ta=!0,we.prototype.sa=function(){return this.a},we.prototype.toString=function(){return"Const{"+this.a+"}"};var Ee,Se={},Ae={};function Te(){if(void 0===Ee){var e=null,t=s.trustedTypes;if(t&&t.createPolicy){try{e=t.createPolicy("goog#html",{createHTML:C,createScript:C,createScriptURL:C})}catch(vU){s.console&&s.console.error(vU.message)}Ee=e}else Ee=e}return Ee}function Ce(e,t){this.a=t===Pe?e:""}function Me(e){return e instanceof Ce&&e.constructor===Ce?e.a:(F("expected object of type TrustedResourceUrl, got '"+e+"' of type "+d(e)),"type_error:TrustedResourceUrl")}function ke(e,t){var n=xe(e);if(!Re.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return e=n.replace(Ie,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof we?xe(e):encodeURIComponent(String(e))})),function(e){var t=Te();return new Ce(e=t?t.createScriptURL(e):e,Pe)}(e)}Ce.prototype.ta=!0,Ce.prototype.sa=function(){return this.a.toString()},Ce.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ie=/%{(\w+)}/g,Re=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Pe={};function De(e,t){this.a=t===je?e:""}function Ne(e){return e instanceof De&&e.constructor===De?e.a:(F("expected object of type SafeUrl, got '"+e+"' of type "+d(e)),"type_error:SafeUrl")}De.prototype.ta=!0,De.prototype.sa=function(){return this.a.toString()},De.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Le=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Oe=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Be=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Fe(e){if(e instanceof De)return e;if(e="object"==typeof e&&e.ta?e.sa():String(e),Be.test(e))e=new De(e,je);else{var t=(e=(e=String(e)).replace(/(%0A|%0D)/g,"")).match(Oe);e=t&&Le.test(t[1])?new De(e,je):null}return e}function Ue(e){return e instanceof De?e:(e="object"==typeof e&&e.ta?e.sa():String(e),Be.test(e)||(e="about:invalid#zClosurez"),new De(e,je))}var je={},He=new De("about:invalid#zClosurez",je);function Ge(e,t,n){this.a=n===ze?e:""}Ge.prototype.ta=!0,Ge.prototype.sa=function(){return this.a.toString()},Ge.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var ze={};function Ve(e,t,n,r){return e=e instanceof De?e:Ue(e),t=t||s,n=n instanceof we?xe(n):n||"",t.open(Ne(e),n,r,void 0)}function We(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function qe(e){return le.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(re,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(ie,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(oe,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(ae,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(se,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(ue,"&#0;"))),e}function Ke(e){return Ke[" "](e),e}Ke[" "]=f;var Je,Qe=pe("Opera"),Xe=pe("Trident")||pe("MSIE"),Ye=pe("Edge"),Ze=Ye||Xe,$e=pe("Gecko")&&!(ce(te.toLowerCase(),"webkit")&&!pe("Edge"))&&!(pe("Trident")||pe("MSIE"))&&!pe("Edge"),et=ce(te.toLowerCase(),"webkit")&&!pe("Edge");function tt(){var e=s.document;return e?e.documentMode:void 0}e:{var nt="",rt=function(){var e=te;return $e?/rv:([^\);]+)(\)|;)/.exec(e):Ye?/Edge\/([\d\.]+)/.exec(e):Xe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):et?/WebKit\/(\S+)/.exec(e):Qe?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(rt&&(nt=rt?rt[1]:""),Xe){var it=tt();if(null!=it&&it>parseFloat(nt)){Je=String(it);break e}}Je=nt}var ot,at={};function st(e){return function(e,t){var n=at;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=ne(String(Je)).split("."),r=ne(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=he(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||he(0==a[2].length,0==s[2].length)||he(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}if(s.document&&Xe){var ut=tt();ot=ut||(parseInt(Je,10)||void 0)}else ot=void 0;var lt=ot;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(bU){}var ct=!Xe||9<=Number(lt);function ht(e){var t=document;return"string"===typeof e?t.getElementById(e):e}function ft(e,t){ve(t,(function(t,n){t&&"object"==typeof t&&t.ta&&(t=t.sa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:vt.hasOwnProperty(n)?e.setAttribute(vt[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var dt,pt,vt={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function mt(e,t,n){function r(n){n&&t.appendChild("string"===typeof n?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!p(o)||m(o)&&0<o.nodeType)r(o);else{e:{if(o&&"number"==typeof o.length){if(m(o)){var a="function"==typeof o.item||"string"==typeof o.item;break e}if(v(o)){a="function"==typeof o.item;break e}}a=!1}q(a?ee(o):o,r)}}}function gt(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function yt(e){s.setTimeout((function(){throw e}),0)}function bt(e,t){pt||function(){if(s.Promise&&s.Promise.resolve){var e=s.Promise.resolve(void 0);pt=function(){e.then(xt)}}else pt=function(){var e=xt;!v(s.setImmediate)||s.Window&&s.Window.prototype&&!pe("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(dt||(dt=function(){var e=s.MessageChannel;if("undefined"===typeof e&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!pe("Presto")&&(e=function(){var e=gt(document,"IFRAME");e.style.display="none",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=x((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),"undefined"!==typeof e&&!pe("Trident")&&!pe("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).Hb;n.Hb=null,e()}},function(e){r.next={Hb:e},r=r.next,t.port2.postMessage(0)}}return function(e){s.setTimeout(e,0)}}()),dt(e)):s.setImmediate(e)}}(),_t||(pt(),_t=!0),wt.add(e,t)}var _t=!1,wt=new H;function xt(){for(var e;e=z();){try{e.a.call(e.b)}catch(wU){yt(wU)}j(G,e)}_t=!1}function Et(e,t){if(this.a=St,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=f)try{var n=this;e.call(t,(function(e){Bt(n,At,e)}),(function(e){if(!(e instanceof Vt))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(lU){}Bt(n,Tt,e)}))}catch(r){Bt(this,Tt,r)}}var St=0,At=2,Tt=3;function Ct(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ct.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Mt=new U((function(){return new Ct}),(function(e){e.reset()}));function kt(e,t,n){var r=Mt.get();return r.g=e,r.b=t,r.f=n,r}function It(e){if(e instanceof Et)return e;var t=new Et(f);return Bt(t,At,e),t}function Rt(e){return new Et((function(t,n){n(e)}))}function Pt(e,t,n){Ft(e,t,n,null)||bt(E(t,e))}function Dt(e){return new Et((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)Pt(e[o],E(i,o,!0),E(i,o,!1));else t(r)}))}function Nt(e,t){if(e.a==St)if(e.c){var n=e.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==e&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==St&&1==r?Nt(n,t):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):jt(n),Ht(n,i,Tt,t)))}e.c=null}else Bt(e,Tt,t)}function Lt(e,t){e.b||e.a!=At&&e.a!=Tt||Ut(e),e.f?e.f.next=t:e.b=t,e.f=t}function Ot(e,t,n,r){var i=kt(null,null,null);return i.a=new Et((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(A){o(A)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof Vt?o(t):e(i)}catch(A){o(A)}}:o})),i.a.c=e,Lt(e,i),i.a}function Bt(e,t,n){e.a==St&&(e===n&&(t=Tt,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Ft(n,e.$c,e.ad,e)||(e.i=n,e.a=t,e.c=null,Ut(e),t!=Tt||n instanceof Vt||function(e,t){e.g=!0,bt((function(){e.g&&zt.call(null,t)}))}(e,n)))}function Ft(e,t,n,r){if(e instanceof Et)return Lt(e,kt(t||f,n||null,r)),!0;if(L(e))return e.then(t,n,r),!0;if(m(e))try{var i=e.then;if(v(i))return function(e,t,n,r,i){function o(e){s||(s=!0,r.call(i,e))}function a(e){s||(s=!0,n.call(i,e))}var s=!1;try{t.call(e,a,o)}catch(u){o(u)}}(e,i,t,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Ut(e){e.h||(e.h=!0,bt(e.gc,e))}function jt(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function Ht(e,t,n,r){if(n==Tt&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,Gt(t,n,r);else try{t.c?t.g.call(t.f):Gt(t,n,r)}catch(lU){zt.call(null,lU)}j(Mt,t)}function Gt(e,t,n){t==At?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}Et.prototype.then=function(e,t,n){return Ot(this,v(e)?e:null,v(t)?t:null,n)},Et.prototype.$goog_Thenable=!0,(e=Et.prototype).oa=function(e,t){return(e=kt(e,e,t)).c=!0,Lt(this,e),this},e.o=function(e,t){return Ot(this,null,e,t)},e.cancel=function(e){if(this.a==St){var t=new Vt(e);bt((function(){Nt(this,t)}),this)}},e.$c=function(e){this.a=St,Bt(this,At,e)},e.ad=function(e){this.a=St,Bt(this,Tt,e)},e.gc=function(){for(var e;e=jt(this);)Ht(this,e,this.a,this.i);this.h=!1};var zt=yt;function Vt(e){O.call(this,e)}function Wt(){0!=qt&&(Kt[g(this)]=this),this.ya=this.ya,this.pa=this.pa}T(Vt,O),Vt.prototype.name="cancel";var qt=0,Kt={};function Jt(e){if(!e.ya&&(e.ya=!0,e.Da(),0!=qt)){var t=g(e);if(0!=qt&&e.pa&&0<e.pa.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Kt[t]}}Wt.prototype.ya=!1,Wt.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Qt=Object.freeze||function(e){return e},Xt=!Xe||9<=Number(lt),Yt=Xe&&!st("9"),Zt=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{s.addEventListener("test",f,t),s.removeEventListener("test",f,t)}catch(vU){}return e}();function $t(e,t){this.type=e,this.b=this.target=t,this.defaultPrevented=!1}function en(e,t){if($t.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if($e){e:{try{Ke(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:tn[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}$t.prototype.preventDefault=function(){this.defaultPrevented=!0},T(en,$t);var tn=Qt({2:"touch",3:"pen",4:"mouse"});en.prototype.preventDefault=function(){en.bb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Yt)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(wU){}},en.prototype.g=function(){return this.a};var nn="closure_listenable_"+(1e6*Math.random()|0),rn=0;function on(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Wa=i,this.key=++rn,this.wa=this.Qa=!1}function an(e){e.wa=!0,e.listener=null,e.proxy=null,e.src=null,e.Wa=null}function sn(e){this.src=e,this.a={},this.b=0}function un(e,t){var n=t.type;n in e.a&&Y(e.a[n],t)&&(an(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function ln(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.wa&&o.listener==t&&o.capture==!!n&&o.Wa==r)return i}return-1}sn.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=ln(e,t,r,i);return-1<a?(t=e[a],n||(t.Qa=!1)):((t=new on(t,this.src,o,!!r,i)).Qa=n,e.push(t)),t};var cn="closure_lm_"+(1e6*Math.random()|0),hn={};function fn(e,t,n,r,i){if(r&&r.once)pn(e,t,n,r,i);else if(Array.isArray(t))for(var o=0;o<t.length;o++)fn(e,t[o],n,r,i);else n=En(n),e&&e[nn]?An(e,t,n,m(r)?!!r.capture:!!r,i):dn(e,t,n,!1,r,i)}function dn(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=m(i)?!!i.capture:!!i,s=wn(e);if(s||(e[cn]=s=new sn(e)),!(n=s.add(t,n,r,a,o)).proxy){if(r=function(){var e=_n,t=Xt?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Zt||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(gn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}0}}function pn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)pn(e,t[o],n,r,i);else n=En(n),e&&e[nn]?Tn(e,t,n,m(r)?!!r.capture:!!r,i):dn(e,t,n,!0,r,i)}function vn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)vn(e,t[o],n,r,i);else r=m(r)?!!r.capture:!!r,n=En(n),e&&e[nn]?(e=e.v,(t=String(t).toString())in e.a&&(-1<(n=ln(o=e.a[t],n,r,i))&&(an(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=wn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=ln(t,n,r,i)),(n=-1<e?t[e]:null)&&mn(n))}function mn(e){if("number"!==typeof e&&e&&!e.wa){var t=e.src;if(t&&t[nn])un(t.v,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(gn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=wn(t))?(un(n,e),0==n.b&&(n.src=null,t[cn]=null)):an(e)}}}function gn(e){return e in hn?hn[e]:hn[e]="on"+e}function yn(e,t,n,r){var i=!0;if((e=wn(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.wa&&(o=bn(o,r),i=i&&!1!==o)}return i}function bn(e,t){var n=e.listener,r=e.Wa||e.src;return e.Qa&&mn(e),n.call(r,t)}function _n(e,t){if(e.wa)return!0;if(!Xt){if(!t)e:{t=["window","event"];for(var n=s,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new en(r=t,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(a){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=yn(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=yn(r[i],e,!1,t),n=n&&o}return n}return bn(e,new en(t,this))}function wn(e){return(e=e[cn])instanceof sn?e:null}var xn="__closure_events_fn_"+(1e9*Math.random()>>>0);function En(e){return v(e)?e:(e[xn]||(e[xn]=function(t){return e.handleEvent(t)}),e[xn])}function Sn(){Wt.call(this),this.v=new sn(this),this.bc=this,this.hb=null}function An(e,t,n,r,i){e.v.add(String(t),n,!1,r,i)}function Tn(e,t,n,r,i){e.v.add(String(t),n,!0,r,i)}function Cn(e,t,n,r){if(!(t=e.v.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&un(e.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Mn(e,t,n){if(v(e))n&&(e=x(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=x(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function kn(e){var t=null;return new Et((function(n,r){-1==(t=Mn((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).o((function(e){throw s.clearTimeout(t),e}))}function In(e){if(e.X&&"function"==typeof e.X)return e.X();if("string"===typeof e)return e.split("");if(p(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function Rn(e){if(e.Y&&"function"==typeof e.Y)return e.Y();if(!e.X||"function"!=typeof e.X){if(p(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function Pn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Pn)for(n=e.Y(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Dn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Nn(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Nn(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Nn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}T(Sn,Wt),Sn.prototype[nn]=!0,Sn.prototype.addEventListener=function(e,t,n,r){fn(this,e,t,n,r)},Sn.prototype.removeEventListener=function(e,t,n,r){vn(this,e,t,n,r)},Sn.prototype.dispatchEvent=function(e){var t,n=this.hb;if(n)for(t=[];n;n=n.hb)t.push(n);n=this.bc;var r=e.type||e;if("string"===typeof e)e=new $t(e,n);else if(e instanceof $t)e.target=e.target||n;else{var i=e;be(e=new $t(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=Cn(a,r,!0,e)&&i}if(i=Cn(a=e.b=n,r,!0,e)&&i,i=Cn(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Cn(a=e.b=t[o],r,!1,e)&&i;return i},Sn.prototype.Da=function(){if(Sn.bb.Da.call(this),this.v){var e,t=this.v;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)an(n[r]);delete t.a[e],t.b--}}this.hb=null},(e=Pn.prototype).X=function(){Dn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.Y=function(){return Dn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return Nn(this.b,e)?this.b[e]:t},e.set=function(e,t){Nn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Ln=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function On(e,t){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,e instanceof On?(this.i=void 0!==t?t:e.i,Bn(this,e.c),this.l=e.l,this.a=e.a,Fn(this,e.g),this.f=e.f,Un(this,or(e.b)),this.h=e.h):e&&(n=String(e).match(Ln))?(this.i=!!t,Bn(this,n[1]||"",!0),this.l=Vn(n[2]||""),this.a=Vn(n[3]||"",!0),Fn(this,n[4]),this.f=Vn(n[5]||"",!0),Un(this,n[6]||"",!0),this.h=Vn(n[7]||"")):(this.i=!!t,this.b=new $n(null,this.i))}function Bn(e,t,n){e.c=n?Vn(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function Fn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.g=t}else e.g=null}function Un(e,t,n){t instanceof $n?(e.b=t,function(e,t){t&&!e.f&&(er(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(nr(this,t),ir(this,n,e))}),e)),e.f=t}(e.b,e.i)):(n||(t=qn(t,Yn)),e.b=new $n(t,e.i))}function jn(e,t,n){e.b.set(t,n)}function Hn(e,t){return e.b.get(t)}function Gn(e){return e instanceof On?new On(e):new On(e,void 0)}function zn(e,t,n,r){var i=new On(null,void 0);return e&&Bn(i,e),t&&(i.a=t),n&&Fn(i,n),r&&(i.f=r),i}function Vn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function qn(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Kn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Kn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}On.prototype.toString=function(){var e=[],t=this.c;t&&e.push(qn(t,Jn,!0),":");var n=this.a;return(n||"file"==t)&&(e.push("//"),(t=this.l)&&e.push(qn(t,Jn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&e.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&e.push("/"),e.push(qn(n,"/"==n.charAt(0)?Xn:Qn,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.h)&&e.push("#",qn(n,Zn)),e.join("")},On.prototype.resolve=function(e){var t=new On(this),n=!!e.c;n?Bn(t,e.c):n=!!e.l,n?t.l=e.l:n=!!e.a,n?t.a=e.a:n=null!=e.g;var r=e.f;if(n)Fn(t,e.g);else if(n=!!e.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=t.f.lastIndexOf("/");-1!=i&&(r=t.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ce(i,"./")||ce(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.f=r:n=""!==e.b.toString(),n?Un(t,or(e.b)):n=!!e.h,n&&(t.h=e.h),t};var Jn=/[#\/\?@]/g,Qn=/[#\?:]/g,Xn=/[#\?]/g,Yn=/[#\?@]/g,Zn=/#/g;function $n(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function er(e){e.a||(e.a=new Pn,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function tr(e){var t=Rn(e);if("undefined"==typeof t)throw Error("Keys are undefined");var n=new $n(null,void 0);e=In(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];Array.isArray(o)?ir(n,i,o):n.add(i,o)}return n}function nr(e,t){er(e),t=ar(e,t),Nn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Nn((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Dn(e)))}function rr(e,t){return er(e),t=ar(e,t),Nn(e.a.b,t)}function ir(e,t,n){nr(e,t),0<n.length&&(e.c=null,e.a.set(ar(e,t),ee(n)),e.b+=n.length)}function or(e){var t=new $n;return t.c=e.c,e.a&&(t.a=new Pn(e.a),t.b=e.b),t}function ar(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function sr(e){var t=[];return lr(new ur,e,t),t.join("")}function ur(){}function lr(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(Array.isArray(t)){var r=t;t=r.length,n.push("[");for(var i="",o=0;o<t;o++)n.push(i),lr(e,r[o],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(r in n.push("{"),i="",t)Object.prototype.hasOwnProperty.call(t,r)&&("function"!=typeof(o=t[r])&&(n.push(i),fr(r,n),n.push(":"),lr(e,o,n),i=","));return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":fr(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}(e=$n.prototype).add=function(e,t){er(this),this.c=null,e=ar(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(e,t){er(this),this.a.forEach((function(n,r){q(n,(function(n){e.call(t,n,r,this)}),this)}),this)},e.Y=function(){er(this);for(var e=this.a.X(),t=this.a.Y(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.X=function(e){er(this);var t=[];if("string"===typeof e)rr(this,e)&&(t=$(t,this.a.get(ar(this,e))));else{e=this.a.X();for(var n=0;n<e.length;n++)t=$(t,e[n])}return t},e.set=function(e,t){return er(this),this.c=null,rr(this,e=ar(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return e&&0<(e=this.X(e)).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.Y(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var cr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},hr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function fr(e,t){t.push('"',e.replace(hr,(function(e){var t=cr[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),cr[e]=t),t})),'"')}function dr(){var e=Dr();return Xe&&!!lt&&11==lt||/Edge\/\d+/.test(e)}function pr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function vr(e,t){t=t||s.window;var n="about:blank";e&&(n=Ne(Fe(e)||He)),t.location.href=n}function mr(e,t){var n,r=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?r.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<mr(e[n],t[n]).length&&r.push(n):e[n]!==t[n]&&r.push(n):r.push(n);for(n in t)n in e||r.push(n);return r}function gr(e){return!!((e=(e||Dr()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function yr(e){e=e||s.window;try{e.close()}catch(wU){}}function br(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Dr().toLowerCase(),r&&(t.target=r,ce(n,"crios/")&&(t.target="_blank")),Ir(Dr())==Mr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof De?n:Fe("undefined"!=typeof n.href?n.href:String(n))||He,n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((pe("iPhone")&&!pe("iPod")&&!pe("iPad")||pe("iPad")||pe("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(_e(a=gt(document,"A"),"HTMLAnchorElement"),t=t instanceof De?t:Ue(t),a.href=Ne(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=Ve("",r,n,a),e=Ne(t),a&&(Ze&&ce(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+qe(e)+'">',e=new Ge(e=(r=Te())?r.createHTML(e):e,null,ze),r=a.document)&&(r.write(function(e){return e instanceof Ge&&e.constructor===Ge?e.a:(F("expected object of type SafeHtml, got '"+e+"' of type "+d(e)),"type_error:SafeHtml")}(e)),r.close())):(a=Ve(t,r,n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var _r=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wr=/^[^@]+@[^@]+$/;function xr(){var e=null;return new Et((function(t){"complete"==s.document.readyState?t():(e=function(){t()},pn(window,"load",e))})).o((function(t){throw vn(window,"load",e),t}))}function Er(e){return e=e||Dr(),!("file:"!==Fr()&&"ionic:"!==Fr()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sr(){var e=s.window;try{return!(!e||e==e.top)}catch(wU){return!1}}function Ar(){return"undefined"!==typeof s.WorkerGlobalScope&&"function"===typeof s.importScripts}function Tr(){return l.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":l.default.INTERNAL.hasOwnProperty("node")?"Node":Ar()?"Worker":"Browser"}function Cr(){var e=Tr();return"ReactNative"===e||"Node"===e}var Mr="Firefox",kr="Chrome";function Ir(e){var t=e.toLowerCase();return ce(t,"opera/")||ce(t,"opr/")||ce(t,"opios/")?"Opera":ce(t,"iemobile")?"IEMobile":ce(t,"msie")||ce(t,"trident/")?"IE":ce(t,"edge/")?"Edge":ce(t,"firefox/")?Mr:ce(t,"silk/")?"Silk":ce(t,"blackberry")?"Blackberry":ce(t,"webos")?"Webos":!ce(t,"safari/")||ce(t,"chrome/")||ce(t,"crios/")||ce(t,"android")?!ce(t,"chrome/")&&!ce(t,"crios/")||ce(t,"edge/")?ce(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":kr:"Safari"}var Rr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Pr(e,t){t=t||[];var n,r=[],i={};for(n in Rr)i[Rr[n]]=!0;for(n=0;n<t.length;n++)"undefined"!==typeof i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=Tr())?r=Ir(i=Dr()):"Worker"===r&&(r=Ir(i=Dr())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function Dr(){return s.navigator&&s.navigator.userAgent||""}function Nr(e,t){e=e.split("."),t=t||s;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function Lr(){try{var e=s.localStorage,t=zr();if(e)return e.setItem(t,"1"),e.removeItem(t),!dr()||!!s.indexedDB}catch(vU){return Ar()&&!!s.indexedDB}return!1}function Or(){return(Br()||"chrome-extension:"===Fr()||Er())&&!Cr()&&Lr()&&!Ar()}function Br(){return"http:"===Fr()||"https:"===Fr()}function Fr(){return s.location&&s.location.protocol||null}function Ur(e){return!gr(e=e||Dr())&&Ir(e)!=Mr}function jr(e){return"undefined"===typeof e?null:sr(e)}function Hr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Gr(e){if(null!==e)return JSON.parse(e)}function zr(e){return e||Math.floor(1e9*Math.random()).toString()}function Vr(e){return"Safari"!=Ir(e=e||Dr())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function Wr(){var e=s.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function qr(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=Dr(),t=Tr(),this.b=gr(e)||"ReactNative"===t}function Kr(){var e=s.document;return!e||"undefined"===typeof e.visibilityState||"visible"==e.visibilityState}function Jr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(vU){}return null}function Qr(){return!(!Nr("fireauth.oauthhelper",s)&&!Nr("fireauth.iframe",s))}qr.prototype.get=function(){var e=s.navigator;return!e||"boolean"!==typeof e.onLine||!Br()&&"chrome-extension:"!==Fr()&&"undefined"===typeof e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Xr,Yr={};function Zr(e){Yr[e]||(Yr[e]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(e))}try{var $r={};Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:2}),Xr=2==$r.abcd}catch(bU){Xr=!1}function ei(e,t,n){Xr?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function ti(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&ei(e,n,t[n])}function ni(e){var t={};return ti(t,e),t}function ri(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)ei(t,n,ri(e[n]));return t}function ii(e){var t=e&&(e[li]?"phone":null);if(!(t&&e&&e[ui]))throw new M("internal-error","Internal assert: invalid MultiFactorInfo object");ei(this,"uid",e[ui]),ei(this,"displayName",e[ai]||null);var n=null;e[si]&&(n=new Date(e[si]).toUTCString()),ei(this,"enrollmentTime",n),ei(this,"factorId",t)}function oi(e){try{var t=new ci(e)}catch(vU){t=null}return t}ii.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ai="displayName",si="enrolledAt",ui="mfaEnrollmentId",li="phoneInfo";function ci(e){ii.call(this,e),ei(this,"phoneNumber",e[li])}function hi(e){var t={},n=e[vi],r=e[gi],i=e[yi];if(e=oi(e[mi]),!i||i!=di&&i!=pi&&!n||i==pi&&!r||i==fi&&!e)throw Error("Invalid checkActionCode response!");i==pi?(t[_i]=n||null,t[xi]=n||null,t[bi]=r):(t[_i]=r||null,t[xi]=r||null,t[bi]=n||null),t[wi]=e||null,ei(this,Si,i),ei(this,Ei,ri(t))}T(ci,ii),ci.prototype.w=function(){var e=ci.bb.w.call(this);return e.phoneNumber=this.phoneNumber,e};var fi="REVERT_SECOND_FACTOR_ADDITION",di="EMAIL_SIGNIN",pi="VERIFY_AND_CHANGE_EMAIL",vi="email",mi="mfaInfo",gi="newEmail",yi="requestType",bi="email",_i="fromEmail",wi="multiFactorInfo",xi="previousEmail",Ei="data",Si="operation";function Ai(e){var t=Hn(e=Gn(e),Ti)||null,n=Hn(e,Ci)||null,r=Hn(e,Ii)||null;if(r=r&&Pi[r]||null,!t||!n||!r)throw new M("argument-error",Ti+", "+Ci+"and "+Ii+" are required in a valid action code URL.");ti(this,{apiKey:t,operation:r,code:n,continueUrl:Hn(e,Mi)||null,languageCode:Hn(e,ki)||null,tenantId:Hn(e,Ri)||null})}var Ti="apiKey",Ci="oobCode",Mi="continueUrl",ki="languageCode",Ii="mode",Ri="tenantId",Pi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:fi,signIn:di,verifyAndChangeEmail:pi,verifyEmail:"VERIFY_EMAIL"};function Di(e){try{return new Ai(e)}catch(wU){return null}}function Ni(e){var t=e[Ui];if("undefined"===typeof t)throw new M("missing-continue-uri");if("string"!==typeof t||"string"===typeof t&&!t.length)throw new M("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[Li];if(n&&"object"===typeof n){t=n[Gi];var r=n[ji];if(n=n[Hi],"string"===typeof t&&t.length){if(this.a=t,"undefined"!==typeof r&&"boolean"!==typeof r)throw new M("argument-error",ji+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new M("argument-error",Hi+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof t)throw new M("argument-error",Gi+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new M("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new M("argument-error",Li+" property must be a non null object when specified.");if(this.f=null,(t=e[Fi])&&"object"===typeof t){if("string"===typeof(t=t[zi])&&t.length)this.f=t;else if("undefined"!==typeof t)throw new M("argument-error",zi+" property must be a non empty string when specified.")}else if("undefined"!==typeof t)throw new M("argument-error",Fi+" property must be a non null object when specified.");if("undefined"!==typeof(t=e[Bi])&&"boolean"!==typeof t)throw new M("argument-error",Bi+" property must be a boolean when specified.");if(this.c=!!t,"undefined"!==typeof(e=e[Oi])&&("string"!==typeof e||"string"===typeof e&&!e.length))throw new M("argument-error",Oi+" property must be a non empty string when specified.");this.i=e||null}var Li="android",Oi="dynamicLinkDomain",Bi="handleCodeInApp",Fi="iOS",Ui="url",ji="installApp",Hi="minimumVersion",Gi="packageName",zi="bundleId";function Vi(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var Wi=null;function qi(e){var t=[];return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=Wi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!Wi){Wi={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=e.concat(t[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Wi[o]&&(Wi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,(function(e){t.push(e)})),t}function Ki(e){var t=Qi(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.h=e,this.a=t.exp,this.i=t.sub,e=Date.now()/1e3,this.g=t.iat||(e>this.a?this.a:e),this.b=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.f=t.firebase&&t.firebase.tenant||null,this.c=!!t.is_anonymous||"anonymous"==this.b}function Ji(e){try{return new Ki(e)}catch(wU){return null}}function Qi(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{var r=qi(e);for(e=[],n=t=0;t<r.length;){var i=r[t++];if(128>i)e[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[t++];e[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[t++];var a=r[t++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[t++])-65536;e[n++]=String.fromCharCode(55296+(s>>10)),e[n++]=String.fromCharCode(56320+(1023&s))}else o=r[t++],a=r[t++],e[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(e.join(""))}catch(A){}return null}Ki.prototype.T=function(){return this.f},Ki.prototype.l=function(){return this.c},Ki.prototype.toString=function(){return this.h};var Xi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Yi=["client_id","response_type","scope","redirect_uri","state"],Zi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Yi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Yi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Yi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Xi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function $i(e){for(var t in Zi)if(Zi[t].fa==e)return Zi[t];return null}function eo(e){var t={};t["facebook.com"]=oo,t["google.com"]=so,t["github.com"]=ao,t["twitter.com"]=uo;var n=e&&e[no];try{if(n)return t[n]?new t[n](e):new io(e);if("undefined"!==typeof e[to])return new ro(e)}catch(r){}return null}var to="idToken",no="providerId";function ro(e){var t=e[no];if(!t&&e[to]){var n=Ji(e[to]);n&&n.b&&(t=n.b)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,"undefined"!==typeof e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),ei(this,"providerId",t),ei(this,"isNewUser",n)}function io(e){ro.call(this,e),ei(this,"profile",ri((e=Gr(e.rawUserInfo||"{}"))||{}))}function oo(e){if(io.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ao(e){if(io.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");ei(this,"username",this.profile&&this.profile.login||null)}function so(e){if(io.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function uo(e){if(io.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");ei(this,"username",e.screenName||null)}function lo(e){var t=Gn(e),n=Hn(t,"link"),r=Hn(Gn(n),"link");return t=Hn(t,"deep_link_id"),Hn(Gn(t),"link")||t||r||n||e}function co(e,t){if(!e&&!t)throw new M("internal-error","Internal assert: no raw session string available");if(e&&t)throw new M("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=t||null,this.type=this.a?ho:fo}T(io,ro),T(oo,io),T(ao,io),T(so,io),T(uo,io);var ho="enroll",fo="signin";function po(){}function vo(e,t){return e.then((function(e){if(e[rs]){var n=Ji(e[rs]);if(!n||t!=n.i)throw new M("user-mismatch");return e}throw new M("user-mismatch")})).o((function(e){throw e&&e.code&&e.code==R+"user-not-found"?new M("user-mismatch"):e}))}function mo(e,t){if(!t)throw new M("internal-error","failed to construct a credential");this.a=t,ei(this,"providerId",e),ei(this,"signInMethod",e)}function go(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function yo(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new mo(e.providerId,e.pendingToken)}catch(wU){}return null}function bo(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&ei(this,"idToken",t.idToken),t.accessToken&&ei(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&ei(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new M("internal-error","failed to construct a credential");ei(this,"accessToken",t.oauthToken),ei(this,"secret",t.oauthTokenSecret)}ei(this,"providerId",e),ei(this,"signInMethod",n)}function _o(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:tr(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function wo(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new bo(e.providerId,t,e.signInMethod)}catch(vU){}}return null}function xo(e,t){this.Qc=t||[],ti(this,{providerId:e,isOAuthProvider:!0}),this.Jb={},this.qb=($i(e)||{}).Ja||null,this.pb=null}function Eo(e){if("string"!==typeof e||0!=e.indexOf("saml."))throw new M("argument-error",'SAML provider IDs must be prefixed with "saml."');xo.call(this,e,[])}function So(e){xo.call(this,e,Yi),this.a=[]}function Ao(){So.call(this,"facebook.com")}function To(e){if(!e)throw new M("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return m(e)&&(t=e.accessToken),(new Ao).credential({accessToken:t})}function Co(){So.call(this,"github.com")}function Mo(e){if(!e)throw new M("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return m(e)&&(t=e.accessToken),(new Co).credential({accessToken:t})}function ko(){So.call(this,"google.com"),this.Ca("profile")}function Io(e,t){var n=e;return m(e)&&(n=e.idToken,t=e.accessToken),(new ko).credential({idToken:n,accessToken:t})}function Ro(){xo.call(this,"twitter.com",Xi)}function Po(e,t){var n=e;if(m(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new M("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new bo("twitter.com",n,"twitter.com")}function Do(e,t,n){this.a=e,this.f=t,ei(this,"providerId","password"),ei(this,"signInMethod",n===Lo.EMAIL_LINK_SIGN_IN_METHOD?Lo.EMAIL_LINK_SIGN_IN_METHOD:Lo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function No(e){return e&&e.email&&e.password?new Do(e.email,e.password,e.signInMethod):null}function Lo(){ti(this,{providerId:"password",isOAuthProvider:!1})}function Oo(e,t){if(!(t=Bo(t)))throw new M("argument-error","Invalid email link!");return new Do(e,t.code,Lo.EMAIL_LINK_SIGN_IN_METHOD)}function Bo(e){return(e=Di(e=lo(e)))&&e.operation===di?e:null}function Fo(e){if(!(e.fb&&e.eb||e.La&&e.ea))throw new M("internal-error");this.a=e,ei(this,"providerId","phone"),this.fa="phone",ei(this,"signInMethod","phone")}function Uo(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return q(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new Fo(t)}return null}function jo(e){return e.a.La&&e.a.ea?{temporaryProof:e.a.La,phoneNumber:e.a.ea}:{sessionInfo:e.a.fb,code:e.a.eb}}function Ho(e){try{this.a=e||l.default.auth()}catch(wU){throw new M("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ti(this,{providerId:"phone",isOAuthProvider:!1})}function Go(e,t){if(!e)throw new M("missing-verification-id");if(!t)throw new M("missing-verification-code");return new Fo({fb:e,eb:t})}function zo(e){if(e.temporaryProof&&e.phoneNumber)return new Fo({La:e.temporaryProof,ea:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return Io(o,n);case"facebook.com":return To(n);case"github.com":return Mo(n);case"twitter.com":return Po(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new mo(t,a):new bo(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new So(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function Vo(e){if(!e.isOAuthProvider)throw new M("invalid-oauth-provider")}function Wo(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new M("invalid-auth-event");if(this.g&&this.a)throw new M("invalid-auth-event");if(this.g&&!this.f)throw new M("invalid-auth-event")}function qo(e){return(e=e||{}).type?new Wo(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&k(e.error),e.postBody,e.tenantId):null}function Ko(){this.b=null,this.a=[]}co.prototype.Ha=function(){return this.a?It(this.a):It(this.b)},co.prototype.w=function(){return this.type==ho?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},po.prototype.ka=function(){},po.prototype.b=function(){},po.prototype.c=function(){},po.prototype.w=function(){},mo.prototype.ka=function(e){return As(e,go(this))},mo.prototype.b=function(e,t){var n=go(this);return n.idToken=t,Ts(e,n)},mo.prototype.c=function(e,t){return vo(Cs(e,go(this)),t)},mo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},bo.prototype.ka=function(e){return As(e,_o(this))},bo.prototype.b=function(e,t){var n=_o(this);return n.idToken=t,Ts(e,n)},bo.prototype.c=function(e,t){return vo(Cs(e,_o(this)),t)},bo.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},xo.prototype.Ka=function(e){return this.Jb=ge(e),this},T(Eo,xo),T(So,xo),So.prototype.Ca=function(e){return X(this.a,e)||this.a.push(e),this},So.prototype.Rb=function(){return ee(this.a)},So.prototype.credential=function(e,t){var n;if(!(n=m(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new M("argument-error","credential failed: must provide the ID token and/or the access token.");return new bo(this.providerId,n,this.providerId)},T(Ao,So),ei(Ao,"PROVIDER_ID","facebook.com"),ei(Ao,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),T(Co,So),ei(Co,"PROVIDER_ID","github.com"),ei(Co,"GITHUB_SIGN_IN_METHOD","github.com"),T(ko,So),ei(ko,"PROVIDER_ID","google.com"),ei(ko,"GOOGLE_SIGN_IN_METHOD","google.com"),T(Ro,xo),ei(Ro,"PROVIDER_ID","twitter.com"),ei(Ro,"TWITTER_SIGN_IN_METHOD","twitter.com"),Do.prototype.ka=function(e){return this.signInMethod==Lo.EMAIL_LINK_SIGN_IN_METHOD?uu(e,Ls,{email:this.a,oobCode:this.f}):uu(e,ru,{email:this.a,password:this.f})},Do.prototype.b=function(e,t){return this.signInMethod==Lo.EMAIL_LINK_SIGN_IN_METHOD?uu(e,Os,{idToken:t,email:this.a,oobCode:this.f}):uu(e,Qs,{idToken:t,email:this.a,password:this.f})},Do.prototype.c=function(e,t){return vo(this.ka(e),t)},Do.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},ti(Lo,{PROVIDER_ID:"password"}),ti(Lo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ti(Lo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Fo.prototype.ka=function(e){return e.gb(jo(this))},Fo.prototype.b=function(e,t){var n=jo(this);return n.idToken=t,uu(e,ou,n)},Fo.prototype.c=function(e,t){var n=jo(this);return n.operation="REAUTH",vo(e=uu(e,au,n),t)},Fo.prototype.w=function(){var e={providerId:"phone"};return this.a.fb&&(e.verificationId=this.a.fb),this.a.eb&&(e.verificationCode=this.a.eb),this.a.La&&(e.temporaryProof=this.a.La),this.a.ea&&(e.phoneNumber=this.a.ea),e},Ho.prototype.gb=function(e,t){var n=this.a.a;return It(t.verify()).then((function(r){if("string"!==typeof r)throw new M("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===t.type){var i,o=m(e)?e.session:null,a=m(e)?e.phoneNumber:e;return i=o&&o.type==ho?o.Ha().then((function(e){return function(e,t){return uu(e,Ys,t).then((function(e){return e.phoneSessionInfo.sessionInfo}))}(n,{idToken:e,phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r}})})):o&&o.type==fo?o.Ha().then((function(t){return function(e,t){return uu(e,Zs,t).then((function(e){return e.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(e,t){return uu(e,Ks,t)}(n,{phoneNumber:a,recaptchaToken:r}),i.then((function(e){return"function"===typeof t.reset&&t.reset(),e}),(function(e){throw"function"===typeof t.reset&&t.reset(),e}))}throw new M("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}))},ti(Ho,{PROVIDER_ID:"phone"}),ti(Ho,{PHONE_SIGN_IN_METHOD:"phone"}),Wo.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},Wo.prototype.T=function(){return this.h},Wo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Jo,Qo=null;function Xo(e){var t="unauthorized-domain",n=void 0,r=Gn(e);e=r.a,"chrome-extension"==(r=r.c)?n=We("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=We("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",M.call(this,t,n)}function Yo(e,t,n){M.call(this,e,n),(e=t||{}).Kb&&ei(this,"email",e.Kb),e.ea&&ei(this,"phoneNumber",e.ea),e.credential&&ei(this,"credential",e.credential),e.$b&&ei(this,"tenantId",e.$b)}function Zo(e){if(e.code){var t=e.code||"";0==t.indexOf(R)&&(t=t.substring(R.length));var n={credential:zo(e),$b:e.tenantId};if(e.email)n.Kb=e.email;else if(e.phoneNumber)n.ea=e.phoneNumber;else if(!n.credential)return new M(t,e.message||void 0);return new Yo(t,n,e.message)}return null}function $o(){}function ea(e){return e.c||(e.c=e.b())}function ta(){}function na(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(lU){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function ra(){}function ia(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=x(this.qc,this),this.a.onerror=x(this.Tb,this),this.a.onprogress=x(this.rc,this),this.a.ontimeout=x(this.vc,this)}function oa(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function aa(e,t,n){this.reset(e,t,n,void 0,void 0)}T(Xo,M),T(Yo,M),Yo.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.w();return t&&be(e,t),e},Yo.prototype.toJSON=function(){return this.w()},$o.prototype.c=null,T(ta,$o),ta.prototype.a=function(){var e=na(this);return e?new ActiveXObject(e):new XMLHttpRequest},ta.prototype.b=function(){var e={};return na(this)&&(e[0]=!0,e[1]=!0),e},Jo=new ta,T(ra,$o),ra.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new ia;throw Error("Unsupported browser")},ra.prototype.b=function(){return{}},(e=ia.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,oa(this,4)},e.Tb=function(){this.status=500,this.response=this.responseText="",oa(this,4)},e.vc=function(){this.Tb()},e.rc=function(){this.status=200,oa(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},aa.prototype.a=null;function sa(e){this.f=e,this.b=this.c=this.a=null}function ua(e,t){this.name=e,this.value=t}aa.prototype.reset=function(e,t,n,r,i){"number"==typeof i||0,r||S(),delete this.a},ua.prototype.toString=function(){return this.name};var la=new ua("SEVERE",1e3),ca=new ua("WARNING",900),ha=new ua("CONFIG",700),fa=new ua("FINE",500);function da(e){return e.c?e.c:e.a?da(e.a):(F("Root logger has no level set."),null)}sa.prototype.log=function(e,t,n){if(e.value>=da(this).value)for(v(t)&&(t=t()),e=new aa(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var pa={},va=null;function ma(e){var t;if(va||(va=new sa(""),pa[""]=va,va.c=ha),!(t=pa[e])){t=new sa(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=ma(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,pa[e]=t}return t}function ga(e,t){e&&e.log(fa,t,void 0)}function ya(e){this.f=e}function ba(e){Sn.call(this),this.u=e,this.h=void 0,this.readyState=_a,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ma("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}T(ya,$o),ya.prototype.a=function(){return new ba(this.f)},ya.prototype.b=function(e){return function(){return e}}({}),T(ba,Sn);var _a=0;function wa(e){e.c.read().then(e.pc.bind(e)).catch(e.Va.bind(e))}function xa(e){e.readyState=4,e.g=null,e.c=null,e.m=null,Ea(e)}function Ea(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Sa(e){Sn.call(this),this.headers=new Pn,this.D=e||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=Aa,this.u=this.S=!1}(e=ba.prototype).open=function(e,t){if(this.readyState!=_a)throw this.abort(),Error("Error reopening a connection");this.s=e,this.f=t,this.readyState=1,Ea(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.l,method:this.s,credentials:this.h,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.f,t)).then(this.uc.bind(this),this.Va.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,xa(this)),this.readyState=_a},e.uc=function(e){this.a&&(this.g=e,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=e.headers,this.readyState=2,Ea(this)),this.a&&(this.readyState=3,Ea(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):"undefined"!==typeof s.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.m=new TextDecoder,wa(this)):e.text().then(this.tc.bind(this),this.Va.bind(this)))))},e.pc=function(e){if(this.a){var t=this.m.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?xa(this):Ea(this),3==this.readyState&&wa(this)}},e.tc=function(e){this.a&&(this.response=this.responseText=e,xa(this))},e.sc=function(e){this.a&&(this.response=e,xa(this))},e.Va=function(e){var t=this.i;t&&t.log(ca,"Failed to fetch url "+this.f,e instanceof Error?e:Error(e)),this.a&&xa(this)},e.setRequestHeader=function(e,t){this.l.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.i)&&e.log(ca,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var e=this.i;return e&&e.log(ca,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ba.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(e){this.h=e?"include":"same-origin"}}),T(Sa,Sn);var Aa="";Sa.prototype.b=ma("goog.net.XhrIo");var Ta=/^https?$/i,Ca=["POST","PUT"];function Ma(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.J=!1,e.c=!0,e.a=e.D?e.D.a():Jo.a(),e.C=e.D?ea(e.D):ea(Jo),e.a.onreadystatechange=x(e.Wb,e);try{ga(e.b,Ba(e,"Opening Xhr")),e.N=!0,e.a.open(n,String(t),!0),e.N=!1}catch(a){return ga(e.b,Ba(e,"Error opening Xhr: "+a.message)),void Ia(e,a)}t=r||"";var o=new Pn(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(p(e)||"string"===typeof e)q(e,t,void 0);else for(var n=Rn(e),r=In(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,(function(e,t){o.set(t,e)})),i=function(e){e:{for(var t=ka,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(o.Y()),r=s.FormData&&t instanceof s.FormData,!X(Ca,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{Na(e),0<e.g&&(e.u=function(e){return Xe&&st(9)&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(e.a),ga(e.b,Ba(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=x(e.Ma,e)):e.s=Mn(e.Ma,e.g,e)),ga(e.b,Ba(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(a){ga(e.b,Ba(e,"Send error: "+a.message)),Ia(e,a)}}function ka(e){return"content-type"==e.toLowerCase()}function Ia(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,Ra(e),Da(e)}function Ra(e){e.J||(e.J=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Pa(e){if(e.c&&"undefined"!=typeof a)if(e.C[1]&&4==La(e)&&2==Oa(e))ga(e.b,Ba(e,"Local request error detected and ignored"));else if(e.i&&4==La(e))Mn(e.Wb,0,e);else if(e.dispatchEvent("readystatechange"),4==La(e)){ga(e.b,Ba(e,"Request complete")),e.c=!1;try{var t,n=Oa(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(Ln)[1]||null;if(!o&&s.self&&s.self.location){var u=s.self.location.protocol;o=u.substr(0,u.length-1)}i=!Ta.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var l=2<La(e)?e.a.statusText:""}catch(c){ga(e.b,"Can not get status: "+c.message),l=""}e.h=l+" ["+Oa(e)+"]",Ra(e)}}finally{Da(e)}}}function Da(e,t){if(e.a){Na(e);var n=e.a,r=e.C[0]?f:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(lU){(e=e.b)&&e.log(la,"Problem encountered resetting onreadystatechange: "+lU.message,void 0)}}}function Na(e){e.a&&e.u&&(e.a.ontimeout=null),e.s&&(s.clearTimeout(e.s),e.s=null)}function La(e){return e.a?e.a.readyState:0}function Oa(e){try{return 2<La(e)?e.a.status:-1}catch(wU){return-1}}function Ba(e,t){return t+" ["+e.P+" "+e.l+" "+Oa(e)+"]"}function Fa(e){var t=Qa;this.g=[],this.u=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ua(e,t,n){e.a=!0,e.c=n,e.f=!t,za(e)}function ja(e){if(e.a){if(!e.v)throw new Va(e);e.v=!1}}function Ha(e,t,n,r){e.g.push([t,n,r]),e.a&&za(e)}function Ga(e){return Q(e.g,(function(e){return v(e[1])}))}function za(e){if(e.h&&e.a&&Ga(e)){var t=e.h,n=Ka[t];n&&(s.clearTimeout(n.a),delete Ka[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var u=o.call(i||e.s,t);void 0!==u&&(e.f=e.f&&(u==t||u instanceof Error),e.c=t=u),(L(t)||"function"===typeof s.Promise&&t instanceof s.Promise)&&(r=!0,e.i=!0)}catch(l){t=l,e.f=!0,Ga(e)||(n=!0)}}e.c=t,r&&(u=x(e.m,e,!0),r=x(e.m,e,!1),t instanceof Fa?(Ha(t,u,r),t.C=!0):t.then(u,r)),n&&(t=new qa(t),Ka[t.a]=t,e.h=t.a)}function Va(){O.call(this)}function Wa(){O.call(this)}function qa(e){this.a=s.setTimeout(x(this.c,this),0),this.b=e}(e=Sa.prototype).Ma=function(){"undefined"!=typeof a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ga(this.b,Ba(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(ga(this.b,Ba(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Da(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Da(this,!0)),Sa.bb.Da.call(this)},e.Wb=function(){this.ya||(this.N||this.i||this.f?Pa(this):this.Jc())},e.Jc=function(){Pa(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Aa:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(la,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(wU){return ga(this.b,"Can not get response: "+wU.message),null}},Fa.prototype.cancel=function(e){if(this.a)this.c instanceof Fa&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(e=new Wa(this),ja(this),Ua(this,!1,e))}},Fa.prototype.m=function(e,t){this.i=!1,Ua(this,e,t)},Fa.prototype.then=function(e,t,n){var r,i,o=new Et((function(e,t){r=e,i=t}));return Ha(this,r,(function(e){e instanceof Wa?o.cancel():i(e)})),o.then(e,t,n)},Fa.prototype.$goog_Thenable=!0,T(Va,O),Va.prototype.message="Deferred has already fired",Va.prototype.name="AlreadyCalledError",T(Wa,O),Wa.prototype.message="Deferred was canceled",Wa.prototype.name="CanceledError",qa.prototype.c=function(){throw delete Ka[this.a],this.b};var Ka={};function Ja(e){var t={},n=t.document||document,r=Me(e).toString(),i=gt(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new Fa(o),u=null,l=null!=t.timeout?t.timeout:5e3;return 0<l&&(u=window.setTimeout((function(){Xa(i,!0);var e=new $a(Za,"Timeout reached for loading script "+r);ja(a),Ua(a,!1,e)}),l),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Xa(i,t.xd||!1,u),ja(a),Ua(a,!0,null))},i.onerror=function(){Xa(i,!0,u);var e=new $a(Ya,"Error while loading script "+r);ja(a),Ua(a,!1,e)},be(o=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ft(i,o),function(e,t){_e(e,"HTMLScriptElement"),e.src=Me(t),(t=e.ownerDocument&&e.ownerDocument.defaultView)&&t!=s?t=h(t.document):(null===c&&(c=h(s.document)),t=c),t&&e.setAttribute("nonce",t)}(i,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),a}function Qa(){if(this&&this.Xb){var e=this.Xb;e&&"SCRIPT"==e.tagName&&Xa(e,!0,this.Ma)}}function Xa(e,t,n){null!=n&&s.clearTimeout(n),e.onload=f,e.onerror=f,e.onreadystatechange=f,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Ya=0,Za=1;function $a(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),O.call(this,n),this.code=e}function es(e){this.f=e}function ts(e,t,n){if(this.c=e,e=t||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||is,this.g=ge(e.secureTokenHeaders||os),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=e.firebaseTimeout||as,this.a=ge(e.firebaseHeaders||ss),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Tr(),!(n=s.XMLHttpRequest||n&&l.default.INTERNAL.node&&l.default.INTERNAL.node.XMLHttpRequest)&&!Ar())throw new M("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Ar()?this.f=new ya(self):Cr()?this.f=new es(n):this.f=new ra,this.b=null}T($a,O),T(es,$o),es.prototype.a=function(){return new this.f},es.prototype.b=function(){return{}};var ns,rs="idToken",is=new qr(3e4,6e4),os={"Content-Type":"application/x-www-form-urlencoded"},as=new qr(3e4,6e4),ss={"Content-Type":"application/json"};function us(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function ls(e,t){t&&(e.l=cs("https://securetoken.googleapis.com/v1/token",t),e.h=cs("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",t),e.i=cs("https://identitytoolkit.googleapis.com/v2/",t))}function cs(e,t){return e=Gn(e),t=Gn(t.url),e.f=e.a+e.f,Bn(e,t.c),e.a=t.a,Fn(e,t.g),e.toString()}function hs(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function fs(e,t,n,r,i,o,a){(function(){var e=Dr();return!((e=Ir(e)!=kr?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e)&&(!Xe||!lt||9<lt)})()||Ar()?e=x(e.u,e):(ns||(ns=new Et((function(e,t){!function(e,t){if(((window.gapi||{}).client||{}).request)e();else{s[ps]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){Ha(e,null,t,void 0)}(Ja(ke(ds,{onload:ps})),(function(){t(Error("CORS_UNSUPPORTED"))}))}}(e,t)}))),e=x(e.s,e)),e(t,n,r,i,o,a)}ts.prototype.T=function(){return this.b},ts.prototype.u=function(e,t,n,r,i,o){if(Ar()&&("undefined"===typeof s.fetch||"undefined"===typeof s.Headers||"undefined"===typeof s.Request))throw new M("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new Sa(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}An(a,"complete",(function(){u&&clearTimeout(u);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return ga(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(A){e=null}t&&t(e)})),Tn(a,"ready",(function(){u&&clearTimeout(u),Jt(this)})),Tn(a,"timeout",(function(){u&&clearTimeout(u),Jt(this),t&&t(null)})),Ma(a,e,n,r,i)};var ds=new we(Ae,"https://apis.google.com/js/client.js?onload=%{onload}"),ps="__fcb"+Math.floor(1e6*Math.random()).toString();function vs(e,t,n,r,i,o,a){var s=Gn(t+n);jn(s,"key",e.c),a&&jn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var l in i)i.hasOwnProperty(l)&&jn(s,l,i[l]);return new Et((function(t,n){fs(e,s.toString(),(function(e){e?e.error?n(cu(e,o||{})):t(e):n(new M("network-request-failed"))}),r,u?void 0:sr(Hr(i)),e.a,e.v.get())}))}function ms(e){if("string"!==typeof(e=e.email)||!wr.test(e))throw new M("invalid-email")}function gs(e){"email"in e&&ms(e)}function ys(e){if(!e[rs]){if(e.mfaPendingCredential)throw new M("multi-factor-auth-required",null,ge(e));throw new M("internal-error")}}function bs(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new M("internal-error")}else{if(!e.sessionInfo)throw new M("missing-verification-id");if(!e.code)throw new M("missing-verification-code")}}ts.prototype.s=function(e,t,n,r,i){var o=this;ns.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})})).o((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},ts.prototype.Ab=function(){return uu(this,Xs,{})},ts.prototype.Cb=function(e,t){return uu(this,Js,{idToken:e,email:t})},ts.prototype.Db=function(e,t){return uu(this,Qs,{idToken:e,password:t})};var _s={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ws(e){if(!e.phoneVerificationInfo)throw new M("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new M("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new M("missing-verification-code")}function xs(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new M("internal-error")}function Es(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(rr(e=new $n(e.postBody),"nonce")&&(t.nonce=e.get("nonce")))),t}function Ss(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Zo(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Zo(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Zo(e)):e.errorMessage&&(t=lu(e.errorMessage)),t)throw t;ys(e)}function As(e,t){return t.returnIdpCredential=!0,uu(e,$s,t)}function Ts(e,t){return t.returnIdpCredential=!0,uu(e,tu,t)}function Cs(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,uu(e,eu,t)}function Ms(e){if(!e.oobCode)throw new M("invalid-action-code")}(e=ts.prototype).Eb=function(e,t){var n={idToken:e},r=[];return ve(_s,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),uu(this,Js,n)},e.wb=function(e,t){return be(e={requestType:"PASSWORD_RESET",email:e},t),uu(this,zs,e)},e.xb=function(e,t){return be(e={requestType:"EMAIL_SIGNIN",email:e},t),uu(this,js,e)},e.vb=function(e,t){return be(e={requestType:"VERIFY_EMAIL",idToken:e},t),uu(this,Hs,e)},e.Fb=function(e,t,n){return be(e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t},n),uu(this,Gs,e)},e.gb=function(e){return uu(this,iu,e)},e.ob=function(e,t){return uu(this,qs,{oobCode:e,newPassword:t})},e.Sa=function(e){return uu(this,Is,{oobCode:e})},e.kb=function(e){return uu(this,ks,{oobCode:e})};var ks={endpoint:"setAccountInfo",A:Ms,Z:"email",B:!0},Is={endpoint:"resetPassword",A:Ms,G:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new M("internal-error")},B:!0},Rs={endpoint:"signupNewUser",A:function(e){if(ms(e),!e.password)throw new M("weak-password")},G:ys,V:!0,B:!0},Ps={endpoint:"createAuthUri",B:!0},Ds={endpoint:"deleteAccount",O:["idToken"]},Ns={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(e){if(!Array.isArray(e.deleteProvider))throw new M("internal-error")}},Ls={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ms,G:ys,V:!0,B:!0},Os={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ms,G:ys,V:!0},Bs={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:ws,G:ys,B:!0,Na:!0},Fs={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:ws,G:ys,B:!0,Na:!0},Us={endpoint:"getAccountInfo"},js={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new M("internal-error");ms(e)},Z:"email",B:!0},Hs={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new M("internal-error")},Z:"email",B:!0},Gs={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new M("internal-error")},Z:"email",B:!0},zs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new M("internal-error");ms(e)},Z:"email",B:!0},Vs={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Ws={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new M("internal-error")}},qs={endpoint:"resetPassword",A:Ms,Z:"email",B:!0},Ks={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Js={endpoint:"setAccountInfo",O:["idToken"],A:gs,V:!0},Qs={endpoint:"setAccountInfo",O:["idToken"],A:function(e){if(gs(e),!e.password)throw new M("weak-password")},G:ys,V:!0},Xs={endpoint:"signupNewUser",G:ys,V:!0,B:!0},Ys={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new M("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new M("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new M("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new M("internal-error")},B:!0,Na:!0},Zs={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new M("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new M("internal-error")},B:!0,Na:!0},$s={endpoint:"verifyAssertion",A:xs,Za:Es,G:Ss,V:!0,B:!0},eu={endpoint:"verifyAssertion",A:xs,Za:Es,G:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new M("user-not-found");if(e.errorMessage)throw lu(e.errorMessage);ys(e)},V:!0,B:!0},tu={endpoint:"verifyAssertion",A:function(e){if(xs(e),!e.idToken)throw new M("internal-error")},Za:Es,G:Ss,V:!0},nu={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new M("invalid-custom-token")},G:ys,V:!0,B:!0},ru={endpoint:"verifyPassword",A:function(e){if(ms(e),!e.password)throw new M("wrong-password")},G:ys,V:!0,B:!0},iu={endpoint:"verifyPhoneNumber",A:bs,G:ys,B:!0},ou={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new M("internal-error");bs(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Zo(e);ys(e)}},au={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:bs,G:ys,B:!0},su={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[rs]^!!e.refreshToken)throw new M("internal-error")},B:!0,Na:!0};function uu(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,t.O))return Rt(new M("internal-error"));var r,i=!!t.Na,o=t.Vb||"POST";return It(n).then(t.A).then((function(){return t.V&&(n.returnSecureToken=!0),t.B&&e.b&&"undefined"===typeof n.tenantId&&(n.tenantId=e.b),vs(e,i?e.i:e.h,t.endpoint,o,n,t.Ib,t.mb||!1)})).then((function(e){return r=e,t.Za?t.Za(n,r):r})).then(t.G).then((function(){if(!t.Z)return r;if(!(t.Z in r))throw new M("internal-error");return r[t.Z]}))}function lu(e){return cu({error:{errors:[{message:e}],code:400,message:e}})}function cu(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new M(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",be(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new M(r[i],t);return!t&&e&&(t=jr(e)),new M("internal-error",t)}function hu(e){this.b=e,this.a=null,this.sb=function(e){return(vu||(vu=new Et((function(e,t){function n(){Wr(),Nr("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){Wr(),t(Error("Network Error"))},timeout:du.get()})}if(Nr("gapi.iframes.Iframe"))e();else if(Nr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Nr("gapi.load")?n():t(Error("Network Error"))},It(Ja(r=ke(fu,{onload:r}))).o((function(){t(Error("Network Error"))}))}})).o((function(e){throw vu=null,e})))).then((function(){return new Et((function(t,n){Nr("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:Nr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),pu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var fu=new we(Ae,"https://apis.google.com/js/api.js?onload=%{onload}"),du=new qr(3e4,6e4),pu=new qr(5e3,15e3),vu=null;function mu(e,t,n,r){this.l=e,this.h=t,this.i=n,this.g=r,this.f=null,this.g?e=zn((e=Gn(this.g.url)).c,e.a,e.g,"/emulator/auth/iframe"):e=zn("https",this.l,null,"/__/auth/iframe"),this.a=e,jn(this.a,"apiKey",this.h),jn(this.a,"appName",this.i),this.b=null,this.c=[]}function gu(e,t,n,r,i,o){this.u=e,this.s=t,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function yu(e){try{return l.default.app(e).auth().Ga()}catch(wU){return[]}}function bu(e,t,n,r,i,o){this.s=e,this.g=t,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function _u(e){var t=pr();return function(e){return uu(e,Vs,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=Gn(t),r=n.c;n=n.a;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Gn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:_r.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){e=!0;break e}}e=!1}if(!e)throw new Xo(pr())}))}function wu(e){return e.m||(e.m=xr().then((function(){if(!e.u){var t=e.c,n=e.i,r=yu(e.b),i=new mu(e.s,e.g,e.b,e.f);i.f=t,i.b=n,i.c=ee(r||[]),e.u=i.toString()}e.v=new hu(e.u),function(e){if(!e.v)throw Error("IfcHandler must be initialized!");!function(e,t){e.sb.then((function(){e.a.register("authEvent",t,Nr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.v,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=qo(t.authEvent),n=0;n<e.h.length;n++)r=e.h[n](t)||r;return(n={}).status=r?"ACK":"ERROR",It(n)}return n.status="ERROR",It(n)}))}(e)}))),e.m}function xu(e){return e.l||(e.C=e.c?Pr(e.c,yu(e.b)):null,e.l=new ts(e.g,N(e.i),e.C),e.f&&ls(e.l,e.f)),e.l}function Eu(e,t,n,r,i,o,a,s,u,l,c,h){return(e=new gu(e,t,n,r,i,h)).l=o,e.g=a,e.i=s,e.b=ge(u||null),e.f=l,e.zb(c).toString()}function Su(e){if(this.a=e||l.default.INTERNAL.reactNative&&l.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new M("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Au(e){this.b=e,this.a={},this.f=x(this.c,this)}mu.prototype.toString=function(){return this.f?jn(this.a,"v",this.f):nr(this.a.b,"v"),this.b?jn(this.a,"eid",this.b):nr(this.a.b,"eid"),this.c.length?jn(this.a,"fw",this.c.join(",")):nr(this.a.b,"fw"),this.a.toString()},gu.prototype.zb=function(e){return this.h=e,this},gu.prototype.toString=function(){if(this.v){var e=Gn(this.v.url);e=zn(e.c,e.a,e.g,"/emulator/auth/handler")}else e=zn("https",this.u,null,"/__/auth/handler");if(jn(e,"apiKey",this.s),jn(e,"appName",this.c),jn(e,"authType",this.m),this.a.isOAuthProvider){var t=this.a;try{var n=l.default.app(this.c).auth().la()}catch(s){n=null}for(var r in t.pb=n,jn(e,"providerId",this.a.providerId),t=Hr((n=this.a).Jb))t[r]=t[r].toString();r=n.Qc,t=ge(t);for(var i=0;i<r.length;i++){var o=r[i];o in t&&delete t[o]}n.qb&&n.pb&&!t[n.qb]&&(t[n.qb]=n.pb),me(t)||jn(e,"customParameters",jr(t))}if("function"===typeof this.a.Rb&&((n=this.a.Rb()).length&&jn(e,"scopes",n.join(","))),this.l?jn(e,"redirectUrl",this.l):nr(e.b,"redirectUrl"),this.g?jn(e,"eventId",this.g):nr(e.b,"eventId"),this.i?jn(e,"v",this.i):nr(e.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Hn(e,a)&&jn(e,a,this.b[a]);return this.h?jn(e,"tid",this.h):nr(e.b,"tid"),this.f?jn(e,"eid",this.f):nr(e.b,"eid"),(a=yu(this.c)).length&&jn(e,"fw",a.join(",")),e.toString()},(e=bu.prototype).Pb=function(e,t,n){var r=new M("popup-closed-by-user"),i=new M("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(e){var t={type:"webStorageSupport"};return wu(e).then((function(){return function(e,t){return e.sb.then((function(){return new Et((function(n){e.a.send(t.type,t,n,Nr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.v,t)})).then((function(e){if(e&&e.length&&"undefined"!==typeof e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(e&&yr(e),t(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(e){return new Et((function(t){return function n(){kn(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!a)return kn(n).then((function(){t(r)}))}))},e.Yb=function(){var e=Dr();return!Ur(e)&&!Vr(e)},e.Ub=function(){return!1},e.Nb=function(e,t,n,r,i,o,a,s){if(!e)return Rt(new M("popup-blocked"));if(a&&!Ur())return this.ma().o((function(t){yr(e),i(t)})),r(),It();this.a||(this.a=_u(xu(this)));var u=this;return this.a.then((function(){var t=u.ma().o((function(t){throw yr(e),i(t),t}));return r(),t})).then((function(){(Vo(n),a)||vr(Eu(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,s,u.f),e)})).o((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},e.Ob=function(e,t,n,r){this.a||(this.a=_u(xu(this)));var i=this;return this.a.then((function(){Vo(t),vr(Eu(i.s,i.g,i.b,e,t,pr(),n,i.c,void 0,i.i,r,i.f))})).o((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},e.ma=function(){var e=this;return wu(this).then((function(){return e.v.sb})).o((function(){throw e.a=null,new M("network-request-failed")}))},e.ac=function(){return!0},e.Ea=function(e){this.h.push(e)},e.Ta=function(e){Z(this.h,(function(t){return t==e}))},(e=Su.prototype).get=function(e){return It(this.a.getItem(e)).then((function(e){return e&&Gr(e)}))},e.set=function(e,t){return It(this.a.setItem(e,jr(t)))},e.U=function(e){return It(this.a.removeItem(e))},e.ca=function(){},e.ia=function(){};var Tu,Cu=[];function Mu(e,t,n){me(e.a)&&e.b.addEventListener("message",e.f),"undefined"===typeof e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function ku(e){this.a=e}function Iu(e){this.c=e,this.b=!1,this.a=[]}function Ru(e,t,n,r){var i,o,a,s,u=n||{},l=null;if(e.b)return Rt(Error("connection_unavailable"));var c=r?800:50,h="undefined"!==typeof MessageChannel?new MessageChannel:null;return new Et((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),c),o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),"undefined"!==typeof e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))},l={messageChannel:h,onMessage:o},e.a.push(l),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return Pu(e,l),t})).o((function(t){throw Pu(e,l),t}))}function Pu(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Z(e.a,(function(e){return e==t}))}}function Du(){if(!Bu())throw new M("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var e=this;Ar()&&self?(this.v=function(){var e=Ar()?self:null;if(q(Cu,(function(n){n.b==e&&(t=n)})),!t){var t=new Au(e);Cu.push(t)}return t}(),Mu(this.v,"keyChanged",(function(t,n){return Gu(e).then((function(t){return 0<t.length&&q(e.a,(function(e){e(t)})),{keyProcessed:X(t,n.key)}}))})),Mu(this.v,"ping",(function(){return It(["keyChanged"])}))):function(){var e=s.navigator;return e&&e.serviceWorker?It().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).o((function(){return null})):It(null)}().then((function(t){(e.h=t)&&(e.g=new Iu(new ku(t)),Ru(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&X(t[0].value,"keyChanged")&&(e.s=!0)})).o((function(){})))}))}function Nu(e){return new Et((function(t,n){var r=e.m.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(t){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?t(r):function(e){return new Et((function(t,n){var r=e.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}(e).then((function(){return Nu(e)})).then((function(e){t(e)})).o((function(e){n(e)}))}}))}function Lu(e){return e.i||(e.i=Nu(e)),e.i}function Ou(e,t){var n=0;return new Et((function r(i,o){Lu(e).then(t).then(i).o((function(t){if(!(3<++n))return Lu(e).then((function(t){return t.close(),e.i=void 0,r(i,o)})).o((function(e){o(e)}));o(t)}))}))}function Bu(){try{return!!s.indexedDB}catch(bU){return!1}}function Fu(e){return e.objectStore("firebaseLocalStorage")}function Uu(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function ju(e){return new Et((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function Hu(e,t){return e.g&&e.h&&function(){var e=s.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?Ru(e.g,"keyChanged",{key:t},e.s).then((function(){})).o((function(){})):It()}function Gu(e){return Lu(e).then((function(e){var t=Fu(Uu(e,!1));return t.getAll?ju(t.getAll()):new Et((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=mr(e.c,n),e.c=n}return r}))}function zu(e){e.l&&e.l.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function Vu(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=It().then((function(){if(Bu()){var e=zr(),r="__sak"+e;return Tu||(Tu=new Du),(n=Tu).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.ca((function(e){q(t.a,(function(t){t(e)}))})),e}))}function Wu(){this.a={},this.type="inMemory"}function qu(){if(!function(){var e="Node"==Tr();if(!(e=Ku()||e&&l.default.INTERNAL.node&&l.default.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(wU){return!1}}()){if("Node"==Tr())throw new M("internal-error","The LocalStorage compatibility library was not found.");throw new M("web-storage-unsupported")}this.a=Ku()||l.default.INTERNAL.node.localStorage,this.type="localStorage"}function Ku(){try{var e=s.localStorage,t=zr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(vU){return null}}function Ju(){this.type="nullStorage"}function Qu(){if(!function(){var e="Node"==Tr();if(!(e=Xu()||e&&l.default.INTERNAL.node&&l.default.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(wU){return!1}}()){if("Node"==Tr())throw new M("internal-error","The SessionStorage compatibility library was not found.");throw new M("web-storage-unsupported")}this.a=Xu()||l.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Xu(){try{var e=s.sessionStorage,t=zr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(vU){return null}}function Yu(){var e={};e.Browser=el,e.Node=tl,e.ReactNative=nl,e.Worker=rl,this.a=e[Tr()]}Au.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];q(r,(function(t){i.push(It().then((function(){return t(e.origin,e.data.data)})))})),Dt(i).then((function(r){var i=[];q(r,(function(e){i.push({fulfilled:e.Qb,value:e.value,reason:e.reason?e.reason.message:void 0})})),q(i,(function(e){for(var t in e)"undefined"===typeof e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},ku.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Iu.prototype.close=function(){for(;0<this.a.length;)Pu(this,this.a[0]);this.b=!0},(e=Du.prototype).set=function(e,t){var n=this,r=!1;return Ou(this,(function(t){return ju((t=Fu(Uu(t,!0))).get(e))})).then((function(i){return Ou(n,(function(o){if(o=Fu(Uu(o,!0)),i)return i.value=t,ju(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=e,a.value=t,ju(o.add(a))}))})).then((function(){return n.c[e]=t,Hu(n,e)})).oa((function(){r&&n.b--}))},e.get=function(e){return Ou(this,(function(t){return ju(Fu(Uu(t,!1)).get(e))})).then((function(e){return e&&e.value}))},e.U=function(e){var t=this,n=!1;return Ou(this,(function(r){return n=!0,t.b++,ju(Fu(Uu(r,!0)).delete(e))})).then((function(){return delete t.c[e],Hu(t,e)})).oa((function(){n&&t.b--}))},e.ca=function(e){0==this.a.length&&function(e){function t(){e.f=setTimeout((function(){e.l=Gu(e).then((function(t){0<t.length&&q(e.a,(function(e){e(t)}))})).then((function(){t()})).o((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}zu(e),t()}(this),this.a.push(e)},e.ia=function(e){Z(this.a,(function(t){return t==e})),0==this.a.length&&zu(this)},(e=Vu.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},e.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},e.U=function(e){return this.b.then((function(t){return t.U(e)}))},e.ca=function(e){this.a.push(e)},e.ia=function(e){Z(this.a,(function(t){return t==e}))},(e=Wu.prototype).get=function(e){return It(this.a[e])},e.set=function(e,t){return this.a[e]=t,It()},e.U=function(e){return delete this.a[e],It()},e.ca=function(){},e.ia=function(){},(e=qu.prototype).get=function(e){var t=this;return It().then((function(){return Gr(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return It().then((function(){var r=jr(t);null===r?n.U(e):n.a.setItem(e,r)}))},e.U=function(e){var t=this;return It().then((function(){t.a.removeItem(e)}))},e.ca=function(e){s.window&&fn(s.window,"storage",e)},e.ia=function(e){s.window&&vn(s.window,"storage",e)},(e=Ju.prototype).get=function(){return It(null)},e.set=function(){return It()},e.U=function(){return It()},e.ca=function(){},e.ia=function(){},(e=Qu.prototype).get=function(e){var t=this;return It().then((function(){return Gr(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return It().then((function(){var r=jr(t);null===r?n.U(e):n.a.setItem(e,r)}))},e.U=function(e){var t=this;return It().then((function(){t.a.removeItem(e)}))},e.ca=function(){},e.ia=function(){};var Zu,$u,el={F:qu,cb:Qu},tl={F:qu,cb:Qu},nl={F:Su,cb:Ju},rl={F:qu,cb:Ju},il={rd:"local",NONE:"none",td:"session"};function ol(){var e=!(Vr(Dr())||!Sr()),t=Ur(),n=Lr();this.m=e,this.h=t,this.l=n,this.a={},Zu||(Zu=new Yu),e=Zu;try{this.g=!dr()&&Qr()||!s.indexedDB?new e.a.F:new Vu(Ar()?new Wu:new e.a.F)}catch(r){this.g=new Wu,this.h=!0}try{this.i=new e.a.cb}catch(r){this.i=new Wu}this.v=new Wu,this.f=x(this.Zb,this),this.b={}}function al(){return $u||($u=new ol),$u}function sl(e,t){switch(t){case"session":return e.i;case"none":return e.v;default:return e.g}}function ul(e,t){return"firebase:"+e.name+(t?":"+t:"")}function ll(e,t,n){return n=ul(t,n),"local"==t.F&&(e.b[n]=null),sl(e,t.F).U(n)}function cl(e){e.c&&(clearInterval(e.c),e.c=null)}function hl(e){this.a=e,this.b=al()}(e=ol.prototype).get=function(e,t){return sl(this,e.F).get(ul(e,t))},e.set=function(e,t,n){var r=ul(e,n),i=this,o=sl(this,e.F);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.F&&(i.b[r]=t)}))},e.addListener=function(e,t,n){e=ul(e,t),this.l&&(this.b[e]=s.localStorage.getItem(e)),me(this.a)&&(sl(this,"local").ca(this.f),this.h||(dr()||!Qr())&&s.indexedDB||!this.l||function(e){cl(e),e.c=setInterval((function(){for(var t in e.a){var n=s.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new en({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Zb(n))}}),1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},e.removeListener=function(e,t,n){e=ul(e,t),this.a[e]&&(Z(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),me(this.a)&&(sl(this,"local").ia(this.f),cl(this))},e.Zb=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if("undefined"!==typeof e.a.a?sl(this,"local").ia(this.f):cl(this),this.m)if(n=s.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?s.localStorage.setItem(t,r):s.localStorage.removeItem(t);else if(this.b[t]===r&&"undefined"===typeof e.a.a)return;var o=this;n=function(){"undefined"===typeof e.a.a&&o.b[t]===s.localStorage.getItem(t)||(o.b[t]=s.localStorage.getItem(t),o.nb(t))},Xe&&lt&&10==lt&&s.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else q(e,x(this.nb,this))},e.nb=function(e){this.a[e]&&q(this.a[e],(function(e){e()}))};var fl,dl={name:"authEvent",F:"local"};function pl(){this.a=al()}function vl(e,t){this.b=ml,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===fl&&(fl=s.Int32Array?new Int32Array(El):El),this.reset()}T(vl,(function(){this.b=-1}));for(var ml=64,gl=ml-1,yl=[],bl=0;bl<gl;bl++)yl[bl]=0;var _l=$(128,yl);function wl(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],l=0|e.a[4],c=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))|0)+((a=(a=l&c^~l&h)+(0|fl[t])|0)+(0|n[t])|0)|0,o=h,h=c,c=l,l=u+a|0,u=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+l|0,e.a[5]=e.a[5]+c|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function xl(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if("string"===typeof t)for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(wl(e),i=0);else{if(!p(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(wl(e),i=0)}}e.c=i,e.g+=n}vl.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):ee(this.h)};var El=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Sl(){vl.call(this,8,Al)}T(Sl,vl);var Al=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Tl(e,t,n,r,i,o){this.v=e,this.i=t,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=t+":"+n,this.C=new pl,this.g=new hl(this.h),this.f=null,this.b=[],this.a=this.c=null}function Cl(e){return new M("invalid-cordova-configuration",e)}function Ml(e){var t=new Sl;xl(t,e),e=[];var n=8*t.g;56>t.c?xl(t,_l,56-t.c):xl(t,_l,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(wl(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return J(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}function kl(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(r){}}function Il(e){return e.f||(e.f=e.ma().then((function(){return new Et((function(t){e.Ea((function n(r){return t(r),e.Ta(n),!1})),function(e){function t(t){r=!0,i&&i.cancel(),Rl(e).then((function(r){var i=n;if(r&&t&&t.url){var o=null;-1!=(i=lo(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"===typeof(o=Gr(Hn(o=Gn(i),"firebaseError")||null))?k(o):null)?new Wo(r.c,r.b,null,null,o,null,r.T()):new Wo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}kl(e,i)}))}var n=new Wo("unknown",null,null,null,new M("no-auth-event")),r=!1,i=kn(500).then((function(){return Rl(e).then((function(){r||kl(e,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(Nr("BuildInfo.packageName",s).toLowerCase()+"://")&&t({url:e}),"function"===typeof o)try{o(e)}catch(n){console.error(n)}},Qo||(Qo=new Ko),function(e){var t=Qo;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"===typeof(e=Nr("universalLinks.subscribe",s))&&e(null,t.b))}(t)}(e)}))}))),e.f}function Rl(e){var t=null;return function(e){return e.b.get(dl,e.a).then((function(e){return qo(e)}))}(e.g).then((function(n){return t=n,ll((n=e.g).b,dl,n.a)})).then((function(){return t}))}function Pl(e){this.a=e,this.b=al()}(e=Tl.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(Er(void 0)?xr().then((function(){return new Et((function(e,t){var n=s.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):Rt(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!==typeof Nr("universalLinks.subscribe",s))throw Cl("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof Nr("BuildInfo.packageName",s))throw Cl("cordova-plugin-buildinfo is not installed");if("function"!==typeof Nr("cordova.plugins.browsertab.openUrl",s))throw Cl("cordova-plugin-browsertab is not installed");if("function"!==typeof Nr("cordova.InAppBrowser.open",s))throw Cl("cordova-plugin-inappbrowser is not installed")}),(function(){throw new M("cordova-not-ready")}))},e.Pb=function(e,t){return t(new M("operation-not-supported-in-this-environment")),It()},e.Nb=function(){return Rt(new M("operation-not-supported-in-this-environment"))},e.ac=function(){return!1},e.Yb=function(){return!0},e.Ub=function(){return!0},e.Ob=function(e,t,n,r){if(this.c)return Rt(new M("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,l=null,c=null;return this.c=It().then((function(){return Vo(t),Il(i)})).then((function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),a=new Wo(t,r,null,o,new M("no-auth-event"),null,i),u=Nr("BuildInfo.packageName",s);if("string"!==typeof u)throw new M("invalid-cordova-configuration");var l=Nr("BuildInfo.displayName",s),c={};if(Dr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=u;else{if(!Dr().toLowerCase().match(/android/))return Rt(new M("operation-not-supported-in-this-environment"));c.apn=u}l&&(c.appDisplayName=l),o=Ml(o),c.sessionId=o;var h=Eu(e.v,e.i,e.l,t,n,null,r,e.m,c,e.u,i,e.s);return e.ma().then((function(){var t=e.h;return e.C.a.set(dl,a.w(),t)})).then((function(){var t=Nr("cordova.plugins.browsertab.isAvailable",s);if("function"!==typeof t)throw new M("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!==typeof(n=Nr("cordova.plugins.browsertab.openUrl",s)))throw new M("invalid-cordova-configuration");n(h)}else{if("function"!==typeof(n=Nr("cordova.InAppBrowser.open",s)))throw new M("invalid-cordova-configuration");t=Dr(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,e,t,n,r)})).then((function(){return new Et((function(e,t){u=function(){var t=Nr("cordova.plugins.browsertab.close",s);return e(),"function"===typeof t&&t(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),l=function(){a||(a=kn(2e3).then((function(){t(new M("redirect-cancelled-by-user"))})))},c=function(){Kr()&&l()},o.addEventListener("resume",l,!1),Dr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)})).o((function(e){return Rl(i).then((function(){throw e}))}))})).oa((function(){l&&o.removeEventListener("resume",l,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),u&&i.Ta(u),i.c=null}))},e.Ea=function(e){this.b.push(e),Il(this).o((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Wo("unknown",null,null,null,new M("no-auth-event")),e(t))}))},e.Ta=function(e){Z(this.b,(function(t){return t==e}))};var Dl={name:"pendingRedirect",F:"session"};function Nl(e){return ll(e.b,Dl,e.a)}function Ll(e,t,n,r){this.i={},this.u=0,this.D=e,this.v=t,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=x(this.s,this),this.b=new Xl,this.C=new tc,this.g=new Pl(Jl(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Ol(this.D,this.v,this.m,I,this.J)}function Ol(e,t,n,r,i){var o=l.default.SDK_VERSION||null;return Er()?new Tl(e,t,n,o,r,i):new bu(e,t,n,o,r,i)}function Bl(e){e.f||(e.f=!0,e.a.Ea(e.l));var t=e.a;return e.a.ma().o((function(n){throw e.a==t&&e.reset(),n}))}function Fl(e){e.a.Yb()&&Bl(e).o((function(t){var n=new Wo("unknown",null,null,null,new M("operation-not-supported-in-this-environment"));Vl(t)&&e.s(n)})),e.a.Ub()||Yl(e.b)}function Ul(e,t){X(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(Dl,e.a).then((function(e){return"pending"==e}))}(e.g).then((function(t){t?Nl(e.g).then((function(){Bl(e).o((function(t){var n=new Wo("unknown",null,null,null,new M("operation-not-supported-in-this-environment"));Vl(t)&&e.s(n)}))})):Fl(e)})).o((function(){Fl(e)}))}function jl(e,t){Z(e.h,(function(e){return e==t}))}Ll.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Ol(this.D,this.v,this.m,null,this.J),this.i={}},Ll.prototype.s=function(e){if(!e)throw new M("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=Date.now())),t=!0;break}}return Yl(this.b),t};var Hl=new qr(2e3,1e4),Gl=new qr(3e4,6e4);function zl(e,t,n,r,i,o,a){return e.a.Nb(t,n,r,(function(){e.f||(e.f=!0,e.a.Ea(e.l))}),(function(){e.reset()}),i,o,a)}function Vl(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function Wl(e,t,n,r,i){var o;return function(e){return e.b.set(Dl,"pending",e.a)}(e.g).then((function(){return e.a.Ob(t,n,r,i).o((function(t){if(Vl(t))throw new M("operation-not-supported-in-this-environment");return o=t,Nl(e.g).then((function(){throw o}))})).then((function(){return e.a.ac()?new Et((function(){})):Nl(e.g).then((function(){return e.ra()})).then((function(){})).o((function(){}))}))}))}function ql(e,t,n,r,i){return e.a.Pb(r,(function(e){t.na(n,null,e,i)}),Hl.get())}Ll.prototype.ra=function(){return this.b.ra()};var Kl={};function Jl(e,t,n){return e=e+":"+t,n&&(e=e+":"+n.url),e}function Ql(e,t,n,r){var i=Jl(t,n,r);return Kl[i]||(Kl[i]=new Ll(e,t,n,r)),Kl[i]}function Xl(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Yl(e){e.g||(e.g=!0,ec(e,!1,null,null))}function Zl(e){e.g&&!e.i&&ec(e,!1,null,null)}function $l(e,t){if(e.b=function(){return It(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function ec(e,t,n,r){t?r?function(e,t){if(e.b=function(){return Rt(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):$l(e,n):$l(e,{user:null}),e.f=[],e.c=[]}function tc(){}function nc(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(e){this.jb=e},enumerable:!1})}function rc(e,t){this.a=t,ei(this,"verificationId",e)}function ic(e,t,n,r){return new Ho(e).gb(t,n).then((function(e){return new rc(e,r)}))}function oc(e){var t=Qi(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new M("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ti(this,{token:e,expirationTime:Jr(1e3*t.exp),authTime:Jr(1e3*t.auth_time),issuedAtTime:Jr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function ac(e,t,n){var r=t&&t[uc];if(!r)throw new M("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=ge(t),this.g=n,this.c=new co(null,r),this.b=[];var i=this;q(t[sc]||[],(function(e){(e=oi(e))&&i.b.push(e)})),ei(this,"auth",this.a),ei(this,"session",this.c),ei(this,"hints",this.b)}Xl.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Xl.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(ec(this,!0,null,e.a),It()):t.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.T(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then((function(t){ec(e,s,t,null)})).o((function(t){ec(e,s,null,t)}))}(this,e,t):Rt(new M("invalid-auth-event")):(ec(this,!1,null,null),It())}else Rt(new M("invalid-auth-event"))},Xl.prototype.ra=function(){var e=this;return new Et((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new M("timeout");e.a&&e.a.cancel(),e.a=kn(Gl.get()).then((function(){e.b||(e.g=!0,ec(e,!0,null,t))}))}(e))}))},tc.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.na(e.c,null,e.a,e.b),It()):t.Fa(n,r)?function(e,t){var n=e.b,r=e.c;t.Fa(r,n)(e.g,e.f,e.T(),e.i).then((function(e){t.na(r,e,null,n)})).o((function(e){t.na(r,null,e,n)}))}(e,t):Rt(new M("invalid-auth-event"))}else Rt(new M("invalid-auth-event"))},rc.prototype.confirm=function(e){return e=Go(this.verificationId,e),this.a(e)};var sc="mfaInfo",uc="mfaPendingCredential";function lc(e,t,n,r){M.call(this,"multi-factor-auth-required",r,t),this.b=new ac(e,t,n),ei(this,"resolver",this.b)}function cc(e,t,n){if(e&&m(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new lc(t,e.serverResponse,n,e.message)}catch(r){}return null}function hc(){}function fc(e){ei(this,"factorId",e.fa),this.a=e}function dc(e){if(fc.call(this,e),this.a.fa!=Ho.PROVIDER_ID)throw new M("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function pc(e,t){for(var n in $t.call(this,e),t)this[n]=t[n]}function vc(e,t){this.a=e,this.b=[],this.c=x(this.yc,this),fn(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&q(t.multiFactor.enrolledFactors,(function(e){var t=null,r={};if(e){e.uid&&(r[ui]=e.uid),e.displayName&&(r[ai]=e.displayName),e.enrollmentTime&&(r[si]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[li]=e.phoneNumber);try{t=new ci(r)}catch(i){}e=t}else e=null;e&&n.push(e)})),mc(this,n)}function mc(e,t){e.b=t,ei(e,"enrolledFactors",t)}function gc(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function yc(e,t){e.stop(),e.b=kn(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(e,t)).then((function(){return function(){var e=s.document,t=null;return Kr()||!e?It():new Et((function(n){t=function(){Kr()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).o((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}()})).then((function(){return e.h()})).then((function(){yc(e,!0)})).o((function(t){e.i(t)&&yc(e,!1)}))}function bc(e){this.f=e,this.b=this.a=null,this.c=Date.now()}function _c(e,t){"undefined"===typeof t&&(e.b?t=(t=e.b).a-t.g:t=0),e.c=Date.now()+1e3*t}function wc(e,t){e.b=Ji(t[rs]||""),e.a=t.refreshToken,_c(e,"undefined"!==typeof(t=t.expiresIn)?Number(t):void 0)}function xc(e,t){return function(e,t){return new Et((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?fs(e,e.l+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?r(cu(e)):e.access_token&&e.refresh_token?n(e):r(new M("internal-error")):r(new M("network-request-failed"))}),"POST",tr(t).toString(),e.g,e.m.get()):r(new M("internal-error"))}))}(e.f,t).then((function(t){return e.b=Ji(t.access_token),e.a=t.refresh_token,_c(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}function Ec(e,t){this.a=e||null,this.b=t||null,ti(this,{lastSignInTime:Jr(t||null),creationTime:Jr(e||null)})}function Sc(e,t,n,r,i,o){ti(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function Ac(e,t,n){this.N=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null;var r=l.default.SDK_VERSION?Pr(l.default.SDK_VERSION):null;this.a=new ts(this.l,N(I),r),(this.u=e.emulatorConfig||null)&&ls(this.a,this.u),this.h=new bc(this.a),Nc(this,t[rs]),wc(this.h,t),ei(this,"refreshToken",this.h.a),Bc(this,n||{}),Sn.call(this),this.P=!1,this.s&&Or()&&(this.b=Ql(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(e){return new gc((function(){return e.I(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.h.c-Date.now()-3e5;return 0<t?t:0}))}(this),this.ba=x(this.ib,this);var i=this;this.za=null,this.Pa=function(e){i.xa(e.h)},this.qa=null,this.Ba=function(e){Tc(i,e.c)},this.$=null,this.aa=[],this.Oa=function(e){kc(i,e.f)},this.ja=null,this.S=new vc(this,n),ei(this,"multiFactor",this.S)}function Tc(e,t){e.u=t,ls(e.a,t),e.b&&(t=e.b,e.b=Ql(e.s,e.l,e.m,e.u),e.P&&(jl(t,e),Ul(e.b,e)))}function Cc(e,t){e.qa&&vn(e.qa,"languageCodeChanged",e.Pa),(e.qa=t)&&fn(t,"languageCodeChanged",e.Pa)}function Mc(e,t){e.$&&vn(e.$,"emulatorConfigChanged",e.Ba),(e.$=t)&&fn(t,"emulatorConfigChanged",e.Ba)}function kc(e,t){e.aa=t,hs(e.a,l.default.SDK_VERSION?Pr(l.default.SDK_VERSION,e.aa):null)}function Ic(e,t){e.ja&&vn(e.ja,"frameworkChanged",e.Oa),(e.ja=t)&&fn(t,"frameworkChanged",e.Oa)}function Rc(e){try{return l.default.app(e.m).auth()}catch(wU){throw new M("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function Pc(e){e.J||e.D.b||(e.D.start(),vn(e,"tokenChanged",e.ba),fn(e,"tokenChanged",e.ba))}function Dc(e){vn(e,"tokenChanged",e.ba),e.D.stop()}function Nc(e,t){e.Aa=t,ei(e,"_lat",t)}function Lc(e){for(var t=[],n=0;n<e.W.length;n++)t.push(e.W[n](e));return Dt(t).then((function(){return e}))}function Oc(e){e.b&&!e.P&&(e.P=!0,Ul(e.b,e))}function Bc(e,t){ti(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new Ec(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function Fc(){}function Uc(e){return It().then((function(){if(e.J)throw new M("app-deleted")}))}function jc(e){return J(e.providerData,(function(e){return e.providerId}))}function Hc(e,t){t&&(Gc(e,t.providerId),e.providerData.push(t))}function Gc(e,t){Z(e.providerData,(function(e){return e.providerId==t}))}function zc(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&ei(e,t,n)}function Vc(e,t){e!=t&&(ti(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?ei(e,"metadata",function(e){return new Ec(e.a,e.b)}(t.metadata)):ei(e,"metadata",new Ec),q(t.providerData,(function(t){Hc(e,t)})),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(e.h,t.h),ei(e,"refreshToken",e.h.a),mc(e.S,t.S.b))}function Wc(e){return e.I().then((function(t){var n=e.isAnonymous;return function(e,t){return uu(e.a,Us,{idToken:t}).then(x(e.Kc,e))}(e,t).then((function(){return n||zc(e,"isAnonymous",!1),t}))}))}function qc(e,t){t[rs]&&e.Aa!=t[rs]&&(wc(e.h,t),e.dispatchEvent(new pc("tokenChanged")),Nc(e,t[rs]),zc(e,"refreshToken",e.h.a))}function Kc(e,t){return Wc(e).then((function(){if(X(jc(e),t))return Lc(e).then((function(){throw new M("provider-already-linked")}))}))}function Jc(e,t,n){return ni({user:e,credential:zo(t),additionalUserInfo:t=eo(t),operationType:n})}function Qc(e,t){return qc(e,t),e.reload().then((function(){return e}))}function Xc(e,t,n,r,i){if(!Or())return Rt(new M("operation-not-supported-in-this-environment"));if(e.i&&!i)return Rt(e.i);var o=$i(n.providerId),a=zr(e.uid+":::"),s=null;(!Ur()||Sr())&&e.s&&n.isOAuthProvider&&(s=Eu(e.s,e.l,e.m,t,n,null,a,l.default.SDK_VERSION||null,null,null,e.tenantId,e.u));var u=br(s,o&&o.va,o&&o.ua);return r=r().then((function(){if(Zc(e),!i)return e.I().then((function(){}))})).then((function(){return zl(e.b,u,t,n,a,!!s,e.tenantId)})).then((function(){return new Et((function(n,r){e.na(t,null,new M("cancelled-popup-request"),e.g||null),e.f=n,e.C=r,e.g=a,e.c=ql(e.b,e,t,u,a)}))})).then((function(e){return u&&yr(u),e?ni(e):null})).o((function(e){throw u&&yr(u),e})),$c(e,r,i)}function Yc(e,t,n,r,i){if(!Or())return Rt(new M("operation-not-supported-in-this-environment"));if(e.i&&!i)return Rt(e.i);var o=null,a=zr(e.uid+":::");return r=r().then((function(){if(Zc(e),!i)return e.I().then((function(){}))})).then((function(){return e.ga=a,Lc(e)})).then((function(t){return e.ha&&(t=(t=e.ha).b.set(nh,e.w(),t.a)),t})).then((function(){return Wl(e.b,t,n,a,e.tenantId)})).o((function(t){if(o=t,e.ha)return rh(e.ha);throw o})).then((function(){if(o)throw o})),$c(e,r,i)}function Zc(e){if(!e.b||!e.P){if(e.b&&!e.P)throw new M("internal-error");throw new M("auth-domain-config-required")}}function $c(e,t,n){var r=function(e,t,n){return e.i&&!n?(t.cancel(),Rt(e.i)):t.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.i||e.dispatchEvent(new pc("userInvalidated")),e.i=t),t}))}(e,t,n);return e.N.push(r),r.oa((function(){Y(e.N,r)})),r.o((function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=cc(t.w(),Rc(e),x(e.jc,e))),n||t}))}function eh(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName,emulatorConfig:e.emulatorConfig},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[rs]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var r=e.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Ac(t,n,e);return e.providerData&&q(e.providerData,(function(e){e&&Hc(i,ni(e))})),e.redirectEventId&&(i.ga=e.redirectEventId),i}function th(e){this.a=e,this.b=al()}ac.prototype.Rc=function(e){var t=this;return e.tb(this.a.a,this.c).then((function(e){var n=ge(t.f);return delete n[sc],delete n[uc],be(n,e),t.g(n)}))},T(lc,M),hc.prototype.tb=function(e,t,n){return t.type==ho?function(e,t,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),be(n,{phoneVerificationInfo:jo(e.a)}),uu(t,Bs,n)}))}(this,e,t,n):function(e,t,n){return n.Ha().then((function(n){return be(n={mfaPendingCredential:n},{phoneVerificationInfo:jo(e.a)}),uu(t,Fs,n)}))}(this,e,t)},T(fc,hc),T(dc,fc),T(pc,$t),(e=vc.prototype).yc=function(e){mc(this,function(e){var t=[];return q(e.mfaInfo||[],(function(e){(e=oi(e))&&t.push(e)})),t}(e.hd))},e.Sb=function(){return this.a.I().then((function(e){return new co(e,null)}))},e.fc=function(e,t){var n=this,r=this.a.a;return this.Sb().then((function(n){return e.tb(r,n,t)})).then((function(e){return qc(n.a,e),n.a.reload()}))},e.bd=function(e){var t=this,n="string"===typeof e?e:e.uid,r=this.a.a;return this.a.I().then((function(e){return uu(r,su,{idToken:e,mfaEnrollmentId:n})})).then((function(e){var r=K(t.b,(function(e){return e.uid!=n}));return mc(t,r),qc(t.a,e),t.a.reload().o((function(e){if("auth/user-token-expired"!=e.code)throw e}))}))},e.w=function(){return{multiFactor:{enrolledFactors:J(this.b,(function(e){return e.w()}))}}},gc.prototype.start=function(){this.a=this.c,yc(this,!0)},gc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},bc.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},bc.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Rt(new M("user-token-expired")):e||!this.b||Date.now()>this.c-3e4?this.a?xc(this,{grant_type:"refresh_token",refresh_token:this.a}):It(null):It({accessToken:this.b.toString(),refreshToken:this.a})},Ec.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},T(Ac,Sn),Ac.prototype.xa=function(e){this.za=e,us(this.a,e)},Ac.prototype.la=function(){return this.za},Ac.prototype.Ga=function(){return ee(this.aa)},Ac.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},ei(Ac.prototype,"providerId","firebase"),(e=Ac.prototype).reload=function(){var e=this;return $c(this,Uc(this).then((function(){return Wc(e).then((function(){return Lc(e)})).then(Fc)})))},e.oc=function(e){return this.I(e).then((function(e){return new oc(e)}))},e.I=function(e){var t=this;return $c(this,Uc(this).then((function(){return t.h.getToken(e)})).then((function(e){if(!e)throw new M("internal-error");return e.accessToken!=t.Aa&&(Nc(t,e.accessToken),t.dispatchEvent(new pc("tokenChanged"))),zc(t,"refreshToken",e.refreshToken),e.accessToken})))},e.Kc=function(e){if(!(e=e.users)||!e.length)throw new M("internal-error");Bc(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?J(e,(function(e){return new Sc(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)Hc(this,t[n]);zc(this,"isAnonymous",!(this.email&&e.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new pc("userReloaded",{hd:e}))},e.Lc=function(e){return Zr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(e)},e.ub=function(e){var t=this,n=null;return $c(this,e.c(this.a,this.uid).then((function(e){return qc(t,e),n=Jc(t,e,"reauthenticate"),t.i=null,t.reload()})).then((function(){return n})),!0)},e.Cc=function(e){return Zr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(e)},e.rb=function(e){var t=this,n=null;return $c(this,Kc(this,e.providerId).then((function(){return t.I()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=Jc(t,e,"link"),Qc(t,e)})).then((function(){return n})))},e.Dc=function(e,t){var n=this;return $c(this,Kc(this,"phone").then((function(){return ic(Rc(n),e,t,x(n.rb,n))})))},e.Mc=function(e,t){var n=this;return $c(this,It().then((function(){return ic(Rc(n),e,t,x(n.ub,n))})),!0)},e.Cb=function(e){var t=this;return $c(this,this.I().then((function(n){return t.a.Cb(n,e)})).then((function(e){return qc(t,e),t.reload()})))},e.ed=function(e){var t=this;return $c(this,this.I().then((function(n){return e.b(t.a,n)})).then((function(e){return qc(t,e),t.reload()})))},e.Db=function(e){var t=this;return $c(this,this.I().then((function(n){return t.a.Db(n,e)})).then((function(e){return qc(t,e),t.reload()})))},e.Eb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Uc(this);var t=this;return $c(this,this.I().then((function(n){return t.a.Eb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return qc(t,e),zc(t,"displayName",e.displayName||null),zc(t,"photoURL",e.photoUrl||null),q(t.providerData,(function(e){"password"===e.providerId&&(ei(e,"displayName",t.displayName),ei(e,"photoURL",t.photoURL))})),Lc(t)})).then(Fc))},e.cd=function(e){var t=this;return $c(this,Wc(this).then((function(n){return X(jc(t),e)?function(e,t,n){return uu(e,Ns,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then((function(e){var n={};return q(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),q(jc(t),(function(e){n[e]||Gc(t,e)})),n[Ho.PROVIDER_ID]||ei(t,"phoneNumber",null),Lc(t)})):Lc(t).then((function(){throw new M("no-such-provider")}))})))},e.delete=function(){var e=this;return $c(this,this.I().then((function(t){return uu(e.a,Ds,{idToken:t})})).then((function(){e.dispatchEvent(new pc("userDeleted"))}))).then((function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");Cc(e,null),Mc(e,null),Ic(e,null),e.N=[],e.J=!0,Dc(e),ei(e,"refreshToken",null),e.b&&jl(e.b,e)}))},e.Gb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ga||null)==t||"reauthViaRedirect"==e&&(this.ga||null)==t)},e.na=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?x(this.Lb,this):"reauthViaPopup"==e&&t==(this.g||null)?x(this.Mb,this):"linkViaRedirect"==e&&(this.ga||null)==t?x(this.Lb,this):"reauthViaRedirect"==e&&(this.ga||null)==t?x(this.Mb,this):null},e.Ec=function(e){var t=this;return Xc(this,"linkViaPopup",e,(function(){return Kc(t,e.providerId).then((function(){return Lc(t)}))}),!1)},e.Nc=function(e){return Xc(this,"reauthViaPopup",e,(function(){return It()}),!0)},e.Fc=function(e){var t=this;return Yc(this,"linkViaRedirect",e,(function(){return Kc(t,e.providerId)}),!1)},e.Oc=function(e){return Yc(this,"reauthViaRedirect",e,(function(){return It()}),!0)},e.Lb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return n=this.I().then((function(n){return Ts(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=Jc(i,e,"link"),Qc(i,e)})).then((function(){return o})),$c(this,n)},e.Mb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return $c(this,It().then((function(){return vo(Cs(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=Jc(i,e,"reauthenticate"),qc(i,e),i.i=null,i.reload()})).then((function(){return o})),!0)},e.vb=function(e){var t=this,n=null;return $c(this,this.I().then((function(t){return n=t,"undefined"===typeof e||me(e)?{}:Vi(new Ni(e))})).then((function(e){return t.a.vb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},e.Fb=function(e,t){var n=this,r=null;return $c(this,this.I().then((function(e){return r=e,"undefined"===typeof t||me(t)?{}:Vi(new Ni(t))})).then((function(t){return n.a.Fb(r,e,t)})).then((function(e){if(n.email!=e)return n.reload()})).then((function(){})))},e.jc=function(e){var t=null,n=this;return $c(this,e=vo(It(e),n.uid).then((function(e){return t=Jc(n,e,"reauthenticate"),qc(n,e),n.i=null,n.reload()})).then((function(){return t})),!0)},e.toJSON=function(){return this.w()},e.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&be(e,this.metadata.w()),q(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),be(e,this.S.w()),e};var nh={name:"redirectUser",F:"session"};function rh(e){return ll(e.b,nh,e.a)}function ih(e){this.a=e,this.b=al(),this.c=null,this.f=function(e){var t=sh("local"),n=sh("session"),r=sh("none");return function(e,t,n){var r=ul(t,n),i=sl(e,t.F);return e.get(t,n).then((function(o){var a=null;try{a=Gr(s.localStorage.getItem(r))}catch(u){}if(a&&!o)return s.localStorage.removeItem(r),e.set(t,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(i){return i?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(ah,e.a).then((function(e){return e?sh(e):t}))}))}))})).then((function(t){return e.c=t,oh(e,t.F)})).o((function(){e.c||(e.c=t)}))}(this),this.b.addListener(sh("local"),this.a,x(this.g,this))}function oh(e,t){var n,r=[];for(n in il)il[n]!==t&&r.push(ll(e.b,sh(il[n]),e.a));return r.push(ll(e.b,ah,e.a)),function(e){return new Et((function(t,n){var r=e.length,i=[];if(r)for(var o=function(e,n){r--,i[e]=n,0==r&&t(i)},a=function(e){n(e)},s=0;s<e.length;s++)Pt(e[s],E(o,s),a);else t(i)}))}(r)}ih.prototype.g=function(){var e=this,t=sh("local");hh(this,(function(){return It().then((function(){return e.c&&"local"!=e.c.F?e.b.get(t,e.a):null})).then((function(n){if(n)return oh(e,"local").then((function(){e.c=t}))}))}))};var ah={name:"persistence",F:"session"};function sh(e){return{name:"authUser",F:e}}function uh(e,t){return hh(e,(function(){return e.b.set(e.c,t.w(),e.a)}))}function lh(e){return hh(e,(function(){return ll(e.b,e.c,e.a)}))}function ch(e,t,n){return hh(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),e&&n&&(e.emulatorConfig=n),eh(e||{})}))}))}function hh(e,t){return e.f=e.f.then(t,t),e.f}function fh(e){if(this.l=!1,ei(this,"settings",new nc),ei(this,"app",e),!wh(this).options||!wh(this).options.apiKey)throw new M("invalid-api-key");e=l.default.SDK_VERSION?Pr(l.default.SDK_VERSION):null,this.a=new ts(wh(this).options&&wh(this).options.apiKey,N(I),e),this.P=[],this.s=[],this.N=[],this.Pa=l.default.INTERNAL.createSubscribe(x(this.zc,this)),this.W=void 0,this.ib=l.default.INTERNAL.createSubscribe(x(this.Ac,this)),bh(this,null),this.i=new ih(wh(this).options.apiKey+":"+wh(this).name),this.D=new th(wh(this).options.apiKey+":"+wh(this).name),this.$=Ah(this,function(e){var t=wh(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(nh,e.a).then((function(e){return e&&t&&(e.authDomain=t),eh(e||{})}))}(e.D,wh(e).options.authDomain).then((function(t){return(e.m=t)&&(t.ha=e.D),rh(e.D)}));return Ah(e,t)}(e).then((function(){return ch(e.i,t,e.R)})).then((function(t){return t?(t.ha=e.D,e.m&&(e.m.ga||null)==(t.ga||null)?t:t.reload().then((function(){return uh(e.i,t).then((function(){return t}))})).o((function(n){return"auth/network-request-failed"==n.code?t:lh(e.i)}))):null})).then((function(t){bh(e,t||null)}));return Ah(e,n)}(this)),this.h=Ah(this,function(e){return e.$.then((function(){return gh(e)})).o((function(){})).then((function(){if(!e.l)return e.ja()})).o((function(){})).then((function(){if(!e.l){e.ba=!0;var t=e.i;t.b.addListener(sh("local"),t.a,e.ja)}}))}(this)),this.ba=!1,this.ja=x(this.Zc,this),this.Ba=x(this.da,this),this.qa=x(this.mc,this),this.za=x(this.wc,this),this.Aa=x(this.xc,this),this.b=null,function(e){var t=wh(e).options.authDomain,n=wh(e).options.apiKey;t&&Or()&&(e.Oa=e.$.then((function(){if(!e.l){if(e.b=Ql(t,n,wh(e).name,e.R),Ul(e.b,e),xh(e)&&Oc(xh(e)),e.m){Oc(e.m);var r=e.m;r.xa(e.la()),Cc(r,e),kc(r=e.m,e.J),Ic(r,e),Tc(r=e.m,e.R),Mc(r,e),e.m=null}return e.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=x(this.delete,this),this.INTERNAL.logFramework=x(this.Gc,this),this.u=0,Sn.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.la()},set:function(e){this.xa(e)},enumerable:!1}),e.aa=null,Object.defineProperty(e,"ti",{get:function(){return this.T()},set:function(e){this.zb(e)},enumerable:!1}),e.S=null,Object.defineProperty(e,"emulatorConfig",{get:function(){if(this.R){var e=Gn(this.R.url);e=ni({protocol:e.c,host:e.a,port:e.g,options:ni({disableWarnings:this.R.ec})})}else e=null;return e},enumerable:!1})}(this),this.J=[],this.R=null}function dh(e){$t.call(this,"languageCodeChanged"),this.h=e}function ph(e){$t.call(this,"emulatorConfigChanged"),this.c=e}function vh(e){$t.call(this,"frameworkChanged"),this.f=e}function mh(e){return e.Oa||Rt(new M("auth-domain-config-required"))}function gh(e){if(!Or())return Rt(new M("operation-not-supported-in-this-environment"));var t=mh(e).then((function(){return e.b.ra()})).then((function(e){return e?ni(e):null}));return Ah(e,t)}function yh(e,t){var n={};return n.apiKey=wh(e).options.apiKey,n.authDomain=wh(e).options.authDomain,n.appName=wh(e).name,e.R&&(n.emulatorConfig=e.R),e.$.then((function(){return function(e,t,n,r){var i=new Ac(e,t);return n&&(i.ha=n),r&&kc(i,r),i.reload().then((function(){return i}))}(n,t,e.D,e.Ga())})).then((function(t){return xh(e)&&t.uid==xh(e).uid?(Vc(xh(e),t),e.da(t)):(bh(e,t),Oc(t),e.da(t))})).then((function(){Sh(e)}))}function bh(e,t){xh(e)&&(function(e,t){Z(e.W,(function(e){return e==t}))}(xh(e),e.Ba),vn(xh(e),"tokenChanged",e.qa),vn(xh(e),"userDeleted",e.za),vn(xh(e),"userInvalidated",e.Aa),Dc(xh(e))),t&&(t.W.push(e.Ba),fn(t,"tokenChanged",e.qa),fn(t,"userDeleted",e.za),fn(t,"userInvalidated",e.Aa),0<e.u&&Pc(t)),ei(e,"currentUser",t),t&&(t.xa(e.la()),Cc(t,e),kc(t,e.J),Ic(t,e),Tc(t,e.R),Mc(t,e))}function _h(e,t){var n=null,r=null;return Ah(e,t.then((function(t){return n=zo(t),r=eo(t),yh(e,t)}),(function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=cc(t.w(),e,x(e.kc,e))),n||t})).then((function(){return ni({user:xh(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function wh(e){return e.app}function xh(e){return e.currentUser}function Eh(e){return xh(e)&&xh(e)._lat||null}function Sh(e){if(e.ba){for(var t=0;t<e.s.length;t++)e.s[t]&&e.s[t](Eh(e));if(e.W!==e.getUid()&&e.N.length)for(e.W=e.getUid(),t=0;t<e.N.length;t++)e.N[t]&&e.N[t](Eh(e))}}function Ah(e,t){return e.P.push(t),t.oa((function(){Y(e.P,t)})),t}function Th(){}function Ch(){this.a={},this.b=1e12}ih.prototype.yb=function(e){var t=null,n=this;return function(e){var t=new M("invalid-persistence-type"),n=new M("unsupported-persistence-type");e:{for(r in il)if(il[r]==e){var r=!0;break e}r=!1}if(!r||"string"!==typeof e)throw t;switch(Tr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!Bu()&&"none"!==e)throw n;break;default:if(!Lr()&&"none"!==e)throw n}}(e),hh(this,(function(){return e!=n.c.F?n.b.get(n.c,n.a).then((function(r){return t=r,oh(n,e)})).then((function(){if(n.c=sh(e),t)return n.b.set(n.c,t,n.a)})):It()}))},T(fh,Sn),T(dh,$t),T(ph,$t),T(vh,$t),(e=fh.prototype).yb=function(e){return Ah(this,e=this.i.yb(e))},e.xa=function(e){this.aa===e||this.l||(this.aa=e,us(this.a,this.aa),this.dispatchEvent(new dh(this.la())))},e.la=function(){return this.aa},e.fd=function(){var e=s.navigator;this.xa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.gd=function(e,t){if(!this.R){if(!/^https?:\/\//.test(e))throw new M("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(e){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!e&&xr().then((function(){var e=s.document.createElement("div");e.innerText="Running in emulator mode. Do not use with production credentials.",e.style.position="fixed",e.style.width="100%",e.style.backgroundColor="#ffffff",e.style.border=".1em solid #000000",e.style.color="#b50000",e.style.bottom="0px",e.style.left="0px",e.style.margin="0px",e.style.zIndex=1e4,e.style.textAlign="center",e.classList.add("firebase-emulator-warning"),s.document.body.appendChild(e)}))})(t=!!t&&!!t.disableWarnings),this.R={url:e,ec:t},this.settings.jb=!0,ls(this.a,this.R),this.dispatchEvent(new ph(this.R))}},e.Gc=function(e){this.J.push(e),hs(this.a,l.default.SDK_VERSION?Pr(l.default.SDK_VERSION,this.J):null),this.dispatchEvent(new vh(this.J))},e.Ga=function(){return ee(this.J)},e.zb=function(e){this.S===e||this.l||(this.S=e,this.a.b=this.S)},e.T=function(){return this.S},e.toJSON=function(){return{apiKey:wh(this).options.apiKey,authDomain:wh(this).options.authDomain,appName:wh(this).name,currentUser:xh(this)&&xh(this).w()}},e.Gb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.na=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?x(this.ic,this):null},e.ic=function(e,t,n,r){var i=this,o={requestUri:e,postBody:r,sessionId:t,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return _h(i,As(i.a,o))}))},e.Xc=function(e){if(!Or())return Rt(new M("operation-not-supported-in-this-environment"));var t=this,n=$i(e.providerId),r=zr(),i=null;(!Ur()||Sr())&&wh(this).options.authDomain&&e.isOAuthProvider&&(i=Eu(wh(this).options.authDomain,wh(this).options.apiKey,wh(this).name,"signInViaPopup",e,null,r,l.default.SDK_VERSION||null,null,null,this.T(),this.R));var o=br(i,n&&n.va,n&&n.ua);return n=mh(this).then((function(n){return zl(n,o,"signInViaPopup",e,r,!!i,t.T())})).then((function(){return new Et((function(e,n){t.na("signInViaPopup",null,new M("cancelled-popup-request"),t.g),t.f=e,t.C=n,t.g=r,t.c=ql(t.b,t,"signInViaPopup",o,r)}))})).then((function(e){return o&&yr(o),e?ni(e):null})).o((function(e){throw o&&yr(o),e})),Ah(this,n)},e.Yc=function(e){if(!Or())return Rt(new M("operation-not-supported-in-this-environment"));var t=this,n=mh(this).then((function(){return function(e){return hh(e,(function(){return e.b.set(ah,e.c.F,e.a)}))}(t.i)})).then((function(){return Wl(t.b,"signInViaRedirect",e,void 0,t.T())}));return Ah(this,n)},e.ra=function(){var e=this;return gh(this).then((function(t){return e.b&&Zl(e.b.b),t})).o((function(t){throw e.b&&Zl(e.b.b),t}))},e.dd=function(e){if(!e)return Rt(new M("null-user"));if(this.S!=e.tenantId)return Rt(new M("tenant-id-mismatch"));var t=this,n={};n.apiKey=wh(this).options.apiKey,n.authDomain=wh(this).options.authDomain,n.appName=wh(this).name;var r=function(e,t,n,r){var i=e.h,o={};return o[rs]=i.b&&i.b.toString(),o.refreshToken=i.a,t=new Ac(t||{apiKey:e.l,authDomain:e.s,appName:e.m},o),n&&(t.ha=n),r&&kc(t,r),Vc(t,e),t}(e,n,t.D,t.Ga());return Ah(this,this.h.then((function(){if(wh(t).options.apiKey!=e.l)return r.reload()})).then((function(){return xh(t)&&e.uid==xh(t).uid?(Vc(xh(t),e),t.da(e)):(bh(t,r),Oc(r),t.da(r))})).then((function(){Sh(t)})))},e.Bb=function(){var e=this;return Ah(this,this.h.then((function(){return e.b&&Zl(e.b.b),xh(e)?(bh(e,null),lh(e.i).then((function(){Sh(e)}))):It()})))},e.Zc=function(){var e=this;return ch(this.i,wh(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=xh(e)&&t){n=xh(e).uid;var r=t.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Vc(xh(e),t),xh(e).I();(xh(e)||t)&&(bh(e,t),t&&(Oc(t),t.ha=e.D),e.b&&Ul(e.b,e),Sh(e))}}))},e.da=function(e){return uh(this.i,e)},e.mc=function(){Sh(this),this.da(xh(this))},e.wc=function(){this.Bb()},e.xc=function(){this.Bb()},e.kc=function(e){var t=this;return this.h.then((function(){return _h(t,It(e))}))},e.zc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(xh(t))}))},e.Ac=function(e){var t=this;!function(e,t){e.N.push(t),Ah(e,e.h.then((function(){!e.l&&X(e.N,t)&&e.W!==e.getUid()&&(e.W=e.getUid(),t(Eh(e)))})))}(this,(function(){e.next(xh(t))}))},e.Ic=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof e?e(xh(r)):"function"===typeof e.next&&e.next(xh(r))})),this.Pa(e,t,n)},e.Hc=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"===typeof e?e(xh(r)):"function"===typeof e.next&&e.next(xh(r))})),this.ib(e,t,n)},e.nc=function(e){var t=this;return Ah(this,this.h.then((function(){return xh(t)?xh(t).I(e).then((function(e){return{accessToken:e}})):null})))},e.Tc=function(e){var t=this;return this.h.then((function(){return _h(t,uu(t.a,nu,{token:e}))})).then((function(e){var n=e.user;return zc(n,"isAnonymous",!1),t.da(n),e}))},e.Uc=function(e,t){var n=this;return this.h.then((function(){return _h(n,uu(n.a,ru,{email:e,password:t}))}))},e.dc=function(e,t){var n=this;return this.h.then((function(){return _h(n,uu(n.a,Rs,{email:e,password:t}))}))},e.ab=function(e){var t=this;return this.h.then((function(){return _h(t,e.ka(t.a))}))},e.Sc=function(e){return Zr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(e)},e.Ab=function(){var e=this;return this.h.then((function(){var t=xh(e);if(t&&t.isAnonymous){var n=ni({providerId:null,isNewUser:!1});return ni({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return _h(e,e.a.Ab()).then((function(t){var n=t.user;return zc(n,"isAnonymous",!0),e.da(n),t}))}))},e.getUid=function(){return xh(this)&&xh(this).uid||null},e.cc=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&xh(this)&&Pc(xh(this))},e.Pc=function(e){var t=this;q(this.s,(function(n){n==e&&t.u--})),0>this.u&&(this.u=0),0==this.u&&xh(this)&&Dc(xh(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.s.push(e),Ah(this,this.h.then((function(){t.l||X(t.s,e)&&e(Eh(t))})))},e.removeAuthTokenListener=function(e){Z(this.s,(function(t){return t==e}))},e.delete=function(){this.l=!0;for(var e=0;e<this.P.length;e++)this.P[e].cancel("app-deleted");return this.P=[],this.i&&(e=this.i).b.removeListener(sh("local"),e.a,this.ja),this.b&&(jl(this.b,this),Zl(this.b.b)),Promise.resolve()},e.hc=function(e){return Ah(this,function(e,t){return uu(e,Ps,{identifier:t,continueUri:Br()?pr():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}(this.a,e))},e.Bc=function(e){return!!Bo(e)},e.xb=function(e,t){var n=this;return Ah(this,It().then((function(){var e=new Ni(t);if(!e.c)throw new M("argument-error",Bi+" must be true when sending sign in link to email");return Vi(e)})).then((function(t){return n.a.xb(e,t)})).then((function(){})))},e.jd=function(e){return this.Sa(e).then((function(e){return e.data.email}))},e.ob=function(e,t){return Ah(this,this.a.ob(e,t).then((function(){})))},e.Sa=function(e){return Ah(this,this.a.Sa(e).then((function(e){return new hi(e)})))},e.kb=function(e){return Ah(this,this.a.kb(e).then((function(){})))},e.wb=function(e,t){var n=this;return Ah(this,It().then((function(){return"undefined"===typeof t||me(t)?{}:Vi(new Ni(t))})).then((function(t){return n.a.wb(e,t)})).then((function(){})))},e.Wc=function(e,t){return Ah(this,ic(this,e,t,x(this.ab,this)))},e.Vc=function(e,t){var n=this;return Ah(this,It().then((function(){var r=t||pr(),i=Oo(e,r);if(!(r=Bo(r)))throw new M("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new M("tenant-id-mismatch");return n.ab(i)})))},Th.prototype.render=function(){},Th.prototype.reset=function(){},Th.prototype.getResponse=function(){},Th.prototype.execute=function(){};var Mh=null;function kh(e,t){return(t=Ih(t))&&e.a[t]||null}function Ih(e){return(e="undefined"===typeof e?1e12:e)?e.toString():null}function Rh(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ht(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():fn(this.f,"click",this.i)}function Ph(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Dh(){}function Nh(){}Ch.prototype.render=function(e,t){return this.a[this.b.toString()]=new Rh(e,t),this.b++},Ch.prototype.reset=function(e){var t=kh(this,e);e=Ih(e),t&&e&&(t.delete(),delete this.a[e])},Ch.prototype.getResponse=function(e){return(e=kh(this,e))?e.getResponse():null},Ch.prototype.execute=function(e){(e=kh(this,e))&&e.execute()},Rh.prototype.getResponse=function(){return Ph(this),this.b},Rh.prototype.execute=function(){Ph(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(r){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(r){}e.h&&e.execute()}),6e4)}),500))},Rh.prototype.delete=function(){Ph(this),this.g=!0,clearTimeout(this.a),this.a=null,vn(this.f,"click",this.i)},ei(Dh,"FACTOR_ID","phone"),Nh.prototype.g=function(){return Mh||(Mh=new Ch),It(Mh)},Nh.prototype.c=function(){};var Lh=null;function Oh(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Bh=new we(Ae,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Fh=new qr(3e4,6e4);Oh.prototype.g=function(e){var t=this;return new Et((function(n,r){var i=setTimeout((function(){r(new M("network-request-failed"))}),Fh.get());!s.grecaptcha||e!==t.f&&!t.b?(s[t.a]=function(){if(s.grecaptcha){t.f=e;var o=s.grecaptcha.render;s.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new M("internal-error"));delete s[t.a]},It(Ja(ke(Bh,{onload:t.a,hl:e||""}))).o((function(){clearTimeout(i),r(new M("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Oh.prototype.c=function(){this.b--};var Uh=null;function jh(e,t,n,r,i,o,a){if(ei(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=t,this.g=null,a?(Lh||(Lh=new Nh),a=Lh):(Uh||(Uh=new Oh),a=Uh),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[zh])throw new M("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Vh],!s.document)throw new M("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ht(t)||!this.i&&ht(t).hasChildNodes())throw new M("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new ts(e,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var l=this.a[Hh];this.a[Hh]=function(e){if(Wh(u,e),"function"===typeof l)l(e);else if("string"===typeof l){var t=Nr(l,s);"function"===typeof t&&t(e)}};var c=this.a[Gh];this.a[Gh]=function(){if(Wh(u,null),"function"===typeof c)c();else if("string"===typeof c){var e=Nr(c,s);"function"===typeof e&&e()}}}var Hh="callback",Gh="expired-callback",zh="sitekey",Vh="size";function Wh(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(r){}}function qh(e,t){return e.h.push(t),t.oa((function(){Y(e.h,t)})),t}function Kh(e){if(e.J)throw new M("internal-error","RecaptchaVerifier instance has been destroyed.")}function Jh(e,t,n){var r=!1;try{this.b=n||l.default.app()}catch(a){throw new M("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new M("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(a){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}o=l.default.SDK_VERSION?Pr(l.default.SDK_VERSION,o):null,jh.call(this,n,e,t,(function(){try{var e=i.b.auth().la()}catch(t){e=null}return e}),o,N(I),r)}function Qh(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new M("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],0>i||i>=Xh.length)throw new M("internal-error","Argument validator received an unsupported number of arguments.");n=Xh[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new M("argument-error",e+" failed: "+r)}(e=jh.prototype).Ia=function(){var e=this;return this.f?this.f:this.f=qh(this,It().then((function(){if(Br()&&!Ar())return xr();throw new M("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.u())})).then((function(t){return e.g=t,uu(e.s,Ws,{})})).then((function(t){e.a[zh]=t.recaptchaSiteKey})).o((function(t){throw e.f=null,t})))},e.render=function(){Kh(this);var e=this;return qh(this,this.Ia().then((function(){if(null===e.c){var t=e.v;if(!e.i){var n=ht(t);t=function(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ct&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',qe(a.name),'"'),a.type){o.push(' type="',qe(a.type),'"');var s={};be(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=gt(i,o),a&&("string"===typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):ft(o,a)),2<r.length&&mt(i,o,r),o}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},e.verify=function(){Kh(this);var e=this;return qh(this,this.render().then((function(t){return new Et((function(n){var r=e.g.getResponse(t);if(r)n(r);else{e.l.push((function t(r){r&&(function(e,t){Z(e.l,(function(e){return e==t}))}(e,t),n(r))})),e.i&&e.g.execute(e.c)}}))})))},e.reset=function(){Kh(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Kh(this),this.J=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=ht(this.v);for(var t;t=e.firstChild;)e.removeChild(t)}},T(Jh,jh);var Xh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Yh(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:function(e){return"string"===typeof e}}}function Zh(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:function(e){return"boolean"===typeof e}}}function $h(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:m}}function ef(e,t){return{name:e||"",K:"a function",optional:!!t,M:function(e){return"function"===typeof e}}}function tf(e,t){return{name:e||"",K:"null",optional:!!t,M:function(e){return null===e}}}function nf(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.ka||!n)}}}function rf(e,t){return m(e)&&"string"===typeof e.type&&e.type===t&&"function"===typeof e.Ha}function of(e){return m(e)&&"string"===typeof e.uid}function af(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function sf(e,t){for(var n in t){var r=t[n].name;e[r]=cf(r,e[n],t[n].j)}}function uf(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:E((function(e){return this[e]}),n),set:E((function(e,t,n,r){Qh(e,[n],[r],!0),this[t]=r}),r,n,t[n].lb),enumerable:!0})}}function lf(e,t,n,r){e[t]=cf(t,n,r)}function cf(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Qh(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}sf(fh.prototype,{kb:{name:"applyActionCode",j:[Yh("code")]},Sa:{name:"checkActionCode",j:[Yh("code")]},ob:{name:"confirmPasswordReset",j:[Yh("code"),Yh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Yh("email"),Yh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Yh("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Yh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[af($h(),ef(),"nextOrObserver"),ef("opt_error",!0),ef("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[af($h(),ef(),"nextOrObserver"),ef("opt_error",!0),ef("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Yh("email"),af($h("opt_actionCodeSettings",!0),tf(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Yh("email"),$h("actionCodeSettings")]},yb:{name:"setPersistence",j:[Yh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[nf()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[nf()]},Tc:{name:"signInWithCustomToken",j:[Yh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Yh("email"),Yh("password")]},Vc:{name:"signInWithEmailLink",j:[Yh("email"),Yh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Yh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[af({name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof Ac)}},tf(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Yh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Yh("url"),$h("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Yh("code")]}}),uf(fh.prototype,{lc:{name:"languageCode",lb:af(Yh(),tf(),"languageCode")},ti:{name:"tenantId",lb:af(Yh(),tf(),"tenantId")}}),fh.Persistence=il,fh.Persistence.LOCAL="local",fh.Persistence.SESSION="session",fh.Persistence.NONE="none",sf(Ac.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Zh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Zh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[nf()]},rb:{name:"linkWithCredential",j:[nf()]},Dc:{name:"linkWithPhoneNumber",j:[Yh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[nf()]},ub:{name:"reauthenticateWithCredential",j:[nf()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Yh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[af($h("opt_actionCodeSettings",!0),tf(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Yh(null,!0)]},cd:{name:"unlink",j:[Yh("provider")]},Cb:{name:"updateEmail",j:[Yh("email")]},Db:{name:"updatePassword",j:[Yh("password")]},ed:{name:"updatePhoneNumber",j:[nf("phone")]},Eb:{name:"updateProfile",j:[$h("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Yh("email"),af($h("opt_actionCodeSettings",!0),tf(null,!0),"opt_actionCodeSettings",!0)]}}),sf(Ch.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),sf(Th.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),sf(Et.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),uf(nc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Zh("appVerificationDisabledForTesting")}}),sf(rc.prototype,{confirm:{name:"confirm",j:[Yh("verificationCode")]}}),lf(po,"fromJSON",(function(e){e="string"===typeof e?JSON.parse(e):e;for(var t,n=[wo,No,Uo,yo],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[af(Yh(),$h(),"json")]),lf(Lo,"credential",(function(e,t){return new Do(e,t)}),[Yh("email"),Yh("password")]),sf(Do.prototype,{w:{name:"toJSON",j:[Yh(null,!0)]}}),sf(Ao.prototype,{Ca:{name:"addScope",j:[Yh("scope")]},Ka:{name:"setCustomParameters",j:[$h("customOAuthParameters")]}}),lf(Ao,"credential",To,[af(Yh(),$h(),"token")]),lf(Lo,"credentialWithLink",Oo,[Yh("email"),Yh("emailLink")]),sf(Co.prototype,{Ca:{name:"addScope",j:[Yh("scope")]},Ka:{name:"setCustomParameters",j:[$h("customOAuthParameters")]}}),lf(Co,"credential",Mo,[af(Yh(),$h(),"token")]),sf(ko.prototype,{Ca:{name:"addScope",j:[Yh("scope")]},Ka:{name:"setCustomParameters",j:[$h("customOAuthParameters")]}}),lf(ko,"credential",Io,[af(Yh(),af($h(),tf()),"idToken"),af(Yh(),tf(),"accessToken",!0)]),sf(Ro.prototype,{Ka:{name:"setCustomParameters",j:[$h("customOAuthParameters")]}}),lf(Ro,"credential",Po,[af(Yh(),$h(),"token"),Yh("secret",!0)]),sf(So.prototype,{Ca:{name:"addScope",j:[Yh("scope")]},credential:{name:"credential",j:[af(Yh(),af($h(),tf()),"optionsOrIdToken"),af(Yh(),tf(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[$h("customOAuthParameters")]}}),sf(bo.prototype,{w:{name:"toJSON",j:[Yh(null,!0)]}}),sf(mo.prototype,{w:{name:"toJSON",j:[Yh(null,!0)]}}),lf(Ho,"credential",Go,[Yh("verificationId"),Yh("verificationCode")]),sf(Ho.prototype,{gb:{name:"verifyPhoneNumber",j:[af(Yh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(e){return!!e&&(e.session&&e.phoneNumber?rf(e.session,ho)&&"string"===typeof e.phoneNumber:e.session&&e.multiFactorHint?rf(e.session,fo)&&of(e.multiFactorHint):e.session&&e.multiFactorUid?rf(e.session,fo)&&"string"===typeof e.multiFactorUid:!!e.phoneNumber&&"string"===typeof e.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]}}),sf(Fo.prototype,{w:{name:"toJSON",j:[Yh(null,!0)]}}),sf(M.prototype,{toJSON:{name:"toJSON",j:[Yh(null,!0)]}}),sf(Yo.prototype,{toJSON:{name:"toJSON",j:[Yh(null,!0)]}}),sf(Xo.prototype,{toJSON:{name:"toJSON",j:[Yh(null,!0)]}}),sf(lc.prototype,{toJSON:{name:"toJSON",j:[Yh(null,!0)]}}),sf(ac.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.tb}}]}}),sf(vc.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.tb}},Yh("displayName",!0)]},bd:{name:"unenroll",j:[af({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:of},Yh(),"multiFactorInfoIdentifier")]}}),sf(Jh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),lf(Ai,"parseLink",Di,[Yh("link")]),lf(Dh,"assertion",(function(e){return new dc(e)}),[nf("phone")]),function(){if("undefined"===typeof l.default||!l.default.INTERNAL||!l.default.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:di,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:fi,VERIFY_AND_CHANGE_EMAIL:pi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:fh,AuthCredential:po,Error:M};lf(e,"EmailAuthProvider",Lo,[]),lf(e,"FacebookAuthProvider",Ao,[]),lf(e,"GithubAuthProvider",Co,[]),lf(e,"GoogleAuthProvider",ko,[]),lf(e,"TwitterAuthProvider",Ro,[]),lf(e,"OAuthProvider",So,[Yh("providerId")]),lf(e,"SAMLAuthProvider",Eo,[Yh("providerId")]),lf(e,"PhoneAuthProvider",Ho,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof fh)}}]),lf(e,"RecaptchaVerifier",Jh,[af(Yh(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),$h("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof l.default.app.App)}}]),lf(e,"ActionCodeURL",Ai,[]),lf(e,"PhoneMultiFactorGenerator",Dh,[]),l.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new fh(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(e){e.getProvider("auth-internal").initialize()}}),l.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:x((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:x(e.nc,e),addAuthTokenListener:x(e.cc,e),removeAuthTokenListener:x(e.Pc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),l.default.registerVersion("@firebase/auth","0.16.8"),l.default.INTERNAL.extendNamespace({User:Ac})}()}).apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});n(172);var c=function(e,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},c(e,t)};function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function f(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(lU){o(lU)}}function s(e){try{u(r.throw(e))}catch(lU){o(lU)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(lU){o=[6,lU],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function p(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var v=n(293),m=n(386),g=function(e,t){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},g(e,t)};function y(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var b,_="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},w=w||{},x=_||self;function E(){}function S(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function A(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var T="closure_uid_"+(1e9*Math.random()>>>0),C=0;function M(e,t,n){return e.call.apply(e.bind,arguments)}function k(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function I(e,t,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?M:k).apply(null,arguments)}function R(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function P(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function D(){this.s=this.s,this.o=this.o}var N={};D.prototype.s=!1,D.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,T)&&e[T]||(e[T]=++C)}(this);delete N[e]}},D.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var L=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},O=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function B(e){return Array.prototype.concat.apply([],arguments)}function F(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function U(e){return/^[\s\xa0]*$/.test(e)}var j,H=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function G(e,t){return-1!=e.indexOf(t)}function z(e,t){return e<t?-1:e>t?1:0}e:{var V=x.navigator;if(V){var W=V.userAgent;if(W){j=W;break e}}j=""}function q(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function K(e){var t={};for(var n in e)t[n]=e[n];return t}var J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<J.length;o++)n=J[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function X(e){return X[" "](e),e}X[" "]=E;var Y,Z=G(j,"Opera"),$=G(j,"Trident")||G(j,"MSIE"),ee=G(j,"Edge"),te=ee||$,ne=G(j,"Gecko")&&!(G(j.toLowerCase(),"webkit")&&!G(j,"Edge"))&&!(G(j,"Trident")||G(j,"MSIE"))&&!G(j,"Edge"),re=G(j.toLowerCase(),"webkit")&&!G(j,"Edge");function ie(){var e=x.document;return e?e.documentMode:void 0}e:{var oe="",ae=function(){var e=j;return ne?/rv:([^\);]+)(\)|;)/.exec(e):ee?/Edge\/([\d\.]+)/.exec(e):$?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):re?/WebKit\/(\S+)/.exec(e):Z?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ae&&(oe=ae?ae[1]:""),$){var se=ie();if(null!=se&&se>parseFloat(oe)){Y=String(se);break e}}Y=oe}var ue,le={};function ce(){return function(e){var t=le;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=H(String(Y)).split("."),n=H("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=z(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||z(0==o[2].length,0==a[2].length)||z(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}))}if(x.document&&$){var he=ie();ue=he||(parseInt(Y,10)||void 0)}else ue=void 0;var fe=ue,de=function(){if(!x.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{x.addEventListener("test",E,t),x.removeEventListener("test",E,t)}catch(vU){}return e}();function pe(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function ve(e,t){if(pe.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ne){e:{try{X(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:me[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ve.Z.h.call(this)}}pe.prototype.h=function(){this.defaultPrevented=!0},P(ve,pe);var me={2:"touch",3:"pen",4:"mouse"};ve.prototype.h=function(){ve.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ge="closure_listenable_"+(1e6*Math.random()|0),ye=0;function be(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++ye,this.ca=this.fa=!1}function _e(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function we(e){this.src=e,this.g={},this.h=0}function xe(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=L(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(_e(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ee(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==r)return i}return-1}we.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=Ee(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new be(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var Se="closure_lm_"+(1e6*Math.random()|0),Ae={};function Te(e,t,n,r,i){if(r&&r.once)return Me(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)Te(e,t[o],n,r,i);return null}return n=Le(n),e&&e[ge]?e.N(t,n,A(r)?!!r.capture:!!r,i):Ce(e,t,n,!1,r,i)}function Ce(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=A(i)?!!i.capture:!!i,s=De(e);if(s||(e[Se]=s=new we(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Pe;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)de||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Re(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Me(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Me(e,t[o],n,r,i);return null}return n=Le(n),e&&e[ge]?e.O(t,n,A(r)?!!r.capture:!!r,i):Ce(e,t,n,!0,r,i)}function ke(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)ke(e,t[o],n,r,i);else r=A(r)?!!r.capture:!!r,n=Le(n),e&&e[ge]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ee(o=e.g[t],n,r,i))&&(_e(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=De(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ee(t,n,r,i)),(n=-1<e?t[e]:null)&&Ie(n))}function Ie(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[ge])xe(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Re(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=De(t))?(xe(n,e),0==n.h&&(n.src=null,t[Se]=null)):_e(e)}}}function Re(e){return e in Ae?Ae[e]:Ae[e]="on"+e}function Pe(e,t){if(e.ca)e=!0;else{t=new ve(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Ie(e),e=n.call(r,t)}return e}function De(e){return(e=e[Se])instanceof we?e:null}var Ne="__closure_events_fn_"+(1e9*Math.random()>>>0);function Le(e){return"function"===typeof e?e:(e[Ne]||(e[Ne]=function(t){return e.handleEvent(t)}),e[Ne])}function Oe(){D.call(this),this.i=new we(this),this.P=this,this.I=null}function Be(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new pe(t,e);else if(t instanceof pe)t.target=t.target||e;else{var i=t;Q(t=new pe(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=Fe(a,r,!0,t)&&i}if(i=Fe(a=t.g=e,r,!0,t)&&i,i=Fe(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=Fe(a=t.g=n[o],r,!1,t)&&i}function Fe(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&xe(e.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}P(Oe,D),Oe.prototype[ge]=!0,Oe.prototype.removeEventListener=function(e,t,n,r){ke(this,e,t,n,r)},Oe.prototype.M=function(){if(Oe.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)_e(n[r]);delete t.g[e],t.h--}}this.I=null},Oe.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Oe.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ue=x.JSON.stringify;function je(){var e=Je,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var He,Ge=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=ze.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),ze=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e},e}())((function(){return new Ve}),(function(e){return e.reset()})),Ve=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function We(e){x.setTimeout((function(){throw e}),0)}function qe(e,t){He||function(){var e=x.Promise.resolve(void 0);He=function(){e.then(Qe)}}(),Ke||(He(),Ke=!0),Je.add(e,t)}var Ke=!1,Je=new Ge;function Qe(){for(var e;e=je();){try{e.h.call(e.g)}catch(vU){We(vU)}var t=ze;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ke=!1}function Xe(e,t){Oe.call(this),this.h=e||1,this.g=t||x,this.j=I(this.kb,this),this.l=Date.now()}function Ye(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Ze(e,t,n){if("function"===typeof e)n&&(e=I(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=I(e.handleEvent,e)}return 2147483647<Number(t)?-1:x.setTimeout(e,t||0)}function $e(e){e.g=Ze((function(){e.g=null,e.i&&(e.i=!1,$e(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}P(Xe,Oe),(b=Xe.prototype).da=!1,b.S=null,b.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Be(this,"tick"),this.da&&(Ye(this),this.start()))}},b.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},b.M=function(){Xe.Z.M.call(this),Ye(this),delete this.g};var et=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:$e(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(x.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(D);function tt(e){D.call(this),this.h=e,this.g={}}P(tt,D);var nt=[];function rt(e,t,n,r){Array.isArray(n)||(n&&(nt[0]=n.toString()),n=nt);for(var i=0;i<n.length;i++){var o=Te(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function it(e){q(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ie(e)}),e),e.g={}}function ot(){this.g=!0}function at(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Ue(n)}catch(fU){return t}}(e,n)+(r?" "+r:"")}))}tt.prototype.M=function(){tt.Z.M.call(this),it(this)},tt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ot.prototype.Aa=function(){this.g=!1},ot.prototype.info=function(){};var st={},ut=null;function lt(){return ut=ut||new Oe}function ct(e){pe.call(this,st.Ma,e)}function ht(e){var t=lt();Be(t,new ct(t,e))}function ft(e,t){pe.call(this,st.STAT_EVENT,e),this.stat=t}function dt(e){var t=lt();Be(t,new ft(t,e))}function pt(e,t){pe.call(this,st.Na,e),this.size=t}function vt(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return x.setTimeout((function(){e()}),t)}st.Ma="serverreachability",P(ct,pe),st.STAT_EVENT="statevent",P(ft,pe),st.Na="timingevent",P(pt,pe);var mt={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},gt={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function yt(){}function bt(e){return e.h||(e.h=e.i())}function _t(){}yt.prototype.h=null;var wt,xt={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Et(){pe.call(this,"d")}function St(){pe.call(this,"c")}function At(){}function Tt(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new tt(this),this.P=Mt,e=te?125:void 0,this.W=new Xe(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ct}function Ct(){this.i=null,this.g="",this.h=!1}P(Et,pe),P(St,pe),P(At,yt),At.prototype.g=function(){return new XMLHttpRequest},At.prototype.i=function(){return{}},wt=new At;var Mt=45e3,kt={},It={};function Rt(e,t,n){e.K=1,e.v=en(Jt(t)),e.s=n,e.U=!0,Pt(e,null)}function Pt(e,t){e.F=Date.now(),Ot(e),e.A=Jt(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),pn(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Ct,e.g=vr(e.l,n?t:null,!e.s),0<e.O&&(e.L=new et(I(e.Ia,e,e.g),e.O)),rt(e.V,e.g,"readystatechange",e.gb),t=e.H?K(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ht(1),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var l=s[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");a=2<=h.length&&"type"==h[1]?a+(c+"=")+l+"&":a+(c+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Dt(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Nt(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Lt(e,n))==It){4==t&&(e.o=4,dt(14),i=!1),at(e.j,e.m,null,"[Incomplete Response]");break}if(r==kt){e.o=4,dt(15),at(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}at(e.j,e.m,r,null),Ht(e,r)}Dt(e)&&r!=It&&r!=kt&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,dt(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),sr(t),t.L=!0,dt(11))):(at(e.j,e.m,n,"[Invalid Chunked Response]"),jt(e),Ut(e))}function Lt(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?It:(n=Number(t.substring(n,r)),isNaN(n)?kt:(r+=1)+n>t.length?It:(t=t.substr(r,n),e.C=r+n,t))}function Ot(e){e.Y=Date.now()+e.P,Bt(e,e.P)}function Bt(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=vt(I(e.eb,e),t)}function Ft(e){e.B&&(x.clearTimeout(e.B),e.B=null)}function Ut(e){0==e.l.G||e.I||cr(e.l,e)}function jt(e){Ft(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ye(e.W),it(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ht(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||wn(n.i,e)))if(n.I=e.N,!e.J&&wn(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;lr(n),Zn(n)}ar(n),dt(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=vt(I(n.ab,n),6e3));if(1>=_n(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else fr(n,11)}else if((e.J||n.g==e)&&lr(n),!U(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var l=e.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=r.i;!h.g&&(G(c,"spdy")||G(c,"quic")||G(c,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(xn(h,h.h),h.h=null))}if(r.D){var f=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,$t(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=pr(r,r.H?r.la:null,r.W),d.J){En(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Ft(p),Ot(p)),r.g=d}else or(r);0<n.l.length&&tr(n)}else"stop"!=o[0]&&"close"!=o[0]||fr(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?fr(n,7):Yn(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}ht(4)}catch(o){}}function Gt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(S(e)||"string"===typeof e)O(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(S(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(S(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function zt(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof zt)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Vt(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Wt(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Wt(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Wt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(b=Tt.prototype).setTimeout=function(e){this.P=e},b.gb=function(e){e=e.target;var t=this.L;t&&3==qn(e)?t.l():this.Ia(e)},b.Ia=function(e){try{if(e==this.g)e:{var t=qn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||te||this.g&&(this.h.h||this.g.ga()||Kn(this.g)))){this.I||4!=t||7==n||ht(8==n||0>=r?3:2),Ft(this);var i=this.g.ba();this.N=i;t:if(Dt(this)){var o=Kn(this.g);e="";var a=o.length,s=4==qn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){jt(this),Ut(this);var u="";break t}this.h.i=new x.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(l)){var h=l;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,dt(12),jt(this),Ut(this);break e}at(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ht(this,i)}this.U?(Nt(this,t,u),te&&this.i&&3==t&&(rt(this.V,this.W,"tick",this.fb),this.W.start())):(at(this.j,this.m,u,null),Ht(this,u)),4==t&&jt(this),this.i&&!this.I&&(4==t?cr(this.l,this):(this.i=!1,Ot(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,dt(12)):(this.o=0,dt(13)),jt(this),Ut(this)}}}catch(t){}},b.fb=function(){if(this.g){var e=qn(this.g),t=this.g.ga();this.C<t.length&&(Ft(this),Nt(this,e,t),this.i&&4!=e&&Ot(this))}},b.cancel=function(){this.I=!0,jt(this)},b.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(ht(3),dt(17)),jt(this),this.o=2,Ut(this)):Bt(this,this.Y-e)},(b=zt.prototype).R=function(){Vt(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},b.T=function(){return Vt(this),this.g.concat()},b.get=function(e,t){return Wt(this.h,e)?this.h[e]:t},b.set=function(e,t){Wt(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},b.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var qt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Kt(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Kt){this.g=void 0!==t?t:e.g,Qt(this,e.j),this.s=e.s,Xt(this,e.i),Yt(this,e.m),this.l=e.l,t=e.h;var n=new cn;n.i=t.i,t.g&&(n.g=new zt(t.g),n.h=t.h),Zt(this,n),this.o=e.o}else e&&(n=String(e).match(qt))?(this.g=!!t,Qt(this,n[1]||"",!0),this.s=tn(n[2]||""),Xt(this,n[3]||"",!0),Yt(this,n[4]),this.l=tn(n[5]||"",!0),Zt(this,n[6]||"",!0),this.o=tn(n[7]||"")):(this.g=!!t,this.h=new cn(null,this.g))}function Jt(e){return new Kt(e)}function Qt(e,t,n){e.j=n?tn(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Xt(e,t,n){e.i=n?tn(t,!0):t}function Yt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Zt(e,t,n){t instanceof cn?(e.h=t,function(e,t){t&&!e.j&&(hn(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(fn(this,t),pn(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=nn(t,un)),e.h=new cn(t,e.g))}function $t(e,t,n){e.h.set(t,n)}function en(e){return $t(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function tn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function nn(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,rn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function rn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Kt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(nn(t,on,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(nn(t,on,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(nn(n,"/"==n.charAt(0)?sn:an,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",nn(n,ln)),e.join("")};var on=/[#\/\?@]/g,an=/[#\?:]/g,sn=/[#\?]/g,un=/[#\?@]/g,ln=/#/g;function cn(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function hn(e){e.g||(e.g=new zt,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function fn(e,t){hn(e),t=vn(e,t),Wt(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Wt((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Vt(e)))}function dn(e,t){return hn(e),t=vn(e,t),Wt(e.g.h,t)}function pn(e,t,n){fn(e,t),0<n.length&&(e.i=null,e.g.set(vn(e,t),F(n)),e.h+=n.length)}function vn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(b=cn.prototype).add=function(e,t){hn(this),this.i=null,e=vn(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},b.forEach=function(e,t){hn(this),this.g.forEach((function(n,r){O(n,(function(n){e.call(t,n,r,this)}),this)}),this)},b.T=function(){hn(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},b.R=function(e){hn(this);var t=[];if("string"===typeof e)dn(this,e)&&(t=B(t,this.g.get(vn(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=B(t,e[n])}return t},b.set=function(e,t){return hn(this),this.i=null,dn(this,e=vn(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},b.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},b.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.i=e.join("&")};var mn=function(e,t){this.h=e,this.g=t};function gn(e){this.l=e||yn,x.PerformanceNavigationTiming?e=0<(e=x.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(x.g&&x.g.Ea&&x.g.Ea()&&x.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var yn=10;function bn(e){return!!e.h||!!e.g&&e.g.size>=e.j}function _n(e){return e.h?1:e.g?e.g.size:0}function wn(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function xn(e,t){e.g?e.g.add(t):e.h=t}function En(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Sn(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=y(e.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return F(e.i)}function An(){}function Tn(){this.g=new An}function Cn(e,t,n){var r=n||"";try{Gt(e,(function(e,n){var i=e;A(e)&&(i=Ue(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(lU){throw t.push(r+"type="+encodeURIComponent("_badmap")),lU}}function Mn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function kn(e){this.l=e.$b||null,this.j=e.ib||!1}function In(e,t){Oe.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Rn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gn.prototype.cancel=function(){var e,t;if(this.i=Sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=y(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){e={error:i}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},An.prototype.stringify=function(e){return x.JSON.stringify(e,void 0)},An.prototype.parse=function(e){return x.JSON.parse(e,void 0)},P(kn,yt),kn.prototype.g=function(){return new In(this.l,this.j)},kn.prototype.i=function(e){return function(){return e}}({}),P(In,Oe);var Rn=0;function Pn(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Dn(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Nn(e)}function Nn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(b=In.prototype).open=function(e,t){if(this.readyState!=Rn)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Nn(this)},b.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||x).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},b.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dn(this)),this.readyState=Rn},b.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Nn(this)),this.g&&(this.readyState=3,Nn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof x.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Pn(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},b.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dn(this):Nn(this),3==this.readyState&&Pn(this)}},b.Ua=function(e){this.g&&(this.response=this.responseText=e,Dn(this))},b.Ta=function(e){this.g&&(this.response=e,Dn(this))},b.ha=function(){this.g&&Dn(this)},b.setRequestHeader=function(e,t){this.v.append(e,t)},b.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},b.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(In.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ln=x.JSON.parse;function On(e){Oe.call(this),this.headers=new zt,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Bn,this.K=this.L=!1}P(On,Oe);var Bn="",Fn=/^https?$/i,Un=["POST","PUT"];function jn(e){return"content-type"==e.toLowerCase()}function Hn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Gn(e),Vn(e)}function Gn(e){e.D||(e.D=!0,Be(e,"complete"),Be(e,"error"))}function zn(e){if(e.h&&"undefined"!=typeof w&&(!e.C[1]||4!=qn(e)||2!=e.ba()))if(e.v&&4==qn(e))Ze(e.Fa,0,e);else if(Be(e,"readystatechange"),4==qn(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.H).match(qt)[1]||null;if(!o&&x.self&&x.self.location){var a=x.self.location.protocol;o=a.substr(0,a.length-1)}i=!Fn.test(o?o.toLowerCase():"")}t=i}if(t)Be(e,"complete"),Be(e,"success");else{e.m=6;try{var s=2<qn(e)?e.g.statusText:""}catch(yU){s=""}e.j=s+" ["+e.ba()+"]",Gn(e)}}finally{Vn(e)}}}function Vn(e,t){if(e.g){Wn(e);var n=e.g,r=e.C[0]?E:null;e.g=null,e.C=null,t||Be(e,"ready");try{n.onreadystatechange=r}catch(lU){}}}function Wn(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(x.clearTimeout(e.A),e.A=null)}function qn(e){return e.g?e.g.readyState:0}function Kn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Bn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(wU){return null}}function Jn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return q(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):$t(e,t,n))}function Qn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Xn(e){this.za=0,this.l=[],this.h=new ot,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Qn("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Qn("baseRetryDelayMs",5e3,e),this.$a=Qn("retryDelaySeedMs",1e4,e),this.Ya=Qn("forwardChannelMaxRetries",2,e),this.ra=Qn("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new gn(e&&e.concurrentRequestLimit),this.Ca=new Tn,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Yn(e){if($n(e),3==e.G){var t=e.V++,n=Jt(e.F);$t(n,"SID",e.J),$t(n,"RID",t),$t(n,"TYPE","terminate"),rr(e,n),(t=new Tt(e,e.h,t,void 0)).K=2,t.v=en(Jt(n)),n=!1,x.navigator&&x.navigator.sendBeacon&&(n=x.navigator.sendBeacon(t.v.toString(),"")),!n&&x.Image&&((new Image).src=t.v,n=!0),n||(t.g=vr(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Ot(t)}dr(e)}function Zn(e){e.g&&(sr(e),e.g.cancel(),e.g=null)}function $n(e){Zn(e),e.u&&(x.clearTimeout(e.u),e.u=null),lr(e),e.i.cancel(),e.m&&("number"===typeof e.m&&x.clearTimeout(e.m),e.m=null)}function er(e,t){e.l.push(new mn(e.Za++,t)),3==e.G&&tr(e)}function tr(e){bn(e.i)||e.m||(e.m=!0,qe(e.Ha,e),e.C=0)}function nr(e,t){var n;n=t?t.m:e.V++;var r=Jt(e.F);$t(r,"SID",e.J),$t(r,"RID",n),$t(r,"AID",e.U),rr(e,r),e.o&&e.s&&Jn(r,e.o,e.s),n=new Tt(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=ir(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),xn(e.i,n),Rt(n,r,t)}function rr(e,t){e.j&&Gt({},(function(e,n){$t(t,n,e)}))}function ir(e,t,n){n=Math.min(e.l.length,n);var r=e.j?I(e.j.Oa,e.j,e):null;e:for(var i=e.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var l=i[u].h,c=i[u].g;if(0>(l-=o))o=Math.max(0,i[u].h-100),s=!1;else try{Cn(c,a,"req"+l+"_")}catch(Xr){r&&r(c)}}if(s){r=a.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function or(e){e.g||e.u||(e.Y=1,qe(e.Ga,e),e.A=0)}function ar(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=vt(I(e.Ga,e),hr(e,e.A)),e.A++,!0)}function sr(e){null!=e.B&&(x.clearTimeout(e.B),e.B=null)}function ur(e){e.g=new Tt(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Jt(e.oa);$t(t,"RID","rpc"),$t(t,"SID",e.J),$t(t,"CI",e.N?"0":"1"),$t(t,"AID",e.U),rr(e,t),$t(t,"TYPE","xmlhttp"),e.o&&e.s&&Jn(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=en(Jt(t)),n.s=null,n.U=!0,Pt(n,e)}function lr(e){null!=e.v&&(x.clearTimeout(e.v),e.v=null)}function cr(e,t){var n=null;if(e.g==t){lr(e),sr(e),e.g=null;var r=2}else{if(!wn(e.i,t))return;n=t.D,En(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Be(r=lt(),new pt(r,n,t,i)),tr(e)}else or(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(_n(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=vt(I(e.Ha,e,t),hr(e,e.C)),e.C++,!0))}(e,t)||2==r&&ar(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:fr(e,5);break;case 4:fr(e,10);break;case 3:fr(e,6);break;default:fr(e,2)}}function hr(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function fr(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=I(e.jb,e);n||(n=new Kt("//www.google.com/images/cleardot.gif"),x.location&&"http"==x.location.protocol||Qt(n,"https"),en(n)),function(e,t){var n=new ot;if(x.Image){var r=new Image;r.onload=R(Mn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=R(Mn,n,r,"TestLoadImage: error",!1,t),r.onabort=R(Mn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=R(Mn,n,r,"TestLoadImage: timeout",!1,t),x.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else dt(2);e.G=0,e.j&&e.j.va(t),dr(e),$n(e)}function dr(e){e.G=0,e.I=-1,e.j&&(0==Sn(e.i).length&&0==e.l.length||(e.i.i.length=0,F(e.l),e.l.length=0),e.j.ua())}function pr(e,t,n){var r=function(e){return e instanceof Kt?Jt(e):new Kt(e,void 0)}(n);if(""!=r.i)t&&Xt(r,t+"."+r.i),Yt(r,r.m);else{var i=x.location;r=function(e,t,n,r){var i=new Kt(null,void 0);return e&&Qt(i,e),t&&Xt(i,t),n&&Yt(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&q(e.aa,(function(e,t){$t(r,t,e)})),t=e.D,n=e.sa,t&&n&&$t(r,t,n),$t(r,"VER",e.ma),rr(e,r),r}function vr(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new On(new kn({ib:!0})):new On(e.qa)).L=e.H,t}function mr(){}function gr(){if($&&!(10<=Number(fe)))throw Error("Environmental error: no available transport.")}function yr(e,t){Oe.call(this),this.g=new Xn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!U(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!U(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new wr(this)}function br(e){Et.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function _r(){St.call(this),this.status=1}function wr(e){this.g=e}(b=On.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():wt.g(),this.C=this.u?bt(this.u):bt(wt),this.g.onreadystatechange=I(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(o){return void Hn(this,o)}e=n||"";var i=new zt(this.headers);r&&Gt(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=jn,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=x.FormData&&e instanceof x.FormData,!(0<=L(Un,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Wn(this),0<this.B&&((this.K=function(e){return $&&ce()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=I(this.pa,this)):this.A=Ze(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){Hn(this,o)}},b.pa=function(){"undefined"!=typeof w&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Be(this,"timeout"),this.abort(8))},b.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Be(this,"complete"),Be(this,"abort"),Vn(this))},b.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vn(this,!0)),On.Z.M.call(this)},b.Fa=function(){this.s||(this.F||this.v||this.l?zn(this):this.cb())},b.cb=function(){zn(this)},b.ba=function(){try{return 2<qn(this)?this.g.status:-1}catch(bU){return-1}},b.ga=function(){try{return this.g?this.g.responseText:""}catch(bU){return""}},b.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ln(t)}},b.Da=function(){return this.m},b.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(b=Xn.prototype).ma=8,b.G=1,b.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(wU){}},b.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Tt(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Q(n=K(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"===typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=ir(this,t,r),$t(i=Jt(this.F),"RID",e),$t(i,"CVER",22),this.D&&$t(i,"X-HTTP-Session-Id",this.D),rr(this,i),this.o&&n&&Jn(i,this.o,n),xn(this.i,t),this.Ra&&$t(i,"TYPE","init"),this.ja?($t(i,"$req",r),$t(i,"SID","null"),t.$=!0,Rt(t,i,null)):Rt(t,i,r),this.G=2}}else 3==this.G&&(e?nr(this,e):0==this.l.length||bn(this.i)||nr(this))},b.Ga=function(){if(this.u=null,ur(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=vt(I(this.bb,this),e)}},b.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,dt(10),Zn(this),ur(this))},b.ab=function(){null!=this.v&&(this.v=null,Zn(this),ar(this),dt(19))},b.jb=function(e){e?(this.h.info("Successfully pinged google.com"),dt(2)):(this.h.info("Failed to ping google.com"),dt(1))},(b=mr.prototype).xa=function(){},b.wa=function(){},b.va=function(){},b.ua=function(){},b.Oa=function(){},gr.prototype.g=function(e,t){return new yr(e,t)},P(yr,Oe),yr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),qe(I(e.hb,e,t))),dt(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=pr(e,null,e.W),tr(e)},yr.prototype.close=function(){Yn(this.g)},yr.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,er(this.g,t)}else this.v?((t={}).__data__=Ue(e),er(this.g,t)):er(this.g,e)},yr.prototype.M=function(){this.g.j=null,delete this.j,Yn(this.g),delete this.g,yr.Z.M.call(this)},P(br,Et),P(_r,St),P(wr,mr),wr.prototype.xa=function(){Be(this.g,"a")},wr.prototype.wa=function(e){Be(this.g,new br(e))},wr.prototype.va=function(e){Be(this.g,new _r(e))},wr.prototype.ua=function(){Be(this.g,"b")},gr.prototype.createWebChannel=gr.prototype.g,yr.prototype.send=yr.prototype.u,yr.prototype.open=yr.prototype.m,yr.prototype.close=yr.prototype.close,mt.NO_ERROR=0,mt.TIMEOUT=8,mt.HTTP_ERROR=6,gt.COMPLETE="complete",_t.EventType=xt,xt.OPEN="a",xt.CLOSE="b",xt.ERROR="c",xt.MESSAGE="d",Oe.prototype.listen=Oe.prototype.N,On.prototype.listenOnce=On.prototype.O,On.prototype.getLastError=On.prototype.La,On.prototype.getLastErrorCode=On.prototype.Da,On.prototype.getStatus=On.prototype.ba,On.prototype.getResponseJson=On.prototype.Qa,On.prototype.getResponseText=On.prototype.ga,On.prototype.send=On.prototype.ea;var xr=function(){return new gr},Er=function(){return lt()},Sr=mt,Ar=gt,Tr=st,Cr={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Mr=kn,kr=_t,Ir=On,Rr=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.t(e)},this.i=function(e){return t.writeSequenceNumber(e)})}return e.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},e}();Rr.o=-1;var Pr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Dr=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return h(t,e),t}(Error),Nr=new m.Logger("@firebase/firestore");function Lr(){return Nr.logLevel}function Or(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Nr.logLevel<=m.LogLevel.DEBUG){var r=t.map(Ur);Nr.debug.apply(Nr,p(["Firestore (8.10.1): "+e],r))}}function Br(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Nr.logLevel<=m.LogLevel.ERROR){var r=t.map(Ur);Nr.error.apply(Nr,p(["Firestore (8.10.1): "+e],r))}}function Fr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Nr.logLevel<=m.LogLevel.WARN){var r=t.map(Ur);Nr.warn.apply(Nr,p(["Firestore (8.10.1): "+e],r))}}function Ur(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function jr(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+e;throw Br(t),new Error(t)}function Hr(e,t){e||jr()}function Gr(e,t){return e}function zr(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Vr=function(){function e(){}return e.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=zr(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n},e}();function Wr(e,t){return e<t?-1:e>t?1:0}function qr(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Kr(e){return e+"\0"}var Jr=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Dr(Pr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Dr(Pr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Dr(Pr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Dr(Pr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?Wr(this.nanoseconds,e.nanoseconds):Wr(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),Qr=function(){function e(e){this.timestamp=e}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new Jr(0,0))},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();function Xr(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Yr(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Zr(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var $r=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&jr(),void 0===n?n=e.length-t:n>e.length-t&&jr(),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),ei=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new Dr(Pr.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(e){return e.length>0})))}return new t(r)},t.emptyPath=function(){return new t([])},t}($r),ti=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ni=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return ti.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Dr(Pr.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Dr(Pr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Dr(Pr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Dr(Pr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.emptyPath=function(){return new t([])},t}($r),ri=function(){function e(e){this.fields=e,e.sort(ni.comparator)}return e.prototype.covers=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].isPrefixOf(e))return!0;return!1},e.prototype.isEqual=function(e){return qr(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))},e}(),ii=function(){function e(e){this.binaryString=e}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))},e.prototype.toBase64=function(){return e=this.binaryString,btoa(e);var e},e.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(e){return Wr(this.binaryString,e.binaryString)},e.prototype.isEqual=function(e){return this.binaryString===e.binaryString},e}();ii.EMPTY_BYTE_STRING=new ii("");var oi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ai(e){if(Hr(!!e),"string"==typeof e){var t=0,n=oi.exec(e);if(Hr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:si(e.seconds),nanos:si(e.nanos)}}function si(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ui(e){return"string"==typeof e?ii.fromBase64String(e):ii.fromUint8Array(e)}function li(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ci(e){var t=e.mapValue.fields.__previous_value__;return li(t)?ci(t):t}function hi(e){var t=ai(e.mapValue.fields.__local_write_time__.timestampValue);return new Jr(t.seconds,t.nanos)}function fi(e){return null==e}function di(e){return 0===e&&1/e==-1/0}function pi(e){return"number"==typeof e&&Number.isInteger(e)&&!di(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var vi=function(){function e(e){this.path=e}return e.fromPath=function(t){return new e(ei.fromString(t))},e.fromName=function(t){return new e(ei.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===ei.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return ei.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new ei(t.slice()))},e}();function mi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?li(e)?4:10:jr()}function gi(e,t){var n=mi(e);if(n!==mi(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return hi(e).isEqual(hi(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=ai(e.timestampValue),r=ai(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ui(e.bytesValue).isEqual(ui(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return si(e.geoPointValue.latitude)===si(t.geoPointValue.latitude)&&si(e.geoPointValue.longitude)===si(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return si(e.integerValue)===si(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=si(e.doubleValue),r=si(t.doubleValue);return n===r?di(n)===di(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return qr(e.arrayValue.values||[],t.arrayValue.values||[],gi);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Xr(n)!==Xr(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!gi(n[i],r[i])))return!1;return!0}(e,t);default:return jr()}}function yi(e,t){return void 0!==(e.values||[]).find((function(e){return gi(e,t)}))}function bi(e,t){var n=mi(e),r=mi(t);if(n!==r)return Wr(n,r);switch(n){case 0:return 0;case 1:return Wr(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=si(e.integerValue||e.doubleValue),r=si(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return _i(e.timestampValue,t.timestampValue);case 4:return _i(hi(e),hi(t));case 5:return Wr(e.stringValue,t.stringValue);case 6:return function(e,t){var n=ui(e),r=ui(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Wr(n[i],r[i]);if(0!==o)return o}return Wr(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Wr(si(e.latitude),si(t.latitude));return 0!==n?n:Wr(si(e.longitude),si(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=bi(n[i],r[i]);if(o)return o}return Wr(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Wr(r[a],o[a]);if(0!==s)return s;var u=bi(n[r[a]],i[o[a]]);if(0!==u)return u}return Wr(r.length,o.length)}(e.mapValue,t.mapValue);default:throw jr()}}function _i(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Wr(e,t);var n=ai(e),r=ai(t),i=Wr(n.seconds,r.seconds);return 0!==i?i:Wr(n.nanos,r.nanos)}function wi(e){return xi(e)}function xi(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=ai(e);return"time("+t.seconds+","+t.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ui(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,vi.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(e){for(var t="[",n=!0,r=0,i=e.values||[];r<i.length;r++)n?n=!1:t+=",",t+=xi(i[r]);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var t="{",n=!0,r=0,i=Object.keys(e.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:t+=",",t+=o+":"+xi(e.fields[o])}return t+"}"}(e.mapValue):jr();var t,n}function Ei(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function Si(e){return!!e&&"integerValue"in e}function Ai(e){return!!e&&"arrayValue"in e}function Ti(e){return!!e&&"nullValue"in e}function Ci(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Mi(e){return!!e&&"mapValue"in e}function ki(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Yr(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ki(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ki(e.arrayValue.values[r]);return n}return Object.assign({},e)}var Ii=function(){function e(e){this.value=e}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Mi(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null},e.prototype.set=function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ki(t)},e.prototype.setAll=function(e){var t=this,n=ni.emptyPath(),r={},i=[];e.forEach((function(e,o){if(!n.isImmediateParentOf(o)){var a=t.getFieldsMap(n);t.applyChanges(a,r,i),r={},i=[],n=o.popLast()}e?r[o.lastSegment()]=ki(e):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},e.prototype.delete=function(e){var t=this.field(e.popLast());Mi(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]},e.prototype.isEqual=function(e){return gi(this.value,e.value)},e.prototype.getFieldsMap=function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Mi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields},e.prototype.applyChanges=function(e,t,n){Yr(t,(function(t,n){return e[t]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete e[o]}},e.prototype.clone=function(){return new e(ki(this.value))},e}();function Ri(e){var t=[];return Yr(e.fields,(function(e,n){var r=new ni([e]);if(Mi(n)){var i=Ri(n.mapValue).fields;if(0===i.length)t.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];t.push(r.child(s))}}else t.push(r)})),new ri(t)}var Pi=function(){function e(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}return e.newInvalidDocument=function(t){return new e(t,0,Qr.min(),Ii.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,Ii.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,Ii.empty(),2)},e.prototype.convertToFoundDocument=function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this},e.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=Ii.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=Ii.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return 0!==this.documentType},e.prototype.isFoundDocument=function(){return 1===this.documentType},e.prototype.isNoDocument=function(){return 2===this.documentType},e.prototype.isUnknownDocument=function(){return 3===this.documentType},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),Di=function(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function Ni(e,t,n,r,i,o,a){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Di(e,t,n,r,i,o,a)}function Li(e){var t=Gr(e);if(null===t.h){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+wi(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),fi(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Ji(t.startAt)),t.endAt&&(n+="|ub:",n+=Ji(t.endAt)),t.h=n}return t.h}function Oi(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Xi(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!gi(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Zi(e.startAt,t.startAt)&&Zi(e.endAt,t.endAt)}function Bi(e){return vi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Fi=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return h(t,e),t.create=function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.l(e,n,r):new Ui(e,n,r):"array-contains"===n?new zi(e,r):"in"===n?new Vi(e,r):"not-in"===n?new Wi(e,r):"array-contains-any"===n?new qi(e,r):new t(e,n,r)},t.l=function(e,t,n){return"in"===t?new ji(e,n):new Hi(e,n)},t.prototype.matches=function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.m(bi(t,this.value)):null!==t&&mi(this.value)===mi(t)&&this.m(bi(t,this.value))},t.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return jr()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}((function(){})),Ui=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=vi.fromName(r.referenceValue),i}return h(t,e),t.prototype.matches=function(e){var t=vi.comparator(e.key,this.key);return this.m(t)},t}(Fi),ji=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"in",n)||this).keys=Gi("in",n),r}return h(t,e),t.prototype.matches=function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))},t}(Fi),Hi=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"not-in",n)||this).keys=Gi("not-in",n),r}return h(t,e),t.prototype.matches=function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))},t}(Fi);function Gi(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return vi.fromName(e.referenceValue)}))}var zi=function(e){function t(t,n){return e.call(this,t,"array-contains",n)||this}return h(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return Ai(t)&&yi(t.arrayValue,this.value)},t}(Fi),Vi=function(e){function t(t,n){return e.call(this,t,"in",n)||this}return h(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return null!==t&&yi(this.value.arrayValue,t)},t}(Fi),Wi=function(e){function t(t,n){return e.call(this,t,"not-in",n)||this}return h(t,e),t.prototype.matches=function(e){if(yi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!yi(this.value.arrayValue,t)},t}(Fi),qi=function(e){function t(t,n){return e.call(this,t,"array-contains-any",n)||this}return h(t,e),t.prototype.matches=function(e){var t=this,n=e.data.field(this.field);return!(!Ai(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return yi(t.value.arrayValue,e)}))},t}(Fi),Ki=function(e,t){this.position=e,this.before=t};function Ji(e){return(e.before?"b":"a")+":"+e.position.map((function(e){return wi(e)})).join(",")}var Qi=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function Xi(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Yi(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?vi.comparator(vi.fromName(a.referenceValue),n.key):bi(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Zi(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!gi(e.position[n],t.position[n]))return!1;return!0}var $i=function(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function eo(e,t,n,r,i,o,a,s){return new $i(e,t,n,r,i,o,a,s)}function to(e){return new $i(e)}function no(e){return!fi(e.limit)&&"F"===e.limitType}function ro(e){return!fi(e.limit)&&"L"===e.limitType}function io(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function oo(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function ao(e){return null!==e.collectionGroup}function so(e){var t=Gr(e);if(null===t.p){t.p=[];var n=oo(t),r=io(t);if(null!==n&&null===r)n.isKeyField()||t.p.push(new Qi(n)),t.p.push(new Qi(ni.keyField(),"asc"));else{for(var i=!1,o=0,a=t.explicitOrderBy;o<a.length;o++){var s=a[o];t.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new Qi(ni.keyField(),u))}}}return t.p}function uo(e){var t=Gr(e);if(!t.T)if("F"===t.limitType)t.T=Ni(t.path,t.collectionGroup,so(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=so(t);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Qi(o.field,a))}var s=t.endAt?new Ki(t.endAt.position,!t.endAt.before):null,u=t.startAt?new Ki(t.startAt.position,!t.startAt.before):null;t.T=Ni(t.path,t.collectionGroup,n,t.filters,t.limit,s,u)}return t.T}function lo(e,t,n){return new $i(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function co(e,t){return Oi(uo(e),uo(t))&&e.limitType===t.limitType}function ho(e){return Li(uo(e))+"|lt:"+e.limitType}function fo(e){return"Query(target="+function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: ["+e.filters.map((function(e){return(t=e).field.canonicalString()+" "+t.op+" "+wi(t.value);var t})).join(", ")+"]"),fi(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: ["+e.orderBy.map((function(e){return function(e){return e.field.canonicalString()+" ("+e.dir+")"}(e)})).join(", ")+"]"),e.startAt&&(t+=", startAt: "+Ji(e.startAt)),e.endAt&&(t+=", endAt: "+Ji(e.endAt)),"Target("+t+")"}(uo(e))+"; limitType="+e.limitType+")"}function po(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):vi.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(var n=0,r=e.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}return!0}(e,t)&&function(e,t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!Yi(e.startAt,so(e),t))&&(!e.endAt||!Yi(e.endAt,so(e),t))}(e,t)}function vo(e){return function(t,n){for(var r=!1,i=0,o=so(e);i<o.length;i++){var a=o[i],s=mo(a,t,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function mo(e,t,n){var r=e.field.isKeyField()?vi.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?bi(r,i):jr()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return jr()}}function go(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:di(t)?"-0":t}}function yo(e){return{integerValue:""+e}}function bo(e,t){return pi(t)?yo(t):go(e,t)}var _o=function(){this._=void 0};function wo(e,t,n){return e instanceof So?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ao?To(e,t):e instanceof Co?Mo(e,t):function(e,t){var n=Eo(e,t),r=Io(n)+Io(e.A);return Si(n)&&Si(e.A)?yo(r):go(e.R,r)}(e,t)}function xo(e,t,n){return e instanceof Ao?To(e,t):e instanceof Co?Mo(e,t):n}function Eo(e,t){return e instanceof ko?Si(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var So=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t}(_o),Ao=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return h(t,e),t}(_o);function To(e,t){for(var n=Ro(t),r=function(e){n.some((function(t){return gi(t,e)}))||n.push(e)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Co=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return h(t,e),t}(_o);function Mo(e,t){for(var n=Ro(t),r=function(e){n=n.filter((function(t){return!gi(t,e)}))},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ko=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).R=t,r.A=n,r}return h(t,e),t}(_o);function Io(e){return si(e.integerValue||e.doubleValue)}function Ro(e){return Ai(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Po=function(e,t){this.field=e,this.transform=t},Do=function(e,t){this.version=e,this.transformResults=t},No=function(){function e(e,t){this.updateTime=e,this.exists=t}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},e}();function Lo(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Oo=function(){};function Bo(e,t,n){e instanceof Go?function(e,t,n){var r=e.value.clone(),i=Wo(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof zo?function(e,t,n){if(Lo(e.precondition,t)){var r=Wo(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Vo(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Fo(e,t,n){e instanceof Go?function(e,t,n){if(Lo(e.precondition,t)){var r=e.value.clone(),i=qo(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Ho(t),r).setHasLocalMutations()}}(e,t,n):e instanceof zo?function(e,t,n){if(Lo(e.precondition,t)){var r=qo(e.fieldTransforms,n,t),i=t.data;i.setAll(Vo(e)),i.setAll(r),t.convertToFoundDocument(Ho(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Lo(e.precondition,t)&&t.convertToNoDocument(Qr.min())}(e,t)}function Uo(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],a=t.data.field(o.field),s=Eo(o.transform,a||null);null!=s&&(null==n&&(n=Ii.empty()),n.set(o.field,s))}return n||null}function jo(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&qr(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ao&&t instanceof Ao||e instanceof Co&&t instanceof Co?qr(e.elements,t.elements,gi):e instanceof ko&&t instanceof ko?gi(e.A,t.A):e instanceof So&&t instanceof So}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Ho(e){return e.isFoundDocument()?e.version:Qr.min()}var Go=function(e){function t(t,n,r,i){void 0===i&&(i=[]);var o=this;return(o=e.call(this)||this).key=t,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return h(t,e),t}(Oo),zo=function(e){function t(t,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=e.call(this)||this).key=t,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return h(t,e),t}(Oo);function Vo(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Wo(e,t,n){var r=new Map;Hr(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,xo(a,s,n[i]))}return r}function qo(e,t,n){for(var r=new Map,i=0,o=e;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,wo(s,u,t))}return r}var Ko,Jo,Qo=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return h(t,e),t}(Oo),Xo=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return h(t,e),t}(Oo),Yo=function(e){this.count=e};function Zo(e){switch(e){case Pr.OK:return jr();case Pr.CANCELLED:case Pr.UNKNOWN:case Pr.DEADLINE_EXCEEDED:case Pr.RESOURCE_EXHAUSTED:case Pr.INTERNAL:case Pr.UNAVAILABLE:case Pr.UNAUTHENTICATED:return!1;case Pr.INVALID_ARGUMENT:case Pr.NOT_FOUND:case Pr.ALREADY_EXISTS:case Pr.PERMISSION_DENIED:case Pr.FAILED_PRECONDITION:case Pr.ABORTED:case Pr.OUT_OF_RANGE:case Pr.UNIMPLEMENTED:case Pr.DATA_LOSS:return!0;default:return jr()}}function $o(e){if(void 0===e)return Br("GRPC error has no .code"),Pr.UNKNOWN;switch(e){case Ko.OK:return Pr.OK;case Ko.CANCELLED:return Pr.CANCELLED;case Ko.UNKNOWN:return Pr.UNKNOWN;case Ko.DEADLINE_EXCEEDED:return Pr.DEADLINE_EXCEEDED;case Ko.RESOURCE_EXHAUSTED:return Pr.RESOURCE_EXHAUSTED;case Ko.INTERNAL:return Pr.INTERNAL;case Ko.UNAVAILABLE:return Pr.UNAVAILABLE;case Ko.UNAUTHENTICATED:return Pr.UNAUTHENTICATED;case Ko.INVALID_ARGUMENT:return Pr.INVALID_ARGUMENT;case Ko.NOT_FOUND:return Pr.NOT_FOUND;case Ko.ALREADY_EXISTS:return Pr.ALREADY_EXISTS;case Ko.PERMISSION_DENIED:return Pr.PERMISSION_DENIED;case Ko.FAILED_PRECONDITION:return Pr.FAILED_PRECONDITION;case Ko.ABORTED:return Pr.ABORTED;case Ko.OUT_OF_RANGE:return Pr.OUT_OF_RANGE;case Ko.UNIMPLEMENTED:return Pr.UNIMPLEMENTED;case Ko.DATA_LOSS:return Pr.DATA_LOSS;default:return jr()}}(Jo=Ko||(Ko={}))[Jo.OK=0]="OK",Jo[Jo.CANCELLED=1]="CANCELLED",Jo[Jo.UNKNOWN=2]="UNKNOWN",Jo[Jo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jo[Jo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jo[Jo.NOT_FOUND=5]="NOT_FOUND",Jo[Jo.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jo[Jo.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jo[Jo.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jo[Jo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jo[Jo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jo[Jo.ABORTED=10]="ABORTED",Jo[Jo.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jo[Jo.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jo[Jo.INTERNAL=13]="INTERNAL",Jo[Jo.UNAVAILABLE=14]="UNAVAILABLE",Jo[Jo.DATA_LOSS=15]="DATA_LOSS";var ea=function(){function e(e,t){this.comparator=e,this.root=t||na.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,na.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,na.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new ta(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new ta(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new ta(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new ta(this.root,e,this.comparator,!0)},e}(),ta=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),na=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw jr();if(this.right.isRed())throw jr();var e=this.left.check();if(e!==this.right.check())throw jr();return e+(this.isRed()?0:1)},e}();na.EMPTY=null,na.RED=!0,na.BLACK=!1,na.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw jr()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw jr()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw jr()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw jr()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw jr()},enumerable:!1,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new na(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());var ra=function(){function e(e){this.comparator=e,this.data=new ea(this.comparator)}return e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new ia(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new ia(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),ia=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),oa=new ea(vi.comparator);function aa(){return oa}var sa=new ea(vi.comparator);function ua(){return sa}var la=new ea(vi.comparator);function ca(){return la}var ha=new ra(vi.comparator);function fa(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=ha,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var da=new ra(Wr);function pa(){return da}var va=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,ma.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Qr.min(),r,pa(),aa(),fa())},e}(),ma=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(ii.EMPTY_BYTE_STRING,n,fa(),fa(),fa())},e}(),ga=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},ya=function(e,t){this.targetId=e,this.V=t},ba=function(e,t,n,r){void 0===n&&(n=ii.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},_a=function(){function e(){this.S=0,this.D=Ea(),this.C=ii.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),e.prototype.O=function(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)},e.prototype.M=function(){var e=fa(),t=fa(),n=fa();return this.D.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:jr()}})),new ma(this.C,this.N,e,t,n)},e.prototype.L=function(){this.k=!1,this.D=Ea()},e.prototype.B=function(e,t){this.k=!0,this.D=this.D.insert(e,t)},e.prototype.q=function(e){this.k=!0,this.D=this.D.remove(e)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.k=!0,this.N=!0},e}(),wa=function(){function e(e){this.W=e,this.G=new Map,this.H=aa(),this.J=xa(),this.Y=new ra(Wr)}return e.prototype.X=function(e){for(var t=0,n=e.v;t<n.length;t++){var r=n[t];e.P&&e.P.isFoundDocument()?this.Z(r,e.P):this.tt(r,e.key,e.P)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,e.key,e.P)},e.prototype.et=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.nt(n);switch(e.state){case 0:t.st(n)&&r.O(e.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(e.resumeToken);break;case 2:r.K(),r.F||t.removeTarget(n);break;case 3:t.st(n)&&(r.j(),r.O(e.resumeToken));break;case 4:t.st(n)&&(t.it(n),r.O(e.resumeToken));break;default:jr()}}))},e.prototype.forEachTarget=function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.G.forEach((function(e,r){n.st(r)&&t(r)}))},e.prototype.rt=function(e){var t=e.targetId,n=e.V.count,r=this.ot(t);if(r){var i=r.target;if(Bi(i))if(0===n){var o=new vi(i.path);this.tt(t,o,Pi.newNoDocument(o,Qr.min()))}else Hr(1===n);else this.ct(t)!==n&&(this.it(t),this.Y=this.Y.add(t))}},e.prototype.ut=function(e){var t=this,n=new Map;this.G.forEach((function(r,i){var o=t.ot(i);if(o){if(r.current&&Bi(o.target)){var a=new vi(o.target.path);null!==t.H.get(a)||t.at(i,a)||t.tt(i,a,Pi.newNoDocument(a,e))}r.$&&(n.set(i,r.M()),r.L())}}));var r=fa();this.J.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.ot(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new va(e,n,this.Y,this.H,r);return this.H=aa(),this.J=xa(),this.Y=new ra(Wr),i},e.prototype.Z=function(e,t){if(this.st(e)){var n=this.at(e,t.key)?2:0;this.nt(e).B(t.key,n),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e))}},e.prototype.tt=function(e,t,n){if(this.st(e)){var r=this.nt(e);this.at(e,t)?r.B(t,1):r.q(t),this.J=this.J.insert(t,this.ht(t).delete(e)),n&&(this.H=this.H.insert(t,n))}},e.prototype.removeTarget=function(e){this.G.delete(e)},e.prototype.ct=function(e){var t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.U=function(e){this.nt(e).U()},e.prototype.nt=function(e){var t=this.G.get(e);return t||(t=new _a,this.G.set(e,t)),t},e.prototype.ht=function(e){var t=this.J.get(e);return t||(t=new ra(Wr),this.J=this.J.insert(e,t)),t},e.prototype.st=function(e){var t=null!==this.ot(e);return t||Or("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.ot=function(e){var t=this.G.get(e);return t&&t.F?null:this.W.lt(e)},e.prototype.it=function(e){var t=this;this.G.set(e,new _a),this.W.getRemoteKeysForTarget(e).forEach((function(n){t.tt(e,n,null)}))},e.prototype.at=function(e,t){return this.W.getRemoteKeysForTarget(e).has(t)},e}();function xa(){return new ea(vi.comparator)}function Ea(){return new ea(vi.comparator)}var Sa={asc:"ASCENDING",desc:"DESCENDING"},Aa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ta=function(e,t){this.databaseId=e,this.I=t};function Ca(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ma(e,t){return e.I?t.toBase64():t.toUint8Array()}function ka(e,t){return Ca(e,t.toTimestamp())}function Ia(e){return Hr(!!e),Qr.fromTimestamp(function(e){var t=ai(e);return new Jr(t.seconds,t.nanos)}(e))}function Ra(e,t){return function(e){return new ei(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Pa(e){var t=ei.fromString(e);return Hr(ns(t)),t}function Da(e,t){return Ra(e.databaseId,t.path)}function Na(e,t){var n=Pa(t);if(n.get(1)!==e.databaseId.projectId)throw new Dr(Pr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Dr(Pr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new vi(Fa(n))}function La(e,t){return Ra(e.databaseId,t)}function Oa(e){var t=Pa(e);return 4===t.length?ei.emptyPath():Fa(t)}function Ba(e){return new ei(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Fa(e){return Hr(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ua(e,t,n){return{name:Da(e,t),fields:n.value.mapValue.fields}}function ja(e,t,n){var r=Na(e,t.name),i=Ia(t.updateTime),o=new Ii({mapValue:{fields:t.fields}}),a=Pi.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ha(e,t){var n;if(t instanceof Go)n={update:Ua(e,t.key,t.value)};else if(t instanceof Qo)n={delete:Da(e,t.key)};else if(t instanceof zo)n={update:Ua(e,t.key,t.data),updateMask:ts(t.fieldMask)};else{if(!(t instanceof Xo))return jr();n={verify:Da(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof So)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ao)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Co)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ko)return{fieldPath:t.field.canonicalString(),increment:n.A};throw jr()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ka(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:jr()}(e,t.precondition)),n}function Ga(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?No.updateTime(Ia(e.updateTime)):void 0!==e.exists?No.exists(e.exists):No.none()}(t.currentDocument):No.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Hr("REQUEST_TIME"===t.setToServerValue),n=new So;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Ao(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Co(i)}else"increment"in t?n=new ko(e,t.increment):jr();var o=ni.fromServerFormat(t.fieldPath);return new Po(o,n)}(e,t)})):[];if(t.update){t.update.name;var i=Na(e,t.update.name),o=new Ii({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(e){var t=e.fieldPaths||[];return new ri(t.map((function(e){return ni.fromServerFormat(e)})))}(t.updateMask);return new zo(i,o,a,n,r)}return new Go(i,o,n,r)}if(t.delete){var s=Na(e,t.delete);return new Qo(s,n)}if(t.verify){var u=Na(e,t.verify);return new Xo(u,n)}return jr()}function za(e,t){return{documents:[La(e,t.path)]}}function Va(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=La(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=La(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Ci(e.value))return{unaryFilter:{field:Ya(e.field),op:"IS_NAN"}};if(Ti(e.value))return{unaryFilter:{field:Ya(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ci(e.value))return{unaryFilter:{field:Ya(e.field),op:"IS_NOT_NAN"}};if(Ti(e.value))return{unaryFilter:{field:Ya(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ya(e.field),op:Xa(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Ya(e.field),direction:Qa(e.dir)}}(e)}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(e,t){return e.I||fi(t)?t:{value:t}}(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=Ka(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Ka(t.endAt)),n}function Wa(e){var t=Oa(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Hr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=qa(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Qi(Za(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return fi(t="object"==typeof e?e.value:e)?null:t}(n.limit));var l=null;n.startAt&&(l=Ja(n.startAt));var c=null;return n.endAt&&(c=Ja(n.endAt)),eo(t,i,s,a,u,"F",l,c)}function qa(e){return e?void 0!==e.unaryFilter?[es(e)]:void 0!==e.fieldFilter?[$a(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return qa(e)})).reduce((function(e,t){return e.concat(t)})):jr():[]}function Ka(e){return{before:e.before,values:e.position}}function Ja(e){var t=!!e.before,n=e.values||[];return new Ki(n,t)}function Qa(e){return Sa[e]}function Xa(e){return Aa[e]}function Ya(e){return{fieldPath:e.canonicalString()}}function Za(e){return ni.fromServerFormat(e.fieldPath)}function $a(e){return Fi.create(Za(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return jr()}}(e.fieldFilter.op),e.fieldFilter.value)}function es(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Za(e.unaryFilter.field);return Fi.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Za(e.unaryFilter.field);return Fi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Za(e.unaryFilter.field);return Fi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Za(e.unaryFilter.field);return Fi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return jr()}}function ts(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function ns(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function rs(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=os(t)),t=is(e.get(n),t);return os(t)}function is(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function os(e){return e+"\x01\x01"}function as(e){var t=e.length;if(Hr(t>=2),2===t)return Hr("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ei.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("\x01",o);switch((a<0||a>n)&&jr(),e.charAt(a+1)){case"\x01":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(o,a),i+="\0";break;case"\x11":i+=e.substring(o,a+1);break;default:jr()}o=a+2}return new ei(r)}var ss=function(e,t){this.seconds=e,this.nanoseconds=t},us=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};us.store="owner",us.key="owner";var ls=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};ls.store="mutationQueues",ls.keyPath="userId";var cs=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};cs.store="mutations",cs.keyPath="batchId",cs.userMutationsIndex="userMutationsIndex",cs.userMutationsKeyPath=["userId","batchId"];var hs=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,rs(t)]},e.key=function(e,t,n){return[e,rs(t),n]},e}();hs.store="documentMutations",hs.PLACEHOLDER=new hs;var fs=function(e,t){this.path=e,this.readTime=t},ds=function(e,t){this.path=e,this.version=t},ps=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};ps.store="remoteDocuments",ps.readTimeIndex="readTimeIndex",ps.readTimeIndexPath="readTime",ps.collectionReadTimeIndex="collectionReadTimeIndex",ps.collectionReadTimeIndexPath=["parentPath","readTime"];var vs=function(e){this.byteSize=e};vs.store="remoteDocumentGlobal",vs.key="remoteDocumentGlobalKey";var ms=function(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};ms.store="targets",ms.keyPath="targetId",ms.queryTargetsIndexName="queryTargetsIndex",ms.queryTargetsKeyPath=["canonicalId","targetId"];var gs=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};gs.store="targetDocuments",gs.keyPath=["targetId","path"],gs.documentTargetsIndex="documentTargetsIndex",gs.documentTargetsKeyPath=["path","targetId"];var ys=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};ys.key="targetGlobalKey",ys.store="targetGlobal";var bs=function(e,t){this.collectionId=e,this.parent=t};bs.store="collectionParents",bs.keyPath=["collectionId","parent"];var _s=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};_s.store="clientMetadata",_s.keyPath="clientId";var ws=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};ws.store="bundles",ws.keyPath="bundleId";var xs=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};xs.store="namedQueries",xs.keyPath="name";var Es=p(p([],p(p([],p(p([],p(p([],[ls.store,cs.store,hs.store,ps.store,ms.store,us.store,ys.store,gs.store]),[_s.store])),[vs.store])),[bs.store])),[ws.store,xs.store]),Ss="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",As=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),Ts=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},Cs=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&jr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),Ms=function(){function e(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new Ts,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){t.error?n.ft.reject(new Rs(e,t.error)):n.ft.resolve()},this.transaction.onerror=function(t){var r=Os(t.target.error);n.ft.reject(new Rs(e,r))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Rs(n,t)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(Or("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return new Ds(t)},e}(),ks=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,12.2===e._t((0,v.getUA)())&&Br("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(e){return Or("SimpleDb","Removing database:",e),Ns(window.indexedDB.deleteDatabase(e)).toPromise()},e.yt=function(){if("undefined"==typeof indexedDB)return!1;if(e.gt())return!0;var t=(0,v.getUA)(),n=e._t(t),r=0<n&&n<10,i=e.Et(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.gt=function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/edtech",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Tt)},e.It=function(e,t){return e.store(t)},e._t=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.Et=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.At=function(e){return f(this,void 0,void 0,(function(){var t,n=this;return d(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Or("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(e){var n=e.target.result;t(n)},i.onblocked=function(){r(new Rs(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;"VersionError"===n.name?r(new Dr(Pr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Rs(e,n))},i.onupgradeneeded=function(e){Or("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.wt.Rt(t,i.transaction,e.oldVersion,n.version).next((function(){Or("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:t.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(e){return n.bt(e)}),this.db)]}}))}))},e.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},e.prototype.runTransaction=function(e,t,n,r){return f(this,void 0,void 0,(function(){var i,o,a,s,u;return d(this,(function(l){switch(l.label){case 0:i="readonly"===t,o=0,a=function(){var t,a,u,l,c;return d(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.At(e)];case 2:return s.db=h.sent(),t=Ms.open(s.db,e,i?"readonly":"readwrite",n),a=r(t).catch((function(e){return t.abort(e),Cs.reject(e)})).toPromise(),u={},a.catch((function(){})),[4,t.dt];case 3:return[2,(u.value=(h.sent(),a),u)];case 4:return l=h.sent(),c="FirebaseError"!==l.name&&o<3,Or("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),s.close(),c?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},s=this,l.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=l.sent()))return[2,u.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),Is=function(){function e(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(e){this.St=e},e.prototype.delete=function(){return Ns(this.Pt.delete())},e}(),Rs=function(e){function t(t,n){var r=this;return(r=e.call(this,Pr.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return h(t,e),t}(Dr);function Ps(e){return"IndexedDbTransactionError"===e.name}var Ds=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(Or("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Or("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ns(n)},e.prototype.add=function(e){return Or("SimpleDb","ADD",this.store.name,e,e),Ns(this.store.add(e))},e.prototype.get=function(e){var t=this;return Ns(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Or("SimpleDb","GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return Or("SimpleDb","DELETE",this.store.name,e),Ns(this.store.delete(e))},e.prototype.count=function(){return Or("SimpleDb","COUNT",this.store.name),Ns(this.store.count())},e.prototype.Nt=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.xt(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.kt=function(e,t){Or("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(e,t,n){return n.delete()}))},e.prototype.$t=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.xt(r,t)},e.prototype.Ot=function(e){var t=this.cursor({});return new Cs((function(n,r){t.onerror=function(e){var t=Os(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.xt=function(e,t){var n=[];return new Cs((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new Is(i),a=t(i.primaryKey,i.value,o);if(a instanceof Cs){var s=a.catch((function(e){return o.done(),Cs.reject(e)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Cs.waitFor(n)}))},e.prototype.options=function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Ft?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function Ns(e){return new Cs((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Os(e.target.error);n(t)}}))}var Ls=!1;function Os(e){var t=ks._t((0,v.getUA)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Dr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ls||(Ls=!0,setTimeout((function(){throw r}),0)),r}}return e}var Bs=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Mt=t,r.currentSequenceNumber=n,r}return h(t,e),t}(As);function Fs(e,t){var n=Gr(e);return ks.It(n.Mt,t)}var Us=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}return e.prototype.applyToRemoteDocument=function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Bo(i,e,n[r])}},e.prototype.applyToLocalView=function(e){for(var t=0,n=this.baseMutations;t<n.length;t++)(o=n[t]).key.isEqual(e.key)&&Fo(o,e,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(e.key)&&Fo(o,e,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Qr.min())}))},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),fa())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&qr(this.mutations,e.mutations,(function(e,t){return jo(e,t)}))&&qr(this.baseMutations,e.baseMutations,(function(e,t){return jo(e,t)}))},e}(),js=function(){function e(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}return e.from=function(t,n,r){Hr(t.mutations.length===r.length);for(var i=ca(),o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)},e}(),Hs=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=Qr.min()),void 0===o&&(o=Qr.min()),void 0===a&&(a=ii.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),Gs=function(e){this.Lt=e};function zs(e,t){if(t.document)return ja(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=vi.fromSegments(t.noDocument.path),r=Js(t.noDocument.readTime),i=Pi.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var o=vi.fromSegments(t.unknownDocument.path);return r=Js(t.unknownDocument.version),Pi.newUnknownDocument(o,r)}return jr()}function Vs(e,t,n){var r=Ws(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var o=function(e,t){return{name:Da(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Ca(e,t.version.toTimestamp())}}(e.Lt,t),a=t.hasCommittedMutations;return new ps(null,null,o,a,r,i)}if(t.isNoDocument()){var s=t.key.path.toArray(),u=Ks(t.version);return a=t.hasCommittedMutations,new ps(null,new fs(s,u),null,a,r,i)}if(t.isUnknownDocument()){var l=t.key.path.toArray(),c=Ks(t.version);return new ps(new ds(l,c),null,null,!0,r,i)}return jr()}function Ws(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function qs(e){var t=new Jr(e[0],e[1]);return Qr.fromTimestamp(t)}function Ks(e){var t=e.toTimestamp();return new ss(t.seconds,t.nanoseconds)}function Js(e){var t=new Jr(e.seconds,e.nanoseconds);return Qr.fromTimestamp(t)}function Qs(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Ga(e.Lt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var o=t.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map((function(t){return Ga(e.Lt,t)})),s=Jr.fromMillis(t.localWriteTimeMs);return new Us(t.batchId,s,n,a)}function Xs(e){var t,n,r=Js(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Js(e.lastLimboFreeSnapshotVersion):Qr.min();return void 0!==e.query.documents?(Hr(1===(n=e.query).documents.length),t=uo(to(Oa(n.documents[0])))):t=function(e){return uo(Wa(e))}(e.query),new Hs(t,e.targetId,0,e.lastListenSequenceNumber,r,i,ii.fromBase64String(e.resumeToken))}function Ys(e,t){var n,r=Ks(t.snapshotVersion),i=Ks(t.lastLimboFreeSnapshotVersion);n=Bi(t.target)?za(e.Lt,t.target):Va(e.Lt,t.target);var o=t.resumeToken.toBase64();return new ms(t.targetId,Li(t.target),r,o,t.sequenceNumber,i,n)}function Zs(e){var t=Wa({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?lo(t,t.limit,"L"):t}var $s=function(){function e(){}return e.prototype.getBundleMetadata=function(e,t){return eu(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Js(t.createTime),version:t.version};var t}))},e.prototype.saveBundleMetadata=function(e,t){return eu(e).put({bundleId:(n=t).id,createTime:Ks(Ia(n.createTime)),version:n.version});var n},e.prototype.getNamedQuery=function(e,t){return tu(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Zs(t.bundledQuery),readTime:Js(t.readTime)};var t}))},e.prototype.saveNamedQuery=function(e,t){return tu(e).put(function(e){return{name:e.name,readTime:Ks(Ia(e.readTime)),bundledQuery:e.bundledQuery}}(t))},e}();function eu(e){return Fs(e,ws.store)}function tu(e){return Fs(e,xs.store)}var nu=function(){function e(){this.Bt=new ru}return e.prototype.addToCollectionParentIndex=function(e,t){return this.Bt.add(t),Cs.resolve()},e.prototype.getCollectionParents=function(e,t){return Cs.resolve(this.Bt.getEntries(t))},e}(),ru=function(){function e(){this.index={}}return e.prototype.add=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ra(ei.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new ra(ei.comparator)).toArray()},e}(),iu=function(){function e(){this.qt=new ru}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(!this.qt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.qt.add(t)}));var o={collectionId:r,parent:rs(i)};return ou(e).put(o)}return Cs.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Kr(t),""],!1,!0);return ou(e).Nt(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(as(o.parent))}return n}))},e}();function ou(e){return Fs(e,bs.store)}var au={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},su=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();function uu(e,t,n){var r=e.store(cs.store),i=e.store(hs.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){Hr(1===s)})));for(var l=[],c=0,h=n.mutations;c<h.length;c++){var f=h[c],d=hs.key(t,f.key.path,n.batchId);o.push(i.delete(d)),l.push(f.key)}return Cs.waitFor(o).next((function(){return l}))}function lu(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw jr();t=e.noDocument}return JSON.stringify(t).length}su.DEFAULT_COLLECTION_PERCENTILE=10,su.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,su.DEFAULT=new su(41943040,su.DEFAULT_COLLECTION_PERCENTILE,su.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),su.DISABLED=new su(-1,0,0);var cu=function(){function e(e,t,n,r){this.userId=e,this.R=t,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return e.Qt=function(t,n,r,i){return Hr(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fu(e).$t({index:cs.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=du(e),a=fu(e);return a.add({}).next((function(s){Hr("number"==typeof s);for(var u=new Us(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Ha(e.Lt,t)})),i=n.mutations.map((function(t){return Ha(e.Lt,t)}));return new cs(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),c=[],h=new ra((function(e,t){return Wr(e.canonicalString(),t.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],v=hs.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),c.push(a.put(l)),c.push(o.put(v,hs.PLACEHOLDER))}return h.forEach((function(t){c.push(i.Ut.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),Cs.waitFor(c).next((function(){return u}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return fu(e).get(t).next((function(e){return e?(Hr(e.userId===n.userId),Qs(n.R,e)):null}))},e.prototype.jt=function(e,t){var n=this;return this.Kt[t]?Cs.resolve(this.Kt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Kt[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return fu(e).$t({index:cs.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(Hr(t.batchId>=r),o=Qs(n.R,t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return fu(e).$t({index:cs.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fu(e).Nt(cs.userMutationsIndex,n).next((function(e){return e.map((function(e){return Qs(t.R,e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=hs.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return du(e).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],l=r[2],c=as(u);if(s===n.userId&&t.path.isEqual(c))return fu(e).get(l).next((function(e){if(!e)throw jr();Hr(e.userId===n.userId),o.push(Qs(n.R,e))}));a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new ra(Wr),i=[];return t.forEach((function(t){var o=hs.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=du(e).$t({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],l=as(s);a===n.userId&&t.path.isEqual(l)?r=r.add(u):o.done()}));i.push(s)})),Cs.waitFor(i).next((function(){return n.Wt(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this,r=t.path,i=r.length+1,o=hs.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new ra(Wr);return du(e).$t({range:a},(function(e,t,o){var a=e[0],u=e[1],l=e[2],c=as(u);a===n.userId&&r.isPrefixOf(c)?c.length===i&&(s=s.add(l)):o.done()})).next((function(){return n.Wt(e,s)}))},e.prototype.Wt=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(fu(e).get(t).next((function(e){if(null===e)throw jr();Hr(e.userId===n.userId),r.push(Qs(n.R,e))})))})),Cs.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return uu(e.Mt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Gt(t.batchId)})),Cs.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))},e.prototype.Gt=function(e){delete this.Kt[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Cs.resolve();var r=IDBKeyRange.lowerBound(hs.prefixForUser(t.userId)),i=[];return du(e).$t({range:r},(function(e,n,r){if(e[0]===t.userId){var o=as(e[1]);i.push(o)}else r.done()})).next((function(){Hr(0===i.length)}))}))},e.prototype.containsKey=function(e,t){return hu(e,this.userId,t)},e.prototype.zt=function(e){var t=this;return pu(e).get(this.userId).next((function(e){return e||new ls(t.userId,-1,"")}))},e}();function hu(e,t,n){var r=hs.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return du(e).$t({range:o,Ft:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function fu(e){return Fs(e,cs.store)}function du(e){return Fs(e,hs.store)}function pu(e){return Fs(e,ls.store)}var vu=function(){function e(e){this.Ht=e}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),mu=function(){function e(e,t){this.referenceDelegate=e,this.R=t}return e.prototype.allocateTargetId=function(e){var t=this;return this.Xt(e).next((function(n){var r=new vu(n.highestTargetId);return n.highestTargetId=r.next(),t.Zt(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next((function(e){return Qr.fromTimestamp(new Jr(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next((function(e){return e.highestListenSequenceNumber}))},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.Xt(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Zt(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.te(e,t).next((function(){return n.Xt(e).next((function(r){return r.targetCount+=1,n.ee(t,r),n.Zt(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.te(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return gu(e).delete(t.targetId)})).next((function(){return n.Xt(e)})).next((function(t){return Hr(t.targetCount>0),t.targetCount-=1,n.Zt(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return gu(e).$t((function(a,s){var u=Xs(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return Cs.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){return gu(e).$t((function(e,n){var r=Xs(n);t(r)}))},e.prototype.Xt=function(e){return yu(e).get(ys.key).next((function(e){return Hr(null!==e),e}))},e.prototype.Zt=function(e,t){return yu(e).put(ys.key,t)},e.prototype.te=function(e,t){return gu(e).put(Ys(this.R,t))},e.prototype.ee=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.Xt(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=Li(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return gu(e).$t({range:r,index:ms.queryTargetsIndexName},(function(e,n,r){var o=Xs(n);Oi(t,o.target)&&(i=o,r.done())})).next((function(){return i}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=bu(e);return t.forEach((function(t){var a=rs(t.path);i.push(o.put(new gs(n,a))),i.push(r.referenceDelegate.addReference(e,n,t))})),Cs.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=bu(e);return Cs.forEach(t,(function(t){var o=rs(t.path);return Cs.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=bu(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=bu(e),i=fa();return r.$t({range:n,Ft:!0},(function(e,t,n){var r=as(e[1]),o=new vi(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=rs(t.path),r=IDBKeyRange.bound([n],[Kr(n)],!1,!0),i=0;return bu(e).$t({index:gs.documentTargetsIndex,Ft:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.lt=function(e,t){return gu(e).get(t).next((function(e){return e?Xs(e):null}))},e}();function gu(e){return Fs(e,ms.store)}function yu(e){return Fs(e,ys.store)}function bu(e){return Fs(e,gs.store)}function _u(e){return f(this,void 0,void 0,(function(){return d(this,(function(t){if(e.code!==Pr.FAILED_PRECONDITION||e.message!==Ss)throw e;return Or("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function wu(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=Wr(n,i);return 0===a?Wr(r,o):a}var xu=function(){function e(e){this.ne=e,this.buffer=new ra(wu),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(e){var t=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();wu(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),Eu=function(){function e(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}return e.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),e.prototype.ue=function(e){var t=this,n=this.oe?3e5:6e4;Or("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return f(t,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Ps(t=n.sent())?(Or("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,_u(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return n.sent(),[2]}}))}))}))},e}(),Su=function(){function e(e,t){this.ae=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.ae.he(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return Cs.resolve(Rr.o);var r=new xu(t);return this.ae.forEachTarget(e,(function(e){return r.re(e.sequenceNumber)})).next((function(){return n.ae.le(e,(function(e){return r.re(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.ae.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.ae.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Or("LruGarbageCollector","Garbage collection skipped; disabled"),Cs.resolve(au)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Or("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),au):n.fe(e,t)}))},e.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},e.prototype.fe=function(e,t){var n,r,i,o,a,s,u,l=this,c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>l.params.maximumSequenceNumbersToCollect?(Or("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),r=l.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),l.nthSequenceNumber(e,r)})).next((function(r){return n=r,a=Date.now(),l.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),l.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Lr()<=m.LogLevel.DEBUG&&Or("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-c)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-c)+"ms"),Cs.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},e}(),Au=function(){function e(e,t){this.db=e,this.garbageCollector=function(e,t){return new Su(e,t)}(this,t)}return e.prototype.he=function(e){var t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.de=function(e){var t=0;return this.le(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.le=function(e,t){return this.we(e,(function(e,n){return t(n)}))},e.prototype.addReference=function(e,t,n){return Tu(e,n)},e.prototype.removeReference=function(e,t,n){return Tu(e,n)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.markPotentiallyOrphaned=function(e,t){return Tu(e,t)},e.prototype._e=function(e,t){return function(e,t){var n=!1;return pu(e).Ot((function(r){return hu(e,r,t).next((function(e){return e&&(n=!0),Cs.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(e,(function(a,s){if(s<=t){var u=n._e(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),bu(e).delete([0,rs(a.path)])}))}));i.push(u)}})).next((function(){return Cs.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return Tu(e,t)},e.prototype.we=function(e,t){var n,r=bu(e),i=Rr.o;return r.$t({index:gs.documentTargetsIndex},(function(e,r){var o=e[0];e[1];var a=r.path,s=r.sequenceNumber;0===o?(i!==Rr.o&&t(new vi(as(n)),i),i=s,n=a):i=Rr.o})).next((function(){i!==Rr.o&&t(new vi(as(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function Tu(e,t){return bu(e).put(function(e,t){return new gs(0,rs(e.path),t)}(t,e.currentSequenceNumber))}var Cu=function(){function e(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){Yr(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.isEmpty=function(){return Zr(this.inner)},e}(),Mu=function(){function e(){this.changes=new Cu((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return e.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:Qr.min()},e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})},e.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{document:Pi.newInvalidDocument(e),readTime:t})},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Cs.resolve(n.document):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){},e}(),ku=function(){function e(e,t){this.R=e,this.Ut=t}return e.prototype.addEntry=function(e,t,n){return Pu(e).put(Du(t),n)},e.prototype.removeEntry=function(e,t){var n=Pu(e),r=Du(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.me(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return Pu(e).get(Du(t)).next((function(e){return n.ye(t,e)}))},e.prototype.ge=function(e,t){var n=this;return Pu(e).get(Du(t)).next((function(e){return{document:n.ye(t,e),size:lu(e)}}))},e.prototype.getEntries=function(e,t){var n=this,r=aa();return this.pe(e,t,(function(e,t){var i=n.ye(e,t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.Ee=function(e,t){var n=this,r=aa(),i=new ea(vi.comparator);return this.pe(e,t,(function(e,t){var o=n.ye(e,t);r=r.insert(e,o),i=i.insert(e,lu(t))})).next((function(){return{documents:r,Te:i}}))},e.prototype.pe=function(e,t,n){if(t.isEmpty())return Cs.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return Pu(e).$t({range:r},(function(e,t,r){for(var a=vi.fromSegments(e);o&&vi.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this,i=aa(),o=t.path.length+1,a={};if(n.isEqual(Qr.min())){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),l=Ws(n);a.range=IDBKeyRange.lowerBound([u,l],!0),a.index=ps.collectionReadTimeIndex}return Pu(e).$t(a,(function(e,n,a){if(e.length===o){var s=zs(r.R,n);t.path.isPrefixOf(s.key.path)?po(t,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.newChangeBuffer=function(e){return new Iu(this,!!e&&e.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return Ru(e).get(vs.key).next((function(e){return Hr(!!e),e}))},e.prototype.me=function(e,t){return Ru(e).put(vs.key,t)},e.prototype.ye=function(e,t){if(t){var n=zs(this.R,t);if(!n.isNoDocument()||!n.version.isEqual(Qr.min()))return n}return Pi.newInvalidDocument(e)},e}(),Iu=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Ie=t,r.trackRemovals=n,r.Ae=new Cu((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),r}return h(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new ra((function(e,t){return Wr(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.Ae.get(o);if(a.document.isValidDocument()){var u=Vs(t.Ie.R,a.document,t.getReadTime(o));i=i.add(o.path.popLast());var l=lu(u);r+=l-s,n.push(t.Ie.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var c=Vs(t.Ie.R,Pi.newNoDocument(o,Qr.min()),t.getReadTime(o));n.push(t.Ie.addEntry(e,o,c))}else n.push(t.Ie.removeEntry(e,o))})),i.forEach((function(r){n.push(t.Ie.Ut.addToCollectionParentIndex(e,r))})),n.push(this.Ie.updateMetadata(e,r)),Cs.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.Ie.ge(e,t).next((function(e){return n.Ae.set(t,e.size),e.document}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.Ie.Ee(e,t).next((function(e){var t=e.documents;return e.Te.forEach((function(e,t){n.Ae.set(e,t)})),t}))},t}(Mu);function Ru(e){return Fs(e,vs.store)}function Pu(e){return Fs(e,ps.store)}function Du(e){return e.path.toArray()}var Nu=function(){function e(e){this.R=e}return e.prototype.Rt=function(e,t,n,r){var i=this;Hr(n<r&&n>=0&&r<=11);var o=new Ms("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(us.store)}(e),function(e){e.createObjectStore(ls.store,{keyPath:ls.keyPath}),e.createObjectStore(cs.store,{keyPath:cs.keyPath,autoIncrement:!0}).createIndex(cs.userMutationsIndex,cs.userMutationsKeyPath,{unique:!0}),e.createObjectStore(hs.store)}(e),Lu(e),function(e){e.createObjectStore(ps.store)}(e));var a=Cs.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(gs.store),e.deleteObjectStore(ms.store),e.deleteObjectStore(ys.store)}(e),Lu(e)),a=a.next((function(){return function(e){var t=e.store(ys.store),n=new ys(0,0,Qr.min().toTimestamp(),0);return t.put(ys.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(cs.store).Nt().next((function(n){e.deleteObjectStore(cs.store),e.createObjectStore(cs.store,{keyPath:cs.keyPath,autoIncrement:!0}).createIndex(cs.userMutationsIndex,cs.userMutationsKeyPath,{unique:!0});var r=t.store(cs.store),i=n.map((function(e){return r.put(e)}));return Cs.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(_s.store,{keyPath:_s.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(vs.store)}(e),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(ps.store);t.createIndex(ps.readTimeIndex,ps.readTimeIndexPath,{unique:!1}),t.createIndex(ps.collectionReadTimeIndex,ps.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(e){e.createObjectStore(ws.store,{keyPath:ws.keyPath})}(e),function(e){e.createObjectStore(xs.store,{keyPath:xs.keyPath})}(e)}))),a},e.prototype.be=function(e){var t=0;return e.store(ps.store).$t((function(e,n){t+=lu(n)})).next((function(){var n=new vs(t);return e.store(vs.store).put(vs.key,n)}))},e.prototype.Re=function(e){var t=this,n=e.store(ls.store),r=e.store(cs.store);return n.Nt().next((function(n){return Cs.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(cs.userMutationsIndex,i).next((function(r){return Cs.forEach(r,(function(r){Hr(r.userId===n.userId);var i=Qs(t.R,r);return uu(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ve=function(e){var t=e.store(gs.store),n=e.store(ps.store);return e.store(ys.store).get(ys.key).next((function(e){var r=[];return n.$t((function(n,i){var o=new ei(n),a=function(e){return[0,rs(e)]}(o);r.push(t.get(a).next((function(n){return n?Cs.resolve():function(n){return t.put(new gs(0,rs(n),e.highestListenSequenceNumber))}(o)})))})).next((function(){return Cs.waitFor(r)}))}))},e.prototype.Pe=function(e,t){e.createObjectStore(bs.store,{keyPath:bs.keyPath});var n=t.store(bs.store),r=new ru,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:rs(i)})}};return t.store(ps.store).$t({Ft:!0},(function(e,t){var n=new ei(e);return i(n.popLast())})).next((function(){return t.store(hs.store).$t({Ft:!0},(function(e,t){e[0];var n=e[1];e[2];var r=as(n);return i(r.popLast())}))}))},e.prototype.Ve=function(e){var t=this,n=e.store(ms.store);return n.$t((function(e,r){var i=Xs(r),o=Ys(t.R,i);return n.put(o)}))},e}();function Lu(e){e.createObjectStore(gs.store,{keyPath:gs.keyPath}).createIndex(gs.documentTargetsIndex,gs.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(ms.store,{keyPath:ms.keyPath}).createIndex(ms.queryTargetsIndexName,ms.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(ys.store)}var Ou="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Bu=function(){function e(t,n,r,i,o,a,s,u,l,c){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=l,this.Ce=c,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(e){return Promise.resolve()},!e.yt())throw new Dr(Pr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Au(this,i),this.Le=n+"main",this.R=new Gs(u),this.Be=new ks(this.Le,11,new Nu(this.R)),this.qe=new mu(this.referenceDelegate,this.R),this.Ut=new iu,this.Ue=function(e,t){return new ku(e,t)}(this.R,this.Ut),this.Ke=new $s,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===c&&Br("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var e=this;return this.je().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Dr(Pr.FAILED_PRECONDITION,Ou);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.qe.getHighestSequenceNumber(t)}))})).then((function(t){e.Ne=new Rr(t,e.De)})).then((function(){e.xe=!0})).catch((function(t){return e.Be&&e.Be.close(),Promise.reject(t)}))},e.prototype.He=function(e){var t=this;return this.Me=function(n){return f(t,void 0,void 0,(function(){return d(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.Be.vt((function(n){return f(t,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget((function(){return f(t,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Uu(t).put(new _s(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.Je(t).next((function(t){t||(e.isPrimary=!1,e.Se.enqueueRetryable((function(){return e.Me(!1)})))}))})).next((function(){return e.Ye(t)})).next((function(n){return e.isPrimary&&!n?e.Xe(t).next((function(){return!1})):!!n&&e.Ze(t).next((function(){return!0}))}))})).catch((function(t){if(Ps(t))return Or("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Or("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Se.enqueueRetryable((function(){return e.Me(t)})),e.isPrimary=t}))},e.prototype.Je=function(e){var t=this;return Fu(e).get(us.key).next((function(e){return Cs.resolve(t.tn(e))}))},e.prototype.en=function(e){return Uu(e).delete(this.clientId)},e.prototype.nn=function(){return f(this,void 0,void 0,(function(){var e,t,n,r,i=this;return d(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Fs(e,_s.store);return t.Nt().next((function(e){var n=i.rn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Cs.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=o.sent(),this.Qe)for(t=0,n=e;t<n.length;t++)r=n[t],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},e.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.je().then((function(){return e.nn()})).then((function(){return e.ze()}))}))},e.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.Ye=function(e){var t=this;return this.Ce?Cs.resolve(!0):Fu(e).get(us.key).next((function(n){if(null!==n&&t.sn(n.leaseTimestampMs,5e3)&&!t.cn(n.ownerId)){if(t.tn(n)&&t.networkEnabled)return!0;if(!t.tn(n)){if(!n.allowTabSynchronization)throw new Dr(Pr.FAILED_PRECONDITION,Ou);return!1}}return!(!t.networkEnabled||!t.inForeground)||Uu(e).Nt().next((function(e){return void 0===t.rn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Or("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return f(this,void 0,void 0,(function(){var e=this;return d(this,(function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[us.store,_s.store],(function(t){var n=new Bs(t,Rr.o);return e.Xe(n).next((function(){return e.en(n)}))}))];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}}))}))},e.prototype.rn=function(e,t){var n=this;return e.filter((function(e){return n.sn(e.updateTimeMs,t)&&!n.cn(e.clientId)}))},e.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Uu(t).Nt().next((function(t){return e.rn(t,18e5).map((function(e){return e.clientId}))}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(e){return cu.Qt(e,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r=this;Or("IndexedDbPersistence","Starting transaction:",e);var i,o="readonly"===t?"readonly":"readwrite";return this.Be.runTransaction(e,o,Es,(function(o){return i=new Bs(o,r.Ne?r.Ne.next():Rr.o),"readwrite-primary"===t?r.Je(i).next((function(e){return!!e||r.Ye(i)})).next((function(t){if(!t)throw Br("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Dr(Pr.FAILED_PRECONDITION,Ss);return n(i)})).next((function(e){return r.Ze(i).next((function(){return e}))})):r.dn(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.dn=function(e){var t=this;return Fu(e).get(us.key).next((function(e){if(null!==e&&t.sn(e.leaseTimestampMs,5e3)&&!t.cn(e.ownerId)&&!t.tn(e)&&!(t.Ce||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Dr(Pr.FAILED_PRECONDITION,Ou)}))},e.prototype.Ze=function(e){var t=new us(this.clientId,this.allowTabSynchronization,Date.now());return Fu(e).put(us.key,t)},e.yt=function(){return ks.yt()},e.prototype.Xe=function(e){var t=this,n=Fu(e);return n.get(us.key).next((function(e){return t.tn(e)?(Or("IndexedDbPersistence","Releasing primary lease."),n.delete(us.key)):Cs.resolve()}))},e.prototype.sn=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(Br("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){e.Se.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},e.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},e.prototype.Ge=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ke=function(){t.un(),(0,v.isSafari)()&&navigator.appVersion.match("Version/14")&&t.Se.enterRestrictedMode(!0),t.Se.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},e.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},e.prototype.cn=function(e){var t;try{var n=null!==(null===(t=this.Qe)||void 0===t?void 0:t.getItem(this.on(e)));return Or("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(e){return Br("IndexedDbPersistence","Failed to get zombied client id.",e),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){Br("Failed to set zombie client id.",e)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(e){}},e.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e}();function Fu(e){return Fs(e,us.store)}function Uu(e){return Fs(e,_s.store)}function ju(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Hu=function(e,t){this.progress=e,this.wn=t},Gu=function(){function e(e,t,n){this.Ue=e,this._n=t,this.Ut=n}return e.prototype.mn=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.yn(e,t,r)}))},e.prototype.yn=function(e,t,n){return this.Ue.getEntry(e,t).next((function(e){for(var t=0,r=n;t<r.length;t++)r[t].applyToLocalView(e);return e}))},e.prototype.gn=function(e,t){e.forEach((function(e,n){for(var r=0,i=t;r<i.length;r++)i[r].applyToLocalView(n)}))},e.prototype.pn=function(e,t){var n=this;return this.Ue.getEntries(e,t).next((function(t){return n.En(e,t).next((function(){return t}))}))},e.prototype.En=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.gn(t,e)}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return function(e){return vi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Tn(e,t.path):ao(t)?this.In(e,t,n):this.An(e,t,n)},e.prototype.Tn=function(e,t){return this.mn(e,new vi(t)).next((function(e){var t=ua();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))},e.prototype.In=function(e,t,n){var r=this,i=t.collectionGroup,o=ua();return this.Ut.getCollectionParents(e,i).next((function(a){return Cs.forEach(a,(function(a){var s=function(e,t){return new $i(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return r.An(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.An=function(e,t,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.Rn(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],l=u.key,c=r.get(l);null==c&&(c=Pi.newInvalidDocument(l),r=r.insert(l,c)),Fo(u,c,o.localWriteTime),c.isFoundDocument()||(r=r.remove(l))}}))})).next((function(){return r.forEach((function(e,n){po(t,n)||(r=r.remove(e))})),r}))},e.prototype.Rn=function(e,t,n){for(var r=fa(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof zo&&null===n.get(u.key)&&(r=r.add(u.key))}var l=n;return this.Ue.getEntries(e,r).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(l=l.insert(e,t))})),l}))},e}(),zu=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.bn=n,this.vn=r}return e.Pn=function(t,n){for(var r=fa(),i=fa(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),Vu=function(){function e(){}return e.prototype.Vn=function(e){this.Sn=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Qr.min())?this.Dn(e,t):this.Sn.pn(e,r).next((function(o){var a=i.Cn(t,o);return(no(t)||ro(t))&&i.Nn(t.limitType,a,r,n)?i.Dn(e,t):(Lr()<=m.LogLevel.DEBUG&&Or("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),fo(t)),i.Sn.getDocumentsMatchingQuery(e,t,n).next((function(e){return a.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.Cn=function(e,t){var n=new ra(vo(e));return t.forEach((function(t,r){po(e,r)&&(n=n.add(r))})),n},e.prototype.Nn=function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.Dn=function(e,t){return Lr()<=m.LogLevel.DEBUG&&Or("QueryEngine","Using full collection scan to execute query:",fo(t)),this.Sn.getDocumentsMatchingQuery(e,t,Qr.min())},e}(),Wu=function(){function e(e,t,n,r){this.persistence=e,this.xn=t,this.R=r,this.kn=new ea(Wr),this.Fn=new Cu((function(e){return Li(e)}),Oi),this.$n=Qr.min(),this._n=e.getMutationQueue(n),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new Gu(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.kn)}))},e}();function qu(e,t,n,r){return new Wu(e,t,n,r)}function Ku(e,t){return f(this,void 0,void 0,(function(){var n,r,i,o;return d(this,(function(a){switch(a.label){case 0:return n=Gr(e),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(e){var o;return n._n.getAllMutationBatches(e).next((function(a){return o=a,r=n.persistence.getMutationQueue(t),i=new Gu(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)})).next((function(t){for(var n=[],r=[],a=fa(),s=0,u=o;s<u.length;s++){var l=u[s];n.push(l.batchId);for(var c=0,h=l.mutations;c<h.length;c++){var f=h[c];a=a.add(f.key)}}for(var d=0,p=t;d<p.length;d++){var v=p[d];r.push(v.batchId);for(var m=0,g=v.mutations;m<g.length;m++){var y=g[m];a=a.add(y.key)}}return i.pn(e,a).next((function(e){return{Ln:e,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Ju(e,t){var n=Gr(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,o=i.keys(),a=Cs.resolve();return o.forEach((function(e){a=a.next((function(){return r.getEntry(t,e)})).next((function(t){var o=n.docVersions.get(e);Hr(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),a.next((function(){return e._n.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,r)}))}))}function Qu(e){var t=Gr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.qe.getLastRemoteSnapshotVersion(e)}))}function Xu(e,t){var n=Gr(e),r=t.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var a=[];t.targetChanges.forEach((function(t,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(e,t.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(e,t.addedDocuments,o)})));var u=t.resumeToken;if(u.approximateByteSize()>0){var l=s.withResumeToken(u,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(o,l),function(e,t,n){return Hr(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,l,t)&&a.push(n.qe.updateTargetData(e,l))}}}));var s=aa();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(Yu(e,o,t.documentUpdates,r,void 0).next((function(e){s=e}))),!r.isEqual(Qr.min())){var u=n.qe.getLastRemoteSnapshotVersion(e).next((function(t){return n.qe.setTargetsMetadata(e,e.currentSequenceNumber,r)}));a.push(u)}return Cs.waitFor(a).next((function(){return o.apply(e)})).next((function(){return n.Mn.En(e,s)})).next((function(){return s}))})).then((function(e){return n.kn=i,e}))}function Yu(e,t,n,r,i){var o=fa();return n.forEach((function(e){return o=o.add(e)})),t.getEntries(e,o).next((function(e){var o=aa();return n.forEach((function(n,a){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(Qr.min())?(t.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a,u),o=o.insert(n,a)):Or("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Zu(e,t){var n=Gr(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n._n.getNextMutationBatchAfterBatchId(e,t)}))}function $u(e,t){var n=Gr(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.qe.getTargetData(e,t).next((function(i){return i?(r=i,Cs.resolve(r)):n.qe.allocateTargetId(e).next((function(i){return r=new Hs(t,i,0,e.currentSequenceNumber),n.qe.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.kn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(e.targetId,e),n.Fn.set(t,e.targetId)),e}))}function el(e,t,n){return f(this,void 0,void 0,(function(){var r,i,o,a;return d(this,(function(s){switch(s.label){case 0:r=Gr(e),i=r.kn.get(t),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(e){return r.persistence.referenceDelegate.removeTarget(e,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!Ps(a=s.sent()))throw a;return Or("LocalStore","Failed to update sequence numbers for target "+t+": "+a),[3,5];case 5:return r.kn=r.kn.remove(t),r.Fn.delete(i.target),[2]}}))}))}function tl(e,t,n){var r=Gr(e),i=Qr.min(),o=fa();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Gr(e),i=r.Fn.get(n);return void 0!==i?Cs.resolve(r.kn.get(i)):r.qe.getTargetData(t,n)}(r,e,uo(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.xn.getDocumentsMatchingQuery(e,t,n?i:Qr.min(),n?o:fa())})).next((function(e){return{documents:e,Bn:o}}))}))}function nl(e,t){var n=Gr(e),r=Gr(n.qe),i=n.kn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.lt(e,t).next((function(e){return e?e.target:null}))}))}function rl(e){var t=Gr(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=Gr(e),i=aa(),o=Ws(n),a=Pu(t),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:ps.readTimeIndex,range:s},(function(e,t){var n=zs(r.R,t);i=i.insert(n.key,n),o=t.readTime})).next((function(){return{wn:i,readTime:qs(o)}}))}(t.On,e,t.$n)})).then((function(e){var n=e.wn,r=e.readTime;return t.$n=r,n}))}function il(e){return f(this,void 0,void 0,(function(){var t;return d(this,(function(n){return[2,(t=Gr(e)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=Pu(e),n=Qr.min();return t.$t({index:ps.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=qs(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){t.$n=e}))]}))}))}function ol(e,t,n,r){return f(this,void 0,void 0,(function(){var i,o,a,s,u,l,c,h,f,p;return d(this,(function(d){switch(d.label){case 0:for(i=Gr(e),o=fa(),a=aa(),s=ca(),u=0,l=n;u<l.length;u++)c=l[u],h=t.qn(c.metadata.name),c.document&&(o=o.add(h)),a=a.insert(h,t.Un(c)),s=s.insert(h,t.Kn(c.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,$u(i,function(e){return uo(to(ei.fromString("__bundle__/docs/"+e)))}(r))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Yu(e,f,a,Qr.min(),s).next((function(t){return f.apply(e),t})).next((function(t){return i.qe.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return i.qe.addMatchingKeys(e,o,p.targetId)})).next((function(){return i.Mn.En(e,t)})).next((function(){return t}))}))}))]}}))}))}function al(e,t,n){return void 0===n&&(n=fa()),f(this,void 0,void 0,(function(){var r,i;return d(this,(function(o){switch(o.label){case 0:return[4,$u(e,uo(Zs(t.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Gr(e)).persistence.runTransaction("Save named query","readwrite",(function(e){var o=Ia(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(e,t);var a=r.withResumeToken(ii.EMPTY_BYTE_STRING,o);return i.kn=i.kn.insert(a.targetId,a),i.qe.updateTargetData(e,a).next((function(){return i.qe.removeMatchingKeysForTargetId(e,r.targetId)})).next((function(){return i.qe.addMatchingKeys(e,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(e,t)}))}))]}}))}))}var sl=function(){function e(e){this.R=e,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(e,t){return Cs.resolve(this.Qn.get(t))},e.prototype.saveBundleMetadata=function(e,t){var n;return this.Qn.set(t.id,{id:(n=t).id,version:n.version,createTime:Ia(n.createTime)}),Cs.resolve()},e.prototype.getNamedQuery=function(e,t){return Cs.resolve(this.jn.get(t))},e.prototype.saveNamedQuery=function(e,t){return this.jn.set(t.name,function(e){return{name:e.name,query:Zs(e.bundledQuery),readTime:Ia(e.readTime)}}(t)),Cs.resolve()},e}(),ul=function(){function e(){this.Wn=new ra(ll.Gn),this.zn=new ra(ll.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(e,t){var n=new ll(e,t);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},e.prototype.Jn=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.Yn(new ll(e,t))},e.prototype.Xn=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.Zn=function(e){var t=this,n=new vi(new ei([])),r=new ll(n,e),i=new ll(n,e+1),o=[];return this.zn.forEachInRange([r,i],(function(e){t.Yn(e),o.push(e.key)})),o},e.prototype.ts=function(){var e=this;this.Wn.forEach((function(t){return e.Yn(t)}))},e.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},e.prototype.es=function(e){var t=new vi(new ei([])),n=new ll(t,e),r=new ll(t,e+1),i=fa();return this.zn.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new ll(e,0),n=this.Wn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),ll=function(){function e(e,t){this.key=e,this.ns=t}return e.Gn=function(e,t){return vi.comparator(e.key,t.key)||Wr(e.ns,t.ns)},e.Hn=function(e,t){return Wr(e.ns,t.ns)||vi.comparator(e.key,t.key)},e}(),cl=function(){function e(e,t){this.Ut=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new ra(ll.Gn)}return e.prototype.checkEmpty=function(e){return Cs.resolve(0===this._n.length)},e.prototype.addMutationBatch=function(e,t,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Us(i,t,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new ll(u.key,i)),this.Ut.addToCollectionParentIndex(e,u.key.path.popLast())}return Cs.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return Cs.resolve(this.os(t))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.cs(n),i=r<0?0:r;return Cs.resolve(this._n.length>i?this._n[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return Cs.resolve(0===this._n.length?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(e){return Cs.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new ll(t,0),i=new ll(t,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(e){var t=n.os(e.ns);o.push(t)})),Cs.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new ra(Wr);return t.forEach((function(e){var t=new ll(e,0),i=new ll(e,Number.POSITIVE_INFINITY);n.rs.forEachInRange([t,i],(function(e){r=r.add(e.ns)}))})),Cs.resolve(this.us(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=t.path,r=n.length+1,i=n;vi.isDocumentKey(i)||(i=i.child(""));var o=new ll(new vi(i),0),a=new ra(Wr);return this.rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.ns)),!0)}),o),Cs.resolve(this.us(a))},e.prototype.us=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.os(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;Hr(0===this.hs(t.batchId,"removed")),this._n.shift();var r=this.rs;return Cs.forEach(t.mutations,(function(i){var o=new ll(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.rs=r}))},e.prototype.Gt=function(e){},e.prototype.containsKey=function(e,t){var n=new ll(t,0),r=this.rs.firstAfterOrEqual(n);return Cs.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return this._n.length,Cs.resolve()},e.prototype.hs=function(e,t){return this.cs(e)},e.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},e.prototype.os=function(e){var t=this.cs(e);return t<0||t>=this._n.length?null:this._n[t]},e}(),hl=function(){function e(e,t){this.Ut=e,this.ls=t,this.docs=new ea(vi.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return Cs.resolve(n?n.document.clone():Pi.newInvalidDocument(t))},e.prototype.getEntries=function(e,t){var n=this,r=aa();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():Pi.newInvalidDocument(e))})),Cs.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){for(var r=aa(),i=new vi(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,l=u.document,c=u.readTime;if(!t.path.isPrefixOf(s.path))break;c.compareTo(n)<=0||po(t,l)&&(r=r.insert(l.key,l.clone()))}return Cs.resolve(r)},e.prototype.fs=function(e,t){return Cs.forEach(this.docs,(function(e){return t(e)}))},e.prototype.newChangeBuffer=function(e){return new fl(this)},e.prototype.getSize=function(e){return Cs.resolve(this.size)},e}(),fl=function(e){function t(t){var n=this;return(n=e.call(this)||this).Ie=t,n}return h(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.Ie.addEntry(e,i.document,t.getReadTime(r))):t.Ie.removeEntry(r)})),Cs.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.Ie.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.Ie.getEntries(e,t)},t}(Mu),dl=function(){function e(e){this.persistence=e,this.ds=new Cu((function(e){return Li(e)}),Oi),this.lastRemoteSnapshotVersion=Qr.min(),this.highestTargetId=0,this.ws=0,this._s=new ul,this.targetCount=0,this.ys=vu.Jt()}return e.prototype.forEachTarget=function(e,t){return this.ds.forEach((function(e,n){return t(n)})),Cs.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return Cs.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return Cs.resolve(this.ws)},e.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),Cs.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ws&&(this.ws=t),Cs.resolve()},e.prototype.te=function(e){this.ds.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ys=new vu(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return this.te(t),this.targetCount+=1,Cs.resolve()},e.prototype.updateTargetData=function(e,t){return this.te(t),Cs.resolve()},e.prototype.removeTargetData=function(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),this.targetCount-=1,Cs.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Cs.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return Cs.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.ds.get(t)||null;return Cs.resolve(n)},e.prototype.addMatchingKeys=function(e,t,n){return this._s.Jn(t,n),Cs.resolve()},e.prototype.removeMatchingKeys=function(e,t,n){this._s.Xn(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Cs.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this._s.Zn(t),Cs.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this._s.es(t);return Cs.resolve(n)},e.prototype.containsKey=function(e,t){return Cs.resolve(this._s.containsKey(t))},e}(),pl=function(){function e(e,t){var n=this;this.gs={},this.Ne=new Rr(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new dl(this),this.Ut=new nu,this.Ue=function(e,t){return new hl(e,(function(e){return n.referenceDelegate.ps(e)}))}(this.Ut),this.R=new Gs(t),this.Ke=new sl(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(e){var t=this.gs[e.toKey()];return t||(t=new cl(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r=this;Or("MemoryPersistence","Starting transaction:",e);var i=new vl(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(e){return r.referenceDelegate.Ts(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.Is=function(e,t){return Cs.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(e,t)}})))},e}(),vl=function(e){function t(t){var n=this;return(n=e.call(this)||this).currentSequenceNumber=t,n}return h(t,e),t}(As),ml=function(){function e(e){this.persistence=e,this.As=new ul,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw jr()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(e,t,n){return this.As.addReference(n,t),this.vs.delete(n.toString()),Cs.resolve()},e.prototype.removeReference=function(e,t,n){return this.As.removeReference(n,t),this.vs.add(n.toString()),Cs.resolve()},e.prototype.markPotentiallyOrphaned=function(e,t){return this.vs.add(t.toString()),Cs.resolve()},e.prototype.removeTarget=function(e,t){var n=this;this.As.Zn(t.targetId).forEach((function(e){return n.vs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.vs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Cs.forEach(this.vs,(function(r){var i=vi.fromPath(r);return t.Ps(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Rs=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.Ps(e,t).next((function(e){e?n.vs.delete(t.toString()):n.vs.add(t.toString())}))},e.prototype.ps=function(e){return 0},e.prototype.Ps=function(e,t){var n=this;return Cs.or([function(){return Cs.resolve(n.As.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Is(e,t)}])},e}(),gl=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e}();function yl(e,t){return"firestore_clients_"+e+"_"+t}function bl(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function _l(e,t){return"firestore_targets_"+e+"_"+t}gl.UNAUTHENTICATED=new gl(null),gl.GOOGLE_CREDENTIALS=new gl("google-credentials-uid"),gl.FIRST_PARTY=new gl("first-party-uid"),gl.MOCK_USER=new gl("mock-user");var wl=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}return e.Vs=function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Dr(o.error.code,o.error.message)),a?new e(t,n,o.state,i):(Br("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),xl=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n}return e.Vs=function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Dr(i.error.code,i.error.message)),o?new e(t,i.state,r):(Br("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),El=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.Vs=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=pa(),a=0;i&&a<r.activeTargetIds.length;++a)i=pi(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(Br("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Sl=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.Vs=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Br("SharedClientState","Failed to parse online state: "+t),null)},e}(),Al=function(){function e(){this.activeTargetIds=pa()}return e.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),Tl=function(){function e(e,t,n,r,i){this.window=e,this.Se=t,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new ea(Wr),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=yl(this.persistenceKey,this.Ns),this.Ms=function(e){return"firestore_sequence_number_"+e}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new Al),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.Ks=function(e){return"firestore_bundle_loaded_"+e}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(e){return!(!e||!e.localStorage)},e.prototype.start=function(){return f(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,u,l,c,h=this;return d(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=f.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.Ns&&(i=this.getItem(yl(this.persistenceKey,r)))&&(o=El.Vs(r,i))&&(this.Fs=this.Fs.insert(o.clientId,o));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,l=this.$s;u<l.length;u++)c=l[u],this.ks(c);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},e.prototype.isActiveQueryTarget=function(e){var t=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t},e.prototype.addPendingMutation=function(e){this.zs(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.zs(e,t,n),this.Hs(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(_l(this.persistenceKey,e));if(n){var r=xl.Vs(e,n);r&&(t=r.state)}}return this.Js.Ds(e),this.Qs(),t},e.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},e.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(_l(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.Ys(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.Hs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.Xs(e)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return Or("SharedClientState","READ",e,t),t},e.prototype.setItem=function(e,t){Or("SharedClientState","SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){Or("SharedClientState","REMOVE",e),this.storage.removeItem(e)},e.prototype.ks=function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Or("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Br("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return f(t,void 0,void 0,(function(){var e,t,r,i,o,a;return d(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return e=this.ti(n.key),[2,this.ei(e,null)];if(t=this.ni(n.key,n.newValue))return[2,this.ei(t.clientId,t)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(e){var t=Rr.o;if(null!=e)try{var n=JSON.parse(e);Hr("number"==typeof n),t=n}catch(e){Br("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==Rr.o&&this.sequenceNumberHandler(a);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(e,t,n){var r=new wl(this.currentUser,e,t,n),i=bl(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ss())},e.prototype.Hs=function(e){var t=bl(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.Xs=function(e){var t={clientId:this.Ns,onlineState:e};this.storage.setItem(this.Us,JSON.stringify(t))},e.prototype.Ys=function(e,t,n){var r=_l(this.persistenceKey,e),i=new xl(e,t,n);this.setItem(r,i.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(e){var t=this.Ls.exec(e);return t?t[1]:null},e.prototype.ni=function(e,t){var n=this.ti(e);return El.Vs(n,t)},e.prototype.si=function(e,t){var n=this.Bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return wl.Vs(new gl(i),r,t)},e.prototype.ri=function(e,t){var n=this.qs.exec(e),r=Number(n[1]);return xl.Vs(r,t)},e.prototype.js=function(e){return Sl.Vs(e)},e.prototype.ii=function(e){return f(this,void 0,void 0,(function(){return d(this,(function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(Or("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])}))}))},e.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},e.prototype.ei=function(e,t){var n=this,r=t?this.Fs.insert(e,t):this.Fs.remove(e),i=this.Gs(this.Fs),o=this.Gs(r),a=[],s=[];return o.forEach((function(e){i.has(e)||a.push(e)})),i.forEach((function(e){o.has(e)||s.push(e)})),this.syncEngine.hi(a,s).then((function(){n.Fs=r}))},e.prototype.Ws=function(e){this.Fs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},e.prototype.Gs=function(e){var t=pa();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t},e}(),Cl=function(){function e(){this.li=new Al,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.fi[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},e.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.fi[e]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.start=function(){return this.li=new Al,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e.prototype.notifyBundleLoaded=function(){},e}(),Ml=function(){function e(){}return e.prototype.di=function(e){},e.prototype.shutdown=function(){},e}(),kl=function(){function e(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return e.prototype.di=function(e){this.gi.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){Or("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(0)},e.prototype.yi=function(){Or("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(1)},e.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),Il={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Rl=function(){function e(e){this.Ei=e.Ei,this.Ti=e.Ti}return e.prototype.Ii=function(e){this.Ai=e},e.prototype.Ri=function(e){this.bi=e},e.prototype.onMessage=function(e){this.vi=e},e.prototype.close=function(){this.Ti()},e.prototype.send=function(e){this.Ei(e)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(e){this.bi(e)},e.prototype.Si=function(e){this.vi(e)},e}(),Pl=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n.autoDetectLongPolling=t.autoDetectLongPolling,n.useFetchStreams=t.useFetchStreams,n}return h(t,e),t.prototype.Fi=function(e,t,n,r){return new Promise((function(i,o){var a=new Ir;a.listenOnce(Ar.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Sr.NO_ERROR:var t=a.getResponseJson();Or("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Sr.TIMEOUT:Or("Connection",'RPC "'+e+'" timed out'),o(new Dr(Pr.DEADLINE_EXCEEDED,"Request time out"));break;case Sr.HTTP_ERROR:var n=a.getStatus();if(Or("Connection",'RPC "'+e+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Pr).indexOf(t)>=0?t:Pr.UNKNOWN}(r.status);o(new Dr(s,r.message))}else o(new Dr(Pr.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Dr(Pr.UNAVAILABLE,"Connection failed."));break;default:jr()}}finally{Or("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);a.send(t,"POST",s,n,15)}))},t.prototype.Oi=function(e,t){var n=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=xr(),i=Er(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Mr({})),this.ki(o.initMessageHeaders,t),(0,v.isMobileCordova)()||(0,v.isReactNative)()||(0,v.isElectron)()||(0,v.isIE)()||(0,v.isUWP)()||(0,v.isBrowserExtension)()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");Or("Connection","Creating WebChannel: "+a,o);var s=r.createWebChannel(a,o),u=!1,l=!1,c=new Rl({Ei:function(e){l?Or("Connection","Not sending because WebChannel is closed:",e):(u||(Or("Connection","Opening WebChannel transport."),s.open(),u=!0),Or("Connection","WebChannel sending:",e),s.send(e))},Ti:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,kr.EventType.OPEN,(function(){l||Or("Connection","WebChannel transport opened.")})),h(s,kr.EventType.CLOSE,(function(){l||(l=!0,Or("Connection","WebChannel transport closed"),c.Vi())})),h(s,kr.EventType.ERROR,(function(e){l||(l=!0,Fr("Connection","WebChannel transport errored:",e),c.Vi(new Dr(Pr.UNAVAILABLE,"The operation could not be completed")))})),h(s,kr.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Hr(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Or("Connection","WebChannel received error:",i);var o=i.status,a=function(e){var t=Ko[e];if(void 0!==t)return $o(t)}(o),u=i.message;void 0===a&&(a=Pr.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),l=!0,c.Vi(new Dr(a,u)),s.close()}else Or("Connection","WebChannel received:",n),c.Si(n)}})),h(i,Tr.STAT_EVENT,(function(e){e.stat===Cr.PROXY?Or("Connection","Detected buffering proxy"):e.stat===Cr.NOPROXY&&Or("Connection","Detected no buffering proxy")})),setTimeout((function(){c.Pi()}),0),c},t}(function(){function e(e){this.databaseInfo=e,this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.Di=t+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(e,t,n,r){var i=this.xi(e,t);Or("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(e,i,o,n).then((function(e){return Or("RestConnection","Received: ",e),e}),(function(t){throw Fr("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t}))},e.prototype.$i=function(e,t,n,r){return this.Ni(e,t,n,r)},e.prototype.ki=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])},e.prototype.xi=function(e,t){var n=Il[e];return this.Di+"/v1/"+t+":"+n},e}());function Dl(){return"undefined"!=typeof window?window:null}function Nl(){return"undefined"!=typeof document?document:null}function Ll(e){return new Ta(e,!0)}var Ol=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=e,this.timerId=t,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(e){var t=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Or("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return t.Ki=Date.now(),e()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),Bl=function(){function e(e,t,n,r,i,o){this.Se=e,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Ol(e,t)}return e.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.er=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.nr()},e.prototype.stop=function(){return f(this,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return e.rr()})))},e.prototype.cr=function(e){this.ur(),this.stream.send(e)},e.prototype.rr=function(){return f(this,void 0,void 0,(function(){return d(this,(function(e){return this.er()?[2,this.close(0)]:[2]}))}))},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(e,t){return f(this,void 0,void 0,(function(){return d(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():t&&t.code===Pr.RESOURCE_EXHAUSTED?(Br(t.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):t&&t.code===Pr.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.ar=function(){},e.prototype.auth=function(){var e=this;this.state=1;var t=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(t){e.Yi===n&&e.lr(t)}),(function(n){t((function(){var t=new Dr(Pr.UNKNOWN,"Fetching auth token failed: "+n.message);return e.dr(t)}))}))},e.prototype.lr=function(e){var t=this,n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii((function(){n((function(){return t.state=2,t.listener.Ii()}))})),this.stream.Ri((function(e){n((function(){return t.dr(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji((function(){return f(e,void 0,void 0,(function(){return d(this,(function(e){return this.state=0,this.start(),[2]}))}))}))},e.prototype.dr=function(e){return Or("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},e.prototype.hr=function(e){var t=this;return function(n){t.Se.enqueueAndForget((function(){return t.Yi===e?n():(Or("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),Fl=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return h(t,e),t.prototype.wr=function(e){return this.Hi.Oi("Listen",e)},t.prototype.onMessage=function(e){this.Zi.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:jr()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.I?(Hr(void 0===t||"string"==typeof t),ii.fromBase64String(t||"")):(Hr(void 0===t||t instanceof Uint8Array),ii.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=(s=t.targetChange.cause)&&function(e){var t=void 0===e.code?Pr.UNKNOWN:$o(e.code);return new Dr(t,e.message||"")}(s);n=new ba(r,i,o,a||null)}else if("documentChange"in t){t.documentChange,(r=t.documentChange).document,r.document.name,r.document.updateTime,i=Na(e,r.document.name),o=Ia(r.document.updateTime);var s=new Ii({mapValue:{fields:r.document.fields}}),u=(a=Pi.newFoundDocument(i,o,s),r.targetIds||[]),l=r.removedTargetIds||[];n=new ga(u,l,a.key,a)}else if("documentDelete"in t)t.documentDelete,(r=t.documentDelete).document,i=Na(e,r.document),o=r.readTime?Ia(r.readTime):Qr.min(),s=Pi.newNoDocument(i,o),a=r.removedTargetIds||[],n=new ga([],a,s.key,s);else if("documentRemove"in t)t.documentRemove,(r=t.documentRemove).document,i=Na(e,r.document),o=r.removedTargetIds||[],n=new ga([],o,i,null);else{if(!("filter"in t))return jr();t.filter;var c=t.filter;c.targetId,r=c.count||0,i=new Yo(r),o=c.targetId,n=new ya(o,i)}return n}(this.R,e),n=function(e){if(!("targetChange"in e))return Qr.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Qr.min():t.readTime?Ia(t.readTime):Qr.min()}(e);return this.listener._r(t,n)},t.prototype.mr=function(e){var t={};t.database=Ba(this.R),t.addTarget=function(e,t){var n,r=t.target;return(n=Bi(r)?{documents:za(e,r)}:{query:Va(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Ma(e,t.resumeToken):t.snapshotVersion.compareTo(Qr.min())>0&&(n.readTime=Ca(e,t.snapshotVersion.toTimestamp())),n}(this.R,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return jr()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,e);n&&(t.labels=n),this.cr(t)},t.prototype.yr=function(e){var t={};t.database=Ba(this.R),t.removeTarget=e,this.cr(t)},t}(Bl),Ul=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return h(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(e){return this.Hi.Oi("Write",e)},t.prototype.onMessage=function(e){if(Hr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.gr){this.Zi.reset();var t=function(e,t){return e&&e.length>0?(Hr(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Ia(e.updateTime):Ia(t);return n.isEqual(Qr.min())&&(n=Ia(t)),new Do(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Ia(e.commitTime);return this.listener.Tr(n,t)}return Hr(!e.writeResults||0===e.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var e={};e.database=Ba(this.R),this.cr(e)},t.prototype.Er=function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Ha(t.R,e)}))};this.cr(n)},t}(Bl),jl=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.Hi=n,i.R=r,i.Rr=!1,i}return h(t,e),t.prototype.br=function(){if(this.Rr)throw new Dr(Pr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Pr.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new Dr(Pr.UNKNOWN,e.toString())}))},t.prototype.$i=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Pr.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new Dr(Pr.UNKNOWN,e.toString())}))},t.prototype.terminate=function(){this.Rr=!0},t}((function(){})),Hl=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()})))},e.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},e.prototype.set=function(e){this.kr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},e.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.Cr=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Br(t),this.Vr=!1):Or("OnlineStateTracker",t)},e.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},e}(),Gl=function(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(e){n.enqueueAndForget((function(){return f(o,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return Yl(this)?(Or("RemoteStore","Restarting streams for network reachability change."),[4,function(e){return f(this,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return(t=Gr(e)).Or.add(4),[4,Vl(t)];case 1:return n.sent(),t.Br.set("Unknown"),t.Or.delete(4),[4,zl(t)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.Br=new Hl(n,r)};function zl(e){return f(this,void 0,void 0,(function(){var t,n;return d(this,(function(r){switch(r.label){case 0:if(!Yl(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function Vl(e){return f(this,void 0,void 0,(function(){var t,n;return d(this,(function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function Wl(e,t){var n=Gr(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),Xl(n)?Ql(n):fc(n).er()&&Kl(n,t))}function ql(e,t){var n=Gr(e),r=fc(n);n.$r.delete(t),r.er()&&Jl(n,t),0===n.$r.size&&(r.er()?r.ir():Yl(n)&&n.Br.set("Unknown"))}function Kl(e,t){e.qr.U(t.targetId),fc(e).mr(t)}function Jl(e,t){e.qr.U(t),fc(e).yr(t)}function Ql(e){e.qr=new wa({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),fc(e).start(),e.Br.Sr()}function Xl(e){return Yl(e)&&!fc(e).tr()&&e.$r.size>0}function Yl(e){return 0===Gr(e).Or.size}function Zl(e){e.qr=void 0}function $l(e){return f(this,void 0,void 0,(function(){return d(this,(function(t){return e.$r.forEach((function(t,n){Kl(e,t)})),[2]}))}))}function ec(e,t){return f(this,void 0,void 0,(function(){return d(this,(function(n){return Zl(e),Xl(e)?(e.Br.Nr(t),Ql(e)):e.Br.set("Unknown"),[2]}))}))}function tc(e,t,n){return f(this,void 0,void 0,(function(){var r,i,o;return d(this,(function(a){switch(a.label){case 0:if(e.Br.set("Online"),!(t instanceof ba&&2===t.state&&t.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(e,t){return f(this,void 0,void 0,(function(){var n,r,i,o;return d(this,(function(a){switch(a.label){case 0:n=t.cause,r=0,i=t.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],e.$r.has(o)?[4,e.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),e.$r.delete(o),e.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(e,t)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),Or("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,nc(e,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof ga?e.qr.X(t):t instanceof ya?e.qr.rt(t):e.qr.et(t),n.isEqual(Qr.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Qu(e.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(e,t){var n=e.qr.ut(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.$r.get(r);i&&e.$r.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.$r.get(t);if(n){e.$r.set(t,n.withResumeToken(ii.EMPTY_BYTE_STRING,n.snapshotVersion)),Jl(e,t);var r=new Hs(n.target,t,1,n.sequenceNumber);Kl(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return Or("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,nc(e,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function nc(e,t,n){return f(this,void 0,void 0,(function(){var r=this;return d(this,(function(i){switch(i.label){case 0:if(!Ps(t))throw t;return e.Or.add(1),[4,Vl(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return Qu(e.localStore)}),e.asyncQueue.enqueueRetryable((function(){return f(r,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return Or("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return t.sent(),e.Or.delete(1),[4,zl(e)];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))}function rc(e,t){return t().catch((function(n){return nc(e,n,t)}))}function ic(e){return f(this,void 0,void 0,(function(){var t,n,r,i,o;return d(this,(function(a){switch(a.label){case 0:t=Gr(e),n=dc(t),r=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,a.label=1;case 1:if(!function(e){return Yl(e)&&e.Fr.length<10}(t))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Zu(t.localStore,r)];case 3:return null===(i=a.sent())?(0===t.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(e,t){e.Fr.push(t);var n=dc(e);n.er()&&n.pr&&n.Er(t.mutations)}(t,i),[3,6]);case 4:return o=a.sent(),[4,nc(t,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return oc(t)&&ac(t),[2]}}))}))}function oc(e){return Yl(e)&&!dc(e).tr()&&e.Fr.length>0}function ac(e){dc(e).start()}function sc(e){return f(this,void 0,void 0,(function(){return d(this,(function(t){return dc(e).Ar(),[2]}))}))}function uc(e){return f(this,void 0,void 0,(function(){var t,n,r,i;return d(this,(function(o){for(t=dc(e),n=0,r=e.Fr;n<r.length;n++)i=r[n],t.Er(i.mutations);return[2]}))}))}function lc(e,t,n){return f(this,void 0,void 0,(function(){var r,i;return d(this,(function(o){switch(o.label){case 0:return r=e.Fr.shift(),i=js.from(r,t,n),[4,rc(e,(function(){return e.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,ic(e)];case 2:return o.sent(),[2]}}))}))}function cc(e,t){return f(this,void 0,void 0,(function(){return d(this,(function(n){switch(n.label){case 0:return t&&dc(e).pr?[4,function(e,t){return f(this,void 0,void 0,(function(){var n,r;return d(this,(function(i){switch(i.label){case 0:return Zo(r=t.code)&&r!==Pr.ABORTED?(n=e.Fr.shift(),dc(e).sr(),[4,rc(e,(function(){return e.remoteSyncer.rejectFailedWrite(n.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,ic(e)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return oc(e)&&ac(e),[2]}}))}))}function hc(e,t){return f(this,void 0,void 0,(function(){var n;return d(this,(function(r){switch(r.label){case 0:return n=Gr(e),t?(n.Or.delete(2),[4,zl(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,Vl(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function fc(e){var t=this;return e.Ur||(e.Ur=function(e,t,n){var r=Gr(e);return r.br(),new Fl(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:$l.bind(null,e),Ri:ec.bind(null,e),_r:tc.bind(null,e)}),e.Mr.push((function(n){return f(t,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return n?(e.Ur.sr(),Xl(e)?Ql(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:t.sent(),Zl(e),t.label=3;case 3:return[2]}}))}))}))),e.Ur}function dc(e){var t=this;return e.Kr||(e.Kr=function(e,t,n){var r=Gr(e);return r.br(),new Ul(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:sc.bind(null,e),Ri:cc.bind(null,e),Ir:uc.bind(null,e),Tr:lc.bind(null,e)}),e.Mr.push((function(n){return f(t,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return n?(e.Kr.sr(),[4,ic(e)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:t.sent(),e.Fr.length>0&&(Or("RemoteStore","Stopping write stream with "+e.Fr.length+" pending writes"),e.Fr=[]),t.label=4;case 4:return[2]}}))}))}))),e.Kr}var pc=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Dr(Pr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function vc(e,t){if(Br("AsyncQueue",t+": "+e),Ps(e))return new Dr(Pr.UNAVAILABLE,t+": "+e);throw e}var mc=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||vi.comparator(t.key,n.key)}:function(e,t){return vi.comparator(e.key,t.key)},this.keyedMap=ua(),this.sortedSet=new ea(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),gc=function(){function e(){this.Qr=new ea(vi.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.Qr.get(t);n?0!==e.type&&3===n.type?this.Qr=this.Qr.insert(t,e):3===e.type&&1!==n.type?this.Qr=this.Qr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Qr=this.Qr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Qr=this.Qr.remove(t):1===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):jr():this.Qr=this.Qr.insert(t,e)},e.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal((function(t,n){e.push(n)})),e},e}(),yc=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,mc.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&co(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),bc=function(){this.Wr=void 0,this.listeners=[]},_c=function(){this.queries=new Cu((function(e){return ho(e)}),co),this.onlineState="Unknown",this.Gr=new Set};function wc(e,t){return f(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return d(this,(function(l){switch(l.label){case 0:if(n=Gr(e),r=t.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new bc),!i)return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=l.sent(),[3,4];case 3:return s=l.sent(),u=vc(s,"Initialization of query '"+fo(t.query)+"' failed"),[2,void t.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(t),t.zr(n.onlineState),o.Wr&&t.Hr(o.Wr)&&Ac(n),[2]}}))}))}function xc(e,t){return f(this,void 0,void 0,(function(){var n,r,i,o,a;return d(this,(function(s){return n=Gr(e),r=t.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(t))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Ec(e,t){for(var n=Gr(e),r=!1,i=0,o=t;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var l=0,c=u.listeners;l<c.length;l++)c[l].Hr(a)&&(r=!0);u.Wr=a}}r&&Ac(n)}function Sc(e,t,n){var r=Gr(e),i=r.queries.get(t);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(t)}function Ac(e){e.Gr.forEach((function(e){e.next()}))}var Tc=function(){function e(e,t,n){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return e.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new yc(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),o=!0):this.eo(e,this.onlineState)&&(this.no(e),o=!0),this.Xr=e,o},e.prototype.onError=function(e){this.Jr.error(e)},e.prototype.zr=function(e){this.onlineState=e;var t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t},e.prototype.eo=function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.so&&n||e.docs.isEmpty()&&"Offline"!==t)},e.prototype.Zr=function(e){if(e.docChanges.length>0)return!0;var t=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.no=function(e){e=yc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},e}(),Cc=function(){function e(e,t){this.payload=e,this.byteLength=t}return e.prototype.io=function(){return"metadata"in this.payload},e}(),Mc=function(){function e(e){this.R=e}return e.prototype.qn=function(e){return Na(this.R,e)},e.prototype.Un=function(e){return e.metadata.exists?ja(this.R,e.document,!1):Pi.newNoDocument(this.qn(e.metadata.name),this.Kn(e.metadata.readTime))},e.prototype.Kn=function(e){return Ia(e)},e}(),kc=function(){function e(e,t,n){this.ro=e,this.localStore=t,this.R=n,this.queries=[],this.documents=[],this.progress=Ic(e)}return e.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},e.prototype.co=function(e){for(var t=new Map,n=new Mc(this.R),r=0,i=e;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var l=u[s],c=(t.get(l)||fa()).add(a);t.set(l,c)}}return t},e.prototype.complete=function(){return f(this,void 0,void 0,(function(){var e,t,n,r,i;return d(this,(function(o){switch(o.label){case 0:return[4,ol(this.localStore,new Mc(this.R),this.documents,this.ro.id)];case 1:e=o.sent(),t=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,al(this.localStore,i,t.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Hu(Object.assign({},this.progress),e))]}}))}))},e}();function Ic(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Rc=function(e){this.key=e},Pc=function(e){this.key=e},Dc=function(){function e(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=fa(),this.mutatedKeys=fa(),this.lo=vo(e),this.fo=new mc(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(e,t){var n=this,r=t?t.mo:new gc,i=t?t.fo:this.fo,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=no(this.query)&&i.size===this.query.limit?i.last():null,l=ro(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),h=po(n.query,t)?t:null,f=!!c&&n.mutatedKeys.has(c.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;c&&h?c.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(c,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||l&&n.lo(h,l)<0)&&(s=!0)):!c&&h?(r.track({type:0,doc:h}),p=!0):c&&!h&&(r.track({type:1,doc:c}),p=!0,(u||l)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),no(this.query)||ro(this.query))for(;a.size>this.query.limit;){var c=no(this.query)?a.last():a.first();a=a.delete(c.key),o=o.delete(c.key),r.track({type:1,doc:c})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},e.prototype.yo=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this,i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var o=e.mo.jr();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jr()}};return n(e)-n(t)}(e.type,t.type)||r.lo(e.doc,t.doc)})),this.po(n);var a=t?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new yc(this.query,e.fo,i,o,e.mutatedKeys,0===s,u,!1),To:a}:{To:a}},e.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new gc,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},e.prototype.po=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.uo=t.uo.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.uo=t.uo.delete(e)})),this.current=e.current)},e.prototype.Eo=function(){var e=this;if(!this.current)return[];var t=this.ho;this.ho=fa(),this.fo.forEach((function(t){e.Io(t.key)&&(e.ho=e.ho.add(t.key))}));var n=[];return t.forEach((function(t){e.ho.has(t)||n.push(new Pc(t))})),this.ho.forEach((function(e){t.has(e)||n.push(new Rc(e))})),n},e.prototype.Ao=function(e){this.uo=e.Bn,this.ho=fa();var t=this._o(e.documents);return this.applyChanges(t,!0)},e.prototype.Ro=function(){return yc.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},e}(),Nc=function(e,t,n){this.query=e,this.targetId=t,this.view=n},Lc=function(e){this.key=e,this.bo=!1},Oc=function(){function e(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Cu((function(e){return ho(e)}),co),this.Vo=new Map,this.So=new Set,this.Do=new ea(vi.comparator),this.Co=new Map,this.No=new ul,this.xo={},this.ko=new Map,this.Fo=vu.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),e}();function Bc(e,t){return f(this,void 0,void 0,(function(){var n,r,i,o,a,s;return d(this,(function(u){switch(u.label){case 0:return n=fh(e),(o=n.Po.get(t))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,$u(n.localStore,uo(t))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,Fc(n,t,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&Wl(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function Fc(e,t,n,r){return f(this,void 0,void 0,(function(){var i,o,a,s,u,l;return d(this,(function(c){switch(c.label){case 0:return e.Oo=function(t,n,r){return function(e,t,n,r){return f(this,void 0,void 0,(function(){var i,o,a;return d(this,(function(s){switch(s.label){case 0:return(i=t.view._o(n)).Nn?[4,tl(e.localStore,t.query,!1).then((function(e){var n=e.documents;return t.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o),[2,(Yc(e,t.targetId,a.To),a.snapshot)]}}))}))}(e,t,n,r)},[4,tl(e.localStore,t,!0)];case 1:return i=c.sent(),o=new Dc(t,i.Bn),a=o._o(i.documents),s=ma.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),u=o.applyChanges(a,e.isPrimaryClient,s),Yc(e,n,u.To),l=new Nc(t,n,o),[2,(e.Po.set(t,l),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),u.snapshot)]}}))}))}function Uc(e,t){return f(this,void 0,void 0,(function(){var n,r,i;return d(this,(function(o){switch(o.label){case 0:return n=Gr(e),r=n.Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(e){return!co(e,t)}))),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,el(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),ql(n.remoteStore,r.targetId),Qc(n,r.targetId)})).catch(_u)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Qc(n,r.targetId),[4,el(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function jc(e,t,n){return f(this,void 0,void 0,(function(){var r,i,o,a;return d(this,(function(s){switch(s.label){case 0:r=dh(e),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(e,t){var n,r=Gr(e),i=Jr.now(),o=t.reduce((function(e,t){return e.add(t.key)}),fa());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Mn.pn(e,o).next((function(o){n=o;for(var a=[],s=0,u=t;s<u.length;s++){var l=u[s],c=Uo(l,n.get(l.key));null!=c&&a.push(new zo(l.key,c,Ri(c.value.mapValue),No.exists(!0)))}return r._n.addMutationBatch(e,i,a,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(r.localStore,t)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(e,t,n){var r=e.xo[e.currentUser.toKey()];r||(r=new ea(Wr)),r=r.insert(t,n),e.xo[e.currentUser.toKey()]=r}(r,i.batchId,n),[4,eh(r,i.changes)];case 3:return s.sent(),[4,ic(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=vc(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Hc(e,t){return f(this,void 0,void 0,(function(){var n,r;return d(this,(function(i){switch(i.label){case 0:n=Gr(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Xu(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach((function(e,t){var r=n.Co.get(t);r&&(Hr(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.bo=!0:e.modifiedDocuments.size>0?Hr(r.bo):e.removedDocuments.size>0&&(Hr(r.bo),r.bo=!1))})),[4,eh(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,_u(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Gc(e,t,n){var r=Gr(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(e,n){var r=n.view.zr(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Gr(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(t)&&(r=!0)})),r&&Ac(n)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function zc(e,t,n){return f(this,void 0,void 0,(function(){var r,i,o,a,s,u;return d(this,(function(l){switch(l.label){case 0:return(r=Gr(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.Co.get(t),(o=i&&i.key)?(a=(a=new ea(vi.comparator)).insert(o,Pi.newNoDocument(o,Qr.min())),s=fa().add(o),u=new va(Qr.min(),new Map,new ra(Wr),a,s),[4,Hc(r,u)]):[3,2];case 1:return l.sent(),r.Do=r.Do.remove(o),r.Co.delete(t),$c(r),[3,4];case 2:return[4,el(r.localStore,t,!1).then((function(){return Qc(r,t,n)})).catch(_u)];case 3:l.sent(),l.label=4;case 4:return[2]}}))}))}function Vc(e,t){return f(this,void 0,void 0,(function(){var n,r,i;return d(this,(function(o){switch(o.label){case 0:n=Gr(e),r=t.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Ju(n.localStore,t)];case 2:return i=o.sent(),Jc(n,r,null),Kc(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,eh(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,_u(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Wc(e,t,n){return f(this,void 0,void 0,(function(){var r,i;return d(this,(function(o){switch(o.label){case 0:r=Gr(e),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(e,t){var n=Gr(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n._n.lookupMutationBatch(e,t).next((function(t){return Hr(null!==t),r=t.keys(),n._n.removeMutationBatch(e,t)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,r)}))}))}(r.localStore,t)];case 2:return i=o.sent(),Jc(r,t,n),Kc(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,eh(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,_u(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function qc(e,t){return f(this,void 0,void 0,(function(){var n,r,i,o,a;return d(this,(function(s){switch(s.label){case 0:Yl((n=Gr(e)).remoteStore)||Or("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(e){var t=Gr(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t._n.getHighestUnacknowledgedBatchId(e)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void t.resolve()]:((i=n.ko.get(r)||[]).push(t),n.ko.set(r,i),[3,4]);case 3:return o=s.sent(),a=vc(o,"Initialization of waitForPendingWrites() operation failed"),t.reject(a),[3,4];case 4:return[2]}}))}))}function Kc(e,t){(e.ko.get(t)||[]).forEach((function(e){e.resolve()})),e.ko.delete(t)}function Jc(e,t,n){var r=Gr(e),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function Qc(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach((function(t){e.No.containsKey(t)||Xc(e,t)}))}function Xc(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);null!==n&&(ql(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),$c(e))}function Yc(e,t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Rc?(e.No.addReference(o.key,t),Zc(e,o)):o instanceof Pc?(Or("SyncEngine","Document no longer in limbo: "+o.key),e.No.removeReference(o.key,t),e.No.containsKey(o.key)||Xc(e,o.key)):jr()}}function Zc(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(Or("SyncEngine","New document in limbo: "+n),e.So.add(r),$c(e))}function $c(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new vi(ei.fromString(t)),r=e.Fo.next();e.Co.set(r,new Lc(n)),e.Do=e.Do.insert(n,r),Wl(e.remoteStore,new Hs(uo(to(n.path)),r,2,Rr.o))}}function eh(e,t,n){return f(this,void 0,void 0,(function(){var r,i,o,a;return d(this,(function(s){switch(s.label){case 0:return r=Gr(e),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(e,s){a.push(r.Oo(s,t,n).then((function(e){if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,e.fromCache?"not-current":"current"),i.push(e);var t=zu.Pn(s.targetId,e);o.push(t)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(e,t){return f(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,l,c;return d(this,(function(h){switch(h.label){case 0:n=Gr(e),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Cs.forEach(t,(function(t){return Cs.forEach(t.bn,(function(r){return n.persistence.referenceDelegate.addReference(e,t.targetId,r)})).next((function(){return Cs.forEach(t.vn,(function(r){return n.persistence.referenceDelegate.removeReference(e,t.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!Ps(r=h.sent()))throw r;return Or("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=t;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.kn.get(s),l=u.snapshotVersion,c=u.withLastLimboFreeSnapshotVersion(l),n.kn=n.kn.insert(s,c));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function th(e,t){return f(this,void 0,void 0,(function(){var n,r;return d(this,(function(i){switch(i.label){case 0:return(n=Gr(e)).currentUser.isEqual(t)?[3,3]:(Or("SyncEngine","User change. New user:",t.toKey()),[4,Ku(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,function(e,t){e.ko.forEach((function(e){e.forEach((function(e){e.reject(new Dr(Pr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ko.clear()}(n),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,eh(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function nh(e,t){var n=Gr(e),r=n.Co.get(t);if(r&&r.bo)return fa().add(r.key);var i=fa(),o=n.Vo.get(t);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],l=n.Po.get(u);i=i.unionWith(l.view.wo)}return i}function rh(e,t){return f(this,void 0,void 0,(function(){var n,r,i;return d(this,(function(o){switch(o.label){case 0:return[4,tl((n=Gr(e)).localStore,t.query,!0)];case 1:return r=o.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&Yc(n,t.targetId,i.To),i)]}}))}))}function ih(e){return f(this,void 0,void 0,(function(){var t;return d(this,(function(n){return[2,rl((t=Gr(e)).localStore).then((function(e){return eh(t,e)}))]}))}))}function oh(e,t,n,r){return f(this,void 0,void 0,(function(){var i,o;return d(this,(function(a){switch(a.label){case 0:return[4,function(e,t){var n=Gr(e),r=Gr(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.jt(e,t).next((function(t){return t?n.Mn.pn(e,t):Cs.resolve(null)}))}))}((i=Gr(e)).localStore,t)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,ic(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Jc(i,t,r||null),Kc(i,t),function(e,t){Gr(Gr(e)._n).Gt(t)}(i.localStore,t)):jr(),a.label=4;case 4:return[4,eh(i,o)];case 5:return a.sent(),[3,7];case 6:Or("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}}))}))}function ah(e,t){return f(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,l;return d(this,(function(c){switch(c.label){case 0:return fh(n=Gr(e)),dh(n),!0!==t||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,sh(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,hc(n.remoteStore,!0)];case 2:for(c.sent(),o=0,a=i;o<a.length;o++)s=a[o],Wl(n.remoteStore,s);return[3,7];case 3:return!1!==t||!1===n.$o?[3,7]:(u=[],l=Promise.resolve(),n.Vo.forEach((function(e,t){n.sharedClientState.isLocalQueryTarget(t)?u.push(t):l=l.then((function(){return Qc(n,t),el(n.localStore,t,!0)})),ql(n.remoteStore,t)})),[4,l]);case 4:return c.sent(),[4,sh(n,u)];case 5:return c.sent(),function(e){var t=Gr(e);t.Co.forEach((function(e,n){ql(t.remoteStore,n)})),t.No.ts(),t.Co=new Map,t.Do=new ea(vi.comparator)}(n),n.$o=!1,[4,hc(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))}function sh(e,t,n){return f(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,l,c,h,f,p,v,m;return d(this,(function(d){switch(d.label){case 0:n=Gr(e),r=[],i=[],o=0,a=t,d.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(l=n.Vo.get(s))&&0!==l.length?[4,$u(n.localStore,uo(l[0]))]:[3,7]):[3,13];case 2:u=d.sent(),c=0,h=l,d.label=3;case 3:return c<h.length?(f=h[c],p=n.Po.get(f),[4,rh(n,p)]):[3,6];case 4:(v=d.sent()).snapshot&&i.push(v.snapshot),d.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,nl(n.localStore,s)];case 8:return m=d.sent(),[4,$u(n.localStore,m)];case 9:return u=d.sent(),[4,Fc(n,uh(m),s,!1)];case 10:d.sent(),d.label=11;case 11:r.push(u),d.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function uh(e){return eo(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function lh(e){var t=Gr(e);return Gr(Gr(t.localStore).persistence).fn()}function ch(e,t,n,r){return f(this,void 0,void 0,(function(){var i,o,a;return d(this,(function(s){switch(s.label){case 0:return(i=Gr(e)).$o?(Or("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,rl(i.localStore)];case 3:return o=s.sent(),a=va.createSynthesizedRemoteEventForCurrentChange(t,"current"===n),[4,eh(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,el(i.localStore,t,!0)];case 6:return s.sent(),Qc(i,t,r),[3,8];case 7:jr(),s.label=8;case 8:return[2]}}))}))}function hh(e,t,n){return f(this,void 0,void 0,(function(){var r,i,o,a,s,u,l,c,h,f;return d(this,(function(p){switch(p.label){case 0:if(!(r=fh(e)).$o)return[3,10];i=0,o=t,p.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(Or("SyncEngine","Adding an already active target "+a),[3,5]):[4,nl(r.localStore,a)]):[3,6];case 2:return s=p.sent(),[4,$u(r.localStore,s)];case 3:return u=p.sent(),[4,Fc(r,uh(s),u.targetId,!1)];case 4:p.sent(),Wl(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:l=function(e){return d(this,(function(t){switch(t.label){case 0:return r.Vo.has(e)?[4,el(r.localStore,e,!1).then((function(){ql(r.remoteStore,e),Qc(r,e)})).catch(_u)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},c=0,h=n,p.label=7;case 7:return c<h.length?(f=h[c],[5,l(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))}function fh(e){var t=Gr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Hc.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=nh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=zc.bind(null,t),t.vo._r=Ec.bind(null,t.eventManager),t.vo.Mo=Sc.bind(null,t.eventManager),t}function dh(e){var t=Gr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Vc.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Wc.bind(null,t),t}function ph(e,t,n){var r=Gr(e);(function(e,t,n){return f(this,void 0,void 0,(function(){var r,i,o,a,s,u;return d(this,(function(l){switch(l.label){case 0:return l.trys.push([0,14,,15]),[4,t.getMetadata()];case 1:return r=l.sent(),[4,function(e,t){var n=Gr(e),r=Ia(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ke.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(e.localStore,r)];case 2:return l.sent()?[4,t.close()]:[3,4];case 3:return[2,(l.sent(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)))];case 4:return n._updateProgress(Ic(r)),i=new kc(r,e.localStore,t.R),[4,t.Lo()];case 5:o=l.sent(),l.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(a=l.sent())&&n._updateProgress(a),[4,t.Lo()];case 8:o=l.sent(),l.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=l.sent(),[4,eh(e,s.wn,void 0)];case 12:return l.sent(),[4,function(e,t){var n=Gr(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ke.saveBundleMetadata(e,t)}))}(e.localStore,r)];case 13:return l.sent(),n._completeWith(s.progress),[3,15];case 14:return Fr("SyncEngine","Loading bundle failed with "+(u=l.sent())),n._failWith(u),[3,15];case 15:return[2]}}))}))})(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var vh=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(e){return f(this,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return this.R=Ll(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}}))}))},e.prototype.Uo=function(e){return null},e.prototype.Ko=function(e){return qu(this.persistence,new Vu,e.initialUser,this.R)},e.prototype.qo=function(e){return new pl(ml.bs,this.R)},e.prototype.Bo=function(e){return new Cl},e.prototype.terminate=function(){return f(this,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}}))}))},e}(),mh=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Qo=t,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return h(t,e),t.prototype.initialize=function(t){return f(this,void 0,void 0,(function(){var n=this;return d(this,(function(r){switch(r.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return r.sent(),[4,il(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,t)];case 3:return r.sent(),[4,dh(this.Qo.syncEngine)];case 4:return r.sent(),[4,ic(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},t.prototype.Ko=function(e){return qu(this.persistence,new Vu,e.initialUser,this.R)},t.prototype.Uo=function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Eu(t,e.asyncQueue)},t.prototype.qo=function(e){var t=ju(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?su.withCacheSize(this.cacheSizeBytes):su.DEFAULT;return new Bu(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Dl(),Nl(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(e){return new Cl},t}(vh),gh=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n,!1)||this).Qo=t,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return h(t,e),t.prototype.initialize=function(t){return f(this,void 0,void 0,(function(){var n,r=this;return d(this,(function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Tl?(this.sharedClientState.syncEngine={ui:oh.bind(null,n),ai:ch.bind(null,n),hi:hh.bind(null,n),fn:lh.bind(null,n),ci:ih.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(e){return f(r,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return[4,ah(this.Qo.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},t.prototype.Bo=function(e){var t=Dl();if(!Tl.yt(t))throw new Dr(Pr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ju(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Tl(t,e.asyncQueue,n,e.clientId,e.initialUser)},t}(mh),yh=function(){function e(){}return e.prototype.initialize=function(e,t){return f(this,void 0,void 0,(function(){var n=this;return d(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Gc(n.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=th.bind(null,this.syncEngine),[4,hc(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.createEventManager=function(e){return new _c},e.prototype.createDatastore=function(e){var t,n=Ll(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Pl(t));return function(e,t,n){return new jl(e,t,n)}(e.credentials,r,n)},e.prototype.createRemoteStore=function(e){var t,n,r,i,o,a=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Gc(a.syncEngine,e,0)},o=kl.yt()?new kl:new Ml,new Gl(t,n,r,i,o)},e.prototype.createSyncEngine=function(e,t){return function(e,t,n,r,i,o,a){var s=new Oc(e,t,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)},e.prototype.terminate=function(){return function(e){return f(this,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return t=Gr(e),Or("RemoteStore","RemoteStore shutting down."),t.Or.add(5),[4,Vl(t)];case 1:return n.sent(),t.Lr.shutdown(),t.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},e}();function bh(e,t){void 0===t&&(t=10240);var n=0;return{read:function(){return f(this,void 0,void 0,(function(){var r;return d(this,(function(i){return n<e.byteLength?(r={value:e.slice(n,n+t),done:!1},[2,(n+=t,r)]):[2,{done:!0}]}))}))},cancel:function(){return f(this,void 0,void 0,(function(){return d(this,(function(e){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var _h=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},e.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),wh=function(){function e(e,t){var n=this;this.Go=e,this.R=t,this.metadata=new Ts,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(e){e&&e.io()?n.metadata.resolve(e.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.payload)))}),(function(e){return n.metadata.reject(e)}))}return e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return f(this,void 0,void 0,(function(){return d(this,(function(e){return[2,this.metadata.promise]}))}))},e.prototype.Lo=function(){return f(this,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}}))}))},e.prototype.Ho=function(){return f(this,void 0,void 0,(function(){var e,t,n,r;return d(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(e=i.sent())?[2,null]:(t=this.zo.decode(e),n=Number(t),isNaN(n)&&this.Yo("length string ("+t+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Cc(JSON.parse(r),e.length+n)]}}))}))},e.prototype.Zo=function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))},e.prototype.Jo=function(){return f(this,void 0,void 0,(function(){var e,t;return d(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}}))}))},e.prototype.Xo=function(e){return f(this,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return t=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}}))}))},e.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},e.prototype.tc=function(){return f(this,void 0,void 0,(function(){var e,t;return d(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(e=n.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}}))}))},e}(),xh=function(){function e(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return f(this,void 0,void 0,(function(){var t,n=this;return d(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Dr(Pr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return f(this,void 0,void 0,(function(){var n,r,i,o,a,s;return d(this,(function(u){switch(u.label){case 0:return n=Gr(e),r=Ba(n.R)+"/documents",i={documents:t.map((function(e){return Da(n.R,e)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(e){var t=function(e,t){return"found"in t?function(e,t){Hr(!!t.found),t.found.name,t.found.updateTime;var n=Na(e,t.found.name),r=Ia(t.found.updateTime),i=new Ii({mapValue:{fields:t.found.fields}});return Pi.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Hr(!!t.missing),Hr(!!t.readTime);var n=Na(e,t.missing),r=Ia(t.readTime);return Pi.newNoDocument(n,r)}(e,t):jr()}(n.R,e);a.set(t.key.toString(),t)})),s=[],[2,(t.forEach((function(e){var t=a.get(e.toString());Hr(!!t),s.push(t)})),s)]}}))}))}(this.datastore,e)];case 1:return[2,((t=r.sent()).forEach((function(e){return n.recordVersion(e)})),t)]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())},e.prototype.delete=function(e){this.write(new Qo(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.commit=function(){return f(this,void 0,void 0,(function(){var e,t=this;return d(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach((function(t){e.delete(t.key.toString())})),e.forEach((function(e,n){var r=vi.fromPath(n);t.mutations.push(new Xo(r,t.precondition(r)))})),[4,function(e,t){return f(this,void 0,void 0,(function(){var n,r,i;return d(this,(function(o){switch(o.label){case 0:return n=Gr(e),r=Ba(n.R)+"/documents",i={writes:t.map((function(e){return Ha(n.R,e)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw jr();t=Qr.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Dr(Pr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?No.updateTime(t):No.none()},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Qr.min()))throw new Dr(Pr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return No.updateTime(t)}return No.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},e.prototype.ensureCommitNotCalled=function(){},e}(),Eh=function(){function e(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Ol(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var e=this;this.Zi.ji((function(){return f(e,void 0,void 0,(function(){var e,t,n=this;return d(this,(function(r){return e=new xh(this.datastore),(t=this.sc(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.ic(e)}))}))})).catch((function(e){n.ic(e)})),[2]}))}))}))},e.prototype.sc=function(e){try{var t=this.updateFunction(e);return!fi(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.ic=function(e){var t=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return t.nc(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.rc=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Zo(t)}return!1},e}(),Sh=function(){function e(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=gl.UNAUTHENTICATED,this.clientId=Vr.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(t,(function(e){return f(r,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return Or("FirestoreClient","Received user=",e.uid),[4,this.credentialListener(e)];case 1:return t.sent(),this.user=e,[2]}}))}))}))}return e.prototype.getConfiguration=function(){return f(this,void 0,void 0,(function(){return d(this,(function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},e.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Dr(Pr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return f(e,void 0,void 0,(function(){var e,n;return d(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return e=r.sent(),n=vc(e,"Failed to shutdown persistence"),t.reject(n),[3,6];case 6:return[2]}}))}))})),t.promise},e}();function Ah(e,t){return f(this,void 0,void 0,(function(){var n,r,i=this;return d(this,(function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),Or("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=o.sent(),[4,t.initialize(n)];case 2:return o.sent(),r=n.initialUser,e.setCredentialChangeListener((function(e){return f(i,void 0,void 0,(function(){return d(this,(function(n){switch(n.label){case 0:return r.isEqual(e)?[3,2]:[4,Ku(t.localStore,e)];case 1:n.sent(),r=e,n.label=2;case 2:return[2]}}))}))})),t.persistence.setDatabaseDeletedListener((function(){return e.terminate()})),e.offlineComponents=t,[2]}}))}))}function Th(e,t){return f(this,void 0,void 0,(function(){var n,r;return d(this,(function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,Ch(e)];case 1:return n=i.sent(),Or("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener((function(e){return function(e,t){return f(this,void 0,void 0,(function(){var n,r;return d(this,(function(i){switch(i.label){case 0:return(n=Gr(e)).asyncQueue.verifyOperationInProgress(),Or("RemoteStore","RemoteStore received new credentials"),r=Yl(n),n.Or.add(3),[4,Vl(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(t)];case 2:return i.sent(),n.Or.delete(3),[4,zl(n)];case 3:return i.sent(),[2]}}))}))}(t.remoteStore,e)})),e.onlineComponents=t,[2]}}))}))}function Ch(e){return f(this,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(Or("FirestoreClient","Using default OfflineComponentProvider"),[4,Ah(e,new vh)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}}))}))}function Mh(e){return f(this,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(Or("FirestoreClient","Using default OnlineComponentProvider"),[4,Th(e,new yh)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}}))}))}function kh(e){return Ch(e).then((function(e){return e.persistence}))}function Ih(e){return Ch(e).then((function(e){return e.localStore}))}function Rh(e){return Mh(e).then((function(e){return e.remoteStore}))}function Ph(e){return Mh(e).then((function(e){return e.syncEngine}))}function Dh(e){return f(this,void 0,void 0,(function(){var t,n;return d(this,(function(r){switch(r.label){case 0:return[4,Mh(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=Bc.bind(null,t.syncEngine),n.onUnlisten=Uc.bind(null,t.syncEngine),n)]}}))}))}function Nh(e,t,n){var r=this;void 0===n&&(n={});var i=new Ts;return e.asyncQueue.enqueueAndForget((function(){return f(r,void 0,void 0,(function(){var r;return d(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new _h({next:function(o){t.enqueueAndForget((function(){return xc(e,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Dr(Pr.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Dr(Pr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new Tc(to(n.path),o,{includeMetadataChanges:!0,so:!0});return wc(e,a)},[4,Dh(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}function Lh(e,t,n){var r=this;void 0===n&&(n={});var i=new Ts;return e.asyncQueue.enqueueAndForget((function(){return f(r,void 0,void 0,(function(){var r;return d(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new _h({next:function(n){t.enqueueAndForget((function(){return xc(e,a)})),n.fromCache&&"server"===r.source?i.reject(new Dr(Pr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new Tc(n,o,{includeMetadataChanges:!0,so:!0});return wc(e,a)},[4,Dh(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}var Oh=function(e,t,n,r,i,o,a,s){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},Bh=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),Fh=new Map,Uh=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},jh=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){this.changeListener=t,e.enqueueRetryable((function(){return t(gl.UNAUTHENTICATED)}))},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),Hh=function(){function e(e){this.token=e,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),Gh=function(){function e(e){var t=this;this.currentUser=gl.UNAUTHENTICATED,this.oc=new Ts,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){t.cc++,t.currentUser=t.ac(),t.oc.resolve(),t.changeListener&&t.asyncQueue.enqueueRetryable((function(){return t.changeListener(t.currentUser)}))};var n=function(e){Or("FirebaseCredentialsProvider","Auth detected"),t.auth=e,t.auth.addAuthTokenListener(t.uc)};e.onInit((function(e){return n(e)})),setTimeout((function(){if(!t.auth){var r=e.getImmediate({optional:!0});r?n(r):(Or("FirebaseCredentialsProvider","Auth not yet detected"),t.oc.resolve())}}),0)}return e.prototype.getToken=function(){var e=this,t=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.cc!==t?(Or("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Hr("string"==typeof n.accessToken),new Uh(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e,t){var n=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable((function(){return f(n,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return[4,this.oc.promise];case 1:return e.sent(),[4,t(this.currentUser)];case 2:return e.sent(),this.changeListener=t,[2]}}))}))}))},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return Hr(null===e||"string"==typeof e),new gl(e)},e}(),zh=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n,this.type="FirstParty",this.user=gl.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},t=this.hc.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),e}(),Vh=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n}return e.prototype.getToken=function(){return Promise.resolve(new zh(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(e,t){e.enqueueRetryable((function(){return t(gl.FIRST_PARTY)}))},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function Wh(e,t,n){if(!n)throw new Dr(Pr.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function qh(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Dr(Pr.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function Kh(e,t,n,r){if(!0===t&&!0===r)throw new Dr(Pr.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function Jh(e){if(!vi.isDocumentKey(e))throw new Dr(Pr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function Qh(e){if(vi.isDocumentKey(e))throw new Dr(Pr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function Xh(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":jr()}function Yh(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Dr(Pr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Xh(e);throw new Dr(Pr.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function Zh(e,t){if(t<=0)throw new Dr(Pr.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}var $h=function(){function e(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Dr(Pr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Dr(Pr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Kh("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},e}(),ef=function(){function e(e,t){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $h({}),this._settingsFrozen=!1,e instanceof Bh?(this._databaseId=e,this._credentials=new jh):(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Dr(Pr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bh(e.options.projectId)}(e),this._credentials=new Gh(t))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new Dr(Pr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(e){if(this._settingsFrozen)throw new Dr(Pr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $h(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new jh;switch(e.type){case"gapi":var t=e.client;return Hr(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Vh(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Dr(Pr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return this,(e=Fh.get(this))&&(Or("ComponentProvider","Removing Datastore"),Fh.delete(this),e.terminate()),Promise.resolve();var e},e}(),tf=function(){function e(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new rf(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),nf=function(){function e(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),rf=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,to(r))||this)._path=r,i.type="collection",i}return h(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new tf(this.firestore,null,new vi(e))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._path)},t}(nf);function of(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=(0,v.getModularInstance)(e),Wh("collection","path",t),e instanceof ef)return Qh(n=ei.fromString.apply(ei,p([t],r))),new rf(e,null,n);if(!(e instanceof tf||e instanceof rf))throw new Dr(Pr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Qh(n=ei.fromString.apply(ei,p([e.path],r)).child(ei.fromString(t))),new rf(e.firestore,null,n)}function af(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=(0,v.getModularInstance)(e),1===arguments.length&&(t=Vr.u()),Wh("doc","path",t),e instanceof ef)return Jh(n=ei.fromString.apply(ei,p([t],r))),new tf(e,null,new vi(n));if(!(e instanceof tf||e instanceof rf))throw new Dr(Pr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Jh(n=e._path.child(ei.fromString.apply(ei,p([t],r)))),new tf(e.firestore,e instanceof rf?e.converter:null,new vi(n))}function sf(e,t){return e=(0,v.getModularInstance)(e),t=(0,v.getModularInstance)(t),(e instanceof tf||e instanceof rf)&&(t instanceof tf||t instanceof rf)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function uf(e,t){return e=(0,v.getModularInstance)(e),t=(0,v.getModularInstance)(t),e instanceof nf&&t instanceof nf&&e.firestore===t.firestore&&co(e._query,t._query)&&e.converter===t.converter}var lf=function(){function e(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Ol(this,"async_queue_retry"),this.Ic=function(){var t=Nl();t&&Or("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Zi.Gi()};var t=Nl();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ac(),this.Rc(e)},e.prototype.enterRestrictedMode=function(e){if(!this._c){this._c=!0,this.Ec=e||!1;var t=Nl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ic)}},e.prototype.enqueue=function(e){var t=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new Ts;return this.Rc((function(){return t._c&&t.Ec?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},e.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget((function(){return t.wc.push(e),t.bc()}))},e.prototype.bc=function(){return f(this,void 0,void 0,(function(){var e,t=this;return d(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Ps(e=n.sent()))throw e;return Or("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return t.bc()})),n.label=5;case 5:return[2]}}))}))},e.prototype.Rc=function(e){var t=this,n=this.dc.then((function(){return t.gc=!0,e().catch((function(e){throw t.yc=e,t.gc=!1,Br("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((function(e){return t.gc=!1,e}))}));return this.dc=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.Ac(),this.Tc.indexOf(e)>-1&&(t=0);var i=pc.createAndSchedule(this,e,t,n,(function(e){return r.vc(e)}));return this.mc.push(i),i},e.prototype.Ac=function(){this.yc&&jr()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Pc=function(){return f(this,void 0,void 0,(function(){var e;return d(this,(function(t){switch(t.label){case 0:return[4,e=this.dc];case 1:t.sent(),t.label=2;case 2:if(e!==this.dc)return[3,0];t.label=3;case 3:return[2]}}))}))},e.prototype.Vc=function(e){for(var t=0,n=this.mc;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.Sc=function(e){var t=this;return this.Pc().then((function(){t.mc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==e&&i.timerId===e)break}return t.Pc()}))},e.prototype.Dc=function(e){this.Tc.push(e)},e.prototype.vc=function(e){var t=this.mc.indexOf(e);this.mc.splice(t,1)},e}();function cf(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var hf=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new Ts,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(e,t,n){this._progressObserver={next:e,error:t,complete:n}},e.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},e.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},e.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},e.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},e.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)},e}(),ff=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).type="firestore",r._queue=new lf,r._persistenceKey="name"in t?t.name:"[DEFAULT]",r}return h(t,e),t.prototype._terminate=function(){return this._firestoreClient||pf(this),this._firestoreClient.terminate()},t}(ef);function df(e){return e._firestoreClient||pf(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function pf(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Oh(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Sh(e._credentials,e._queue,r)}function vf(e,t,n){var r=this,i=new Ts;return e.asyncQueue.enqueue((function(){return f(r,void 0,void 0,(function(){var r;return d(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Ah(e,n)];case 1:return o.sent(),[4,Th(e,t)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(e){return"FirebaseError"===e.name?e.code===Pr.FAILED_PRECONDITION||e.code===Pr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function mf(e){if(e._initialized||e._terminated)throw new Dr(Pr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var gf=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;++n)if(0===e[n].length)throw new Dr(Pr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ni(e)}return e.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},e}(),yf=function(){function e(e){this._byteString=e}return e.fromBase64String=function(t){try{return new e(ii.fromBase64String(t))}catch(t){throw new Dr(Pr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},e.fromUint8Array=function(t){return new e(ii.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},e}(),bf=function(e){this._methodName=e},_f=function(){function e(e,t){if(!isFinite(e)||e<-90||e>90)throw new Dr(Pr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Dr(Pr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(e){return Wr(this._lat,e._lat)||Wr(this._long,e._long)},e}(),wf=/^__.*__$/,xf=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return null!==this.fieldMask?new zo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Go(e,this.data,t,this.fieldTransforms)},e}(),Ef=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return new zo(e,this.data,this.fieldMask,t,this.fieldTransforms)},e}();function Sf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jr()}}var Af=function(){function e(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),e.prototype.xc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xc({path:n,Fc:!1});return r.$c(e),r},e.prototype.Oc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xc({path:n,Fc:!1});return r.Cc(),r},e.prototype.Mc=function(e){return this.xc({path:void 0,Fc:!0})},e.prototype.Lc=function(e){return Wf(e,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.Cc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.$c(this.path.get(e))},e.prototype.$c=function(e){if(0===e.length)throw this.Lc("Document fields must not be empty");if(Sf(this.Nc)&&wf.test(e))throw this.Lc('Document fields cannot begin and end with "__"')},e}(),Tf=function(){function e(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=n||Ll(e)}return e.prototype.Uc=function(e,t,n,r){return void 0===r&&(r=!1),new Af({Nc:e,methodName:t,qc:n,path:ni.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function Cf(e){var t=e._freezeSettings(),n=Ll(e._databaseId);return new Tf(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Mf(e,t,n,r,i,o){void 0===o&&(o={});var a=e.Uc(o.merge||o.mergeFields?2:0,t,n,i);Hf("Data must be an object, but it was:",a,r);var s,u,l=Uf(r,a);if(o.merge)s=new ri(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var c=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Gf(t,f[h],n);if(!a.contains(d))throw new Dr(Pr.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");qf(c,d)||c.push(d)}s=new ri(c),u=a.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=a.fieldTransforms;return new xf(new Ii(l),s,u)}var kf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.prototype._toFieldTransform=function(e){if(2!==e.Nc)throw 1===e.Nc?e.Lc(this._methodName+"() can only appear at the top level of your update data"):e.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(bf);function If(e,t,n){return new Af({Nc:3,qc:t.settings.qc,methodName:e._methodName,Fc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var Rf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.prototype._toFieldTransform=function(e){return new Po(e.path,new So)},t.prototype.isEqual=function(e){return e instanceof t},t}(bf),Pf=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return h(t,e),t.prototype._toFieldTransform=function(e){var t=If(this,e,!0),n=this.Kc.map((function(e){return Ff(e,t)})),r=new Ao(n);return new Po(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(bf),Df=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return h(t,e),t.prototype._toFieldTransform=function(e){var t=If(this,e,!0),n=this.Kc.map((function(e){return Ff(e,t)})),r=new Co(n);return new Po(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(bf),Nf=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Qc=n,r}return h(t,e),t.prototype._toFieldTransform=function(e){var t=new ko(e.R,bo(e.R,this.Qc));return new Po(e.path,t)},t.prototype.isEqual=function(e){return this===e},t}(bf);function Lf(e,t,n,r){var i=e.Uc(1,t,n);Hf("Data must be an object, but it was:",i,r);var o=[],a=Ii.empty();Yr(r,(function(e,r){var s=Vf(t,e,n);r=(0,v.getModularInstance)(r);var u=i.Oc(s);if(r instanceof kf)o.push(s);else{var l=Ff(r,u);null!=l&&(o.push(s),a.set(s,l))}}));var s=new ri(o);return new Ef(a,s,i.fieldTransforms)}function Of(e,t,n,r,i,o){var a=e.Uc(1,t,n),s=[Gf(t,r,n)],u=[i];if(o.length%2!=0)throw new Dr(Pr.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var l=0;l<o.length;l+=2)s.push(Gf(t,o[l])),u.push(o[l+1]);for(var c=[],h=Ii.empty(),f=s.length-1;f>=0;--f)if(!qf(c,s[f])){var d=s[f],p=u[f];p=(0,v.getModularInstance)(p);var m=a.Oc(d);if(p instanceof kf)c.push(d);else{var g=Ff(p,m);null!=g&&(c.push(d),h.set(d,g))}}var y=new ri(c);return new Ef(h,y,a.fieldTransforms)}function Bf(e,t,n,r){return void 0===r&&(r=!1),Ff(n,e.Uc(r?4:3,t))}function Ff(e,t){if(jf(e=(0,v.getModularInstance)(e)))return Hf("Unsupported field value:",t,e),Uf(e,t);if(e instanceof bf)return function(e,t){if(!Sf(t.Nc))throw t.Lc(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t.Lc(e._methodName+"() is not currently supported inside arrays");var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&4!==t.Nc)throw t.Lc("Nested arrays are not supported");return function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=Ff(o[i],t.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,v.getModularInstance)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return bo(t.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Jr.fromDate(e);return{timestampValue:Ca(t.R,n)}}if(e instanceof Jr)return n=new Jr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:Ca(t.R,n)};if(e instanceof _f)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof yf)return{bytesValue:Ma(t.R,e._byteString)};if(e instanceof tf){n=t.databaseId;var r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ra(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Lc("Unsupported field value: "+Xh(e))}(e,t)}function Uf(e,t){var n={};return Zr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Yr(e,(function(e,r){var i=Ff(r,t.kc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function jf(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Jr||e instanceof _f||e instanceof yf||e instanceof tf||e instanceof bf)}function Hf(e,t,n){if(!jf(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Xh(n);throw"an object"===r?t.Lc(e+" a custom object"):t.Lc(e+" "+r)}}function Gf(e,t,n){if((t=(0,v.getModularInstance)(t))instanceof gf)return t._internalPath;if("string"==typeof t)return Vf(e,t);throw Wf("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var zf=new RegExp("[~\\*/\\[\\]]");function Vf(e,t,n){if(t.search(zf)>=0)throw Wf("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return(new(gf.bind.apply(gf,p([void 0],t.split(".")))))._internalPath}catch(lU){throw Wf("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function Wf(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+t+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Dr(Pr.INVALID_ARGUMENT,(s+=". ")+e+u)}function qf(e,t){return e.some((function(e){return e.isEqual(t)}))}var Kf=function(){function e(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new tf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return null!==this._document},e.prototype.data=function(){if(this._document){if(this._converter){var e=new Jf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(e){if(this._document){var t=this._document.data.field(Qf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}},e}(),Jf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(Kf);function Qf(e,t){return"string"==typeof t?Vf(e,t):t instanceof gf?t._internalPath:t._delegate._internalPath}var Xf=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Yf=function(e){function t(t,n,r,i,o,a){var s=this;return(s=e.call(this,t,n,r,i,a)||this)._firestore=t,s._firestoreImpl=t,s.metadata=o,s}return h(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var t=new Zf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}},t.prototype.get=function(e,t){if(void 0===t&&(t={}),this._document){var n=this._document.data.field(Qf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}},t}(Kf),Zf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.prototype.data=function(t){return void 0===t&&(t={}),e.prototype.data.call(this,t)},t}(Yf),$f=function(){function e(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Xf(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Zf(n._firestore,n._userDataWriter,r.key,r,new Xf(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},e.prototype.docChanges=function(e){void 0===e&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Dr(Pr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new Zf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Xf(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Zf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Xf(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:ed(t.type),doc:n,oldIndex:i,newIndex:o}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e}();function ed(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jr()}}function td(e,t){return e instanceof Yf&&t instanceof Yf?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof $f&&t instanceof $f&&e._firestore===t._firestore&&uf(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function nd(e){if(ro(e)&&0===e.explicitOrderBy.length)throw new Dr(Pr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var rd=function(){};function id(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];e=o._apply(e)}return e}var od=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).jc=t,i.Wc=n,i.Gc=r,i.type="where",i}return h(t,e),t.prototype._apply=function(e){var t=Cf(e.firestore),n=function(e,t,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Dr(Pr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){fd(a,o);for(var u=[],l=0,c=a;l<c.length;l++){var h=c[l];u.push(hd(r,e,h))}s={arrayValue:{values:u}}}else s=hd(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||fd(a,o),s=Bf(n,"where",a,"in"===o||"not-in"===o);var f=Fi.create(i,o,s);return function(e,t){if(t.g()){var n=oo(e);if(null!==n&&!n.isEqual(t.field))throw new Dr(Pr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");var r=io(e);null!==r&&dd(e,t.field,r)}var i=function(e,t){for(var n=0,r=e.filters;n<r.length;n++){var i=r[n];if(t.indexOf(i.op)>=0)return i.op}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Dr(Pr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new Dr(Pr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+i.toString()+"' filters.")}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.jc,this.Wc,this.Gc);return new nf(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new $i(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))},t}(rd),ad=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).jc=t,r.zc=n,r.type="orderBy",r}return h(t,e),t.prototype._apply=function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Dr(Pr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Dr(Pr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Qi(t,n);return function(e,t){if(null===io(e)){var n=oo(e);null!==n&&dd(e,n,t.field)}}(e,r),r}(e._query,this.jc,this.zc);return new nf(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new $i(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))},t}(rd),sd=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Hc=n,i.Jc=r,i}return h(t,e),t.prototype._apply=function(e){return new nf(e.firestore,e.converter,lo(e._query,this.Hc,this.Jc))},t}(rd),ud=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Yc=n,i.Xc=r,i}return h(t,e),t.prototype._apply=function(e){var t=cd(e,this.type,this.Yc,this.Xc);return new nf(e.firestore,e.converter,function(e,t){return new $i(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))},t}(rd),ld=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Yc=n,i.Xc=r,i}return h(t,e),t.prototype._apply=function(e){var t=cd(e,this.type,this.Yc,this.Xc);return new nf(e.firestore,e.converter,function(e,t){return new $i(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))},t}(rd);function cd(e,t,n,r){if(n[0]=(0,v.getModularInstance)(n[0]),n[0]instanceof Kf)return function(e,t,n,r,i){if(!r)throw new Dr(Pr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=so(e);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(Ei(t,r.key));else{var l=r.data.field(u.field);if(li(l))throw new Dr(Pr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===l){var c=u.field.canonicalString();throw new Dr(Pr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+c+"' (used as the orderBy) does not exist.")}o.push(l)}}return new Ki(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Cf(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new Dr(Pr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var l=i[u];if(a[u].field.isKeyField()){if("string"!=typeof l)throw new Dr(Pr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof l);if(!ao(e)&&-1!==l.indexOf("/"))throw new Dr(Pr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+l+"' contains a slash.");var c=e.path.child(ei.fromString(l));if(!vi.isDocumentKey(c))throw new Dr(Pr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+c+"' is not because it contains an odd number of segments.");var h=new vi(c);s.push(Ei(t,h))}else{var f=Bf(n,r,l);s.push(f)}}return new Ki(s,o)}(e._query,e.firestore._databaseId,i,t,n,r)}function hd(e,t,n){if("string"==typeof(n=(0,v.getModularInstance)(n))){if(""===n)throw new Dr(Pr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ao(t)&&-1!==n.indexOf("/"))throw new Dr(Pr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(ei.fromString(n));if(!vi.isDocumentKey(r))throw new Dr(Pr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ei(e,new vi(r))}if(n instanceof tf)return Ei(e,n._key);throw new Dr(Pr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Xh(n)+".")}function fd(e,t){if(!Array.isArray(e)||0===e.length)throw new Dr(Pr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new Dr(Pr.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function dd(e,t,n){if(!n.isEqual(t))throw new Dr(Pr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var pd=function(){function e(){}return e.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),mi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return si(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw jr()}},e.prototype.convertObject=function(e,t){var n=this,r={};return Yr(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r},e.prototype.convertGeoPoint=function(e){return new _f(si(e.latitude),si(e.longitude))},e.prototype.convertArray=function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))},e.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var n=ci(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(hi(e));default:return null}},e.prototype.convertTimestamp=function(e){var t=ai(e);return new Jr(t.seconds,t.nanos)},e.prototype.convertDocumentKey=function(e,t){var n=ei.fromString(e);Hr(ns(n));var r=new Bh(n.get(1),n.get(3)),i=new vi(n.popFirst(5));return r.isEqual(t)||Br("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),i},e}();function vd(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var md=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return h(t,e),t.prototype.convertBytes=function(e){return new yf(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new tf(this.firestore,null,t)},t}(pd),gd=function(){function e(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cf(e)}return e.prototype.set=function(e,t,n){this._verifyNotCommitted();var r=yd(e,this._firestore),i=vd(r.converter,t,n),o=Mf(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,No.none())),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=yd(e,this._firestore);return o="string"==typeof(t=(0,v.getModularInstance)(t))||t instanceof gf?Of(this._dataReader,"WriteBatch.update",a._key,t,n,r):Lf(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,No.exists(!0))),this},e.prototype.delete=function(e){this._verifyNotCommitted();var t=yd(e,this._firestore);return this._mutations=this._mutations.concat(new Qo(t._key,No.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new Dr(Pr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();function yd(e,t){if((e=(0,v.getModularInstance)(e)).firestore!==t)throw new Dr(Pr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var bd=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return h(t,e),t.prototype.convertBytes=function(e){return new yf(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new tf(this.firestore,null,t)},t}(pd);function _d(e,t,n){e=Yh(e,tf);var r=Yh(e.firestore,ff),i=vd(e.converter,t,n);return Ed(r,[Mf(Cf(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,No.none())])}function wd(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=Yh(e,tf);var o=Yh(e.firestore,ff),a=Cf(o);return Ed(o,[("string"==typeof(t=(0,v.getModularInstance)(t))||t instanceof gf?Of(a,"updateDoc",e._key,t,n,r):Lf(a,"updateDoc",e._key,t)).toMutation(e._key,No.exists(!0))])}function xd(e){for(var t,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];e=(0,v.getModularInstance)(e);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||cf(i[s])||(a=i[s],s++);var u,l,c,h={includeMetadataChanges:a.includeMetadataChanges};if(cf(i[s])){var p=i[s];i[s]=null===(t=p.next)||void 0===t?void 0:t.bind(p),i[s+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),i[s+2]=null===(r=p.complete)||void 0===r?void 0:r.bind(p)}if(e instanceof tf)l=Yh(e.firestore,ff),c=to(e._key.path),u={next:function(t){i[s]&&i[s](Sd(l,e,t))},error:i[s+1],complete:i[s+2]};else{var m=Yh(e,nf);l=Yh(m.firestore,ff),c=m._query;var g=new bd(l);u={next:function(e){i[s]&&i[s](new $f(l,g,m,e))},error:i[s+1],complete:i[s+2]},nd(e._query)}return function(e,t,n,r){var i=this,o=new _h(r),a=new Tc(t,o,n);return e.asyncQueue.enqueueAndForget((function(){return f(i,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return t=wc,[4,Dh(e)];case 1:return[2,t.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),e.asyncQueue.enqueueAndForget((function(){return f(i,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return t=xc,[4,Dh(e)];case 1:return[2,t.apply(void 0,[n.sent(),a])]}}))}))}))}}(df(l),c,h,u)}function Ed(e,t){return function(e,t){var n=this,r=new Ts;return e.asyncQueue.enqueueAndForget((function(){return f(n,void 0,void 0,(function(){var n;return d(this,(function(i){switch(i.label){case 0:return n=jc,[4,Ph(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(df(e),t)}function Sd(e,t,n){var r=n.docs.get(t._key),i=new bd(e);return new Yf(e,i,t._key,r,new Xf(n.hasPendingWrites,n.fromCache),t.converter)}var Ad=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this)._firestore=t,r}return h(t,e),t.prototype.get=function(t){var n=this,r=yd(t,this._firestore),i=new bd(this._firestore);return e.prototype.get.call(this,t).then((function(e){return new Yf(n._firestore,i,r._key,e._document,new Xf(!1,!1),r.converter)}))},t}(function(){function e(e,t){this._firestore=e,this._transaction=t,this._dataReader=Cf(e)}return e.prototype.get=function(e){var t=this,n=yd(e,this._firestore),r=new md(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return jr();var i=e[0];if(i.isFoundDocument())return new Kf(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Kf(t._firestore,r,n._key,null,n.converter);throw jr()}))},e.prototype.set=function(e,t,n){var r=yd(e,this._firestore),i=vd(r.converter,t,n),o=Mf(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=yd(e,this._firestore);return o="string"==typeof(t=(0,v.getModularInstance)(t))||t instanceof gf?Of(this._dataReader,"Transaction.update",a._key,t,n,r):Lf(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,o),this},e.prototype.delete=function(e){var t=yd(e,this._firestore);return this._transaction.delete(t._key),this},e}());function Td(){if("undefined"==typeof Uint8Array)throw new Dr(Pr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Cd(){if("undefined"==typeof atob)throw new Dr(Pr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Md=function(){function e(e){this._delegate=e}return e.fromBase64String=function(t){return Cd(),new e(yf.fromBase64String(t))},e.fromUint8Array=function(t){return Td(),new e(yf.fromUint8Array(t))},e.prototype.toBase64=function(){return Cd(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return Td(),this._delegate.toUint8Array()},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),kd=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(e,t){return function(e,t){mf(e=Yh(e,ff));var n=df(e),r=e._freezeSettings(),i=new yh;return vf(n,i,new mh(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})},e.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(e){mf(e=Yh(e,ff));var t=df(e),n=e._freezeSettings(),r=new yh;return vf(t,r,new gh(r,n.cacheSizeBytes))}(e._delegate)},e.prototype.clearIndexedDbPersistence=function(e){return function(e){var t=this;if(e._initialized&&!e._terminated)throw new Dr(Pr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Ts;return e._queue.enqueueAndForgetEvenWhileRestricted((function(){return f(t,void 0,void 0,(function(){var t;return d(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(e){return f(this,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return ks.yt()?(t=e+"main",[4,ks.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(ju(e._databaseId,e._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise}(e._delegate)},e}(),Id=function(){function e(e,t,n){var r=this;this._delegate=t,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},e instanceof Bh||(this.tu=e)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Fr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)},e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),function(e,t,n,r){var i;void 0===r&&(r={});var o=(e=Yh(e,ef))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&Fr("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},o),{host:t+":"+n,ssl:!1})),r.mockUserToken){var a,s;if("string"==typeof r.mockUserToken)a=r.mockUserToken,s=gl.MOCK_USER;else{a=(0,v.createMockUserToken)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Dr(Pr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new gl(u)}e._credentials=new Hh(new Uh(a,s))}}(this._delegate,e,t,n)},e.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return f(t,void 0,void 0,(function(){var t,n;return d(this,(function(r){switch(r.label){case 0:return[4,kh(e)];case 1:return t=r.sent(),[4,Rh(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!0),function(e){var t=Gr(e);return t.Or.delete(0),zl(t)}(n))]}}))}))}))}(df(Yh(this._delegate,ff)))},e.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return f(t,void 0,void 0,(function(){var t,n;return d(this,(function(r){switch(r.label){case 0:return[4,kh(e)];case 1:return t=r.sent(),[4,Rh(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!1),function(e){return f(this,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return(t=Gr(e)).Or.add(0),[4,Vl(t)];case 1:return n.sent(),t.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(df(Yh(this._delegate,ff)))},e.prototype.enablePersistence=function(e){var t=!1,n=!1;return e&&Kh("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(e){var t=this,n=new Ts;return e.asyncQueue.enqueueAndForget((function(){return f(t,void 0,void 0,(function(){var t;return d(this,(function(r){switch(r.label){case 0:return t=qc,[4,Ph(e)];case 1:return[2,t.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(df(Yh(this._delegate,ff)))},e.prototype.onSnapshotsInSync=function(e){return function(e,t){return function(e,t){var n=this,r=new _h(t);return e.asyncQueue.enqueueAndForget((function(){return f(n,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return t=function(e,t){Gr(e).Gr.add(t),t.next()},[4,Dh(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),e.asyncQueue.enqueueAndForget((function(){return f(n,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return t=function(e,t){Gr(e).Gr.delete(t)},[4,Dh(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))}))}}(df(e=Yh(e,ff)),cf(t)?t:{next:t})}(this._delegate,e)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.tu)throw new Dr(Pr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new Vd(this,of(this._delegate,e))}catch(e){throw Od(e,"collection()","Firestore.collection()")}},e.prototype.doc=function(e){try{return new Ld(this,af(this._delegate,e))}catch(e){throw Od(e,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(e){try{return new Hd(this,function(e,t){if(e=Yh(e,ef),Wh("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Dr(Pr.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new nf(e,null,function(e){return new $i(ei.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw Od(e,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(e){var t=this;return function(e,t){return function(e,t){var n=this,r=new Ts;return e.asyncQueue.enqueueAndForget((function(){return f(n,void 0,void 0,(function(){var n;return d(this,(function(i){switch(i.label){case 0:return[4,function(e){return Mh(e).then((function(e){return e.datastore}))}(e)];case 1:return n=i.sent(),new Eh(e.asyncQueue,n,t,r).run(),[2]}}))}))})),r.promise}(df(e),(function(n){return t(new Ad(e,n))}))}(this._delegate,(function(n){return e(new Pd(t,n))}))},e.prototype.batch=function(){var e=this;return df(this._delegate),new Dd(new gd(this._delegate,(function(t){return Ed(e._delegate,t)})))},e.prototype.loadBundle=function(e){throw new Dr(Pr.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(e){throw new Dr(Pr.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),Rd=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return h(t,e),t.prototype.convertBytes=function(e){return new Md(new yf(e))},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Ld.eu(t,this.firestore,null)},t}(pd);var Pd=function(){function e(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Rd(e)}return e.prototype.get=function(e){var t=this,n=Wd(e);return this._delegate.get(n).then((function(e){return new Ud(t._firestore,new Yf(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))},e.prototype.set=function(e,t,n){var r=Wd(e);return n?(qh("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Wd(e);return 2===arguments.length?this._delegate.update(a,t):(r=this._delegate).update.apply(r,p([a,t,n],i)),this},e.prototype.delete=function(e){var t=Wd(e);return this._delegate.delete(t),this},e}(),Dd=function(){function e(e){this._delegate=e}return e.prototype.set=function(e,t,n){var r=Wd(e);return n?(qh("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Wd(e);return 2===arguments.length?this._delegate.update(a,t):(r=this._delegate).update.apply(r,p([a,t,n],i)),this},e.prototype.delete=function(e){var t=Wd(e);return this._delegate.delete(t),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),Nd=function(){function e(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}return e.prototype.fromFirestore=function(e,t){var n=new Zf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jd(this._firestore,n),null!=t?t:{})},e.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},e.nu=function(t,n){var r=e.su,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Rd(t),n),i.set(n,o)),o},e}();Nd.su=new WeakMap;var Ld=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rd(e)}return e.iu=function(t,n,r){if(t.length%2!=0)throw new Dr(Pr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new tf(n._delegate,r,new vi(t)))},e.eu=function(t,n,r){return new e(n,new tf(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Vd(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new Vd(this.firestore,of(this._delegate,e))}catch(e){throw Od(e,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(e){return(e=(0,v.getModularInstance)(e))instanceof tf&&sf(this._delegate,e)},e.prototype.set=function(e,t){t=qh("DocumentReference.set",t);try{return t?_d(this._delegate,e,t):_d(this._delegate,e)}catch(e){throw Od(e,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?wd(this._delegate,e):wd.apply(void 0,p([this._delegate,e,t],n))}catch(e){throw Od(e,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Ed(Yh((e=this._delegate).firestore,ff),[new Qo(e._key,No.none())]);var e},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Bd(t),i=Fd(t,(function(t){return new Ud(e.firestore,new Yf(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return xd(this._delegate,r,i)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=Yh(e,tf);var t=Yh(e.firestore,ff),n=df(t),r=new bd(t);return function(e,t){var n=this,r=new Ts;return e.asyncQueue.enqueueAndForget((function(){return f(n,void 0,void 0,(function(){var n;return d(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return f(this,void 0,void 0,(function(){var r,i;return d(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(e,t){var n=Gr(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Mn.mn(e,t)}))}(e,t)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Dr(Pr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=vc(r,"Failed to get document '"+t+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Ih(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._key).then((function(n){return new Yf(t,r,e._key,n,new Xf(null!==n&&n.hasLocalMutations,!0),e.converter)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Yh(e,tf);var t=Yh(e.firestore,ff);return Nh(df(t),e._key,{source:"server"}).then((function(n){return Sd(t,e,n)}))}(this._delegate):function(e){e=Yh(e,tf);var t=Yh(e.firestore,ff);return Nh(df(t),e._key).then((function(n){return Sd(t,e,n)}))}(this._delegate)).then((function(e){return new Ud(t.firestore,new Yf(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Nd.nu(this.firestore,t)):this._delegate.withConverter(null))},e}();function Od(e,t,n){return e.message=e.message.replace(t,n),e}function Bd(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if("object"==typeof r&&!cf(r))return r}return{}}function Fd(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=cf(e[0])?e[0]:cf(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Ud=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"ref",{get:function(){return new Ld(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(e){return this._delegate.data(e)},e.prototype.get=function(e,t){return this._delegate.get(e,t)},e.prototype.isEqual=function(e){return td(this._delegate,e._delegate)},e}(),jd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.prototype.data=function(e){return this._delegate.data(e)},t}(Ud),Hd=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rd(e)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,id(this._delegate,function(e,t,n){var r=t,i=Qf("where",e);return new od(i,r,n)}(t,n,r)))}catch(t){throw Od(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,id(this._delegate,function(e,t){void 0===t&&(t="asc");var n=t,r=Qf("orderBy",e);return new ad(r,n)}(t,n)))}catch(t){throw Od(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,id(this._delegate,function(e){return Zh("limit",e),new sd("limit",e,"F")}(t)))}catch(t){throw Od(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,id(this._delegate,function(e){return Zh("limitToLast",e),new sd("limitToLast",e,"L")}(t)))}catch(t){throw Od(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,id(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new ud("startAt",e,!0)}.apply(void 0,t)))}catch(t){throw Od(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,id(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new ud("startAfter",e,!1)}.apply(void 0,t)))}catch(t){throw Od(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,id(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new ld("endBefore",e,!0)}.apply(void 0,t)))}catch(t){throw Od(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,id(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new ld("endAt",e,!1)}.apply(void 0,t)))}catch(t){throw Od(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(e){return uf(this._delegate,e._delegate)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=Yh(e,nf);var t=Yh(e.firestore,ff),n=df(t),r=new bd(t);return function(e,t){var n=this,r=new Ts;return e.asyncQueue.enqueueAndForget((function(){return f(n,void 0,void 0,(function(){var n;return d(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return f(this,void 0,void 0,(function(){var r,i,o,a,s;return d(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,tl(e,t,!0)];case 1:return s=u.sent(),r=new Dc(t,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=vc(a,"Failed to execute query '"+t+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,Ih(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._query).then((function(n){return new $f(t,r,e,n)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Yh(e,nf);var t=Yh(e.firestore,ff),n=df(t),r=new bd(t);return Lh(n,e._query,{source:"server"}).then((function(n){return new $f(t,r,e,n)}))}(this._delegate):function(e){e=Yh(e,nf);var t=Yh(e.firestore,ff),n=df(t),r=new bd(t);return nd(e._query),Lh(n,e._query).then((function(n){return new $f(t,r,e,n)}))}(this._delegate)).then((function(e){return new zd(t.firestore,new $f(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Bd(t),i=Fd(t,(function(t){return new zd(e.firestore,new $f(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return xd(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Nd.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(),Gd=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new jd(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),zd=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"query",{get:function(){return new Hd(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map((function(t){return new jd(e._firestore,t)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Gd(t._firestore,e)}))},e.prototype.forEach=function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new jd(n._firestore,r))}))},e.prototype.isEqual=function(e){return td(this._delegate,e._delegate)},e}(),Vd=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).firestore=t,r._delegate=n,r}return h(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new Ld(this.firestore,e):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){try{return new Ld(this.firestore,void 0===e?af(this._delegate):af(this._delegate,e))}catch(e){throw Od(e,"doc()","CollectionReference.doc()")}},t.prototype.add=function(e){var t=this;return function(e,t){var n=Yh(e.firestore,ff),r=af(e),i=vd(e.converter,t);return Ed(n,[Mf(Cf(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,No.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Ld(t.firestore,e)}))},t.prototype.isEqual=function(e){return sf(this._delegate,e._delegate)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Nd.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(Hd);function Wd(e){return Yh(e,tf)}var qd=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._delegate=new(gf.bind.apply(gf,p([void 0],e)))}return e.documentId=function(){return new e(ni.keyField().canonicalString())},e.prototype.isEqual=function(e){return(e=(0,v.getModularInstance)(e))instanceof gf&&this._delegate._internalPath.isEqual(e._internalPath)},e}(),Kd=function(){function e(e){this._delegate=e}return e.serverTimestamp=function(){var t=new Rf("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new kf("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Pf("arrayUnion",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Df("arrayRemove",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(e){return new Nf("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e}();function Jd(e){return function(e,t){var n=df(e=Yh(e,ff)),r=new hf;return function(e,t,n,r){var i=this,o=function(e,t){return function(e,t){return new wh(e,t)}(function(e,t){if(e instanceof Uint8Array)return bh(e,t);if(e instanceof ArrayBuffer)return bh(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Ll(t));e.asyncQueue.enqueueAndForget((function(){return f(i,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return t=ph,[4,Ph(e)];case 1:return t.apply(void 0,[n.sent(),o,r]),[2]}}))}))}))}(n,e._databaseId,t,r),r}(this._delegate,e)}function Qd(e){var t,n,r=this;return(t=this._delegate,n=e,function(e,t){var n=this;return e.asyncQueue.enqueue((function(){return f(n,void 0,void 0,(function(){var n;return d(this,(function(r){switch(r.label){case 0:return n=function(e,t){var n=Gr(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ke.getNamedQuery(e,t)}))},[4,Ih(e)];case 1:return[2,n.apply(void 0,[r.sent(),t])]}}))}))}))}(df(t=Yh(t,ff)),n).then((function(e){return e?new nf(t,null,e.query):null}))).then((function(e){return e?new Hd(r,e):null}))}var Xd=n(181),Yd={Firestore:Id,GeoPoint:_f,Timestamp:Jr,Blob:Md,Transaction:Pd,WriteBatch:Dd,DocumentReference:Ld,DocumentSnapshot:Ud,Query:Hd,QueryDocumentSnapshot:jd,QuerySnapshot:zd,CollectionReference:Vd,FieldPath:qd,FieldValue:Kd,setLogLevel:function(e){var t;t=e,Nr.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Xd.Component("firestore",(function(e){return function(e,t){return new Id(e,new ff(e,t),new kd)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Yd)))}(e),e.registerVersion("@firebase/firestore","2.4.1")}(l.default),function(e){e.prototype.loadBundle=Jd,e.prototype.namedQuery=Qd}(Id);var Zd=function(e,t){return Zd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Zd(e,t)};function $d(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(lU){o(lU)}}function s(e){try{u(r.throw(e))}catch(lU){o(lU)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function ep(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(lU){o=[6,lU],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;Object.create;var tp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},np=function(e){function t(n,r,i){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=i,o}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Zd(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error);var rp=function(){function e(e,t){var n=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then((function(e){return n.auth=e}),(function(){})),this.messaging||t.get().then((function(e){return n.messaging=e}),(function(){}))}return e.prototype.getAuthToken=function(){return $d(this,void 0,void 0,(function(){var e;return ep(this,(function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},e.prototype.getInstanceIdToken=function(){return $d(this,void 0,void 0,(function(){return ep(this,(function(e){switch(e.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},e.prototype.getContext=function(){return $d(this,void 0,void 0,(function(){var e,t;return ep(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}}))}))},e}();function ip(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var op=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map((function(e){return t.encode(e)}));if("function"===typeof e||"object"===typeof e)return ip(e,(function(e){return t.encode(e)}));throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((function(e){return t.decode(e)})):"function"===typeof e||"object"===typeof e?ip(e,(function(e){return t.decode(e)})):e},e}();var ap=function(){function e(e,t,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=e,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new op,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new rp(t,n),this.cancelAllRequests=new Promise((function(e){a.deleteService=function(){return e()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(lU){this.customDomain=null,this.region=i}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+t+"/"+this.region+"/"+e:null!==this.customDomain?this.customDomain+"/"+e:"https://"+this.region+"-"+t+".cloudfunctions.net/"+e},e.prototype.useEmulator=function(e,t){this.emulatorOrigin="http://"+e+":"+t},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},e.prototype.postJSON=function(e,t,n){return $d(this,void 0,void 0,(function(){var r,i,o;return ep(this,(function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=a.sent())&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},e.prototype.getAppCheckToken=function(){return $d(this,void 0,void 0,(function(){var e;return ep(this,(function(t){switch(t.label){case 0:return(e=this.appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,t.sent().token];case 2:return[2,null]}}))}))},e.prototype.call=function(e,t,n){return $d(this,void 0,void 0,(function(){var r,i,o,a,s,u,l,c,h,f,d;return ep(this,(function(p){switch(p.label){case 0:return r=this._url(e),t=this.serializer.encode(t),i={data:t},o={},[4,this.contextProvider.getContext()];case 1:return(a=p.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,u=function(e){var t,n=new Promise((function(n,r){t=setTimeout((function(){r(new np("deadline-exceeded","deadline-exceeded"))}),e)}));return{timer:t,promise:n}}(s),l=u.timer,c=u.promise,[4,Promise.race([sp(l,this.postJSON(r,i,o)),c,sp(l,this.cancelAllRequests)])];case 2:if(!(h=p.sent()))throw new np("cancelled","Firebase Functions instance was deleted.");if(f=function(e,t,n){var r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r,o=void 0;try{var a=t&&t.error;if(a){var s=a.status;if("string"===typeof s){if(!tp[s])return new np("internal","internal");r=tp[s],i=s}var u=a.message;"string"===typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(lU){}return"ok"===r?null:new np(r,i,o)}(h.status,h.json,this.serializer),f)throw f;if(!h.json)throw new np("internal","Response is not valid JSON object.");if("undefined"===typeof(d=h.json.data)&&(d=h.json.result),"undefined"===typeof d)throw new np("internal","Response is missing data field.");return[2,{data:this.serializer.decode(d)}]}}))}))},e}();function sp(e,t){return $d(this,void 0,void 0,(function(){var n;return ep(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}}))}))}!function(e,t){var n={Functions:ap};e.INTERNAL.registerComponent(new Xd.Component("functions",(function(e,n){var r=n.instanceIdentifier,i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal"),s=e.getProvider("messaging");return new ap(i,o,s,a,r,t)}),"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}(l.default,fetch.bind(self)),l.default.registerVersion("@firebase/functions","0.6.16");var up=function(){return up=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},up.apply(this,arguments)};function lp(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(lU){o(lU)}}function s(e){try{u(r.throw(e))}catch(lU){o(lU)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function cp(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(lU){o=[6,lU],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function hp(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function fp(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}Object.create;var dp,pp=n(494),vp="0.4.32",mp=1e4,gp="w:0.4.32",yp="FIS_v2",bp=36e5,_p=((dp={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',dp["not-registered"]="Firebase Installation is not registered.",dp["installation-not-found"]="Firebase Installation not found.",dp["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',dp["app-offline"]="Could not process request. Application offline.",dp["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",dp),wp=new v.ErrorFactory("installations","Installations",_p);function xp(e){return e instanceof v.FirebaseError&&e.code.includes("request-failed")}function Ep(e){return"https://firebaseinstallations.googleapis.com/v1/projects/"+e.projectId+"/installations"}function Sp(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function Ap(e,t){return lp(this,void 0,void 0,(function(){var n,r;return cp(this,(function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,wp.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function Tp(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Cp(e,t){var n=t.refreshToken,r=Tp(e);return r.append("Authorization",function(e){return"FIS_v2 "+e}(n)),r}function Mp(e){return lp(this,void 0,void 0,(function(){var t;return cp(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return(t=n.sent()).status>=500&&t.status<600?[2,e()]:[2,t]}}))}))}function kp(e,t){var n=t.fid;return lp(this,void 0,void 0,(function(){var t,r,i,o,a,s;return cp(this,(function(u){switch(u.label){case 0:return t=Ep(e),r=Tp(e),i={fid:n,authVersion:yp,appId:e.appId,sdkVersion:gp},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,Mp((function(){return fetch(t,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return s=u.sent(),[2,{fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:Sp(s.authToken)}];case 3:return[4,Ap("Create Installation",a)];case 4:throw u.sent()}}))}))}function Ip(e){return new Promise((function(t){setTimeout(t,e)}))}function Rp(e){var t=btoa(String.fromCharCode.apply(String,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([],fp(e))));return t.replace(/\+/g,"-").replace(/\//g,"_")}var Pp=/^[cdef][\w-]{21}$/;function Dp(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return Rp(e).substr(0,22)}(e);return Pp.test(t)?t:""}catch(Mf){return""}}function Np(e){return e.appName+"!"+e.appId}var Lp=new Map;function Op(e,t){var n=Np(e);Bp(n,t),function(e,t){var n=Up();n&&n.postMessage({key:e,fid:t});jp()}(n,t)}function Bp(e,t){var n,r,i=Lp.get(e);if(i)try{for(var o=hp(i),a=o.next();!a.done;a=o.next()){(0,a.value)(t)}}catch(s){n={error:s}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var Fp=null;function Up(){return!Fp&&"BroadcastChannel"in self&&((Fp=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){Bp(e.data.key,e.data.fid)}),Fp}function jp(){0===Lp.size&&Fp&&(Fp.close(),Fp=null)}var Hp,Gp="firebase-installations-store",zp=null;function Vp(){return zp||(zp=(0,pp.openDb)("firebase-installations-database",1,(function(e){if(0===e.oldVersion)e.createObjectStore(Gp)}))),zp}function Wp(e,t){return lp(this,void 0,void 0,(function(){var n,r,i,o,a;return cp(this,(function(s){switch(s.label){case 0:return n=Np(e),[4,Vp()];case 1:return r=s.sent(),i=r.transaction(Gp,"readwrite"),[4,(o=i.objectStore(Gp)).get(n)];case 2:return a=s.sent(),[4,o.put(t,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===t.fid||Op(e,t.fid),[2,t]}}))}))}function qp(e){return lp(this,void 0,void 0,(function(){var t,n,r;return cp(this,(function(i){switch(i.label){case 0:return t=Np(e),[4,Vp()];case 1:return n=i.sent(),[4,(r=n.transaction(Gp,"readwrite")).objectStore(Gp).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Kp(e,t){return lp(this,void 0,void 0,(function(){var n,r,i,o,a,s;return cp(this,(function(u){switch(u.label){case 0:return n=Np(e),[4,Vp()];case 1:return r=u.sent(),i=r.transaction(Gp,"readwrite"),[4,(o=i.objectStore(Gp)).get(n)];case 2:return a=u.sent(),void 0!==(s=t(a))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||Op(e,s.fid),[2,s]}}))}))}function Jp(e){return lp(this,void 0,void 0,(function(){var t,n,r;return cp(this,(function(i){switch(i.label){case 0:return[4,Kp(e,(function(n){var r=function(e){return Yp(e||{fid:Dp(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(wp.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return lp(this,void 0,void 0,(function(){var n,r;return cp(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,kp(e,t)];case 1:return n=i.sent(),[2,Wp(e,n)];case 2:return xp(r=i.sent())&&409===r.customData.serverCode?[4,qp(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Wp(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Qp(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function Qp(e){return lp(this,void 0,void 0,(function(){var t,n,r,i;return cp(this,(function(o){switch(o.label){case 0:return[4,Xp(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,Ip(100)];case 3:return o.sent(),[4,Xp(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,Jp(e)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}}))}))}function Xp(e){return Kp(e,(function(e){if(!e)throw wp.create("installation-not-found");return Yp(e)}))}function Yp(e){return 1===(t=e).registrationStatus&&t.registrationTime+mp<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function Zp(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return lp(this,void 0,void 0,(function(){var e,i,o,a,s,u,l;return cp(this,(function(c){switch(c.label){case 0:return e=function(e,t){var n=t.fid;return Ep(e)+"/"+n+"/authTokens:generate"}(n,t),i=Cp(n,t),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:gp}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,Mp((function(){return fetch(e,s)}))];case 1:return(u=c.sent()).ok?[4,u.json()]:[3,3];case 2:return l=c.sent(),[2,Sp(l)];case 3:return[4,Ap("Generate Auth Token",u)];case 4:throw c.sent()}}))}))}function $p(e,t){return void 0===t&&(t=!1),lp(this,void 0,void 0,(function(){var n,r,i;return cp(this,(function(o){switch(o.label){case 0:return[4,Kp(e.appConfig,(function(r){if(!tv(r))throw wp.create("not-registered");var i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+bp}(e)}(i))return r;if(1===i.requestStatus)return n=function(e,t){return lp(this,void 0,void 0,(function(){var n,r;return cp(this,(function(i){switch(i.label){case 0:return[4,ev(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,Ip(100)];case 3:return i.sent(),[4,ev(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,$p(e,t)]:[2,r]}}))}))}(e,t),r;if(!navigator.onLine)throw wp.create("app-offline");var o=function(e){var t={requestStatus:1,requestTime:Date.now()};return up(up({},e),{authToken:t})}(r);return n=function(e,t){return lp(this,void 0,void 0,(function(){var n,r,i;return cp(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Zp(e,t)];case 1:return n=o.sent(),i=up(up({},t),{authToken:n}),[4,Wp(e.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!xp(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,qp(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=up(up({},t),{authToken:{requestStatus:0}}),[4,Wp(e.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(e,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function ev(e){return Kp(e,(function(e){if(!tv(e))throw wp.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+mp<Date.now()?up(up({},e),{authToken:{requestStatus:0}}):e}))}function tv(e){return void 0!==e&&2===e.registrationStatus}function nv(e){return lp(this,void 0,void 0,(function(){var t;return cp(this,(function(n){switch(n.label){case 0:return[4,Jp(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function rv(e,t){return lp(this,void 0,void 0,(function(){var n,r,i,o;return cp(this,(function(a){switch(a.label){case 0:return n=function(e,t){var n=t.fid;return Ep(e)+"/"+n}(e,t),r=Cp(e,t),i={method:"DELETE",headers:r},[4,Mp((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,Ap("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}function iv(e,t){var n=e.appConfig;return function(e,t){Up();var n=Np(e),r=Lp.get(n);r||(r=new Set,Lp.set(n,r)),r.add(t)}(n,t),function(){!function(e,t){var n=Np(e),r=Lp.get(n);r&&(r.delete(t),0===r.size&&Lp.delete(n),jp())}(n,t)}}function ov(e){return wp.create("missing-app-config-values",{valueName:e})}(Hp=l.default).INTERNAL.registerComponent(new Xd.Component("installations",(function(e){var t=e.getProvider("app").getImmediate(),n=function(e){var t,n;if(!e||!e.options)throw ov("App Configuration");if(!e.name)throw ov("App Name");try{for(var r=hp(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw ov(o)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),r={appConfig:n,platformLoggerProvider:e.getProvider("platform-logger")},i={app:t,getId:function(){return function(e){return lp(this,void 0,void 0,(function(){var t,n,r;return cp(this,(function(i){switch(i.label){case 0:return[4,Jp(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,(r=t.registrationPromise)?r.catch(console.error):$p(e).catch(console.error),[2,n.fid]}}))}))}(r)},getToken:function(e){return function(e,t){return void 0===t&&(t=!1),lp(this,void 0,void 0,(function(){return cp(this,(function(n){switch(n.label){case 0:return[4,nv(e.appConfig)];case 1:return n.sent(),[4,$p(e,t)];case 2:return[2,n.sent().token]}}))}))}(r,e)},delete:function(){return function(e){return lp(this,void 0,void 0,(function(){var t,n;return cp(this,(function(r){switch(r.label){case 0:return[4,Kp(t=e.appConfig,(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw wp.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw wp.create("app-offline");case 3:return[4,rv(t,n)];case 4:return r.sent(),[4,qp(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(r)},onIdChange:function(e){return iv(r,e)}};return i}),"PUBLIC")),Hp.registerVersion("@firebase/installations",vp);var av=function(){return av=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},av.apply(this,arguments)};function sv(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(lU){o(lU)}}function s(e){try{u(r.throw(e))}catch(lU){o(lU)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function uv(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(lU){o=[6,lU],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function lv(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function cv(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}Object.create;var hv,fv,dv=n(365),pv=((hv={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',hv["only-available-in-window"]="This method is available in a Window context.",hv["only-available-in-sw"]="This method is available in a service worker context.",hv["permission-default"]="The notification permission was not granted and dismissed instead.",hv["permission-blocked"]="The notification permission was not granted and blocked instead.",hv["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",hv["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",hv["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",hv["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",hv["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",hv["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",hv["token-update-no-token"]="FCM returned no token when updating the user to push.",hv["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",hv["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",hv["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",hv["invalid-vapid-key"]="The public VAPID key must be a string.",hv["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",hv),vv=new v.ErrorFactory("messaging","Messaging",pv),mv="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",gv="google.c.a.c_id";function yv(e){var t=new Uint8Array(e),n=btoa(String.fromCharCode.apply(String,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([],cv(t))));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function bv(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(fv||(fv={}));var _v="fcm_token_details_db",wv="fcm_token_object_Store";function xv(e){return sv(this,void 0,void 0,(function(){var t,n,r,i=this;return uv(this,(function(o){switch(o.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=o.sent(),n=t.map((function(e){return e.name})),!n.includes(_v))return[2,null];o.label=2;case 2:return r=null,[4,(0,dv.openDb)(_v,5,(function(t){return sv(i,void 0,void 0,(function(){var n,i,o,a;return uv(this,(function(s){switch(s.label){case 0:return t.oldVersion<2?[2]:t.objectStoreNames.contains(wv)?[4,(n=t.transaction.objectStore(wv)).index("fcmSenderId").get(e)]:[2];case 1:return i=s.sent(),[4,n.clear()];case 2:if(s.sent(),!i)return[2];if(2===t.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];r={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"===typeof o.vapidKey?o.vapidKey:yv(o.vapidKey)}}}else(3===t.oldVersion||4===t.oldVersion)&&(r={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:yv(o.auth),p256dh:yv(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:yv(o.vapidKey)}});return[2]}}))}))}))];case 3:return o.sent().close(),[4,(0,dv.deleteDb)(_v)];case 4:return o.sent(),[4,(0,dv.deleteDb)("fcm_vapid_details_db")];case 5:return o.sent(),[4,(0,dv.deleteDb)("undefined")];case 6:return o.sent(),[2,Ev(r)?r:null]}}))}))}function Ev(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}var Sv="firebase-messaging-store",Av=null;function Tv(){return Av||(Av=(0,dv.openDb)("firebase-messaging-database",1,(function(e){if(0===e.oldVersion)e.createObjectStore(Sv)}))),Av}function Cv(e){return sv(this,void 0,void 0,(function(){var t,n,r;return uv(this,(function(i){switch(i.label){case 0:return t=Iv(e),[4,Tv()];case 1:return[4,i.sent().transaction(Sv).objectStore(Sv).get(t)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,xv(e.appConfig.senderId)];case 4:return(r=i.sent())?[4,Mv(e,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function Mv(e,t){return sv(this,void 0,void 0,(function(){var n,r,i;return uv(this,(function(o){switch(o.label){case 0:return n=Iv(e),[4,Tv()];case 1:return r=o.sent(),[4,(i=r.transaction(Sv,"readwrite")).objectStore(Sv).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}}))}))}function kv(e){return sv(this,void 0,void 0,(function(){var t,n,r;return uv(this,(function(i){switch(i.label){case 0:return t=Iv(e),[4,Tv()];case 1:return n=i.sent(),[4,(r=n.transaction(Sv,"readwrite")).objectStore(Sv).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Iv(e){return e.appConfig.appId}function Rv(e,t){return sv(this,void 0,void 0,(function(){var n,r,i,o,a,s;return uv(this,(function(u){switch(u.label){case 0:return[4,Lv(e)];case 1:n=u.sent(),r=Ov(t),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Nv(e.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),vv.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,vv.create("token-subscribe-failed",{errorInfo:s});if(!o.token)throw vv.create("token-subscribe-no-token");return[2,o.token]}}))}))}function Pv(e,t){return sv(this,void 0,void 0,(function(){var n,r,i,o,a,s;return uv(this,(function(u){switch(u.label){case 0:return[4,Lv(e)];case 1:n=u.sent(),r=Ov(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Nv(e.appConfig)+"/"+t.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),vv.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,vv.create("token-update-failed",{errorInfo:s});if(!o.token)throw vv.create("token-update-no-token");return[2,o.token]}}))}))}function Dv(e,t){return sv(this,void 0,void 0,(function(){var n,r,i,o,a;return uv(this,(function(s){switch(s.label){case 0:return[4,Lv(e)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(Nv(e.appConfig)+"/"+t,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,vv.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),vv.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))}function Nv(e){return"https://fcmregistrations.googleapis.com/v1/projects/"+e.projectId+"/registrations"}function Lv(e){var t=e.appConfig,n=e.installations;return sv(this,void 0,void 0,(function(){var e;return uv(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}}))}))}function Ov(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,o={web:{endpoint:r,auth:n,p256dh:t}};return i!==mv&&(o.web.applicationPubKey=i),o}function Bv(e,t,n){return sv(this,void 0,void 0,(function(){var r,i,o,a;return uv(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw vv.create("permission-blocked");return[4,Hv(t,n)];case 1:return r=s.sent(),[4,Cv(e)];case 2:return i=s.sent(),o={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:yv(r.getKey("auth")),p256dh:yv(r.getKey("p256dh"))},i?[3,3]:[2,jv(e,o)];case 3:if(function(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,o=t.p256dh===e.p256dh;return n&&r&&i&&o}(i.subscriptionOptions,o))return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,Dv(e,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,jv(e,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,Uv({token:i.token,createTime:Date.now(),subscriptionOptions:o},e,t)]:[2,i.token];case 9:return[2]}}))}))}function Fv(e,t){return sv(this,void 0,void 0,(function(){var n,r;return uv(this,(function(i){switch(i.label){case 0:return[4,Cv(e)];case 1:return(n=i.sent())?[4,Dv(e,n.token)]:[3,4];case 2:return i.sent(),[4,kv(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function Uv(e,t,n){return sv(this,void 0,void 0,(function(){var r,i,o;return uv(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,Pv(t,e)];case 1:return r=a.sent(),i=av(av({},e),{token:r,createTime:Date.now()}),[4,Mv(t,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,Fv(t,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function jv(e,t){return sv(this,void 0,void 0,(function(){var n,r;return uv(this,(function(i){switch(i.label){case 0:return[4,Rv(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,Mv(e,r)];case 2:return i.sent(),[2,r.token]}}))}))}function Hv(e,t){return sv(this,void 0,void 0,(function(){var n;return uv(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:bv(t)})]}}))}))}function Gv(e){return"object"===typeof e&&!!e&&gv in e}function zv(e){return new Promise((function(t){setTimeout(t,e)}))}var Vv=function(){function e(e){var t=this;this.firebaseDependencies=e,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(e){e.waitUntil(t.onPush(e))})),self.addEventListener("pushsubscriptionchange",(function(e){e.waitUntil(t.onSubChange(e))})),self.addEventListener("notificationclick",(function(e){e.waitUntil(t.onNotificationClick(e))}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(e){if(this.isOnBackgroundMessageUsed=!1,!e||"function"!==typeof e)throw vv.create("invalid-bg-handler");this.bgMessageHandler=e},e.prototype.onBackgroundMessage=function(e){var t=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=e,function(){t.bgMessageHandler=null}},e.prototype.getToken=function(){var e,t;return sv(this,void 0,void 0,(function(){var n;return uv(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,Cv(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(t=null===(e=null===n||void 0===n?void 0:n.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==t?t:mv,r.label=2;case 2:return[2,Bv(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},e.prototype.deleteToken=function(){return Fv(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw vv.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw vv.create("use-vapid-key-after-get-token");if("string"!==typeof e||0===e.length)throw vv.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(){throw vv.create("only-available-in-window")},e.prototype.onMessage=function(){throw vv.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw vv.create("only-available-in-window")},e.prototype.onPush=function(e){return sv(this,void 0,void 0,(function(){var t,n,r,i;return uv(this,(function(o){switch(o.label){case 0:return t=function(e){var t=e.data;if(!t)return null;try{return t.json()}catch(n){return null}}(e),t?[4,Jv()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(e){return e.some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,Kv(n,t)]:(r=!1,t.notification?[4,Qv(Wv(t))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return function(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}(t,e),t}(t),"function"===typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,zv(1e3)]);case 4:return o.sent(),[2]}}))}))},e.prototype.onSubChange=function(e){var t,n;return sv(this,void 0,void 0,(function(){var r;return uv(this,(function(i){switch(i.label){case 0:return e.newSubscription?[3,2]:[4,Fv(this.firebaseDependencies,self.registration)];case 1:case 5:return i.sent(),[2];case 2:return[4,Cv(this.firebaseDependencies)];case 3:return r=i.sent(),[4,Fv(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,Bv(this.firebaseDependencies,self.registration,null!==(n=null===(t=null===r||void 0===r?void 0:r.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==n?n:mv)]}}))}))},e.prototype.onNotificationClick=function(e){var t,n;return sv(this,void 0,void 0,(function(){var r,i,o,a,s;return uv(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===n?void 0:n.FCM_MSG)?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),i=function(e){var t,n,r,i=null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action;if(i)return i;return Gv(e.data)?self.location.origin:null}(r),i?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,qv(o)]):[2]):[2];case 1:return(s=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,zv(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=fv.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}}))}))},e}();function Wv(e){var t,n=av({},e.notification);return n.data=((t={}).FCM_MSG=e,t),n}function qv(e){return sv(this,void 0,void 0,(function(){var t,n,r,i,o,a,s;return uv(this,(function(u){switch(u.label){case 0:return[4,Jv()];case 1:t=u.sent();try{for(n=lv(t),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),e.host===o.host)return[2,i]}catch(l){a={error:l}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}function Kv(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=fv.PUSH_RECEIVED;try{for(var i=lv(e),o=i.next();!o.done;o=i.next()){o.value.postMessage(t)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function Jv(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Qv(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}var Xv=function(){function e(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(e){return t.messageEventListener(e)}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(e){return sv(this,void 0,void 0,(function(){var t,n;return uv(this,(function(r){switch(r.label){case 0:return(t=e.data).isFirebaseMessaging?(this.onMessageCallback&&t.messageType===fv.PUSH_RECEIVED&&("function"===typeof this.onMessageCallback?this.onMessageCallback(function(e){return delete e.messageType,delete e.isFirebaseMessaging,e}(Object.assign({},t))):this.onMessageCallback.next(Object.assign({},t))),Gv(n=t.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(t.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(e){return sv(this,void 0,void 0,(function(){return uv(this,(function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw vv.create("permission-blocked");return[4,this.updateVapidKey(null===e||void 0===e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null===e||void 0===e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,Bv(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},e.prototype.updateVapidKey=function(e){return sv(this,void 0,void 0,(function(){return uv(this,(function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=mv),[2]}))}))},e.prototype.updateSwReg=function(e){return sv(this,void 0,void 0,(function(){return uv(this,(function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw vv.create("invalid-sw-registration");return this.swRegistration=e,[2]}}))}))},e.prototype.registerDefaultSw=function(){return sv(this,void 0,void 0,(function(){var e,t;return uv(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw t=n.sent(),vv.create("failed-service-worker-registration",{browserErrorMessage:t.message});case 3:return[2]}}))}))},e.prototype.deleteToken=function(){return sv(this,void 0,void 0,(function(){return uv(this,(function(e){switch(e.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:return[2,Fv(this.firebaseDependencies,this.swRegistration)]}}))}))},e.prototype.requestPermission=function(){return sv(this,void 0,void 0,(function(){var e;return uv(this,(function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?vv.create("permission-blocked"):vv.create("permission-default")}}))}))},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw vv.create("use-vapid-key-after-get-token");if("string"!==typeof e||0===e.length)throw vv.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw vv.create("invalid-sw-registration");if(this.swRegistration)throw vv.create("use-sw-after-get-token");this.swRegistration=e},e.prototype.onMessage=function(e){var t=this;return this.onMessageCallback=e,function(){t.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw vv.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw vv.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(e,t){return sv(this,void 0,void 0,(function(){var n;return uv(this,(function(r){switch(r.label){case 0:return n=function(e){switch(e){case fv.NOTIFICATION_CLICKED:return"notification_open";case fv.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:t["google.c.a.c_id"],message_name:t["google.c.a.c_l"],message_time:t["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},e}();function Yv(e){return vv.create("missing-app-config-values",{valueName:e})}var Zv={isSupported:$v};function $v(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}l.default.INTERNAL.registerComponent(new Xd.Component("messaging",(function(e){var t=e.getProvider("app").getImmediate(),n=function(e){var t,n;if(!e||!e.options)throw Yv("App Configuration Object");if(!e.name)throw Yv("App Name");var r=e.options;try{for(var i=lv(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw Yv(a)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(t),r={app:t,appConfig:n,installations:e.getProvider("installations").getImmediate(),analyticsProvider:e.getProvider("analytics-internal")};if(!$v())throw vv.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new Vv(r):new Xv(r)}),"PUBLIC").setServiceProps(Zv));var em=function(e,t){return em=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},em(e,t)};var tm=function(){return tm=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},tm.apply(this,arguments)};function nm(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(lU){o(lU)}}function s(e){try{u(r.throw(e))}catch(lU){o(lU)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function rm(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(lU){o=[6,lU],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function im(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var om="firebasestorage.googleapis.com",am=function(e){function t(n,r){var i=e.call(this,sm(n),"Firebase Storage: "+r+" ("+sm(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}em(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype._codeEquals=function(e){return sm(e)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),t}(v.FirebaseError);function sm(e){return"storage/"+e}function um(){return new am("unknown","An unknown error occurred, please check the error payload for server response.")}function lm(){return new am("canceled","User canceled the upload/download.")}function cm(){return new am("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function hm(e){return new am("invalid-argument",e)}function fm(){return new am("app-deleted","The Firebase app was deleted.")}function dm(e){return new am("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function pm(e,t){return new am("invalid-format","String does not match format '"+e+"': "+t)}function vm(e){throw new am("internal-error","Internal error: "+e)}var mm={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},gm=function(e,t){this.data=e,this.contentType=t||null};function ym(e,t){switch(e){case mm.RAW:return new gm(bm(t));case mm.BASE64:case mm.BASE64URL:return new gm(_m(e,t));case mm.DATA_URL:return new gm(function(e){var t=new wm(e);return t.base64?_m(mm.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(lU){throw pm(mm.DATA_URL,"Malformed data URL.")}return bm(t)}(t.rest)}(t),new wm(t).contentType)}throw um()}function bm(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function _m(e,t){switch(e){case mm.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw pm(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case mm.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw pm(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(lU){throw pm(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var wm=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw pm(mm.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=function(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)};var xm,Em={STATE_CHANGED:"state_changed"},Sm={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Am(e){switch(e){case"running":case"pausing":case"canceling":return Sm.RUNNING;case"paused":return Sm.PAUSED;case"success":return Sm.SUCCESS;case"canceled":return Sm.CANCELED;default:return Sm.ERROR}}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(xm||(xm={}));var Tm=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=xm.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=xm.ABORT,t()})),e.xhr_.addEventListener("error",(function(){e.errorCode_=xm.NETWORK_ERROR,t()})),e.xhr_.addEventListener("load",(function(){t()}))}))}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw vm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw vm("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw vm("cannot .getStatus() before sending");try{return this.xhr_.status}catch(lU){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw vm("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},e}();var Cm=function(){function e(){}return e.prototype.createConnection=function(){return new Tm},e}(),Mm=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(lU){return new e(t,"")}if(""===r.path)return r;throw new am("invalid-default-bucket","Invalid default bucket '"+t+"'.")},e.makeFromUrl=function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+(n===om?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],l=0;l<u.length;l++){var c=u[l],h=c.regex.exec(t);if(h){var f=h[c.indices.bucket],d=h[c.indices.path];d||(d=""),r=new e(f,d),c.postModify(r);break}}if(null==r)throw function(e){return new am("invalid-url","Invalid URL '"+e+"'.")}(t);return r},e}(),km=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}();function Im(e){return"string"===typeof e||e instanceof String}function Rm(e){return Pm()&&e instanceof Blob}function Pm(){return"undefined"!==typeof Blob}function Dm(e,t,n,r){if(r<t)throw hm("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw hm("Invalid value for '"+e+"'. Expected "+n+" or less.")}function Nm(e,t){var n=t.match(/^(\w+):\/\/.+/),r=t;return null==(null===n||void 0===n?void 0:n[1])&&(r="https://"+t),r+"/v0"+e}function Lm(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}var Om=function(){function e(e,t,n,r,i,o,a,s,u,l,c){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=l,this.timeout_=u,this.pool_=c,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return e.prototype.start_=function(){var e=this;function t(t,n){var r,i=e.resolve_,o=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var s=e.callback_(a,a.getResponseText());!function(e){return void 0!==e}(s)?i():i(s)}catch(lU){o(lU)}else null!==a?((r=um()).serverResponse=a.getResponseText(),e.errorCallback_?o(e.errorCallback_(a,r)):o(r)):n.canceled?o(r=e.appDelete_?fm():lm()):o(r=new am("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new Bm(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function l(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];u||(u=!0,t.apply(null,e))}function c(t){i=setTimeout((function(){i=null,e(h,s())}),t)}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!u)if(e)l.call.apply(l,im([null,e],t));else{var i;s()||o?l.call.apply(l,im([null,e],t)):(r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),c(i))}}var f=!1;function d(e){f||(f=!0,u||(null!==i?(e||(a=2),clearTimeout(i),c(0)):e||(a=1)))}return c(0),setTimeout((function(){o=!0,d(!0)}),n),d}((function(t,n){if(n)t(!1,new Bm(!1,null,!0));else{var r=e.pool_.createConnection();e.pendingConnection_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===xm.NO_ERROR,o=r.getStatus();if(n&&!e.isRetryStatusCode_(o)){var a=-1!==e.successCodes_.indexOf(o);t(!0,new Bm(a,r))}else{var s=r.getErrorCode()===xm.ABORT;t(!1,new Bm(!1,null,s))}}))}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}}),t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},e}(),Bm=function(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n};function Fm(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Um(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Fm();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(Pm())return new Blob(e);throw new am("unsupported-environment","This browser doesn't seem to support creating Blobs")}var jm=function(){function e(e,t){var n=0,r="";Rm(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(Rm(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(Pm()){var r=t.map((function(t){return t instanceof e?t.data_:t}));return new e(Um.apply(null,r))}var i=t.map((function(e){return Im(e)?ym(mm.RAW,e).data:e.data_})),o=0;i.forEach((function(e){o+=e.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]})),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}();function Hm(e){var t;try{t=JSON.parse(e)}catch(lU){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Gm(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function zm(e,t){return t}var Vm=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||zm},Wm=null;function qm(){if(Wm)return Wm;var e=[];e.push(new Vm("bucket")),e.push(new Vm("generation")),e.push(new Vm("metageneration")),e.push(new Vm("name","fullPath",!0));var t=new Vm("name");t.xform=function(e,t){return function(e){return!Im(e)||e.length<2?e:Gm(e)}(t)},e.push(t);var n=new Vm("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Vm("timeCreated")),e.push(new Vm("updated")),e.push(new Vm("md5Hash",null,!0)),e.push(new Vm("cacheControl",null,!0)),e.push(new Vm("contentDisposition",null,!0)),e.push(new Vm("contentEncoding",null,!0)),e.push(new Vm("contentLanguage",null,!0)),e.push(new Vm("contentType",null,!0)),e.push(new Vm("metadata","customMetadata",!0)),Wm=e}function Km(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Mm(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Jm(e,t,n){var r=Hm(t);return null===r?null:Km(e,r,n)}function Qm(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}function Xm(e,t,n){var r=Hm(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=e._makeStorageReference(new Mm(t,a));r.prefixes.push(s)}if(n.items)for(var u=0,l=n.items;u<l.length;u++){var c=l[u];s=e._makeStorageReference(new Mm(t,c.name)),r.items.push(s)}return r}(e,t,r)}var Ym=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Zm(e){if(!e)throw um()}function $m(e,t){return function(n,r){var i=Jm(e,r,t);return Zm(null!==i),i}}function eg(e,t){return function(n,r){var i=Jm(e,r,t);return Zm(null!==i),function(e,t,n){var r=Hm(t);if(null===r)return null;if(!Im(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(t){var r=e.bucket,i=e.fullPath;return Nm("/b/"+o(r)+"/o/"+o(i),n)+Lm({alt:"media",token:t})}))[0]}(i,r,e.host)}}function tg(e){return function(t,n){var r,i,o;return 401===t.getStatus()?r=t.getResponseText().includes("Firebase App Check token is invalid")?new am("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new am("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new am("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new am("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function ng(e){var t=tg(e);return function(n,r){var i,o=t(n,r);return 404===n.getStatus()&&(i=e.path,o=new am("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function rg(e,t,n){var r=Nm(t.fullServerUrl(),e.host),i=e.maxOperationRetryTime,o=new Ym(r,"GET",$m(e,n),i);return o.errorHandler=ng(t),o}function ig(e,t,n,r,i){var o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=Nm(t.bucketOnlyServerUrl(),e.host),s=e.maxOperationRetryTime,u=new Ym(a,"GET",function(e,t){return function(n,r){var i=Xm(e,t,r);return Zm(null!==i),i}}(e,t.bucket),s);return u.urlParams=o,u.errorHandler=tg(t),u}function og(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}var ag=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function sg(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(lU){Zm(!1)}return Zm(!!n&&-1!==(t||["active"]).indexOf(n)),n}var ug=262144;function lg(e,t,n,r,i,o,a,s){var u=new ag(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new am("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var l=u.total-u.current,c=l;i>0&&(c=Math.min(c,i));var h=u.current,f=h+c,d={"X-Goog-Upload-Command":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},p=r.slice(h,f);if(null===p)throw cm();var v=t.maxUploadRetryTime,m=new Ym(n,"POST",(function(e,n){var i,a=sg(e,["active","final"]),s=u.current+c,l=r.size();return i="final"===a?$m(t,o)(e,n):null,new ag(s,l,"final"===a,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=s||null,m.errorHandler=tg(e),m}var cg=function(e,t,n){var r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=t,this.complete=n;else{var i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}};function hg(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}var fg=function(){function e(e,t,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=qm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return e.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}},e.prototype._shouldDoResumable=function(e){return e.size()>262144},e.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(t._state){case"running":e(r,i);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))},e.prototype._createResumable=function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=og(t,r,i),s={name:a.fullPath},u=Nm(o,e.host),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},c=Qm(a,n),h=e.maxUploadRetryTime,f=new Ym(u,"POST",(function(e){var t;sg(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(lU){Zm(!1)}return Zm(Im(t)),t}),h);return f.urlParams=s,f.headers=l,f.body=c,f.errorHandler=tg(t),f}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))},e.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,o=new Ym(n,"POST",(function(e){var t=sg(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(lU){Zm(!1)}n||Zm(!1);var i=Number(n);return Zm(!isNaN(i)),new ag(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=tg(t),o}(e._ref.storage,e._ref._location,t,e._blob),o=e._ref.storage._makeRequest(i,n,r);e._request=o,o.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))},e.prototype._continueUpload=function(){var e=this,t=ug*this._chunkMultiplier,n=new ag(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=lg(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(lU){return e._error=lU,void e._transition("error")}var s=e._ref.storage._makeRequest(a,i,o);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))},e.prototype._increaseMultiplier=function(){ug*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var e=this;this._resolveToken((function(t,n){var r=rg(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))},e.prototype._oneShotUpload=function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=og(t,r,i),l="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Qm(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",c="\r\n--"+s+"--",h=jm.getBlob(l,r,c);if(null===h)throw cm();var f={name:u.fullPath},d=Nm(o,e.host),p=e.maxUploadRetryTime,v=new Ym(d,"POST",$m(e,n),p);return v.urlParams=f,v.headers=a,v.body=h.uploadData(),v.errorHandler=tg(t),v}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))},e.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},e.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=lm(),this._state=e,this._notifyObservers()}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=Am(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,r){var i=this,o=new cg(t,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},e.prototype.then=function(e,t){return this._promise.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},e.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)},e.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))},e.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(Am(this._state)){case Sm.SUCCESS:hg(this._resolve.bind(null,this.snapshot))();break;case Sm.CANCELED:case Sm.ERROR:hg(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(e){switch(Am(this._state)){case Sm.RUNNING:case Sm.PAUSED:e.next&&hg(e.next.bind(e,this.snapshot))();break;case Sm.SUCCESS:e.complete&&hg(e.complete.bind(e))();break;default:e.error&&hg(e.error.bind(e,this._error))()}},e.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},e.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},e.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},e}(),dg=function(){function e(e,t){this._service=e,this._location=t instanceof Mm?t:Mm.makeFromUrl(t,e.host)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var e=new Mm(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return Gm(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Mm(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(e){if(""===this._location.path)throw dm(e)},e}();function pg(e){var t={prefixes:[],items:[]};return vg(e,t).then((function(){return t}))}function vg(e,t,n){return nm(this,void 0,void 0,(function(){var r,i,o;return rm(this,(function(a){switch(a.label){case 0:return[4,mg(e,{pageToken:n})];case 1:return r=a.sent(),(i=t.prefixes).push.apply(i,r.prefixes),(o=t.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,vg(e,t,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function mg(e,t){return nm(this,void 0,void 0,(function(){var n,r;return rm(this,(function(i){switch(i.label){case 0:return null!=t&&"number"===typeof t.maxResults&&Dm("options.maxResults",1,1e3,t.maxResults),n=t||{},r=ig(e.storage,e._location,"/",n.pageToken,n.maxResults),[4,e.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function gg(e,t){return nm(this,void 0,void 0,(function(){var n;return rm(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("updateMetadata"),n=function(e,t,n,r){var i=Nm(t.fullServerUrl(),e.host),o=Qm(n,r),a=e.maxOperationRetryTime,s=new Ym(i,"PATCH",$m(e,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=ng(t),s}(e.storage,e._location,t,qm()),[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function yg(e){return nm(this,void 0,void 0,(function(){var t;return rm(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getDownloadURL"),t=function(e,t,n){var r=Nm(t.fullServerUrl(),e.host),i=e.maxOperationRetryTime,o=new Ym(r,"GET",eg(e,n),i);return o.errorHandler=ng(t),o}(e.storage,e._location,qm()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise().then((function(e){if(null===e)throw new am("no-download-url","The given file does not have any download URLs.");return e}))]}}))}))}function bg(e){return nm(this,void 0,void 0,(function(){var t;return rm(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("deleteObject"),t=function(e,t){var n=Nm(t.fullServerUrl(),e.host),r=e.maxOperationRetryTime,i=new Ym(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=ng(t),i}(e.storage,e._location),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}function _g(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Mm(e._location.bucket,n);return new dg(e.storage,r)}function wg(e){return/^[A-Za-z]+:\/\//.test(e)}function xg(e,t){if(e instanceof Ag){var n=e;if(null==n._bucket)throw new am("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new dg(n,n._bucket);return null!=t?xg(r,t):r}return void 0!==t?_g(e,t):e}function Eg(e,t){if(t&&wg(t)){if(e instanceof Ag)return new dg(e,t);throw hm("To use ref(service, url), the first argument must be a Storage instance.")}return xg(e,t)}function Sg(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:Mm.makeFromBucketSpec(n,e)}var Ag=function(){function e(e,t,n,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=om,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Mm.makeFromBucketSpec(i,this._host):Sg(this._host,this.app.options)}return Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Mm.makeFromBucketSpec(this._url,e):this._bucket=Sg(e,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){Dm("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){Dm("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return nm(this,void 0,void 0,(function(){var e,t;return rm(this,(function(n){switch(n.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(t=n.sent()))return[2,t.accessToken];n.label=2;case 2:return[2,null]}}))}))},e.prototype._getAppCheckToken=function(){return nm(this,void 0,void 0,(function(){var e;return rm(this,(function(t){switch(t.label){case 0:return(e=this._appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,t.sent().token];case 2:return[2,null]}}))}))},e.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()},e.prototype._makeStorageReference=function(e){return new dg(this,e)},e.prototype._makeRequest=function(e,t,n){var r=this;if(this._deleted)return new km(fm());var i=function(e,t,n,r,i,o){var a=Lm(e.urlParams),s=e.url+a,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new Om(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,t,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},e.prototype.makeRequestWithTokens=function(e){return nm(this,void 0,void 0,(function(){var t,n,r;return rm(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return t=i.sent(),n=t[0],r=t[1],[2,this._makeRequest(e,n,r)]}}))}))},e}();function Tg(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new fg(e,new jm(t),n)}(e=(0,v.getModularInstance)(e),t,n)}function Cg(e){return function(e){return nm(this,void 0,void 0,(function(){var t;return rm(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=rg(e.storage,e._location,qm()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}(e=(0,v.getModularInstance)(e))}function Mg(e,t){return Eg(e=(0,v.getModularInstance)(e),t)}function kg(e,t,n,r){void 0===r&&(r={}),function(e,t,n,r){void 0===r&&(r={}),e.host="http://"+t+":"+n;var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:(0,v.createMockUserToken)(i,e.app.options.projectId))}(e,t,n,r)}var Ig=function(){function e(e,t,n){this._delegate=e,this.task=t,this.ref=n}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}(),Rg=function(){function e(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new Ig(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new Ig(t,n,n._ref))}),t)},e.prototype.on=function(e,t,n,r){var i=this,o=void 0;return t&&(o="function"===typeof t?function(e){return t(new Ig(e,i,i._ref))}:{next:t.next?function(e){return t.next(new Ig(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,n||void 0,r||void 0)},e}(),Pg=function(){function e(e,t){this._delegate=e,this._service=t}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new Dg(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this._delegate.items.map((function(t){return new Dg(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}(),Dg=function(){function e(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){var n=function(e,t){return _g(e,t)}(this._delegate,t);return new e(n,this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return this._throwIfRoot("put"),new Rg(Tg(this._delegate,e,t),this)},e.prototype.putString=function(e,t,n){void 0===t&&(t=mm.RAW),this._throwIfRoot("putString");var r=ym(t,e),i=tm({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Rg(new fg(this._delegate,new jm(r.data,!0),i),this)},e.prototype.listAll=function(){var e=this;return function(e){return pg(e=(0,v.getModularInstance)(e))}(this._delegate).then((function(t){return new Pg(t,e.storage)}))},e.prototype.list=function(e){var t=this;return function(e,t){return mg(e=(0,v.getModularInstance)(e),t)}(this._delegate,e||void 0).then((function(e){return new Pg(e,t.storage)}))},e.prototype.getMetadata=function(){return Cg(this._delegate)},e.prototype.updateMetadata=function(e){return function(e,t){return gg(e=(0,v.getModularInstance)(e),t)}(this._delegate,e)},e.prototype.getDownloadURL=function(){return function(e){return yg(e=(0,v.getModularInstance)(e))}(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),function(e){return bg(e=(0,v.getModularInstance)(e))}(this._delegate)},e.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw dm(e)},e}(),Ng=function(){function e(e,t){this.app=e,this._delegate=t}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){if(wg(e))throw hm("ref() expected a child path but got a URL, use refFromURL instead.");return new Dg(Mg(this._delegate,e),this)},e.prototype.refFromURL=function(e){if(!wg(e))throw hm("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Mm.makeFromUrl(e,this._delegate.host)}catch(lU){throw hm("refFromUrl() expected a valid full URL but got an invalid one.")}return new Dg(Mg(this._delegate,e),this)},e.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},e.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),kg(this._delegate,e,t,n)},e}();function Lg(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new Ng(r,new Ag(r,i,o,new Cm,n,l.default.SDK_VERSION))}!function(e){var t={TaskState:Sm,TaskEvent:Em,StringFormat:mm,Storage:Ag,Reference:Dg};e.INTERNAL.registerComponent(new Xd.Component("storage",Lg,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage","0.7.1")}(l.default);var Og=function(){return Og=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Og.apply(this,arguments)};Object.create;function Bg(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var Fg,Ug,jg,Hg="0.4.18",Gg=Hg,zg="FB-PERF-TRACE-MEASURE",Vg="_wt_",Wg="_fcp",qg="_fid",Kg="@firebase/performance/config",Jg="@firebase/performance/configexpire",Qg="Performance",Xg=((Fg={})["trace started"]="Trace {$traceName} was started before.",Fg["trace stopped"]="Trace {$traceName} is not running.",Fg["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Fg["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Fg["no window"]="Window is not available.",Fg["no app id"]="App id is not available.",Fg["no project id"]="Project id is not available.",Fg["no api key"]="Api key is not available.",Fg["invalid cc log"]="Attempted to queue invalid cc event",Fg["FB not default"]="Performance can only start when Firebase app instance is the default one.",Fg["RC response not ok"]="RC response is not ok",Fg["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Fg["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Fg["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Fg["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Fg),Yg=new v.ErrorFactory("performance",Qg,Xg),Zg=new m.Logger(Qg);Zg.logLevel=m.LogLevel.INFO;var $g,ey=function(){function e(e){if(this.window=e,!e)throw Yg.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},e.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},e.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},e.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,v.isIndexedDBAvailable)()||(Zg.info("IndexedDB is not supported by current browswer"),!1):(Zg.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},e.prototype.setupObserver=function(e,t){if(this.PerformanceObserver){var n=new this.PerformanceObserver((function(e){for(var n=0,r=e.getEntries();n<r.length;n++){var i=r[n];t(i)}}));n.observe({entryTypes:[e]})}},e.getInstance=function(){return void 0===Ug&&(Ug=new e(jg)),Ug},e}();function ty(e,t){var n=e.length-t.length;if(n<0||n>1)throw Yg.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}var ny,ry,iy=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=ty("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=ty("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw Yg.create("no app id");return e},e.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw Yg.create("no project id");return e},e.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw Yg.create("no api key");return e},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return void 0===$g&&($g=new e),$g},e}();function oy(){return ny}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"}(ry||(ry={}));var ay=["firebase_","google_","ga_"],sy=new RegExp("^[a-zA-Z]\\w*$");function uy(){var e=ey.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function ly(){switch(ey.getInstance().document.visibilityState){case"visible":return ry.VISIBLE;case"hidden":return ry.HIDDEN;default:return ry.UNKNOWN}}function cy(){var e=ey.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var hy="0.0.1",fy=!0,dy="FIREBASE_INSTALLATIONS_AUTH";function py(e){var t=function(){var e=ey.getInstance().localStorage;if(!e)return;var t=e.getItem(Jg);if(!t||(n=t,!(Number(n)>Date.now())))return;var n;var r=e.getItem(Kg);if(!r)return;try{return JSON.parse(r)}catch(Mf){return}}();return t?(my(t),Promise.resolve()):function(e){return function(){var e=iy.getInstance().installationsService.getToken();return e.then((function(e){})),e}().then((function(t){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+iy.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+iy.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:dy+" "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:iy.getInstance().getAppId(),app_version:Gg,sdk_version:hy})});return fetch(r).then((function(e){if(e.ok)return e.json();throw Yg.create("RC response not ok")}))})).catch((function(){Zg.info(vy)}))}(e).then(my).then((function(e){return function(e){var t=ey.getInstance().localStorage;if(!e||!t)return;t.setItem(Kg,JSON.stringify(e)),t.setItem(Jg,String(Date.now()+60*iy.getInstance().configTimeToLive*60*1e3))}(e)}),(function(){}))}var vy="Could not fetch config, will use default configs";function my(e){if(!e)return e;var t=iy.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=fy,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=gy(t.tracesSamplingRate),t.logNetworkAfterSampling=gy(t.networkRequestsSamplingRate),e}function gy(e){return Math.random()<=e}var yy,by=1;function _y(){return by=2,yy=yy||function(){var e=ey.getInstance().document;return new Promise((function(t){if(e&&"complete"!==e.readyState){var n=function n(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()}))}().then((function(){return function(){var e=iy.getInstance().installationsService.getId();return e.then((function(e){ny=e})),e}()})).then((function(e){return py(e)})).then((function(){return wy()}),(function(){return wy()}))}function wy(){by=3}var xy,Ey=1e4,Sy=3,Ay=[],Ty=!1;function Cy(e){setTimeout((function(){if(0!==Sy)return Ay.length?void function(){var e=Ay.splice(0,1e3),t=e.map((function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}}));(function(e,t){return function(e){var t=iy.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}(e).then((function(e){return e.ok||Zg.info("Call to Firebase backend failed."),e.json()})).then((function(e){var n=Number(e.nextRequestWaitMillis),r=Ey;isNaN(n)||(r=Math.max(n,r));var i=e.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(Ay=Bg(Bg([],t),Ay),Zg.info("Retry transport request later.")),Sy=3,Cy(r)}))})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:iy.getInstance().logSource,log_event:t},e).catch((function(){Ay=Bg(Bg([],e),Ay),Sy--,Zg.info("Tries left: "+Sy+"."),Cy(Ey)}))}():Cy(Ey)}),e)}function My(e){if(!e.eventTime||!e.message)throw Yg.create("invalid cc log");Ay=Bg(Bg([],Ay),[e])}function ky(e,t){xy||(xy=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];My({message:e.apply(void 0,t),eventTime:Date.now()})}}(Py)),xy(e,t)}function Iy(e){var t=iy.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&ey.getInstance().requiredApisAvailable()&&(e.isAuto&&ly()!==ry.VISIBLE||(3===by?Ry(e):_y().then((function(){return Ry(e)}),(function(){return Ry(e)}))))}function Ry(e){if(oy()){var t=iy.getInstance();t.loggingEnabled&&t.logTraceAfterSampling&&setTimeout((function(){return ky(e,1)}),0)}}function Py(e,t){return 0===t?function(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:Dy(),network_request_metric:t};return JSON.stringify(n)}(e):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);var r={application_info:Dy(),trace_metric:t};return JSON.stringify(r)}(e)}function Dy(){return{google_app_id:iy.getInstance().getAppId(),app_instance_id:oy(),web_app_info:{sdk_version:Gg,page_url:ey.getInstance().getUrl(),service_worker_status:uy(),visibility_state:ly(),effective_connection_type:cy()},application_process_state:0}}var Ny=["_fp",Wg,qg];var Ly=function(){function e(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=ey.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(1!==this.state)throw Yg.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(2!==this.state)throw Yg.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Iy(this)},e.prototype.record=function(e,t,n){if(e<=0)throw Yg.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw Yg.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=Og({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}Iy(this)},e.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},e.prototype.putMetric=function(e,t){if(n=e,r=this.name,0===n.length||n.length>100||!(r&&r.startsWith(Vg)&&Ny.indexOf(n)>-1)&&n.startsWith("_"))throw Yg.create("invalid custom metric name",{customMetricName:e});var n,r;this.counters[e]=function(e){var t=Math.floor(e);return t<e&&Zg.info("Metric value should be an Integer, setting the value as : "+t+"."),t}(t)},e.prototype.getMetric=function(e){return this.counters[e]||0},e.prototype.putAttribute=function(e,t){var n,r=!(0===(n=e).length||n.length>40)&&!ay.some((function(e){return n.startsWith(e)}))&&!!n.match(sy),i=function(e){return 0!==e.length&&e.length<=100}(t);if(r&&i)this.customAttributes[e]=t;else{if(!r)throw Yg.create("invalid attribute name",{attributeName:e});if(!i)throw Yg.create("invalid attribute value",{attributeValue:t})}},e.prototype.getAttribute=function(e){return this.customAttributes[e]},e.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},e.prototype.getAttributes=function(){return Og({},this.customAttributes)},e.prototype.setStartTime=function(e){this.startTimeUs=e},e.prototype.setDuration=function(e){this.durationUs=e},e.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},e.createOobTrace=function(t,n,r){var i=ey.getInstance().getUrl();if(i){var o=new e(Vg+i,!0),a=Math.floor(1e3*ey.getInstance().getTimeOrigin());o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd)));if(n){var s=n.find((function(e){return"first-paint"===e.name}));s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(e){return"first-contentful-paint"===e.name}));u&&u.startTime&&o.putMetric(Wg,Math.floor(1e3*u.startTime)),r&&o.putMetric(qg,Math.floor(1e3*r))}Iy(o)}},e.createUserTimingTrace=function(t){Iy(new e(t,!1,t))},e}();function Oy(e){var t=e;if(t&&void 0!==t.responseStart){var n=ey.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+n)),i=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,o=Math.floor(1e3*(t.responseEnd-t.startTime));!function(e){var t=iy.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout((function(){return ky(e,0)}),0)}}({url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function By(){oy()&&(setTimeout((function(){return function(){var e=ey.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout((function(){Ly.createOobTrace(t,n),r=void 0}),5e3);e.onFirstInputDelay((function(e){r&&(clearTimeout(r),Ly.createOobTrace(t,n,e))}))}else Ly.createOobTrace(t,n)}()}),0),setTimeout((function(){return function(){for(var e=ey.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){Oy(r[n])}e.setupObserver("resource",Oy)}()}),0),setTimeout((function(){return function(){for(var e=ey.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){Fy(r[n])}e.setupObserver("measure",Fy)}()}),0))}function Fy(e){var t=e.name;t.substring(0,zg.length)!==zg&&Ly.createUserTimingTrace(t)}var Uy=function(){function e(e){this.app=e,ey.getInstance().requiredApisAvailable()&&(0,v.validateIndexedDBOpenable)().then((function(e){e&&(Ty||(Cy(5500),Ty=!0),_y().then(By,By))})).catch((function(e){Zg.info("Environment doesn't support IndexedDB: "+e)}))}return e.prototype.trace=function(e){return new Ly(e)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return iy.getInstance().instrumentationEnabled},set:function(e){iy.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return iy.getInstance().dataCollectionEnabled},set:function(e){iy.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),e}();!function(e){var t=function(e,t){if("[DEFAULT]"!==e.name)throw Yg.create("FB not default");if("undefined"===typeof window)throw Yg.create("no window");return function(e){jg=e}(window),iy.getInstance().firebaseAppInstance=e,iy.getInstance().installationsService=t,new Uy(e)};e.INTERNAL.registerComponent(new Xd.Component("performance",(function(e){var n=e.getProvider("app").getImmediate(),r=e.getProvider("installations").getImmediate();return t(n,r)}),"PUBLIC")),e.registerVersion("@firebase/performance",Hg)}(l.default);var jy=function(){return jy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},jy.apply(this,arguments)};function Hy(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(lU){o(lU)}}function s(e){try{u(r.throw(e))}catch(lU){o(lU)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function Gy(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(lU){o=[6,lU],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;Object.create;var zy,Vy,Wy="https://www.googletagmanager.com/gtag/js";!function(e){e.EVENT="event",e.SET="set",e.CONFIG="config"}(zy||(zy={})),function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"}(Vy||(Vy={}));var qy,Ky=new m.Logger("@firebase/analytics");function Jy(e,t,n,r,i,o){return Hy(this,void 0,void 0,(function(){var a,s,u,l;return Gy(this,(function(c){switch(c.label){case 0:a=r[i],c.label=1;case 1:return c.trys.push([1,7,,8]),a?[4,t[a]]:[3,3];case 2:return c.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=c.sent(),(u=s.find((function(e){return e.measurementId===i})))?[4,t[u.appId]]:[3,6];case 5:c.sent(),c.label=6;case 6:return[3,8];case 7:return l=c.sent(),Ky.error(l),[3,8];case 8:return e(zy.CONFIG,i,o),[2]}}))}))}function Qy(e,t,n,r,i){return Hy(this,void 0,void 0,(function(){var o,a,s,u,l,c,h,f;return Gy(this,(function(d){switch(d.label){case 0:return d.trys.push([0,4,,5]),o=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=d.sent(),u=function(e){var n=s.find((function(t){return t.measurementId===e})),r=n&&t[n.appId];if(!r)return o=[],"break";o.push(r)},l=0,c=a;l<c.length&&(h=c[l],"break"!==u(h));l++);d.label=2;case 2:return 0===o.length&&(o=Object.values(t)),[4,Promise.all(o)];case 3:return d.sent(),e(zy.EVENT,r,i||{}),[3,5];case 4:return f=d.sent(),Ky.error(f),[3,5];case 5:return[2]}}))}))}function Xy(e,t,n,r,i){var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=function(e,t,n,r){return function(i,o,a){return Hy(this,void 0,void 0,(function(){var s;return Gy(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==zy.EVENT?[3,2]:[4,Qy(e,t,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==zy.CONFIG?[3,4]:[4,Jy(e,t,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:e(zy.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),Ky.error(s),[3,7];case 7:return[2]}}))}))}}(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}var Yy=((qy={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",qy["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",qy["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",qy["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",qy["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",qy["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",qy["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",qy["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',qy["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',qy),Zy=new v.ErrorFactory("analytics","Analytics",Yy),$y=new(function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t=1e3),this.throttleMetadata=e,this.intervalMillis=t}return e.prototype.getThrottleMetadata=function(e){return this.throttleMetadata[e]},e.prototype.setThrottleMetadata=function(e,t){this.throttleMetadata[e]=t},e.prototype.deleteThrottleMetadata=function(e){delete this.throttleMetadata[e]},e}());function eb(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function tb(e){var t;return Hy(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Gy(this,(function(l){switch(l.label){case 0:return n=e.appId,r=e.apiKey,i={method:"GET",headers:eb(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(a=l.sent()).status||304===a.status)return[3,6];s="",l.label=2;case 2:return l.trys.push([2,4,,5]),[4,a.json()];case 3:return u=l.sent(),(null===(t=u.error)||void 0===t?void 0:t.message)&&(s=u.error.message),[3,5];case 4:return l.sent(),[3,5];case 5:throw Zy.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s});case 6:return[2,a.json()]}}))}))}function nb(e,t,n,r){var i=t.throttleEndTimeMillis,o=t.backoffCount;return void 0===r&&(r=$y),Hy(this,void 0,void 0,(function(){var t,a,s,u,l,c,h;return Gy(this,(function(f){switch(f.label){case 0:t=e.appId,a=e.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,rb(n,i)];case 2:return f.sent(),[3,4];case 3:if(s=f.sent(),a)return Ky.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:t,measurementId:a}];throw s;case 4:return f.trys.push([4,6,,7]),[4,tb(e)];case 5:return u=f.sent(),r.deleteThrottleMetadata(t),[2,u];case 6:if(!function(e){if(!(e instanceof v.FirebaseError)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(l=f.sent())){if(r.deleteThrottleMetadata(t),a)return Ky.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]"),[2,{appId:t,measurementId:a}];throw l}return c=503===Number(l.customData.httpStatus)?(0,v.calculateBackoffMillis)(o,r.intervalMillis,30):(0,v.calculateBackoffMillis)(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+c,backoffCount:o+1},r.setThrottleMetadata(t,h),Ky.debug("Calling attemptFetch again in "+c+" millis"),[2,nb(e,h,n,r)];case 7:return[2]}}))}))}function rb(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(Zy.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}var ib=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}();function ob(e,t,n,r,i,o){return Hy(this,void 0,void 0,(function(){var a,s,u,l,c,h,f;return Gy(this,(function(d){switch(d.label){case 0:return a=function(e,t,n){return void 0===t&&(t=$y),Hy(this,void 0,void 0,(function(){var r,i,o,a,s,u,l=this;return Gy(this,(function(c){if(r=e.options,i=r.appId,o=r.apiKey,a=r.measurementId,!i)throw Zy.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:i}];throw Zy.create("no-api-key")}return s=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new ib,setTimeout((function(){return Hy(l,void 0,void 0,(function(){return Gy(this,(function(e){return u.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,nb({appId:i,apiKey:o,measurementId:a},s,u,t)]}))}))}(e),a.then((function(t){n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Ky.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return Ky.error(e)})),t.push(a),s=function(){return Hy(this,void 0,void 0,(function(){var e;return Gy(this,(function(t){switch(t.label){case 0:return(0,v.isIndexedDBAvailable)()?[3,1]:(Ky.warn(Zy.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,(0,v.validateIndexedDBOpenable)()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),Ky.warn(Zy.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(e){return e?r.getId():void 0})),[4,Promise.all([a,s])];case 1:return u=d.sent(),l=u[0],c=u[1],function(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(Wy))return r}return null}()||function(e,t){var n=document.createElement("script");n.src=Wy+"?l="+e+"&id="+t,n.async=!0,document.head.appendChild(n)}(o,l.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,h=f,null!=c&&(h.firebase_id=c),i(zy.CONFIG,l.measurementId,h),[2,l.measurementId]}}))}))}var ab,sb,ub={},lb=[],cb={},hb="dataLayer",fb="gtag",db=!1;function pb(e){if(db)throw Zy.create("already-initialized");e.dataLayerName&&(hb=e.dataLayerName),e.gtagName&&(fb=e.gtagName)}function vb(e,t){!function(){var e=[];if((0,v.isBrowserExtension)()&&e.push("This is a browser extension environment."),(0,v.areCookiesEnabled)()||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"("+(t+1)+") "+e})).join(" "),n=Zy.create("invalid-analytics-context",{errorInfo:t});Ky.warn(n.message)}}();var n=e.options.appId;if(!n)throw Zy.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Zy.create("no-api-key");Ky.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=ub[n])throw Zy.create("already-exists",{id:n});if(!db){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(hb);var r=Xy(ub,lb,cb,hb,fb),i=r.wrappedGtag,o=r.gtagCore;sb=i,ab=o,db=!0}ub[n]=ob(e,lb,cb,t,ab,hb);var a={app:e,logEvent:function(e,t,r){(function(e,t,n,r,i){return Hy(this,void 0,void 0,(function(){var o,a;return Gy(this,(function(s){switch(s.label){case 0:return i&&i.global?(e(zy.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:o=s.sent(),a=jy(jy({},r),{send_to:o}),e(zy.EVENT,n,a),s.label=3;case 3:return[2]}}))}))})(sb,ub[n],e,t,r).catch((function(e){return Ky.error(e)}))},setCurrentScreen:function(e,t){(function(e,t,n,r){return Hy(this,void 0,void 0,(function(){var i;return Gy(this,(function(o){switch(o.label){case 0:return r&&r.global?(e(zy.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(zy.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(sb,ub[n],e,t).catch((function(e){return Ky.error(e)}))},setUserId:function(e,t){(function(e,t,n,r){return Hy(this,void 0,void 0,(function(){var i;return Gy(this,(function(o){switch(o.label){case 0:return r&&r.global?(e(zy.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(zy.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(sb,ub[n],e,t).catch((function(e){return Ky.error(e)}))},setUserProperties:function(e,t){(function(e,t,n,r){return Hy(this,void 0,void 0,(function(){var i,o,a,s,u;return Gy(this,(function(l){switch(l.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return e(zy.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:u=l.sent(),e(zy.CONFIG,u,{update:!0,user_properties:n}),l.label=3;case 3:return[2]}}))}))})(sb,ub[n],e,t).catch((function(e){return Ky.error(e)}))},setAnalyticsCollectionEnabled:function(e){(function(e,t){return Hy(this,void 0,void 0,(function(){var n;return Gy(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}}))}))})(ub[n],e).catch((function(e){return Ky.error(e)}))},INTERNAL:{delete:function(){return delete ub[n],Promise.resolve()}}};return a}var mb="analytics";function gb(){return Hy(this,void 0,void 0,(function(){return Gy(this,(function(e){switch(e.label){case 0:if((0,v.isBrowserExtension)())return[2,!1];if(!(0,v.areCookiesEnabled)())return[2,!1];if(!(0,v.isIndexedDBAvailable)())return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,(0,v.validateIndexedDBOpenable)()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,!1];case 4:return[2]}}))}))}!function(e){e.INTERNAL.registerComponent(new Xd.Component(mb,(function(e){return vb(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:pb,EventName:Vy,isSupported:gb})),e.INTERNAL.registerComponent(new Xd.Component("analytics-internal",(function(e){try{return{logEvent:e.getProvider(mb).getImmediate().logEvent}}catch(lU){throw Zy.create("interop-component-reg-failed",{reason:lU})}}),"PRIVATE")),e.registerVersion("@firebase/analytics","0.6.18")}(l.default);var yb=function(){return yb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},yb.apply(this,arguments)};function bb(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(lU){o(lU)}}function s(e){try{u(r.throw(e))}catch(lU){o(lU)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function _b(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(lU){o=[6,lU],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;Object.create;var wb,xb=function(){function e(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}return e.prototype.isCachedDataFresh=function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+e+". Is cache hit: "+r+"."),r},e.prototype.fetch=function(e){return bb(this,void 0,void 0,(function(){var t,n,r,i,o;return _b(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return t=a.sent(),n=t[0],(r=t[1])&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n)?[2,r]:(e.eTag=r&&r.eTag,[4,this.client.fetch(e)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},e}(),Eb=((wb={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",wb["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",wb["registration-api-key"]="Undefined API key. Check Firebase app initialization.",wb["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",wb["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",wb["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",wb["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",wb["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",wb["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",wb["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',wb["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',wb["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",wb["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",wb),Sb=new v.ErrorFactory("remoteconfig","Remote Config",Eb);var Ab=function(){function e(e,t,n,r,i,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return e.prototype.fetch=function(e){return bb(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,l,c,h,f,d,p,v,m,g,y,b;return _b(this,(function(_){switch(_.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:t=_.sent(),n=t[0],r=t[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===w&&(w=navigator),w.languages&&w.languages[0]||w.language)},u={method:"POST",headers:a,body:JSON.stringify(s)},l=fetch(o,u),c=new Promise((function(t,n){e.signal.addEventListener((function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))})),_.label=2;case 2:return _.trys.push([2,5,,6]),[4,Promise.race([l,c])];case 3:return _.sent(),[4,l];case 4:return h=_.sent(),[3,6];case 5:throw f=_.sent(),d="fetch-client-network","AbortError"===f.name&&(d="fetch-timeout"),Sb.create(d,{originalErrorMessage:f.message});case 6:if(p=h.status,v=h.headers.get("ETag")||void 0,200!==h.status)return[3,11];y=void 0,_.label=7;case 7:return _.trys.push([7,9,,10]),[4,h.json()];case 8:return y=_.sent(),[3,10];case 9:throw b=_.sent(),Sb.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:m=y.entries,g=y.state,_.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===g?p=500:"NO_CHANGE"===g?p=304:"NO_TEMPLATE"!==g&&"EMPTY_CONFIG"!==g||(m={}),304!==p&&200!==p)throw Sb.create("fetch-status",{httpStatus:p});return[2,{status:p,eTag:v,config:m}]}var w}))}))},e}(),Tb=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}(),Cb=["1","true","t","yes","y","on"],Mb=function(){function e(e,t){void 0===t&&(t=""),this._source=e,this._value=t}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return"static"!==this._source&&Cb.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if("static"===this._source)return 0;var e=Number(this._value);return isNaN(e)&&(e=0),e},e.prototype.getSource=function(){return this._source},e}(),kb=function(){function e(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return e.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=m.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=m.LogLevel.SILENT;break;default:this._logger.logLevel=m.LogLevel.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return bb(this,void 0,void 0,(function(){var e,t,n;return _b(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=r.sent(),t=e[0],n=e[1],t&&t.config&&t.eTag&&t.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},e.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){e._isInitializationComplete=!0}))),this._initializePromise},e.prototype.fetch=function(){return bb(this,void 0,void 0,(function(){var e,t,n,r=this;return _b(this,(function(i){switch(i.label){case 0:e=new Tb,setTimeout((function(){return bb(r,void 0,void 0,(function(){return _b(this,(function(t){return e.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return t=i.sent(),n=function(e,t){return e instanceof v.FirebaseError&&-1!==e.code.indexOf(t)}(t,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),t;case 6:return[2]}}))}))},e.prototype.fetchAndActivate=function(){return bb(this,void 0,void 0,(function(){return _b(this,(function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}}))}))},e.prototype.getAll=function(){var e=this;return function(e,t){void 0===e&&(e={});void 0===t&&(t={});return Object.keys(yb(yb({},e),t))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(t,n){return t[n]=e.getValue(n),t}),{})},e.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},e.prototype.getNumber=function(e){return this.getValue(e).asNumber()},e.prototype.getString=function(e){return this.getValue(e).asString()},e.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var t=this._storageCache.getActiveConfig();return t&&void 0!==t[e]?new Mb("remote",t[e]):this.defaultConfig&&void 0!==this.defaultConfig[e]?new Mb("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new Mb("static"))},e}();function Ib(e,t){var n=e.target.error||void 0;return Sb.create(t,{originalErrorMessage:n&&n.message})}var Rb="app_namespace_store";var Pb=function(){function e(e,t,n,r){void 0===r&&(r=new Promise((function(e,t){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(e){t(Ib(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;0===e.oldVersion&&t.createObjectStore(Rb,{keyPath:"compositeKey"})}}))),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(e){return this.set("active_config",e)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(e){return bb(this,void 0,void 0,(function(){var t,n=this;return _b(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction([Rb],"readonly").objectStore(Rb),a=n.createCompositeKey(e);try{var s=o.get(a);s.onerror=function(e){i(Ib(e,"storage-get"))},s.onsuccess=function(e){var t=e.target.result;r(t?t.value:void 0)}}catch(lU){i(Sb.create("storage-get",{originalErrorMessage:lU&&lU.message}))}}))]}}))}))},e.prototype.set=function(e,t){return bb(this,void 0,void 0,(function(){var n,r=this;return _b(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction([Rb],"readwrite").objectStore(Rb),s=r.createCompositeKey(e);try{var u=a.put({compositeKey:s,value:t});u.onerror=function(e){o(Ib(e,"storage-set"))},u.onsuccess=function(){i()}}catch(lU){o(Sb.create("storage-set",{originalErrorMessage:lU&&lU.message}))}}))]}}))}))},e.prototype.delete=function(e){return bb(this,void 0,void 0,(function(){var t,n=this;return _b(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction([Rb],"readwrite").objectStore(Rb),a=n.createCompositeKey(e);try{var s=o.delete(a);s.onerror=function(e){i(Ib(e,"storage-delete"))},s.onsuccess=function(){r()}}catch(lU){i(Sb.create("storage-delete",{originalErrorMessage:lU&&lU.message}))}}))]}}))}))},e.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},e}(),Db=function(){function e(e){this.storage=e}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return bb(this,void 0,void 0,(function(){var e,t,n,r,i,o;return _b(this,(function(a){switch(a.label){case 0:return e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,e];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,t];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}}))}))},e.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},e.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},e}();function Nb(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(Sb.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}var Lb,Ob=function(){function e(e,t){this.client=e,this.storage=t}return e.prototype.fetch=function(e){return bb(this,void 0,void 0,(function(){var t;return _b(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return t=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,t)]}}))}))},e.prototype.attemptFetch=function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount;return bb(this,void 0,void 0,(function(){var t,i,o;return _b(this,(function(a){switch(a.label){case 0:return[4,Nb(e.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return t=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,t];case 5:if(!function(e){if(!(e instanceof v.FirebaseError)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(i=a.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+(0,v.calculateBackoffMillis)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(e,o)];case 7:return[2]}}))}))},e}(),Bb="@firebase/remote-config";(Lb=l.default).INTERNAL.registerComponent(new Xd.Component("remoteConfig",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations").getImmediate();if("undefined"===typeof window)throw Sb.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw Sb.create("registration-project-id");if(!s)throw Sb.create("registration-api-key");if(!u)throw Sb.create("registration-app-id");n=n||"firebase";var l=new Pb(u,r.name,n),c=new Db(l),h=new m.Logger(Bb);h.logLevel=m.LogLevel.ERROR;var f=new Ab(i,Lb.SDK_VERSION,n,a,s,u),d=new Ob(f,l),p=new xb(d,l,c,h),v=new kb(r,p,c,l,h);return v.ensureInitialized(),v}),"PUBLIC").setMultipleInstances(!0)),Lb.registerVersion(Bb,"0.1.43");n(446);var Fb="8.10.1";l.default.registerVersion("firebase",Fb,"app"),l.default.SDK_VERSION=Fb;console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),l.default.registerVersion("firebase","8.10.1");l.default.initializeApp({apiKey:"AIzaSyAl6n-Ws-btSCuonsJCgMlspW6sEg3kkXI",authDomain:"good-space-1b61c.firebaseapp.com",projectId:"good-space-1b61c",storageBucket:"good-space-1b61c.appspot.com",messagingSenderId:"225114188693",appId:"1:225114188693:web:1a5393ab7115b6f759649c",measurementId:"G-6LPVK0DSSR"});var Ub,jb=l.default.firestore(),Hb=l.default.auth(),Gb=function(){return Gb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Gb.apply(this,arguments)},zb=function(e){return{loading:void 0===e||null===e,value:e}},Vb=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return Gb({},e,{error:t.error,loading:!1,value:void 0});case"reset":return zb(t.defaultValue);case"value":return Gb({},e,{error:void 0,loading:!1,value:t.value});default:return e}}),zb(n)),i=r[0],o=r[1];return{error:i.error,loading:i.loading,reset:function(){var t=e?e():void 0;o({type:"reset",defaultValue:t})},setError:function(e){o({type:"error",error:e})},setValue:function(e){o({type:"value",value:e})},value:i.value}};function Wb(){return Wb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wb.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Ub||(Ub={}));var qb=function(e){return e};var Kb="beforeunload",Jb="popstate";function Qb(e){e.preventDefault(),e.returnValue=""}function Xb(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function Yb(){return Math.random().toString(36).substr(2,8)}function Zb(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,o=e.hash,a=void 0===o?"":o;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),a&&"#"!==a&&(n+="#"===a.charAt(0)?a:"#"+a),n}function $b(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function e_(e,t){if(!e)throw new Error(t)}var t_=(0,t.createContext)(null);var n_=(0,t.createContext)(null);var r_=(0,t.createContext)({outlet:null,matches:[]});function i_(e){return function(e){var n=(0,t.useContext)(r_).outlet;if(n)return(0,t.createElement)(f_.Provider,{value:e},n);return n}(e.context)}function o_(e){e_(!1)}function a_(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,o=void 0===i?null:i,a=e.location,s=e.navigationType,u=void 0===s?Ub.Pop:s,l=e.navigator,c=e.static,h=void 0!==c&&c;l_()&&e_(!1);var f=A_(r),d=(0,t.useMemo)((function(){return{basename:f,navigator:l,static:h}}),[f,l,h]);"string"===typeof a&&(a=$b(a));var p=a,v=p.pathname,m=void 0===v?"/":v,g=p.search,y=void 0===g?"":g,b=p.hash,_=void 0===b?"":b,w=p.state,x=void 0===w?null:w,E=p.key,S=void 0===E?"default":E,A=(0,t.useMemo)((function(){var e=E_(m,f);return null==e?null:{pathname:e,search:y,hash:_,state:x,key:S}}),[f,m,y,_,x,S]);return null==A?null:(0,t.createElement)(t_.Provider,{value:d},(0,t.createElement)(n_.Provider,{children:o,value:{location:A,navigationType:u}}))}function s_(e){var n=e.children,r=e.location;return function(e,n){l_()||e_(!1);var r=(0,t.useContext)(r_).matches,i=r[r.length-1],o=i?i.params:{},a=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;0;var s,u=c_();if(n){var l,c="string"===typeof n?$b(n):n;"/"===a||(null==(l=c.pathname)?void 0:l.startsWith(a))||e_(!1),s=c}else s=u;var h=s.pathname||"/",f="/"===a?h:h.slice(a.length)||"/",d=function(e,t,n){void 0===n&&(n="/");var r=E_(("string"===typeof t?$b(t):t).pathname||"/",n);if(null==r)return null;var i=v_(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var o=null,a=0;null==o&&a<i.length;++a)o=b_(i[a],r);return o}(e,{pathname:f});0;return __(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:S_([a,e.pathname]),pathnameBase:"/"===e.pathnameBase?a:S_([a,e.pathnameBase])})})),r)}(p_(n),r)}function u_(e){l_()||e_(!1);var n=(0,t.useContext)(t_),r=n.basename,i=n.navigator,o=d_(e),a=o.hash,s=o.pathname,u=o.search,l=s;if("/"!==r){var c=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?$b(e).pathname:e.pathname}(e),h=null!=c&&c.endsWith("/");l="/"===s?r+(h?"/":""):S_([r,s])}return i.createHref({pathname:l,search:u,hash:a})}function l_(){return null!=(0,t.useContext)(n_)}function c_(){return l_()||e_(!1),(0,t.useContext)(n_).location}function h_(){l_()||e_(!1);var e=(0,t.useContext)(t_),n=e.basename,r=e.navigator,i=(0,t.useContext)(r_).matches,o=c_().pathname,a=JSON.stringify(i.map((function(e){return e.pathnameBase}))),s=(0,t.useRef)(!1);(0,t.useEffect)((function(){s.current=!0}));var u=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var i=x_(e,JSON.parse(a),o);"/"!==n&&(i.pathname=S_([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,a,o]);return u}var f_=(0,t.createContext)(null);function d_(e){var n=(0,t.useContext)(r_).matches,r=c_().pathname,i=JSON.stringify(n.map((function(e){return e.pathnameBase})));return(0,t.useMemo)((function(){return x_(e,JSON.parse(i),r)}),[e,i,r])}function p_(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==o_&&e_(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=p_(e.props.children)),n.push(r)}else n.push.apply(n,p_(e.props.children))})),n}function v_(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var o={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(o.relativePath.startsWith(r)||e_(!1),o.relativePath=o.relativePath.slice(r.length));var a=S_([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(!0===e.index&&e_(!1),v_(e.children,t,s,a)),(null!=e.path||e.index)&&t.push({path:a,score:y_(a,e.index),routesMeta:s})})),t}var m_=/^:\w+$/,g_=function(e){return"*"===e};function y_(e,t){var n=e.split("/"),r=n.length;return n.some(g_)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!g_(e)})).reduce((function(e,t){return e+(m_.test(t)?3:""===t?1:10)}),r)}function b_(e,t){for(var n=e.routesMeta,r={},i="/",o=[],a=0;a<n.length;++a){var s=n[a],u=a===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=w_({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);var h=s.route;o.push({params:r,pathname:S_([i,c.pathname]),pathnameBase:S_([i,c.pathnameBase]),route:h}),"/"!==c.pathnameBase&&(i=S_([i,c.pathnameBase]))}return o}function __(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,o){return(0,t.createElement)(r_.Provider,{children:void 0!==i.route.element?i.route.element:(0,t.createElement)(i_,null),value:{outlet:r,matches:n.concat(e.slice(0,o+1))}})}),null)}function w_(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=u(n,2),i=r[0],o=r[1],a=t.match(i);if(!a)return null;var s=a[0],l=s.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:o.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";l=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(c[n]||""),e}),{}),pathname:s,pathnameBase:l,pattern:e}}function x_(e,t,n){var r,i="string"===typeof e?$b(e):e,o=""===e||""===i.pathname?"/":i.pathname;if(null==o)r=n;else{var a=t.length-1;if(o.startsWith("..")){for(var s=o.split("/");".."===s[0];)s.shift(),a-=1;i.pathname=s.join("/")}r=a>=0?t[a]:"/"}var u=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?$b(e):e,r=n.pathname,i=n.search,o=void 0===i?"":i,a=n.hash,s=void 0===a?"":a,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:T_(o),hash:C_(s)}}(i,r);return o&&"/"!==o&&o.endsWith("/")&&!u.pathname.endsWith("/")&&(u.pathname+="/"),u}function E_(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var S_=function(e){return e.join("/").replace(/\/\/+/g,"/")},A_=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},T_=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},C_=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function M_(){return M_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M_.apply(this,arguments)}function k_(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var I_=["onClick","reloadDocument","replace","state","target","to"];function R_(e){var n=e.basename,r=e.children,i=e.window,o=(0,t.useRef)();null==o.current&&(o.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function i(){var e=n.location,t=e.pathname,i=e.search,o=e.hash,a=r.state||{};return[a.idx,qb({pathname:t,search:i,hash:o,state:a.usr||null,key:a.key||"default"})]}var o=null;n.addEventListener(Jb,(function(){if(o)h.call(o),o=null;else{var e=Ub.Pop,t=i(),n=t[0],r=t[1];if(h.length){if(null!=n){var a=u-n;a&&(o={action:e,location:r,retry:function(){g(-1*a)}},g(a))}}else m(e)}}));var a=Ub.Pop,s=i(),u=s[0],l=s[1],c=Xb(),h=Xb();function f(e){return"string"===typeof e?e:Zb(e)}function d(e,t){return void 0===t&&(t=null),qb(Wb({pathname:l.pathname,hash:"",search:""},"string"===typeof e?$b(e):e,{state:t,key:Yb()}))}function p(e,t){return[{usr:e.state,key:e.key,idx:t},f(e)]}function v(e,t,n){return!h.length||(h.call({action:e,location:t,retry:n}),!1)}function m(e){a=e;var t=i();u=t[0],l=t[1],c.call({action:a,location:l})}function g(e){r.go(e)}null==u&&(u=0,r.replaceState(Wb({},r.state,{idx:u}),""));var y={get action(){return a},get location(){return l},createHref:f,push:function e(t,i){var o=Ub.Push,a=d(t,i);if(v(o,a,(function(){e(t,i)}))){var s=p(a,u+1),l=s[0],c=s[1];try{r.pushState(l,"",c)}catch(h){n.location.assign(c)}m(o)}},replace:function e(t,n){var i=Ub.Replace,o=d(t,n);if(v(i,o,(function(){e(t,n)}))){var a=p(o,u),s=a[0],l=a[1];r.replaceState(s,"",l),m(i)}},go:g,back:function(){g(-1)},forward:function(){g(1)},listen:function(e){return c.push(e)},block:function(e){var t=h.push(e);return 1===h.length&&n.addEventListener(Kb,Qb),function(){t(),h.length||n.removeEventListener(Kb,Qb)}}};return y}({window:i}));var a=o.current,s=u((0,t.useState)({action:a.action,location:a.location}),2),l=s[0],c=s[1];return(0,t.useLayoutEffect)((function(){return a.listen(c)}),[a]),(0,t.createElement)(a_,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:a})}var P_=(0,t.forwardRef)((function(e,n){var r=e.onClick,i=e.reloadDocument,o=e.replace,a=void 0!==o&&o,s=e.state,u=e.target,l=e.to,c=k_(e,I_),h=u_(l),f=function(e,n){var r=void 0===n?{}:n,i=r.target,o=r.replace,a=r.state,s=h_(),u=c_(),l=d_(e);return(0,t.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!o||Zb(u)===Zb(l);s(e,{replace:n,state:a})}}),[u,s,l,o,a,i,e])}(l,{replace:a,state:s,target:u});return(0,t.createElement)("a",M_({},c,{href:h,onClick:function(e){r&&r(e),e.defaultPrevented||i||f(e)},ref:n,target:u}))}));var D_=n(184),N_=function(){return(0,D_.jsx)(D_.Fragment,{children:(0,D_.jsxs)("nav",{className:"main-nav",children:[(0,D_.jsx)("div",{className:"logo",children:(0,D_.jsxs)("h2",{children:[(0,D_.jsx)("span",{children:"E"}),"du",(0,D_.jsx)("span",{children:"T"}),"ech"]})}),(0,D_.jsx)("div",{className:"menu-link",children:(0,D_.jsxs)("ul",{children:[(0,D_.jsx)("li",{children:(0,D_.jsx)(P_,{to:"/",children:"HOME"})}),(0,D_.jsx)("li",{children:(0,D_.jsx)(P_,{to:"/learn",children:"LEARN"})}),(0,D_.jsx)("li",{children:(0,D_.jsx)(P_,{to:"/chatroom",children:"CHAT"})})]})})]})})};var L_=n.p+"static/media/home.c27dfadc5e78142c9ad148a1fa779097.svg";function O_(){return(0,D_.jsx)("div",{className:" md:pt-24 bg-homeImg h-screen w-full",children:(0,D_.jsx)("div",{className:"p-4 origin-bottom-right lg:mx-36 md:mx-8",children:(0,D_.jsxs)("div",{className:"p-4 space-y-10 md:space-y-0 md:grid md:grid-cols-2",children:[(0,D_.jsxs)("div",{className:"pr-4 md:flex md:flex-col md:justify-center align-middle pt-24",children:[(0,D_.jsx)("h2",{className:"self-center mb-4 text-5xl font-bold tracking-wider text-secondary font-carattere md:text-4xl lg:text-7xl",children:"EdTech"}),(0,D_.jsx)("p",{className:"self-center text-xl tracking-wide text-justify text-white",children:"EdTech is an AR-based web platform where students come across and learn about various complex biology topics. Learn with the help of interactive 3D Models and Augnmented Reality."}),(0,D_.jsx)(P_,{to:"/learn",className:"md:w-1/3",children:(0,D_.jsx)("button",{className:"p-2 px-8 mt-4 text-base font-semibold tracking-wider text-white border rounded-full shadow-sm font-sourceSerifPro md:w-full bg-red-50 bg-gradient-to-r from-purple-400 via-pink-500 to-red-500 hover:shadow-lg ",children:"Learn"})})]}),(0,D_.jsx)("div",{className:"h-full",children:(0,D_.jsx)("img",{src:L_,alt:"img",className:"w-full lg:p-10"})})]})})})}var B_=n(829),F_=n(439),U_=n(817),j_=n(523),H_=n(655);function G_(){return(0,D_.jsxs)("div",{children:[(0,D_.jsxs)("div",{className:"grid w-full py-10 place-items-center",children:[(0,D_.jsx)("h1",{className:"pb-2 text-5xl text-white font-semibold tracking-wide",children:"Choose Topic"}),(0,D_.jsx)("div",{className:"inline-flex h-1 bg-secondary rounded-full w-56"})]}),(0,D_.jsxs)("div",{className:"flex flex-wrap justify-around w-full px-16 py-8",children:[(0,D_.jsx)(P_,{to:"/lungs",children:(0,D_.jsx)("div",{className:"m-8",children:(0,D_.jsxs)("div",{className:"w-72 h-60 cursor-pointer transition duration-500 transform hover:scale-105",children:[(0,D_.jsx)("img",{className:"pb-8 border-4 bg-primary border-secondary rounded-lg",alt:"",src:F_}),(0,D_.jsx)("div",{className:"grid place-items-center mx-1 -mt-8 text-xl font-semibold text-white bg-homeImg font-sourceSerifPro",children:"Human Lungs"})]})})}),(0,D_.jsx)(P_,{to:"/brain",children:(0,D_.jsx)("div",{className:"m-8",children:(0,D_.jsxs)("div",{className:"w-72 h-60 cursor-pointer transition duration-500 transform hover:scale-105",children:[(0,D_.jsx)("img",{className:"pb-8 border-4 bg-primary border-secondary rounded-lg",alt:"",src:B_}),(0,D_.jsx)("div",{className:"grid place-items-center mx-1 -mt-8 text-xl font-semibold text-white bg-homeImg font-sourceSerifPro",children:"Human Brain"})]})})}),(0,D_.jsx)(P_,{to:"/muscle",children:(0,D_.jsx)("div",{className:"m-8",children:(0,D_.jsxs)("div",{className:"w-72 h-60 cursor-pointer transition duration-500 transform hover:scale-105",children:[(0,D_.jsx)("img",{className:"pb-8 border-4 bg-primary border-secondary rounded-lg",alt:"",src:U_}),(0,D_.jsx)("div",{className:"grid place-items-center mx-1 -mt-8 text-xl font-semibold text-white bg-homeImg font-sourceSerifPro",children:"Human Muscle"})]})})}),(0,D_.jsx)(P_,{to:"/skull",children:(0,D_.jsx)("div",{className:"m-8",children:(0,D_.jsxs)("div",{className:"w-72 h-60 cursor-pointer transition duration-500 transform hover:scale-105",children:[(0,D_.jsx)("img",{className:"pb-8 border-4 bg-primary border-secondary rounded-lg",alt:"",src:j_}),(0,D_.jsx)("div",{className:"grid place-items-center mx-1 -mt-8 text-xl font-semibold text-white bg-homeImg font-sourceSerifPro",children:"Human Skull"})]})})}),(0,D_.jsx)(P_,{to:"/stomach",children:(0,D_.jsx)("div",{className:"m-8",children:(0,D_.jsxs)("div",{className:"w-72 h-60 cursor-pointer transition duration-500 transform hover:scale-105",children:[(0,D_.jsx)("img",{className:"pb-8 border-4 bg-primary border-secondary rounded-lg",alt:"",src:H_}),(0,D_.jsx)("div",{className:"grid place-items-center mx-1 -mt-8 text-xl font-semibold text-white bg-homeImg font-sourceSerifPro",children:"Human Stomach"})]})})}),(0,D_.jsx)("div",{className:"m-8",children:(0,D_.jsx)("div",{className:"w-56 h-56 cursor-pointer transition duration-500 transform hover:scale-105 border-4 border-secondary rounded-lg bg-primary",children:(0,D_.jsx)("div",{className:"grid place-content-center text-3xl text-center items-center align-middle h-full font-semibold text-white bg-homeImg font-sourceSerifPro",children:"More topics comming soon.."})})})]})]})}function z_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V_(Object(n),!0).forEach((function(t){z_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q_(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function K_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J_(e){return J_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},J_(e)}function Q_(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=J_(e)););return e}function X_(){return X_="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Q_(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},X_.apply(this,arguments)}function Y_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $_(e,t,n){return t&&Z_(e.prototype,t),n&&Z_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ew(e,t){return ew=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ew(e,t)}function tw(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ew(e,t)}function nw(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(lU){return!1}}function rw(e){return rw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rw(e)}function iw(e,t){if(t&&("object"===rw(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return K_(e)}function ow(e){var t=nw();return function(){var n,r=J_(e);if(t){var i=J_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return iw(this,n)}}function aw(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}function sw(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){aw(o,r,i,a,s,"next",e)}function s(e){aw(o,r,i,a,s,"throw",e)}a(void 0)}))}}for(var uw=n(757),lw=n.n(uw),cw="137",hw={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},fw={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},dw=0,pw=1,vw=2,mw=3,gw=0,yw=1,bw=2,_w=3,ww=0,xw=1,Ew=2,Sw=1,Aw=2,Tw=0,Cw=1,Mw=2,kw=3,Iw=4,Rw=5,Pw=100,Dw=101,Nw=102,Lw=103,Ow=104,Bw=200,Fw=201,Uw=202,jw=203,Hw=204,Gw=205,zw=206,Vw=207,Ww=208,qw=209,Kw=210,Jw=0,Qw=1,Xw=2,Yw=3,Zw=4,$w=5,ex=6,tx=7,nx=0,rx=1,ix=2,ox=0,ax=1,sx=2,ux=3,lx=4,cx=5,hx=300,fx=301,dx=302,px=303,vx=304,mx=306,gx=307,yx=1e3,bx=1001,_x=1002,wx=1003,xx=1004,Ex=1004,Sx=1005,Ax=1005,Tx=1006,Cx=1007,Mx=1007,kx=1008,Ix=1008,Rx=1009,Px=1010,Dx=1011,Nx=1012,Lx=1013,Ox=1014,Bx=1015,Fx=1016,Ux=1017,jx=1018,Hx=1020,Gx=1021,zx=1022,Vx=1023,Wx=1024,qx=1025,Kx=1026,Jx=1027,Qx=1028,Xx=1029,Yx=1030,Zx=1031,$x=1033,eE=33776,tE=33777,nE=33778,rE=33779,iE=35840,oE=35841,aE=35842,sE=35843,uE=36196,lE=37492,cE=37496,hE=37808,fE=37809,dE=37810,pE=37811,vE=37812,mE=37813,gE=37814,yE=37815,bE=37816,_E=37817,wE=37818,xE=37819,EE=37820,SE=37821,AE=36492,TE=2200,CE=2201,ME=2202,kE=2300,IE=2301,RE=2302,PE=2400,DE=2401,NE=2402,LE=2500,OE=2501,BE=0,FE=1,UE=2,jE=3e3,HE=3001,GE=3200,zE=3201,VE=0,WE=1,qE=0,KE=7680,JE=7681,QE=7682,XE=7683,YE=34055,ZE=34056,$E=5386,eS=512,tS=513,nS=514,rS=515,iS=516,oS=517,aS=518,sS=519,uS=35044,lS=35048,cS=35040,hS=35045,fS=35049,dS=35041,pS=35046,vS=35050,mS=35042,gS="100",yS="300 es",bS=1035,_S=function(){function e(){Y_(this,e)}return $_(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e);e.target=null}}}}]),e}(),wS=[],xS=0;xS<256;xS++)wS[xS]=(xS<16?"0":"")+xS.toString(16);var ES=1234567,SS=Math.PI/180,AS=180/Math.PI;function TS(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(wS[255&e]+wS[e>>8&255]+wS[e>>16&255]+wS[e>>24&255]+"-"+wS[255&t]+wS[t>>8&255]+"-"+wS[t>>16&15|64]+wS[t>>24&255]+"-"+wS[63&n|128]+wS[n>>8&255]+"-"+wS[n>>16&255]+wS[n>>24&255]+wS[255&r]+wS[r>>8&255]+wS[r>>16&255]+wS[r>>24&255]).toUpperCase()}function CS(e,t,n){return Math.max(t,Math.min(n,e))}function MS(e,t){return(e%t+t)%t}function kS(e,t,n){return(1-n)*e+n*t}function IS(e){return 0===(e&e-1)&&0!==e}function RS(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function PS(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var DS=Object.freeze({__proto__:null,DEG2RAD:SS,RAD2DEG:AS,generateUUID:TS,clamp:CS,euclideanModulo:MS,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:kS,damp:function(e,t,n,r){return kS(e,t,1-Math.exp(-n*r))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(MS(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(ES=e%2147483647),((ES=16807*ES%2147483647)-1)/2147483646},degToRad:function(e){return e*SS},radToDeg:function(e){return e*AS},isPowerOfTwo:IS,ceilPowerOfTwo:RS,floorPowerOfTwo:PS,setQuaternionFromProperEuler:function(e,t,n,r,i){var o=Math.cos,a=Math.sin,s=o(n/2),u=a(n/2),l=o((t+r)/2),c=a((t+r)/2),h=o((t-r)/2),f=a((t-r)/2),d=o((r-t)/2),p=a((r-t)/2);switch(i){case"XYX":e.set(s*c,u*h,u*f,s*l);break;case"YZY":e.set(u*f,s*c,u*h,s*l);break;case"ZXZ":e.set(u*h,u*f,s*c,s*l);break;case"XZX":e.set(s*c,u*p,u*d,s*l);break;case"YXY":e.set(u*d,s*c,u*p,s*l);break;case"ZYZ":e.set(u*p,u*d,s*c,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}}),NS=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Y_(this,t),this.x=e,this.y=n}return $_(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:uw.mark((function e(){return uw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}();NS.prototype.isVector2=!0;var LS=function(){function e(){Y_(this,e),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return $_(e,[{key:"set",value:function(e,t,n,r,i,o,a,s,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=a,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=r[0],v=r[3],m=r[6],g=r[1],y=r[4],b=r[7],_=r[2],w=r[5],x=r[8];return i[0]=o*p+a*g+s*_,i[3]=o*v+a*y+s*w,i[6]=o*m+a*b+s*x,i[1]=u*p+l*g+c*_,i[4]=u*v+l*y+c*w,i[7]=u*m+l*b+c*x,i[2]=h*p+f*g+d*_,i[5]=h*v+f*y+d*w,i[8]=h*m+f*b+d*x,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8];return t*o*l-t*a*u-n*i*l+n*a*s+r*i*u-r*o*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=l*o-a*u,h=a*s-l*i,f=u*i-o*s,d=t*c+n*h+r*f;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);var p=1/d;return e[0]=c*p,e[1]=(r*u-l*n)*p,e[2]=(a*n-r*o)*p,e[3]=h*p,e[4]=(l*t-r*s)*p,e[5]=(r*i-a*t)*p,e[6]=f*p,e[7]=(n*s-u*t)*p,e[8]=(o*t-n*i)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*o+u*a)+o+e,-r*u,r*s,-r*(-u*o+s*a)+a+t,0,0,1),this}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],l=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*u,r[6]=t*a+n*l,r[1]=-n*i+t*s,r[4]=-n*o+t*u,r[7]=-n*a+t*l,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();function OS(e){for(var t=e.length-1;t>=0;--t)if(e[t]>65535)return!0;return!1}LS.prototype.isMatrix3=!0;var BS={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function FS(e,t){return new BS[e](t)}function US(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}var jS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},HS={h:0,s:0,l:0},GS={h:0,s:0,l:0};function zS(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function VS(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function WS(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var qS,KS=function(){function e(t,n,r){return Y_(this,e),void 0===n&&void 0===r?this.set(t):this.setRGB(t,n,r)}return $_(e,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}},{key:"setRGB",value:function(e,t,n){return this.r=e,this.g=t,this.b=n,this}},{key:"setHSL",value:function(e,t,n){if(e=MS(e,1),t=CS(t,0,1),n=CS(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=zS(i,r,e+1/3),this.g=zS(i,r,e),this.b=zS(i,r,e-1/3)}return this}},{key:"setStyle",value:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(a,s,u)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){var l=n[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}},{key:"setColorName",value:function(e){var t=jS[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=VS(e.r),this.g=VS(e.g),this.b=VS(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=WS(e.r),this.g=WS(e.g),this.b=WS(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)t=0,n=0;else{var l=a-s;switch(n=u<=.5?l/(a+s):l/(2-a-s),a){case r:t=(i-o)/l+(i<o?6:0);break;case i:t=(o-r)/l+2;break;case o:t=(r-i)/l+4}t/=6}return e.h=t,e.s=n,e.l=u,e}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(HS),HS.h+=e,HS.s+=t,HS.l+=n,this.setHSL(HS.h,HS.s,HS.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(HS),e.getHSL(GS);var n=kS(HS.h,GS.h,t),r=kS(HS.s,GS.s,t),i=kS(HS.l,GS.l,t);return this.setHSL(n,r,i),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),e}();KS.NAMES=jS,KS.prototype.isColor=!0,KS.prototype.r=1,KS.prototype.g=1,KS.prototype.b=1;var JS=function(){function e(){Y_(this,e)}return $_(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===qS&&(qS=US("canvas")),qS.width=e.width,qS.height=e.height;var n=qS.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=qS}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var t=US("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var r=n.getImageData(0,0,e.width,e.height),i=r.data,o=0;o<i.length;o++)i[o]=255*VS(i[o]/255);return n.putImageData(r,0,0),t}if(e.data){for(var a=e.data.slice(0),s=0;s<a.length;s++)a instanceof Uint8Array||a instanceof Uint8ClampedArray?a[s]=Math.floor(255*VS(a[s]/255)):a[s]=VS(a[s]);return{data:a,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),e}(),QS=0,XS=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bx,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bx,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Tx,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:kx,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Vx,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Rx,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:jE;return Y_(this,n),e=t.call(this),Object.defineProperty(K_(e),"id",{value:QS++}),e.uuid=TS(),e.name="",e.image=r,e.mipmaps=[],e.mapping=i,e.wrapS=o,e.wrapT=a,e.magFilter=s,e.minFilter=u,e.anisotropy=h,e.format=l,e.internalFormat=null,e.type=c,e.offset=new NS(0,0),e.repeat=new NS(1,1),e.center=new NS(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new LS,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=f,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.needsPMREMUpdate=!1,e}return $_(n,[{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=TS()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)r[o].isDataTexture?i.push(YS(r[o].image)):i.push(YS(r[o]))}else i=YS(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(this.mapping!==hx)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case yx:e.x=e.x-Math.floor(e.x);break;case bx:e.x=e.x<0?0:1;break;case _x:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case yx:e.y=e.y-Math.floor(e.y);break;case bx:e.y=e.y<0?0:1;break;case _x:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(_S);function YS(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?JS.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}XS.DEFAULT_IMAGE=void 0,XS.DEFAULT_MAPPING=hx,XS.prototype.isTexture=!0;var ZS=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Y_(this,t),this.x=e,this.y=n,this.z=r,this.w=i}return $_(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,o=.01,a=.1,s=e.elements,u=s[0],l=s[4],c=s[8],h=s[1],f=s[5],d=s[9],p=s[2],v=s[6],m=s[10];if(Math.abs(l-h)<o&&Math.abs(c-p)<o&&Math.abs(d-v)<o){if(Math.abs(l+h)<a&&Math.abs(c+p)<a&&Math.abs(d+v)<a&&Math.abs(u+f+m-3)<a)return this.set(1,0,0,0),this;t=Math.PI;var g=(u+1)/2,y=(f+1)/2,b=(m+1)/2,_=(l+h)/4,w=(c+p)/4,x=(d+v)/4;return g>y&&g>b?g<o?(n=0,r=.707106781,i=.707106781):(r=_/(n=Math.sqrt(g)),i=w/n):y>b?y<o?(n=.707106781,r=0,i=.707106781):(n=_/(r=Math.sqrt(y)),i=x/r):b<o?(n=.707106781,r=.707106781,i=0):(n=w/(i=Math.sqrt(b)),r=x/i),this.set(n,r,i,t),this}var E=Math.sqrt((v-d)*(v-d)+(c-p)*(c-p)+(h-l)*(h-l));return Math.abs(E)<.001&&(E=1),this.x=(v-d)/E,this.y=(c-p)/E,this.z=(h-l)/E,this.w=Math.acos((u+f+m-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:uw.mark((function e(){return uw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}();ZS.prototype.isVector4=!0;var $S=function(e){tw(n,e);var t=ow(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Y_(this,n),(i=t.call(this)).width=e,i.height=r,i.depth=1,i.scissor=new ZS(0,0,e,r),i.scissorTest=!1,i.viewport=new ZS(0,0,e,r),i.texture=new XS(void 0,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.encoding),i.texture.isRenderTargetTexture=!0,i.texture.image={width:e,height:r,depth:1},i.texture.generateMipmaps=void 0!==o.generateMipmaps&&o.generateMipmaps,i.texture.internalFormat=void 0!==o.internalFormat?o.internalFormat:null,i.texture.minFilter=void 0!==o.minFilter?o.minFilter:Tx,i.depthBuffer=void 0===o.depthBuffer||o.depthBuffer,i.stencilBuffer=void 0!==o.stencilBuffer&&o.stencilBuffer,i.depthTexture=void 0!==o.depthTexture?o.depthTexture:null,i}return $_(n,[{key:"setTexture",value:function(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}},{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(_S);$S.prototype.isWebGLRenderTarget=!0;var eA=function(e){tw(n,e);var t=ow(n);function n(e,r,i){var o;Y_(this,n);var a=(o=t.call(this,e,r)).texture;o.texture=[];for(var s=0;s<i;s++)o.texture[s]=a.clone();return o}return $_(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}]),n}($S);eA.prototype.isWebGLMultipleRenderTargets=!0;var tA=function(e){tw(n,e);var t=ow(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Y_(this,n),(i=t.call(this,e,r,o)).samples=4,i.ignoreDepthForMultisampleCopy=void 0===o.ignoreDepth||o.ignoreDepth,i.useRenderToTexture=void 0!==o.useRenderToTexture&&o.useRenderToTexture,i.useRenderbuffer=!1===i.useRenderToTexture,i}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}]),n}($S);tA.prototype.isWebGLMultisampleRenderTarget=!0;var nA=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Y_(this,e),this._x=t,this._y=n,this._z=r,this._w=i}return $_(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,u=a(n/2),l=a(r/2),c=a(i/2),h=s(n/2),f=s(r/2),d=s(i/2);switch(o){case"XYZ":this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d;break;case"YXZ":this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d;break;case"ZXY":this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d;break;case"ZYX":this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d;break;case"YZX":this._x=h*l*c+u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c-h*f*d;break;case"XZY":this._x=h*l*c-u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c+h*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],u=t[2],l=t[6],c=t[10],h=n+a+c;if(h>0){var f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(l-s)*f,this._y=(i-u)*f,this._z=(o-r)*f}else if(n>a&&n>c){var d=2*Math.sqrt(1+n-a-c);this._w=(l-s)/d,this._x=.25*d,this._y=(r+o)/d,this._z=(i+u)/d}else if(a>c){var p=2*Math.sqrt(1+a-n-c);this._w=(i-u)/p,this._x=(r+o)/p,this._y=.25*p,this._z=(s+l)/p}else{var v=2*Math.sqrt(1+c-n-a);this._w=(o-r)/v,this._x=(i+u)/v,this._y=(s+l)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(CS(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+o*a+r*u-i*s,this._y=r*l+o*s+i*a-n*u,this._z=i*l+o*u+n*s-r*a,this._w=o*l-n*a-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-t;return this._w=u*o+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(s),c=Math.atan2(l,a),h=Math.sin((1-t)*c)/l,f=Math.sin(t*c)/l;return this._w=o*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=i*h+this._z*f,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}},{key:"slerpFlat",value:function(e,t,n,r,i,o,a){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[o+0],f=i[o+1],d=i[o+2],p=i[o+3];if(0===a)return e[t+0]=s,e[t+1]=u,e[t+2]=l,void(e[t+3]=c);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=d,void(e[t+3]=p);if(c!==p||s!==h||u!==f||l!==d){var v=1-a,m=s*h+u*f+l*d+c*p,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,m*g);v=Math.sin(v*_)/b,a=Math.sin(a*_)/b}var w=a*g;if(s=s*v+h*w,u=u*v+f*w,l=l*v+d*w,c=c*v+p*w,v===1-a){var x=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=x,u*=x,l*=x,c*=x}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,o){var a=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=i[o],h=i[o+1],f=i[o+2],d=i[o+3];return e[t]=a*d+l*c+s*f-u*h,e[t+1]=s*d+l*h+u*c-a*f,e[t+2]=u*d+l*f+a*h-s*c,e[t+3]=l*d-a*c-s*h-u*f,e}}]),e}();nA.prototype.isQuaternion=!0;var rA=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Y_(this,t),this.x=e,this.y=n,this.z=r}return $_(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(oA.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(oA.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*r-a*n,l=s*n+a*t-i*r,c=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=u*s+h*-i+l*-a-c*-o,this.y=l*s+h*-o+c*-i-u*-a,this.z=c*s+h*-a+u*-o-l*-i,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return iA.copy(this).projectOnVector(e),this.sub(iA)}},{key:"reflect",value:function(e){return this.sub(iA.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(CS(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:Symbol.iterator,value:uw.mark((function e(){return uw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}();rA.prototype.isVector3=!0;var iA=new rA,oA=new nA,aA=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rA(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rA(-1/0,-1/0,-1/0);Y_(this,e),this.min=t,this.max=n}return $_(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=e.length;s<u;s+=3){var l=e[s],c=e[s+1],h=e[s+2];l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=e.count;s<u;s++){var l=e.getX(s),c=e.getY(s),h=e.getZ(s);l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=uA.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var n=e.geometry;if(void 0!==n)if(t&&void 0!=n.attributes&&void 0!==n.attributes.position)for(var r=n.attributes.position,i=0,o=r.count;i<o;i++)uA.fromBufferAttribute(r,i).applyMatrix4(e.matrixWorld),this.expandByPoint(uA);else null===n.boundingBox&&n.computeBoundingBox(),lA.copy(n.boundingBox),lA.applyMatrix4(e.matrixWorld),this.union(lA);for(var a=e.children,s=0,u=a.length;s<u;s++)this.expandByObject(a[s],t);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,uA),uA.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(mA),gA.subVectors(this.max,mA),cA.subVectors(e.a,mA),hA.subVectors(e.b,mA),fA.subVectors(e.c,mA),dA.subVectors(hA,cA),pA.subVectors(fA,hA),vA.subVectors(cA,fA);var t=[0,-dA.z,dA.y,0,-pA.z,pA.y,0,-vA.z,vA.y,dA.z,0,-dA.x,pA.z,0,-pA.x,vA.z,0,-vA.x,-dA.y,dA.x,0,-pA.y,pA.x,0,-vA.y,vA.x,0];return!!_A(t,cA,hA,fA,gA)&&(!!_A(t=[1,0,0,0,1,0,0,0,1],cA,hA,fA,gA)&&(yA.crossVectors(dA,pA),_A(t=[yA.x,yA.y,yA.z],cA,hA,fA,gA)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return uA.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(uA).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(sA[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),sA[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),sA[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),sA[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),sA[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),sA[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),sA[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),sA[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(sA)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();aA.prototype.isBox3=!0;var sA=[new rA,new rA,new rA,new rA,new rA,new rA,new rA,new rA],uA=new rA,lA=new aA,cA=new rA,hA=new rA,fA=new rA,dA=new rA,pA=new rA,vA=new rA,mA=new rA,gA=new rA,yA=new rA,bA=new rA;function _A(e,t,n,r,i){for(var o=0,a=e.length-3;o<=a;o+=3){bA.fromArray(e,o);var s=i.x*Math.abs(bA.x)+i.y*Math.abs(bA.y)+i.z*Math.abs(bA.z),u=t.dot(bA),l=n.dot(bA),c=r.dot(bA);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>s)return!1}return!0}var wA=new aA,xA=new rA,EA=new rA,SA=new rA,AA=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rA,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;Y_(this,e),this.center=t,this.radius=n}return $_(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):wA.setFromPoints(e).getCenter(n);for(var r=0,i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){SA.subVectors(e,this.center);var t=SA.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.add(SA.multiplyScalar(r/n)),this.radius+=r}return this}},{key:"union",value:function(e){return!0===this.center.equals(e.center)?EA.set(0,0,1).multiplyScalar(e.radius):EA.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(xA.copy(e.center).add(EA)),this.expandByPoint(xA.copy(e.center).sub(EA)),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),TA=new rA,CA=new rA,MA=new rA,kA=new rA,IA=new rA,RA=new rA,PA=new rA,DA=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rA,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rA(0,0,-1);Y_(this,e),this.origin=t,this.direction=n}return $_(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,TA)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=TA.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(TA.copy(this.direction).multiplyScalar(t).add(this.origin),TA.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){CA.copy(e).add(t).multiplyScalar(.5),MA.copy(t).sub(e).normalize(),kA.copy(this.origin).sub(CA);var i,o,a,s,u=.5*e.distanceTo(t),l=-this.direction.dot(MA),c=kA.dot(this.direction),h=-kA.dot(MA),f=kA.lengthSq(),d=Math.abs(1-l*l);if(d>0)if(o=l*c-h,s=u*d,(i=l*h-c)>=0)if(o>=-s)if(o<=s){var p=1/d;a=(i*=p)*(i+l*(o*=p)+2*c)+o*(l*i+o+2*h)+f}else o=u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;else o=-u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;else o<=-s?a=-(i=Math.max(0,-(-l*u+c)))*i+(o=i>0?-u:Math.min(Math.max(-u,-h),u))*(o+2*h)+f:o<=s?(i=0,a=(o=Math.min(Math.max(-u,-h),u))*(o+2*h)+f):a=-(i=Math.max(0,-(l*u+c)))*i+(o=i>0?u:Math.min(Math.max(-u,-h),u))*(o+2*h)+f;else o=l>0?-u:u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(MA).multiplyScalar(o).add(CA),a}},{key:"intersectSphere",value:function(e,t){TA.subVectors(e.center,this.origin);var n=TA.dot(this.direction),r=TA.dot(TA)-n*n,i=e.radius*e.radius;if(r>i)return null;var o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,i,o,a,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),l>=0?(i=(e.min.y-h.y)*l,o=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,o=(e.min.y-h.y)*l),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),c>=0?(a=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(a=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,TA)}},{key:"intersectTriangle",value:function(e,t,n,r,i){IA.subVectors(t,e),RA.subVectors(n,e),PA.crossVectors(IA,RA);var o,a=this.direction.dot(PA);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}kA.subVectors(this.origin,e);var s=o*this.direction.dot(RA.crossVectors(kA,RA));if(s<0)return null;var u=o*this.direction.dot(IA.cross(kA));if(u<0)return null;if(s+u>a)return null;var l=-o*kA.dot(PA);return l<0?null:this.at(l/a,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),NA=function(){function e(){Y_(this,e),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return $_(e,[{key:"set",value:function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=i,m[5]=o,m[9]=a,m[13]=s,m[2]=u,m[6]=l,m[10]=c,m[14]=h,m[3]=f,m[7]=d,m[11]=p,m[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/LA.setFromMatrixColumn(e,0).length(),i=1/LA.setFromMatrixColumn(e,1).length(),o=1/LA.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var h=o*l,f=o*c,d=a*l,p=a*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=f+d*u,t[5]=h-p*u,t[9]=-a*s,t[2]=p-h*u,t[6]=d+f*u,t[10]=o*s}else if("YXZ"===e.order){var v=s*l,m=s*c,g=u*l,y=u*c;t[0]=v+y*a,t[4]=g*a-m,t[8]=o*u,t[1]=o*c,t[5]=o*l,t[9]=-a,t[2]=m*a-g,t[6]=y+v*a,t[10]=o*s}else if("ZXY"===e.order){var b=s*l,_=s*c,w=u*l,x=u*c;t[0]=b-x*a,t[4]=-o*c,t[8]=w+_*a,t[1]=_+w*a,t[5]=o*l,t[9]=x-b*a,t[2]=-o*u,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){var E=o*l,S=o*c,A=a*l,T=a*c;t[0]=s*l,t[4]=A*u-S,t[8]=E*u+T,t[1]=s*c,t[5]=T*u+E,t[9]=S*u-A,t[2]=-u,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var C=o*s,M=o*u,k=a*s,I=a*u;t[0]=s*l,t[4]=I-C*c,t[8]=k*c+M,t[1]=c,t[5]=o*l,t[9]=-a*l,t[2]=-u*l,t[6]=M*c+k,t[10]=C-I*c}else if("XZY"===e.order){var R=o*s,P=o*u,D=a*s,N=a*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=R*c+N,t[5]=o*l,t[9]=P*c-D,t[2]=D*c-P,t[6]=a*l,t[10]=N*c+R}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(BA,e,FA)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return HA.subVectors(e,t),0===HA.lengthSq()&&(HA.z=1),HA.normalize(),UA.crossVectors(n,HA),0===UA.lengthSq()&&(1===Math.abs(n.z)?HA.x+=1e-4:HA.z+=1e-4,HA.normalize(),UA.crossVectors(n,HA)),UA.normalize(),jA.crossVectors(HA,UA),r[0]=UA.x,r[4]=jA.x,r[8]=HA.x,r[1]=UA.y,r[5]=jA.y,r[9]=HA.y,r[2]=UA.z,r[6]=jA.z,r[10]=HA.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],v=n[10],m=n[14],g=n[3],y=n[7],b=n[11],_=n[15],w=r[0],x=r[4],E=r[8],S=r[12],A=r[1],T=r[5],C=r[9],M=r[13],k=r[2],I=r[6],R=r[10],P=r[14],D=r[3],N=r[7],L=r[11],O=r[15];return i[0]=o*w+a*A+s*k+u*D,i[4]=o*x+a*T+s*I+u*N,i[8]=o*E+a*C+s*R+u*L,i[12]=o*S+a*M+s*P+u*O,i[1]=l*w+c*A+h*k+f*D,i[5]=l*x+c*T+h*I+f*N,i[9]=l*E+c*C+h*R+f*L,i[13]=l*S+c*M+h*P+f*O,i[2]=d*w+p*A+v*k+m*D,i[6]=d*x+p*T+v*I+m*N,i[10]=d*E+p*C+v*R+m*L,i[14]=d*S+p*M+v*P+m*O,i[3]=g*w+y*A+b*k+_*D,i[7]=g*x+y*T+b*I+_*N,i[11]=g*E+y*C+b*R+_*L,i[15]=g*S+y*M+b*P+_*O,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],u=e[13],l=e[2],c=e[6],h=e[10],f=e[14];return e[3]*(+i*s*c-r*u*c-i*a*h+n*u*h+r*a*f-n*s*f)+e[7]*(+t*s*f-t*u*h+i*o*h-r*o*f+r*u*l-i*s*l)+e[11]*(+t*u*c-t*a*f-i*o*c+n*o*f+i*a*l-n*u*l)+e[15]*(-r*a*l-t*s*c+t*a*h+r*o*c-n*o*h+n*s*l)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],f=e[11],d=e[12],p=e[13],v=e[14],m=e[15],g=c*v*u-p*h*u+p*s*f-a*v*f-c*s*m+a*h*m,y=d*h*u-l*v*u-d*s*f+o*v*f+l*s*m-o*h*m,b=l*p*u-d*c*u+d*a*f-o*p*f-l*a*m+o*c*m,_=d*c*s-l*p*s-d*a*h+o*p*h+l*a*v-o*c*v,w=t*g+n*y+r*b+i*_;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var x=1/w;return e[0]=g*x,e[1]=(p*h*i-c*v*i-p*r*f+n*v*f+c*r*m-n*h*m)*x,e[2]=(a*v*i-p*s*i+p*r*u-n*v*u-a*r*m+n*s*m)*x,e[3]=(c*s*i-a*h*i-c*r*u+n*h*u+a*r*f-n*s*f)*x,e[4]=y*x,e[5]=(l*v*i-d*h*i+d*r*f-t*v*f-l*r*m+t*h*m)*x,e[6]=(d*s*i-o*v*i-d*r*u+t*v*u+o*r*m-t*s*m)*x,e[7]=(o*h*i-l*s*i+l*r*u-t*h*u-o*r*f+t*s*f)*x,e[8]=b*x,e[9]=(d*c*i-l*p*i-d*n*f+t*p*f+l*n*m-t*c*m)*x,e[10]=(o*p*i-d*a*i+d*n*u-t*p*u-o*n*m+t*a*m)*x,e[11]=(l*a*i-o*c*i-l*n*u+t*c*u+o*n*f-t*a*f)*x,e[12]=_*x,e[13]=(l*p*r-d*c*r+d*n*h-t*p*h-l*n*v+t*c*v)*x,e[14]=(d*a*r-o*p*r-d*n*s+t*p*s+o*n*v-t*a*v)*x,e[15]=(o*c*r-l*a*r+l*n*s-t*c*s-o*n*h+t*a*h)*x,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,u=i*o,l=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,l*a+n,l*s-r*o,0,u*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,u=i+i,l=o+o,c=a+a,h=i*u,f=i*l,d=i*c,p=o*l,v=o*c,m=a*c,g=s*u,y=s*l,b=s*c,_=n.x,w=n.y,x=n.z;return r[0]=(1-(p+m))*_,r[1]=(f+b)*_,r[2]=(d-y)*_,r[3]=0,r[4]=(f-b)*w,r[5]=(1-(h+m))*w,r[6]=(v+g)*w,r[7]=0,r[8]=(d+y)*x,r[9]=(v-g)*x,r[10]=(1-(h+p))*x,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=LA.set(r[0],r[1],r[2]).length(),o=LA.set(r[4],r[5],r[6]).length(),a=LA.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],OA.copy(this);var s=1/i,u=1/o,l=1/a;return OA.elements[0]*=s,OA.elements[1]*=s,OA.elements[2]*=s,OA.elements[4]*=u,OA.elements[5]*=u,OA.elements[6]*=u,OA.elements[8]*=l,OA.elements[9]*=l,OA.elements[10]*=l,t.setFromRotationMatrix(OA),n.x=i,n.y=o,n.z=a,this}},{key:"makePerspective",value:function(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),u=2*i/(n-r),l=(t+e)/(t-e),c=(n+r)/(n-r),h=-(o+i)/(o-i),f=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=u,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),u=1/(n-r),l=1/(o-i),c=(t+e)*s,h=(n+r)*u,f=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}();NA.prototype.isMatrix4=!0;var LA=new rA,OA=new NA,BA=new rA(0,0,0),FA=new rA(1,1,1),UA=new rA,jA=new rA,HA=new rA,GA=new NA,zA=new nA,VA=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;Y_(this,e),this._x=t,this._y=n,this._z=r,this._order=i}return $_(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,i=r[0],o=r[4],a=r[8],s=r[1],u=r[5],l=r[9],c=r[2],h=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(CS(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,f),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-CS(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(CS(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,f),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-CS(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(CS(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-CS(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-l,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return GA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(GA,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return zA.setFromEuler(this),this.setFromQuaternion(zA,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"toVector3",value:function(e){return e?e.set(this._x,this._y,this._z):new rA(this._x,this._y,this._z)}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}]),e}();VA.prototype.isEuler=!0,VA.DefaultOrder="XYZ",VA.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var WA=function(){function e(){Y_(this,e),this.mask=1}return $_(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!==(this.mask&(1<<e|0))}}]),e}(),qA=0,KA=new rA,JA=new nA,QA=new NA,XA=new rA,YA=new rA,ZA=new rA,$A=new nA,eT=new rA(1,0,0),tT=new rA(0,1,0),nT=new rA(0,0,1),rT={type:"added"},iT={type:"removed"},oT=function(e){tw(n,e);var t=ow(n);function n(){var e;Y_(this,n),e=t.call(this),Object.defineProperty(K_(e),"id",{value:qA++}),e.uuid=TS(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var r=new rA,i=new VA,o=new nA,a=new rA(1,1,1);return i._onChange((function(){o.setFromEuler(i,!1)})),o._onChange((function(){i.setFromQuaternion(o,void 0,!1)})),Object.defineProperties(K_(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:o},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new NA},normalMatrix:{value:new LS}}),e.matrix=new NA,e.matrixWorld=new NA,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.layers=new WA,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return $_(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return JA.setFromAxisAngle(e,t),this.quaternion.multiply(JA),this}},{key:"rotateOnWorldAxis",value:function(e,t){return JA.setFromAxisAngle(e,t),this.quaternion.premultiply(JA),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(eT,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(tT,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(nT,e)}},{key:"translateOnAxis",value:function(e,t){return KA.copy(e).applyQuaternion(this.quaternion),this.position.add(KA.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(eT,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(tT,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(nT,e)}},{key:"localToWorld",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return e.applyMatrix4(QA.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?XA.copy(e):XA.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),YA.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?QA.lookAt(YA,XA,this.up):QA.lookAt(XA,YA,this.up),this.quaternion.setFromRotationMatrix(QA),r&&(QA.extractRotation(r.matrixWorld),JA.setFromRotationMatrix(QA),this.quaternion.premultiply(JA.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(rT)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(iT)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(iT)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),QA.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),QA.multiply(e.parent.matrixWorld)),e.applyMatrix4(QA),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(YA,e,ZA),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(YA,$A,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,u=a.length;s<u;s++){var l=a[s];i(e.shapes,l)}else i(e.shapes,a)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],h=0,f=this.material.length;h<f;h++)c.push(i(e.materials,this.material[h]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var d=0;d<this.children.length;d++)r.children.push(this.children[d].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var v=this.animations[p];r.animations.push(i(e.animations,v))}}if(t){var m=E(e.geometries),g=E(e.materials),y=E(e.textures),b=E(e.images),_=E(e.shapes),w=E(e.skeletons),x=E(e.animations);m.length>0&&(n.geometries=m),g.length>0&&(n.materials=g),y.length>0&&(n.textures=y),b.length>0&&(n.images=b),_.length>0&&(n.shapes=_),w.length>0&&(n.skeletons=w),x.length>0&&(n.animations=x)}return n.object=r,n;function E(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}(_S);oT.DefaultUp=new rA(0,1,0),oT.DefaultMatrixAutoUpdate=!0,oT.prototype.isObject3D=!0;var aT=new rA,sT=new rA,uT=new rA,lT=new rA,cT=new rA,hT=new rA,fT=new rA,dT=new rA,pT=new rA,vT=new rA,mT=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rA,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rA,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new rA;Y_(this,e),this.a=t,this.b=n,this.c=r}return $_(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return aT.subVectors(this.c,this.b),sT.subVectors(this.a,this.b),.5*aT.cross(sT).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,i,o){return e.getUV(t,this.a,this.b,this.c,n,r,i,o)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,i=this.a,o=this.b,a=this.c;cT.subVectors(o,i),hT.subVectors(a,i),dT.subVectors(e,i);var s=cT.dot(dT),u=hT.dot(dT);if(s<=0&&u<=0)return t.copy(i);pT.subVectors(e,o);var l=cT.dot(pT),c=hT.dot(pT);if(l>=0&&c<=l)return t.copy(o);var h=s*c-l*u;if(h<=0&&s>=0&&l<=0)return n=s/(s-l),t.copy(i).addScaledVector(cT,n);vT.subVectors(e,a);var f=cT.dot(vT),d=hT.dot(vT);if(d>=0&&f<=d)return t.copy(a);var p=f*u-s*d;if(p<=0&&u>=0&&d<=0)return r=u/(u-d),t.copy(i).addScaledVector(hT,r);var v=l*d-f*c;if(v<=0&&c-l>=0&&f-d>=0)return fT.subVectors(a,o),r=(c-l)/(c-l+(f-d)),t.copy(o).addScaledVector(fT,r);var m=1/(v+p+h);return n=p*m,r=h*m,t.copy(i).addScaledVector(cT,n).addScaledVector(hT,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),aT.subVectors(e,t),r.cross(aT);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){aT.subVectors(r,t),sT.subVectors(n,t),uT.subVectors(e,t);var o=aT.dot(aT),a=aT.dot(sT),s=aT.dot(uT),u=sT.dot(sT),l=sT.dot(uT),c=o*u-a*a;if(0===c)return i.set(-2,-1,-1);var h=1/c,f=(u*s-a*l)*h,d=(o*l-a*s)*h;return i.set(1-f-d,d,f)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,lT),lT.x>=0&&lT.y>=0&&lT.x+lT.y<=1}},{key:"getUV",value:function(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,lT),s.set(0,0),s.addScaledVector(i,lT.x),s.addScaledVector(o,lT.y),s.addScaledVector(a,lT.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return aT.subVectors(n,t),sT.subVectors(e,t),aT.cross(sT).dot(r)<0}}]),e}(),gT=0,yT=function(e){tw(n,e);var t=ow(n);function n(){var e;return Y_(this,n),e=t.call(this),Object.defineProperty(K_(e),"id",{value:gT++}),e.uuid=TS(),e.name="",e.type="Material",e.fog=!0,e.blending=Cw,e.side=ww,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=Hw,e.blendDst=Gw,e.blendEquation=Pw,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=Yw,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=sS,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=KE,e.stencilZFail=KE,e.stencilZPass=KE,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return $_(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===Sw;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Cw&&(n.blending=this.blending),this.side!==ww&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(_S);yT.prototype.isMaterial=!0;var bT=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this)).type="MeshBasicMaterial",r.color=new KS(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=nx,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(yT);bT.prototype.isMeshBasicMaterial=!0;var _T=new rA,wT=new NS,xT=function(){function e(t,n,r){if(Y_(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===r,this.usage=uS,this.updateRange={offset:0,count:-1},this.version=0}return $_(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"copyColorsArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new KS),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this}},{key:"copyVector2sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new NS),t[n++]=o.x,t[n++]=o.y}return this}},{key:"copyVector3sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new rA),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this}},{key:"copyVector4sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new ZS),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)wT.fromBufferAttribute(this,t),wT.applyMatrix3(e),this.setXY(t,wT.x,wT.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)_T.fromBufferAttribute(this,r),_T.applyMatrix3(e),this.setXYZ(r,_T.x,_T.y,_T.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)_T.x=this.getX(t),_T.y=this.getY(t),_T.z=this.getZ(t),_T.applyMatrix4(e),this.setXYZ(t,_T.x,_T.y,_T.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)_T.x=this.getX(t),_T.y=this.getY(t),_T.z=this.getZ(t),_T.applyNormalMatrix(e),this.setXYZ(t,_T.x,_T.y,_T.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)_T.x=this.getX(t),_T.y=this.getY(t),_T.z=this.getZ(t),_T.transformDirection(e),this.setXYZ(t,_T.x,_T.y,_T.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){return this.array[e*this.itemSize]}},{key:"setX",value:function(e,t){return this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){return this.array[e*this.itemSize+1]}},{key:"setY",value:function(e,t){return this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){return this.array[e*this.itemSize+2]}},{key:"setZ",value:function(e,t){return this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){return this.array[e*this.itemSize+3]}},{key:"setW",value:function(e,t){return this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==uS&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}]),e}();xT.prototype.isBufferAttribute=!0;var ET=function(e){tw(n,e);var t=ow(n);function n(e,r,i){return Y_(this,n),t.call(this,new Int8Array(e),r,i)}return $_(n)}(xT),ST=function(e){tw(n,e);var t=ow(n);function n(e,r,i){return Y_(this,n),t.call(this,new Uint8Array(e),r,i)}return $_(n)}(xT),AT=function(e){tw(n,e);var t=ow(n);function n(e,r,i){return Y_(this,n),t.call(this,new Uint8ClampedArray(e),r,i)}return $_(n)}(xT),TT=function(e){tw(n,e);var t=ow(n);function n(e,r,i){return Y_(this,n),t.call(this,new Int16Array(e),r,i)}return $_(n)}(xT),CT=function(e){tw(n,e);var t=ow(n);function n(e,r,i){return Y_(this,n),t.call(this,new Uint16Array(e),r,i)}return $_(n)}(xT),MT=function(e){tw(n,e);var t=ow(n);function n(e,r,i){return Y_(this,n),t.call(this,new Int32Array(e),r,i)}return $_(n)}(xT),kT=function(e){tw(n,e);var t=ow(n);function n(e,r,i){return Y_(this,n),t.call(this,new Uint32Array(e),r,i)}return $_(n)}(xT),IT=function(e){tw(n,e);var t=ow(n);function n(e,r,i){return Y_(this,n),t.call(this,new Uint16Array(e),r,i)}return $_(n)}(xT);IT.prototype.isFloat16BufferAttribute=!0;var RT=function(e){tw(n,e);var t=ow(n);function n(e,r,i){return Y_(this,n),t.call(this,new Float32Array(e),r,i)}return $_(n)}(xT),PT=function(e){tw(n,e);var t=ow(n);function n(e,r,i){return Y_(this,n),t.call(this,new Float64Array(e),r,i)}return $_(n)}(xT),DT=0,NT=new NA,LT=new oT,OT=new rA,BT=new aA,FT=new aA,UT=new rA,jT=function(e){tw(n,e);var t=ow(n);function n(){var e;return Y_(this,n),e=t.call(this),Object.defineProperty(K_(e),"id",{value:DT++}),e.uuid=TS(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return $_(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(OS(e)?kT:CT)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new LS).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return NT.makeRotationFromQuaternion(e),this.applyMatrix4(NT),this}},{key:"rotateX",value:function(e){return NT.makeRotationX(e),this.applyMatrix4(NT),this}},{key:"rotateY",value:function(e){return NT.makeRotationY(e),this.applyMatrix4(NT),this}},{key:"rotateZ",value:function(e){return NT.makeRotationZ(e),this.applyMatrix4(NT),this}},{key:"translate",value:function(e,t,n){return NT.makeTranslation(e,t,n),this.applyMatrix4(NT),this}},{key:"scale",value:function(e,t,n){return NT.makeScale(e,t,n),this.applyMatrix4(NT),this}},{key:"lookAt",value:function(e){return LT.lookAt(e),LT.updateMatrix(),this.applyMatrix4(LT.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(OT).negate(),this.translate(OT.x,OT.y,OT.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new RT(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new aA);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new rA(-1/0,-1/0,-1/0),new rA(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];BT.setFromBufferAttribute(i),this.morphTargetsRelative?(UT.addVectors(this.boundingBox.min,BT.min),this.boundingBox.expandByPoint(UT),UT.addVectors(this.boundingBox.max,BT.max),this.boundingBox.expandByPoint(UT)):(this.boundingBox.expandByPoint(BT.min),this.boundingBox.expandByPoint(BT.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new AA);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new rA,1/0);if(e){var n=this.boundingSphere.center;if(BT.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var o=t[r];FT.setFromBufferAttribute(o),this.morphTargetsRelative?(UT.addVectors(BT.min,FT.min),BT.expandByPoint(UT),UT.addVectors(BT.max,FT.max),BT.expandByPoint(UT)):(BT.expandByPoint(FT.min),BT.expandByPoint(FT.max))}BT.getCenter(n);for(var a=0,s=0,u=e.count;s<u;s++)UT.fromBufferAttribute(e,s),a=Math.max(a,n.distanceToSquared(UT));if(t)for(var l=0,c=t.length;l<c;l++)for(var h=t[l],f=this.morphTargetsRelative,d=0,p=h.count;d<p;d++)UT.fromBufferAttribute(h,d),f&&(OT.fromBufferAttribute(e,d),UT.add(OT)),a=Math.max(a,n.distanceToSquared(UT));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,i=t.normal.array,o=t.uv.array,a=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new xT(new Float32Array(4*a),4));for(var s=t.tangent.array,u=[],l=[],c=0;c<a;c++)u[c]=new rA,l[c]=new rA;var h=new rA,f=new rA,d=new rA,p=new NS,v=new NS,m=new NS,g=new rA,y=new rA,b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(var _=0,w=b.length;_<w;++_)for(var x=b[_],E=x.start,S=E,A=E+x.count;S<A;S+=3)O(n[S+0],n[S+1],n[S+2]);for(var T=new rA,C=new rA,M=new rA,k=new rA,I=0,R=b.length;I<R;++I)for(var P=b[I],D=P.start,N=D,L=D+P.count;N<L;N+=3)B(n[N+0]),B(n[N+1]),B(n[N+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function O(e,t,n){h.fromArray(r,3*e),f.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(o,2*e),v.fromArray(o,2*t),m.fromArray(o,2*n),f.sub(h),d.sub(h),v.sub(p),m.sub(p);var i=1/(v.x*m.y-m.x*v.y);isFinite(i)&&(g.copy(f).multiplyScalar(m.y).addScaledVector(d,-v.y).multiplyScalar(i),y.copy(d).multiplyScalar(v.x).addScaledVector(f,-m.x).multiplyScalar(i),u[e].add(g),u[t].add(g),u[n].add(g),l[e].add(y),l[t].add(y),l[n].add(y))}function B(e){M.fromArray(i,3*e),k.copy(M);var t=u[e];T.copy(t),T.sub(M.multiplyScalar(M.dot(t))).normalize(),C.crossVectors(k,t);var n=C.dot(l[e])<0?-1:1;s[4*e]=T.x,s[4*e+1]=T.y,s[4*e+2]=T.z,s[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new xT(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var o=new rA,a=new rA,s=new rA,u=new rA,l=new rA,c=new rA,h=new rA,f=new rA;if(e)for(var d=0,p=e.count;d<p;d+=3){var v=e.getX(d+0),m=e.getX(d+1),g=e.getX(d+2);o.fromBufferAttribute(t,v),a.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),h.subVectors(s,a),f.subVectors(o,a),h.cross(f),u.fromBufferAttribute(n,v),l.fromBufferAttribute(n,m),c.fromBufferAttribute(n,g),u.add(h),l.add(h),c.add(h),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(g,c.x,c.y,c.z)}else for(var y=0,b=t.count;y<b;y+=3)o.fromBufferAttribute(t,y+0),a.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),h.subVectors(s,a),f.subVectors(o,a),h.cross(f),n.setXYZ(y+0,h.x,h.y,h.z),n.setXYZ(y+1,h.x,h.y,h.z),n.setXYZ(y+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,o=e.attributes[r],a=o.array,s=o.itemSize*t,u=Math.min(a.length,i.length-s),l=0,c=s;l<u;l++,c++)i[c]=a[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)UT.fromBufferAttribute(e,t),UT.normalize(),e.setXYZ(t,UT.x,UT.y,UT.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r),a=0,s=0,u=0,l=t.length;u<l;u++){a=e.isInterleavedBufferAttribute?t[u]*e.data.stride+e.offset:t[u]*r;for(var c=0;c<r;c++)o[s++]=n[a++]}return new xT(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,i=this.attributes;for(var o in i){var a=e(i[o],r);t.setAttribute(o,a)}var s=this.morphAttributes;for(var u in s){for(var l=[],c=s[u],h=0,f=c.length;h<f;h++){var d=e(c[h],r);l.push(d)}t.morphAttributes[u]=l}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,v=0,m=p.length;v<m;v++){var g=p[v];t.addGroup(g.start,g.count,g.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var o in i){var a=i[o];e.data.attributes[o]=a.toJSON(e.data)}var s={},u=!1;for(var l in this.morphAttributes){for(var c=this.morphAttributes[l],h=[],f=0,d=c.length;f<d;f++){var p=c[f];h.push(p.toJSON(e.data))}h.length>0&&(s[l]=h,u=!0)}u&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;v.length>0&&(e.data.groups=JSON.parse(JSON.stringify(v)));var m=this.boundingSphere;return null!==m&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r){var o=r[i];this.setAttribute(i,o.clone(t))}var a=e.morphAttributes;for(var s in a){for(var u=[],l=a[s],c=0,h=l.length;c<h;c++)u.push(l[c].clone(t));this.morphAttributes[s]=u}this.morphTargetsRelative=e.morphTargetsRelative;for(var f=e.groups,d=0,p=f.length;d<p;d++){var v=f[d];this.addGroup(v.start,v.count,v.materialIndex)}var m=e.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(_S);jT.prototype.isBufferGeometry=!0;var HT=new NA,GT=new DA,zT=new AA,VT=new rA,WT=new rA,qT=new rA,KT=new rA,JT=new rA,QT=new rA,XT=new rA,YT=new rA,ZT=new rA,$T=new NS,eC=new NS,tC=new NS,nC=new rA,rC=new rA,iC=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jT,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new bT;return Y_(this,n),(e=t.call(this)).type="Mesh",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function(e,t){var n,r=this.geometry,i=this.material,o=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),zT.copy(r.boundingSphere),zT.applyMatrix4(o),!1!==e.ray.intersectsSphere(zT)&&(HT.copy(o).invert(),GT.copy(e.ray).applyMatrix4(HT),null===r.boundingBox||!1!==GT.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var a=r.index,s=r.attributes.position,u=r.morphAttributes.position,l=r.morphTargetsRelative,c=r.attributes.uv,h=r.attributes.uv2,f=r.groups,d=r.drawRange;if(null!==a)if(Array.isArray(i))for(var p=0,v=f.length;p<v;p++)for(var m=f[p],g=i[m.materialIndex],y=Math.max(m.start,d.start),b=Math.min(a.count,Math.min(m.start+m.count,d.start+d.count));y<b;y+=3){var _=a.getX(y),w=a.getX(y+1),x=a.getX(y+2);(n=oC(this,g,e,GT,s,u,l,c,h,_,w,x))&&(n.faceIndex=Math.floor(y/3),n.face.materialIndex=m.materialIndex,t.push(n))}else for(var E=Math.max(0,d.start),S=Math.min(a.count,d.start+d.count);E<S;E+=3){var A=a.getX(E),T=a.getX(E+1),C=a.getX(E+2);(n=oC(this,i,e,GT,s,u,l,c,h,A,T,C))&&(n.faceIndex=Math.floor(E/3),t.push(n))}else if(void 0!==s)if(Array.isArray(i))for(var M=0,k=f.length;M<k;M++)for(var I=f[M],R=i[I.materialIndex],P=Math.max(I.start,d.start),D=Math.min(s.count,Math.min(I.start+I.count,d.start+d.count));P<D;P+=3){(n=oC(this,R,e,GT,s,u,l,c,h,P,P+1,P+2))&&(n.faceIndex=Math.floor(P/3),n.face.materialIndex=I.materialIndex,t.push(n))}else for(var N=Math.max(0,d.start),L=Math.min(s.count,d.start+d.count);N<L;N+=3){(n=oC(this,i,e,GT,s,u,l,c,h,N,N+1,N+2))&&(n.faceIndex=Math.floor(N/3),t.push(n))}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}]),n}(oT);function oC(e,t,n,r,i,o,a,s,u,l,c,h){VT.fromBufferAttribute(i,l),WT.fromBufferAttribute(i,c),qT.fromBufferAttribute(i,h);var f=e.morphTargetInfluences;if(o&&f){XT.set(0,0,0),YT.set(0,0,0),ZT.set(0,0,0);for(var d=0,p=o.length;d<p;d++){var v=f[d],m=o[d];0!==v&&(KT.fromBufferAttribute(m,l),JT.fromBufferAttribute(m,c),QT.fromBufferAttribute(m,h),a?(XT.addScaledVector(KT,v),YT.addScaledVector(JT,v),ZT.addScaledVector(QT,v)):(XT.addScaledVector(KT.sub(VT),v),YT.addScaledVector(JT.sub(WT),v),ZT.addScaledVector(QT.sub(qT),v)))}VT.add(XT),WT.add(YT),qT.add(ZT)}e.isSkinnedMesh&&(e.boneTransform(l,VT),e.boneTransform(c,WT),e.boneTransform(h,qT));var g=function(e,t,n,r,i,o,a,s){if(null===(t.side===xw?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side!==Ew,s)))return null;rC.copy(s),rC.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(rC);return u<n.near||u>n.far?null:{distance:u,point:rC.clone(),object:e}}(e,t,n,r,VT,WT,qT,nC);if(g){s&&($T.fromBufferAttribute(s,l),eC.fromBufferAttribute(s,c),tC.fromBufferAttribute(s,h),g.uv=mT.getUV(nC,VT,WT,qT,$T,eC,tC,new NS)),u&&($T.fromBufferAttribute(u,l),eC.fromBufferAttribute(u,c),tC.fromBufferAttribute(u,h),g.uv2=mT.getUV(nC,VT,WT,qT,$T,eC,tC,new NS));var y={a:l,b:c,c:h,normal:new rA,materialIndex:0};mT.getNormal(VT,WT,qT,y.normal),g.face=y}return g}iC.prototype.isMesh=!0;var aC=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;Y_(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:r,height:i,depth:o,widthSegments:a,heightSegments:s,depthSegments:u};var l=K_(e);a=Math.floor(a),s=Math.floor(s),u=Math.floor(u);var c=[],h=[],f=[],d=[],p=0,v=0;function m(e,t,n,r,i,o,a,s,u,m,g){for(var y=o/u,b=a/m,_=o/2,w=a/2,x=s/2,E=u+1,S=m+1,A=0,T=0,C=new rA,M=0;M<S;M++)for(var k=M*b-w,I=0;I<E;I++){var R=I*y-_;C[e]=R*r,C[t]=k*i,C[n]=x,h.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=s>0?1:-1,f.push(C.x,C.y,C.z),d.push(I/u),d.push(1-M/m),A+=1}for(var P=0;P<m;P++)for(var D=0;D<u;D++){var N=p+D+E*P,L=p+D+E*(P+1),O=p+(D+1)+E*(P+1),B=p+(D+1)+E*P;c.push(N,L,B),c.push(L,O,B),T+=6}l.addGroup(v,T,g),v+=T,p+=A}return m("z","y","x",-1,-1,o,i,r,u,s,0),m("z","y","x",1,-1,o,i,-r,u,s,1),m("x","z","y",1,1,r,o,i,a,u,2),m("x","z","y",1,-1,r,o,-i,a,u,3),m("x","y","z",1,-1,r,i,o,a,s,4),m("x","y","z",-1,-1,r,i,-o,a,s,5),e.setIndex(c),e.setAttribute("position",new RT(h,3)),e.setAttribute("normal",new RT(f,3)),e.setAttribute("uv",new RT(d,2)),e}return $_(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(jT);function sC(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function uC(e){for(var t={},n=0;n<e.length;n++){var r=sC(e[n]);for(var i in r)t[i]=r[i]}return t}var lC={clone:sC,merge:uC},cC=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this)).type="ShaderMaterial",r.defines={},r.uniforms={},r.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),r.setValues(e)),r}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=sC(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=X_(J_(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var o={};for(var a in this.extensions)!0===this.extensions[a]&&(o[a]=!0);return Object.keys(o).length>0&&(t.extensions=o),t}}]),n}(yT);cC.prototype.isShaderMaterial=!0;var hC=function(e){tw(n,e);var t=ow(n);function n(){var e;return Y_(this,n),(e=t.call(this)).type="Camera",e.matrixWorldInverse=new NA,e.projectionMatrix=new NA,e.projectionMatrixInverse=new NA,e}return $_(n,[{key:"copy",value:function(e,t){return X_(J_(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){X_(J_(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){X_(J_(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(oT);hC.prototype.isCamera=!0;var fC=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return Y_(this,n),(e=t.call(this)).type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=o,e.far=a,e.focus=10,e.aspect=i,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return $_(n,[{key:"copy",value:function(e,t){return X_(J_(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*AS*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*SS*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*AS*Math.atan(Math.tan(.5*SS*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*SS*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=X_(J_(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(hC);fC.prototype.isPerspectiveCamera=!0;var dC=90,pC=function(e){tw(n,e);var t=ow(n);function n(e,r,i){var o;if(Y_(this,n),(o=t.call(this)).type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."),iw(o);o.renderTarget=i;var a=new fC(dC,1,e,r);a.layers=o.layers,a.up.set(0,-1,0),a.lookAt(new rA(1,0,0)),o.add(a);var s=new fC(dC,1,e,r);s.layers=o.layers,s.up.set(0,-1,0),s.lookAt(new rA(-1,0,0)),o.add(s);var u=new fC(dC,1,e,r);u.layers=o.layers,u.up.set(0,0,1),u.lookAt(new rA(0,1,0)),o.add(u);var l=new fC(dC,1,e,r);l.layers=o.layers,l.up.set(0,0,-1),l.lookAt(new rA(0,-1,0)),o.add(l);var c=new fC(dC,1,e,r);c.layers=o.layers,c.up.set(0,-1,0),c.lookAt(new rA(0,0,1)),o.add(c);var h=new fC(dC,1,e,r);return h.layers=o.layers,h.up.set(0,-1,0),h.lookAt(new rA(0,0,-1)),o.add(h),o}return $_(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=u(this.children,6),i=r[0],o=r[1],a=r[2],s=r[3],l=r[4],c=r[5],h=e.xr.enabled,f=e.getRenderTarget();e.xr.enabled=!1;var d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,o),e.setRenderTarget(n,2),e.render(t,a),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,l),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(f),e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}]),n}(oT),vC=function(e){tw(n,e);var t=ow(n);function n(e,r,i,o,a,s,u,l,c,h){var f;return Y_(this,n),e=void 0!==e?e:[],r=void 0!==r?r:fx,(f=t.call(this,e,r,i,o,a,s,u,l,c,h)).flipY=!1,f}return $_(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(XS);vC.prototype.isCubeTexture=!0;var mC=function(e){tw(n,e);var t=ow(n);function n(e,r,i){var o;return Y_(this,n),Number.isInteger(r)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),r=i),o=t.call(this,e,e,r),r=r||{},o.texture=new vC(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),o.texture.isRenderTargetTexture=!0,o.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,o.texture.minFilter=void 0!==r.minFilter?r.minFilter:Tx,o}return $_(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.format=Vx,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new aC(5,5,5),a=new cC({name:"CubemapFromEquirect",uniforms:sC(n),vertexShader:r,fragmentShader:i,side:xw,blending:Tw});a.uniforms.tEquirect.value=t;var s=new iC(o,a),u=t.minFilter;return t.minFilter===kx&&(t.minFilter=Tx),new pC(1,10,this).update(e,s),t.minFilter=u,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var i=e.getRenderTarget(),o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(i)}}]),n}($S);mC.prototype.isWebGLCubeRenderTarget=!0;var gC=new rA,yC=new rA,bC=new LS,_C=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rA(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Y_(this,e),this.normal=t,this.constant=n}return $_(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=gC.subVectors(n,t).cross(yC.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta(gC),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||bC.getNormalMatrix(e),r=this.coplanarPoint(gC).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();_C.prototype.isPlane=!0;var wC=new AA,xC=new rA,EC=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _C,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _C,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new _C,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new _C,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new _C,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new _C;Y_(this,e),this.planes=[t,n,r,i,o,a]}return $_(e,[{key:"set",value:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],v=n[12],m=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,c-s,p-h,y-v).normalize(),t[1].setComponents(a+r,c+s,p+h,y+v).normalize(),t[2].setComponents(a+i,c+u,p+f,y+m).normalize(),t[3].setComponents(a-i,c-u,p-f,y-m).normalize(),t[4].setComponents(a-o,c-l,p-d,y-g).normalize(),t[5].setComponents(a+o,c+l,p+d,y+g).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),wC.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(wC)}},{key:"intersectsSprite",value:function(e){return wC.center.set(0,0,0),wC.radius=.7071067811865476,wC.applyMatrix4(e.matrixWorld),this.intersectsSphere(wC)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(xC.x=r.normal.x>0?e.max.x:e.min.x,xC.y=r.normal.y>0?e.max.y:e.min.y,xC.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(xC)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function SC(){var e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function AC(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){var o=r.get(t);(!o||o.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var a=r.get(t);void 0===a?r.set(t,function(t,r){var i=t.array,o=t.usage,a=e.createBuffer();e.bindBuffer(r,a),e.bufferData(r,i,o),t.onUploadCallback();var s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:(i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&(s=5121),{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):a.version<t.version&&(!function(t,r,i){var o=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(a.buffer,t,i),a.version=t.version)}}}}var TC=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Y_(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:r,height:i,widthSegments:o,heightSegments:a};for(var s=r/2,u=i/2,l=Math.floor(o),c=Math.floor(a),h=l+1,f=c+1,d=r/l,p=i/c,v=[],m=[],g=[],y=[],b=0;b<f;b++)for(var _=b*p-u,w=0;w<h;w++){var x=w*d-s;m.push(x,-_,0),g.push(0,0,1),y.push(w/l),y.push(1-b/c)}for(var E=0;E<c;E++)for(var S=0;S<l;S++){var A=S+h*E,T=S+h*(E+1),C=S+1+h*(E+1),M=S+1+h*E;v.push(A,T,M),v.push(T,C,M)}return e.setIndex(v),e.setAttribute("position",new RT(m,3)),e.setAttribute("normal",new RT(g,3)),e.setAttribute("uv",new RT(y,2)),e}return $_(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(jT),CC={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\treturn texture2D( envMap, uv ).rgb;\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},MC={common:{diffuse:{value:new KS(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new LS},uv2Transform:{value:new LS},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new NS(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new KS(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new KS(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new LS}},sprite:{diffuse:{value:new KS(16777215)},opacity:{value:1},center:{value:new NS(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new LS}}},kC={basic:{uniforms:uC([MC.common,MC.specularmap,MC.envmap,MC.aomap,MC.lightmap,MC.fog]),vertexShader:CC.meshbasic_vert,fragmentShader:CC.meshbasic_frag},lambert:{uniforms:uC([MC.common,MC.specularmap,MC.envmap,MC.aomap,MC.lightmap,MC.emissivemap,MC.fog,MC.lights,{emissive:{value:new KS(0)}}]),vertexShader:CC.meshlambert_vert,fragmentShader:CC.meshlambert_frag},phong:{uniforms:uC([MC.common,MC.specularmap,MC.envmap,MC.aomap,MC.lightmap,MC.emissivemap,MC.bumpmap,MC.normalmap,MC.displacementmap,MC.fog,MC.lights,{emissive:{value:new KS(0)},specular:{value:new KS(1118481)},shininess:{value:30}}]),vertexShader:CC.meshphong_vert,fragmentShader:CC.meshphong_frag},standard:{uniforms:uC([MC.common,MC.envmap,MC.aomap,MC.lightmap,MC.emissivemap,MC.bumpmap,MC.normalmap,MC.displacementmap,MC.roughnessmap,MC.metalnessmap,MC.fog,MC.lights,{emissive:{value:new KS(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:CC.meshphysical_vert,fragmentShader:CC.meshphysical_frag},toon:{uniforms:uC([MC.common,MC.aomap,MC.lightmap,MC.emissivemap,MC.bumpmap,MC.normalmap,MC.displacementmap,MC.gradientmap,MC.fog,MC.lights,{emissive:{value:new KS(0)}}]),vertexShader:CC.meshtoon_vert,fragmentShader:CC.meshtoon_frag},matcap:{uniforms:uC([MC.common,MC.bumpmap,MC.normalmap,MC.displacementmap,MC.fog,{matcap:{value:null}}]),vertexShader:CC.meshmatcap_vert,fragmentShader:CC.meshmatcap_frag},points:{uniforms:uC([MC.points,MC.fog]),vertexShader:CC.points_vert,fragmentShader:CC.points_frag},dashed:{uniforms:uC([MC.common,MC.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:CC.linedashed_vert,fragmentShader:CC.linedashed_frag},depth:{uniforms:uC([MC.common,MC.displacementmap]),vertexShader:CC.depth_vert,fragmentShader:CC.depth_frag},normal:{uniforms:uC([MC.common,MC.bumpmap,MC.normalmap,MC.displacementmap,{opacity:{value:1}}]),vertexShader:CC.meshnormal_vert,fragmentShader:CC.meshnormal_frag},sprite:{uniforms:uC([MC.sprite,MC.fog]),vertexShader:CC.sprite_vert,fragmentShader:CC.sprite_frag},background:{uniforms:{uvTransform:{value:new LS},t2D:{value:null}},vertexShader:CC.background_vert,fragmentShader:CC.background_frag},cube:{uniforms:uC([MC.envmap,{opacity:{value:1}}]),vertexShader:CC.cube_vert,fragmentShader:CC.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:CC.equirect_vert,fragmentShader:CC.equirect_frag},distanceRGBA:{uniforms:uC([MC.common,MC.displacementmap,{referencePosition:{value:new rA},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:CC.distanceRGBA_vert,fragmentShader:CC.distanceRGBA_frag},shadow:{uniforms:uC([MC.lights,MC.fog,{color:{value:new KS(0)},opacity:{value:1}}]),vertexShader:CC.shadow_vert,fragmentShader:CC.shadow_frag}};function IC(e,t,n,r,i,o){var a,s,u=new KS(0),l=!0===i?0:1,c=null,h=0,f=null;function d(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,o)}return{getClearColor:function(){return u},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;u.set(e),d(u,l=t)},getClearAlpha:function(){return l},setClearAlpha:function(e){d(u,l=e)},render:function(n,i){var o=!1,p=!0===i.isScene?i.background:null;p&&p.isTexture&&(p=t.get(p));var v=e.xr,m=v.getSession&&v.getSession();m&&"additive"===m.environmentBlendMode&&(p=null),null===p?d(u,l):p&&p.isColor&&(d(p,1),o=!0),(e.autoClear||o)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.mapping===mx)?(void 0===s&&((s=new iC(new aC(1,1,1),new cC({name:"BackgroundCubeMaterial",uniforms:sC(kC.cube.uniforms),vertexShader:kC.cube.vertexShader,fragmentShader:kC.cube.fragmentShader,side:xw,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(s)),s.material.uniforms.envMap.value=p,s.material.uniforms.flipEnvMap.value=p.isCubeTexture&&!1===p.isRenderTargetTexture?-1:1,c===p&&h===p.version&&f===e.toneMapping||(s.material.needsUpdate=!0,c=p,h=p.version,f=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):p&&p.isTexture&&(void 0===a&&((a=new iC(new TC(2,2),new cC({name:"BackgroundMaterial",uniforms:sC(kC.background.uniforms),vertexShader:kC.background.vertexShader,fragmentShader:kC.background.fragmentShader,side:ww,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),a.material.uniforms.uvTransform.value.copy(p.matrix),c===p&&h===p.version&&f===e.toneMapping||(a.material.needsUpdate=!0,c=p,h=p.version,f=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function RC(e,t,n,r){var i=e.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},u=f(null),l=u;function c(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function f(e){for(var t=[],n=[],r=[],o=0;o<i;o++)t[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function d(){for(var e=l.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function p(e){v(e,0)}function v(n,i){var o=l.newAttributes,a=l.enabledAttributes,s=l.attributeDivisors;(o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==i)&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function m(){for(var t=l.newAttributes,n=l.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function g(t,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,o,a,s):e.vertexAttribIPointer(t,n,i,a,s)}function y(){b(),l!==u&&c((l=u).object)}function b(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,h,y,b){var _=!1;if(a){var w=function(t,n,i){var a=!0===i.wireframe,u=s[t.id];void 0===u&&(u={},s[t.id]=u);var l=u[n.id];void 0===l&&(l={},u[n.id]=l);var c=l[a];void 0===c&&(c=f(r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),l[a]=c);return c}(y,h,u);l!==w&&c((l=w).object),_=function(e,t){var n=l.attributes,r=e.attributes,i=0;for(var o in r){var a=n[o],s=r[o];if(void 0===a)return!0;if(a.attribute!==s)return!0;if(a.data!==s.data)return!0;i++}return l.attributesNum!==i||l.index!==t}(y,b),_&&function(e,t){var n={},r=e.attributes,i=0;for(var o in r){var a=r[o],s={};s.attribute=a,a.data&&(s.data=a.data),n[o]=s,i++}l.attributes=n,l.attributesNum=i,l.index=t}(y,b)}else{var x=!0===u.wireframe;l.geometry===y.id&&l.program===h.id&&l.wireframe===x||(l.geometry=y.id,l.program=h.id,l.wireframe=x,_=!0)}!0===i.isInstancedMesh&&(_=!0),null!==b&&n.update(b,34963),_&&(!function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;d();var u=s.attributes,l=a.getAttributes(),c=o.defaultAttributeValues;for(var h in l){var f=l[h];if(f.location>=0){var y=u[h];if(void 0===y&&("instanceMatrix"===h&&i.instanceMatrix&&(y=i.instanceMatrix),"instanceColor"===h&&i.instanceColor&&(y=i.instanceColor)),void 0!==y){var b=y.normalized,_=y.itemSize,w=n.get(y);if(void 0===w)continue;var x=w.buffer,E=w.type,S=w.bytesPerElement;if(y.isInterleavedBufferAttribute){var A=y.data,T=A.stride,C=y.offset;if(A&&A.isInstancedInterleavedBuffer){for(var M=0;M<f.locationSize;M++)v(f.location+M,A.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=A.meshPerAttribute*A.count)}else for(var k=0;k<f.locationSize;k++)p(f.location+k);e.bindBuffer(34962,x);for(var I=0;I<f.locationSize;I++)g(f.location+I,_/f.locationSize,E,b,T*S,(C+_/f.locationSize*I)*S)}else{if(y.isInstancedBufferAttribute){for(var R=0;R<f.locationSize;R++)v(f.location+R,y.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=y.meshPerAttribute*y.count)}else for(var P=0;P<f.locationSize;P++)p(f.location+P);e.bindBuffer(34962,x);for(var D=0;D<f.locationSize;D++)g(f.location+D,_/f.locationSize,E,b,_*S,_/f.locationSize*D*S)}}else if(void 0!==c){var N=c[h];if(void 0!==N)switch(N.length){case 2:e.vertexAttrib2fv(f.location,N);break;case 3:e.vertexAttrib3fv(f.location,N);break;case 4:e.vertexAttrib4fv(f.location,N);break;default:e.vertexAttrib1fv(f.location,N)}}}}m()}(i,u,h,y),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){for(var e in y(),s){var t=s[e];for(var n in t){var r=t[n];for(var i in r)h(r[i].object),delete r[i];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var i in r)h(r[i].object),delete r[i];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var i in r)h(r[i].object),delete r[i];delete n[e.id]}}},initAttributes:d,enableAttribute:p,disableUnusedAttributes:m}}function PC(e,t,n,r){var i,o=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,a,s){if(0!==s){var u,l;if(o)u=e,l="drawArraysInstanced";else if(l="drawArraysInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[l](i,r,a,s),n.update(a,i,s)}}}function DC(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var u=o||t.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),h=e.getParameter(35660),f=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),v=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),y=h>0,b=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:v,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:o?e.getParameter(36183):0}}function NC(e){var t=this,n=null,r=0,i=!1,o=!1,a=new _C,s=new LS,u={value:null,needsUpdate:!1};function l(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(e,n,r,i){var o=null!==e?e.length:0,l=null;if(0!==o){if(l=u.value,!0!==i||null===l){var c=r+4*o,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===l||l.length<c)&&(l=new Float32Array(c));for(var f=0,d=r;f!==o;++f,d+=4)a.copy(e[f]).applyMatrix4(h,s),a.normal.toArray(l,d),l[d+3]=a.constant}u.value=l,u.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,o){var a=0!==e.length||t||0!==r||i;return i=t,n=c(e,o,0),r=e.length,a},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1,l()},this.setState=function(t,a,s){var h=t.clippingPlanes,f=t.clipIntersection,d=t.clipShadows,p=e.get(t);if(!i||null===h||0===h.length||o&&!d)o?c(null):l();else{var v=o?0:r,m=4*v,g=p.clippingState||null;u.value=g,g=c(h,a,m,s);for(var y=0;y!==m;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=v}}}function LC(e){var t=new WeakMap;function n(e,t){return t===px?e.mapping=fx:t===vx&&(e.mapping=dx),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var o=i.mapping;if(o===px||o===vx){if(t.has(i))return n(t.get(i).texture,i.mapping);var a=i.image;if(a&&a.height>0){var s=new mC(a.height/2);return s.fromEquirectangularTexture(e,i),t.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}return i},dispose:function(){t=new WeakMap}}}kC.physical={uniforms:uC([kC.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new NS(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new KS(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new NS},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new KS(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new KS(1,1,1)},specularColorMap:{value:null}}]),vertexShader:CC.meshphysical_vert,fragmentShader:CC.meshphysical_frag};var OC=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return Y_(this,n),(e=t.call(this)).type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=i,e.top=o,e.bottom=a,e.near=s,e.far=u,e.updateProjectionMatrix(),e}return $_(n,[{key:"copy",value:function(e,t){return X_(J_(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o=(i+=u*this.view.offsetX)+u*this.view.width,s=(a-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=X_(J_(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(hC);OC.prototype.isOrthographicCamera=!0;var BC=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this,e)).type="RawShaderMaterial",r}return $_(n)}(cC);BC.prototype.isRawShaderMaterial=!0;var FC=Math.pow(2,8),UC=[.125,.215,.35,.446,.526,.582],jC=5+UC.length,HC=20,GC=new OC,zC=$C(),VC=zC._lodPlanes,WC=zC._sizeLods,qC=zC._sigmas,KC=new KS,JC=null,QC=(1+Math.sqrt(5))/2,XC=1/QC,YC=[new rA(1,1,1),new rA(-1,1,1),new rA(1,1,-1),new rA(-1,1,-1),new rA(0,QC,XC),new rA(0,QC,-XC),new rA(XC,0,QC),new rA(-XC,0,QC),new rA(QC,XC,0),new rA(-QC,XC,0)],ZC=function(){function e(t){Y_(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(e){var t=new Float32Array(e),n=new rA(0,1,0);return new BC({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Tw,depthTest:!1,depthWrite:!1})}(HC),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}return $_(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;JC=this._renderer.getRenderTarget();var i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapShader&&(this._cubemapShader=rM(),this._compileMaterial(this._cubemapShader))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectShader&&(this._equirectShader=nM(),this._compileMaterial(this._equirectShader))}},{key:"dispose",value:function(){this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var e=0;e<VC.length;e++)VC[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(JC),e.scissorTest=!1,tM(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){JC=this._renderer.getRenderTarget();var n=t||this._allocateTargets(e);return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(e){var t={magFilter:Tx,minFilter:Tx,generateMipmaps:!1,type:Fx,format:Vx,encoding:jE,depthBuffer:!1},n=eM(t);return n.depthBuffer=!e,null===this._pingPongRenderTarget&&(this._pingPongRenderTarget=eM(t)),n}},{key:"_compileMaterial",value:function(e){var t=new iC(VC[0],e);this._renderer.compile(t,GC)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var i=new fC(90,1,t,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,u=s.autoClear,l=s.toneMapping;s.getClearColor(KC),s.toneMapping=ox,s.autoClear=!1;var c=new bT({name:"PMREM.Background",side:xw,depthWrite:!1,depthTest:!1}),h=new iC(new aC,c),f=!1,d=e.background;d?d.isColor&&(c.color.copy(d),e.background=null,f=!0):(c.color.copy(KC),f=!0);for(var p=0;p<6;p++){var v=p%3;0===v?(i.up.set(0,o[p],0),i.lookAt(a[p],0,0)):1===v?(i.up.set(0,0,o[p]),i.lookAt(0,a[p],0)):(i.up.set(0,o[p],0),i.lookAt(0,0,a[p])),tM(r,v*FC,p>2?FC:0,FC,FC),s.setRenderTarget(r),f&&s.render(h,i),s.render(e,i)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=l,s.autoClear=u,e.background=d}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,r=e.mapping===fx||e.mapping===dx;r?(null===this._cubemapShader&&(this._cubemapShader=rM()),this._cubemapShader.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectShader&&(this._equirectShader=nM());var i=r?this._cubemapShader:this._equirectShader,o=new iC(VC[0],i),a=i.uniforms;a.envMap.value=e,r||a.texelSize.value.set(1/e.image.width,1/e.image.height),tM(t,0,0,3*FC,2*FC),n.setRenderTarget(t),n.render(o,GC)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<jC;r++){var i=Math.sqrt(qC[r]*qC[r]-qC[r-1]*qC[r-1]),o=YC[(r-1)%YC.length];this._blur(e,r-1,r,i,o)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,i){var o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}},{key:"_halfBlur",value:function(e,t,n,r,i,o,a){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");var l=new iC(VC[r],u),c=u.uniforms,h=WC[n]-1,f=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,d=i/f,p=isFinite(i)?1+Math.floor(3*d):HC;p>HC&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(HC));for(var v=[],m=0,g=0;g<HC;++g){var y=g/d,b=Math.exp(-y*y/2);v.push(b),0===g?m+=b:g<p&&(m+=2*b)}for(var _=0;_<v.length;_++)v[_]=v[_]/m;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=v,c.latitudinal.value="latitudinal"===o,a&&(c.poleAxis.value=a),c.dTheta.value=f,c.mipInt.value=8-n;var w=WC[r];tM(t,3*Math.max(0,FC-2*w),(0===r?0:2*FC)+2*w*(r>4?r-8+4:0),3*w,2*w),s.setRenderTarget(t),s.render(l,GC)}}]),e}();function $C(){for(var e=[],t=[],n=[],r=8,i=0;i<jC;i++){var o=Math.pow(2,r);t.push(o);var a=1/o;i>4?a=UC[i-8+4-1]:0===i&&(a=0),n.push(a);for(var s=1/(o-1),u=-s/2,l=1+s/2,c=[u,u,l,u,l,l,u,u,l,l,u,l],h=new Float32Array(108),f=new Float32Array(72),d=new Float32Array(36),p=0;p<6;p++){var v=p%3*2/3-1,m=p>2?0:-1,g=[v,m,0,v+2/3,m,0,v+2/3,m+1,0,v,m,0,v+2/3,m+1,0,v,m+1,0];h.set(g,18*p),f.set(c,12*p);var y=[p,p,p,p,p,p];d.set(y,6*p)}var b=new jT;b.setAttribute("position",new xT(h,3)),b.setAttribute("uv",new xT(f,2)),b.setAttribute("faceIndex",new xT(d,1)),e.push(b),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function eM(e){var t=new $S(3*FC,3*FC,e);return t.texture.mapping=mx,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function tM(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function nM(){var e=new NS(1,1);return new BC({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = texture2D ( envMap, uv ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t}\n\t\t",blending:Tw,depthTest:!1,depthWrite:!1})}function rM(){return new BC({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Tw,depthTest:!1,depthWrite:!1})}function iM(e){var t=new WeakMap,n=null;function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){var o=i.mapping,a=o===px||o===vx,s=o===fx||o===dx;if(a||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;var u=t.get(i);return null===n&&(n=new ZC(e)),u=a?n.fromEquirectangular(i,u):n.fromCubemap(i,u),t.set(i,u),u.texture}if(t.has(i))return t.get(i).texture;var l=i.image;if(a&&l&&l.height>0||s&&l&&function(e){for(var t=0,n=6,r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(l)){null===n&&(n=new ZC(e));var c=a?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,c),i.addEventListener("dispose",r),c.texture}return null}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function oM(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function aM(e,t,n,r){var i={},o=new WeakMap;function a(e){var s=e.target;for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);s.removeEventListener("dispose",a),delete i[s.id];var l=o.get(s);l&&(t.remove(l),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,i=e.attributes.position,a=0;if(null!==r){var s=r.array;a=r.version;for(var u=0,l=s.length;u<l;u+=3){var c=s[u+0],h=s[u+1],f=s[u+2];n.push(c,h,h,f,f,c)}}else{var d=i.array;a=i.version;for(var p=0,v=d.length/3-1;p<v;p+=3){var m=p+0,g=p+1,y=p+2;n.push(m,g,g,y,y,m)}}var b=new(OS(n)?kT:CT)(n,1);b.version=a;var _=o.get(e);_&&t.remove(_),o.set(e,b)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var i=e.morphAttributes;for(var o in i)for(var a=i[o],s=0,u=a.length;s<u;s++)t.update(a[s],34962)},getWireframeAttribute:function(e){var t=o.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function sM(e,t,n,r){var i,o,a,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,o,t*a),n.update(r,i,1)},this.renderInstances=function(r,u,l){if(0!==l){var c,h;if(s)c=e,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](i,u,o,r*a,l),n.update(u,i,l)}}}function uM(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}var lM=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Y_(this,n),(e=t.call(this,null)).image={data:r,width:i,height:o,depth:a},e.magFilter=wx,e.minFilter=wx,e.wrapR=bx,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return $_(n)}(XS);function cM(e,t){return e[0]-t[0]}function hM(e,t){return Math.abs(t[1])-Math.abs(e[1])}function fM(e,t){var n=1,r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function dM(e,t,n){for(var r={},i=new Float32Array(8),o=new WeakMap,a=new rA,s=[],u=0;u<8;u++)s[u]=[u,0];return{update:function(u,l,c,h){var f=u.morphTargetInfluences;if(!0===t.isWebGL2){var d=l.morphAttributes.position.length,p=o.get(l);if(void 0===p||p.count!==d){void 0!==p&&p.texture.dispose();var v=void 0!==l.morphAttributes.normal,m=l.morphAttributes.position,g=l.morphAttributes.normal||[],y=!0===v?2:1,b=l.attributes.position.count*y,_=1;b>t.maxTextureSize&&(_=Math.ceil(b/t.maxTextureSize),b=t.maxTextureSize);var w=new Float32Array(b*_*4*d),x=new lM(w,b,_,d);x.format=Vx,x.type=Bx,x.needsUpdate=!0;for(var E=4*y,S=0;S<d;S++)for(var A=m[S],T=g[S],C=b*_*4*S,M=0;M<A.count;M++){a.fromBufferAttribute(A,M),!0===A.normalized&&fM(a,A);var k=M*E;w[C+k+0]=a.x,w[C+k+1]=a.y,w[C+k+2]=a.z,w[C+k+3]=0,!0===v&&(a.fromBufferAttribute(T,M),!0===T.normalized&&fM(a,T),w[C+k+4]=a.x,w[C+k+5]=a.y,w[C+k+6]=a.z,w[C+k+7]=0)}p={count:d,texture:x,size:new NS(b,_)},o.set(l,p),l.addEventListener("dispose",(function e(){x.dispose(),o.delete(l),l.removeEventListener("dispose",e)}))}for(var I=0,R=0;R<f.length;R++)I+=f[R];var P=l.morphTargetsRelative?1:1-I;h.getUniforms().setValue(e,"morphTargetBaseInfluence",P),h.getUniforms().setValue(e,"morphTargetInfluences",f),h.getUniforms().setValue(e,"morphTargetsTexture",p.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",p.size)}else{var D=void 0===f?0:f.length,N=r[l.id];if(void 0===N||N.length!==D){N=[];for(var L=0;L<D;L++)N[L]=[L,0];r[l.id]=N}for(var O=0;O<D;O++){var B=N[O];B[0]=O,B[1]=f[O]}N.sort(hM);for(var F=0;F<8;F++)F<D&&N[F][1]?(s[F][0]=N[F][0],s[F][1]=N[F][1]):(s[F][0]=Number.MAX_SAFE_INTEGER,s[F][1]=0);s.sort(cM);for(var U=l.morphAttributes.position,j=l.morphAttributes.normal,H=0,G=0;G<8;G++){var z=s[G],V=z[0],W=z[1];V!==Number.MAX_SAFE_INTEGER&&W?(U&&l.getAttribute("morphTarget"+G)!==U[V]&&l.setAttribute("morphTarget"+G,U[V]),j&&l.getAttribute("morphNormal"+G)!==j[V]&&l.setAttribute("morphNormal"+G,j[V]),i[G]=W,H+=W):(U&&!0===l.hasAttribute("morphTarget"+G)&&l.deleteAttribute("morphTarget"+G),j&&!0===l.hasAttribute("morphNormal"+G)&&l.deleteAttribute("morphNormal"+G),i[G]=0)}var q=l.morphTargetsRelative?1:1-H;h.getUniforms().setValue(e,"morphTargetBaseInfluence",q),h.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function pM(e,t,n,r){var i=new WeakMap;function o(e){var t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var a=r.render.frame,s=e.geometry,u=t.get(e,s);return i.get(u)!==a&&(t.update(u),i.set(u,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",o)&&e.addEventListener("dispose",o),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),u},dispose:function(){i=new WeakMap}}}lM.prototype.isDataTexture2DArray=!0;var vM=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Y_(this,n),(e=t.call(this,null)).image={data:r,width:i,height:o,depth:a},e.magFilter=wx,e.minFilter=wx,e.wrapR=bx,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return $_(n)}(XS);vM.prototype.isDataTexture3D=!0;var mM=new XS,gM=new lM,yM=new vM,bM=new vC,_M=[],wM=[],xM=new Float32Array(16),EM=new Float32Array(9),SM=new Float32Array(4);function AM(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=_M[i];if(void 0===o&&(o=new Float32Array(i),_M[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function TM(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function CM(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function MM(e,t){var n=wM[t];void 0===n&&(n=new Int32Array(t),wM[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function kM(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function IM(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(TM(n,t))return;e.uniform2fv(this.addr,t),CM(n,t)}}function RM(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(TM(n,t))return;e.uniform3fv(this.addr,t),CM(n,t)}}function PM(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(TM(n,t))return;e.uniform4fv(this.addr,t),CM(n,t)}}function DM(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(TM(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),CM(n,t)}else{if(TM(n,r))return;SM.set(r),e.uniformMatrix2fv(this.addr,!1,SM),CM(n,r)}}function NM(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(TM(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),CM(n,t)}else{if(TM(n,r))return;EM.set(r),e.uniformMatrix3fv(this.addr,!1,EM),CM(n,r)}}function LM(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(TM(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),CM(n,t)}else{if(TM(n,r))return;xM.set(r),e.uniformMatrix4fv(this.addr,!1,xM),CM(n,r)}}function OM(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function BM(e,t){var n=this.cache;TM(n,t)||(e.uniform2iv(this.addr,t),CM(n,t))}function FM(e,t){var n=this.cache;TM(n,t)||(e.uniform3iv(this.addr,t),CM(n,t))}function UM(e,t){var n=this.cache;TM(n,t)||(e.uniform4iv(this.addr,t),CM(n,t))}function jM(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function HM(e,t){var n=this.cache;TM(n,t)||(e.uniform2uiv(this.addr,t),CM(n,t))}function GM(e,t){var n=this.cache;TM(n,t)||(e.uniform3uiv(this.addr,t),CM(n,t))}function zM(e,t){var n=this.cache;TM(n,t)||(e.uniform4uiv(this.addr,t),CM(n,t))}function VM(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||mM,i)}function WM(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||yM,i)}function qM(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||bM,i)}function KM(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||gM,i)}function JM(e,t){e.uniform1fv(this.addr,t)}function QM(e,t){var n=AM(t,this.size,2);e.uniform2fv(this.addr,n)}function XM(e,t){var n=AM(t,this.size,3);e.uniform3fv(this.addr,n)}function YM(e,t){var n=AM(t,this.size,4);e.uniform4fv(this.addr,n)}function ZM(e,t){var n=AM(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function $M(e,t){var n=AM(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function ek(e,t){var n=AM(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function tk(e,t){e.uniform1iv(this.addr,t)}function nk(e,t){e.uniform2iv(this.addr,t)}function rk(e,t){e.uniform3iv(this.addr,t)}function ik(e,t){e.uniform4iv(this.addr,t)}function ok(e,t){e.uniform1uiv(this.addr,t)}function ak(e,t){e.uniform2uiv(this.addr,t)}function sk(e,t){e.uniform3uiv(this.addr,t)}function uk(e,t){e.uniform4uiv(this.addr,t)}function lk(e,t,n){var r=t.length,i=MM(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTexture2D(t[o]||mM,i[o])}function ck(e,t,n){var r=t.length,i=MM(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTexture3D(t[o]||yM,i[o])}function hk(e,t,n){var r=t.length,i=MM(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTextureCube(t[o]||bM,i[o])}function fk(e,t,n){var r=t.length,i=MM(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTexture2DArray(t[o]||gM,i[o])}function dk(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return kM;case 35664:return IM;case 35665:return RM;case 35666:return PM;case 35674:return DM;case 35675:return NM;case 35676:return LM;case 5124:case 35670:return OM;case 35667:case 35671:return BM;case 35668:case 35672:return FM;case 35669:case 35673:return UM;case 5125:return jM;case 36294:return HM;case 36295:return GM;case 36296:return zM;case 35678:case 36198:case 36298:case 36306:case 35682:return VM;case 35679:case 36299:case 36307:return WM;case 35680:case 36300:case 36308:case 36293:return qM;case 36289:case 36303:case 36311:case 36292:return KM}}(t.type)}function pk(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return JM;case 35664:return QM;case 35665:return XM;case 35666:return YM;case 35674:return ZM;case 35675:return $M;case 35676:return ek;case 5124:case 35670:return tk;case 35667:case 35671:return nk;case 35668:case 35672:return rk;case 35669:case 35673:return ik;case 5125:return ok;case 36294:return ak;case 36295:return sk;case 36296:return uk;case 35678:case 36198:case 36298:case 36306:case 35682:return lk;case 35679:case 36299:case 36307:return ck;case 35680:case 36300:case 36308:case 36293:return hk;case 36289:case 36303:case 36311:case 36292:return fk}}(t.type)}function vk(e){this.id=e,this.seq=[],this.map={}}pk.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),CM(t,e)},vk.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(e,t[a.id],n)}};var mk=/(\w+)(\])?(\[|\.)?/g;function gk(e,t){e.seq.push(t),e.map[t.id]=t}function yk(e,t,n){var r=e.name,i=r.length;for(mk.lastIndex=0;;){var o=mk.exec(r),a=mk.lastIndex,s=o[1],u="]"===o[2],l=o[3];if(u&&(s|=0),void 0===l||"["===l&&a+2===i){gk(n,void 0===l?new dk(s,e,t):new pk(s,e,t));break}var c=n.map[s];void 0===c&&gk(n,c=new vk(s)),n=c}}function bk(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r);yk(i,e.getUniformLocation(t,i.name),this)}}function _k(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}bk.prototype.setValue=function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)},bk.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},bk.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},bk.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var wk=0;function xk(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":n.toUpperCase()+"\n\n"+i+"\n\n"+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function Ek(e,t){var n=function(e){switch(e){case jE:return["Linear","( value )"];case HE:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Sk(e,t){var n;switch(t){case ax:n="Linear";break;case sx:n="Reinhard";break;case ux:n="OptimizedCineon";break;case lx:n="ACESFilmic";break;case cx:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Ak(e){return""!==e}function Tk(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Ck(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Mk=/^[ \t]*#include +<([\w\d./]+)>/gm;function kk(e){return e.replace(Mk,Ik)}function Ik(e,t){var n=CC[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return kk(n)}var Rk=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Pk=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Dk(e){return e.replace(Pk,Lk).replace(Rk,Nk)}function Nk(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Lk(e,t,n,r)}function Lk(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function Ok(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Bk(e,t,n,r){var i,o,a=e.getContext(),s=n.defines,u=n.vertexShader,l=n.fragmentShader,c=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===yw?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===bw?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===_w&&(t="SHADOWMAP_TYPE_VSM"),t}(n),h=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case fx:case dx:t="ENVMAP_TYPE_CUBE";break;case mx:case gx:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),f=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case dx:case gx:t="ENVMAP_MODE_REFRACTION"}return t}(n),d=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case nx:t="ENVMAP_BLENDING_MULTIPLY";break;case rx:t="ENVMAP_BLENDING_MIX";break;case ix:t="ENVMAP_BLENDING_ADD"}return t}(n),p=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ak).join("\n")}(n),v=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),m=a.createProgram(),g=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=[v].filter(Ak).join("\n")).length>0&&(i+="\n"),(o=[p,v].filter(Ak).join("\n")).length>0&&(o+="\n")):(i=[Ok(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ak).join("\n"),o=[p,Ok(n),"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+f:"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ox?"#define TONE_MAPPING":"",n.toneMapping!==ox?CC.tonemapping_pars_fragment:"",n.toneMapping!==ox?Sk("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.transparent?"":"#define OPAQUE",CC.encodings_pars_fragment,Ek("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Ak).join("\n")),u=Ck(u=Tk(u=kk(u),n),n),l=Ck(l=Tk(l=kk(l),n),n),u=Dk(u),l=Dk(l),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(g="#version 300 es\n",i=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,o=["#define varying in",n.glslVersion===yS?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===yS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+o);var y,b,_=g+o+l,w=_k(a,35633,g+i+u),x=_k(a,35632,_);if(a.attachShader(m,w),a.attachShader(m,x),void 0!==n.index0AttributeName?a.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&a.bindAttribLocation(m,0,"position"),a.linkProgram(m),e.debug.checkShaderErrors){var E=a.getProgramInfoLog(m).trim(),S=a.getShaderInfoLog(w).trim(),A=a.getShaderInfoLog(x).trim(),T=!0,C=!0;if(!1===a.getProgramParameter(m,35714)){T=!1;var M=xk(a,w,"vertex"),k=xk(a,x,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+E+"\n"+M+"\n"+k)}else""!==E?console.warn("THREE.WebGLProgram: Program Info Log:",E):""!==S&&""!==A||(C=!1);C&&(this.diagnostics={runnable:T,programLog:E,vertexShader:{log:S,prefix:i},fragmentShader:{log:A,prefix:o}})}return a.deleteShader(w),a.deleteShader(x),this.getUniforms=function(){return void 0===y&&(y=new bk(a,m)),y},this.getAttributes=function(){return void 0===b&&(b=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var o=e.getActiveAttrib(t,i),a=o.name,s=1;35674===o.type&&(s=2),35675===o.type&&(s=3),35676===o.type&&(s=4),n[a]={type:o.type,location:e.getAttribLocation(t,a),locationSize:s}}return n}(a,m)),b},this.destroy=function(){r.releaseStatesOfProgram(this),a.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=wk++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=x,this}var Fk=0,Uk=function(){function e(){Y_(this,e),this.shaderCache=new Map,this.materialCache=new Map}return $_(e,[{key:"update",value:function(e){var t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}},{key:"remove",value:function(e){var t,n=q_(this.materialCache.get(e));try{for(n.s();!(t=n.n()).done;){var r=t.value;r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r)}}catch(i){n.e(i)}finally{n.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}},{key:"_getShaderStage",value:function(e){var t=this.shaderCache;if(!1===t.has(e)){var n=new jk;t.set(e,n)}return t.get(e)}}]),e}(),jk=$_((function e(){Y_(this,e),this.id=Fk++,this.usedTimes=0}));function Hk(e,t,n,r,i,o,a){var s=new WA,u=new Uk,l=[],c=i.isWebGL2,h=i.logarithmicDepthBuffer,f=i.floatVertexTextures,d=i.maxVertexUniforms,p=i.vertexTextures,v=i.precision,m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(o,s,l,g,y){var b,_,w,x,E=g.fog,S=o.isMeshStandardMaterial?g.environment:null,A=(o.isMeshStandardMaterial?n:t).get(o.envMap||S),T=m[o.type],C=y.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(f)return 1024;var n=d,r=Math.floor((n-20)/4),i=Math.min(r,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}(y):0;if(null!==o.precision&&(v=i.getMaxPrecision(o.precision))!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",v,"instead."),T){var M=kC[T];b=M.vertexShader,_=M.fragmentShader}else b=o.vertexShader,_=o.fragmentShader,u.update(o),w=u.getVertexShaderID(o),x=u.getFragmentShaderID(o);var k=e.getRenderTarget(),I=o.alphaTest>0,R=o.clearcoat>0;return{isWebGL2:c,shaderID:T,shaderName:o.type,vertexShader:b,fragmentShader:_,defines:o.defines,customVertexShaderID:w,customFragmentShaderID:x,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:v,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:p,outputEncoding:null===k?e.outputEncoding:!0===k.isXRRenderTarget?k.texture.encoding:jE,map:!!o.map,matcap:!!o.matcap,envMap:!!A,envMapMode:A&&A.mapping,envMapCubeUV:!!A&&(A.mapping===mx||A.mapping===gx),lightMap:!!o.lightMap,aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:o.normalMapType===WE,tangentSpaceNormalMap:o.normalMapType===VE,decodeVideoTexture:!!o.map&&!0===o.map.isVideoTexture&&o.map.encoding===HE,clearcoat:R,clearcoatMap:R&&!!o.clearcoatMap,clearcoatRoughnessMap:R&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:R&&!!o.clearcoatNormalMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularColorMap:!!o.specularColorMap,transparent:o.transparent,alphaMap:!!o.alphaMap,alphaTest:I,gradientMap:!!o.gradientMap,sheen:o.sheen>0,sheenColorMap:!!o.sheenColorMap,sheenRoughnessMap:!!o.sheenRoughnessMap,transmission:o.transmission>0,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!y.geometry&&!!y.geometry.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!y.geometry&&!!y.geometry.attributes.color&&4===y.geometry.attributes.color.itemSize,vertexUvs:!!o.map||!!o.bumpMap||!!o.normalMap||!!o.specularMap||!!o.alphaMap||!!o.emissiveMap||!!o.roughnessMap||!!o.metalnessMap||!!o.clearcoatMap||!!o.clearcoatRoughnessMap||!!o.clearcoatNormalMap||!!o.displacementMap||!!o.transmissionMap||!!o.thicknessMap||!!o.specularIntensityMap||!!o.specularColorMap||!!o.sheenColorMap||!!o.sheenRoughnessMap,uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.transmission>0||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheen>0||o.sheenColorMap||o.sheenRoughnessMap)&&!!o.displacementMap,fog:!!E,useFog:o.fog,fogExp2:E&&E.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===y.isSkinnedMesh&&C>0,maxBones:C,useVertexTexture:f,morphTargets:!!y.geometry&&!!y.geometry.morphAttributes.position,morphNormals:!!y.geometry&&!!y.geometry.morphAttributes.normal,morphTargetsCount:y.geometry&&y.geometry.morphAttributes.position?y.geometry.morphAttributes.position.length:0,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&l.length>0,shadowMapType:e.shadowMap.type,toneMapping:o.toneMapped?e.toneMapping:ox,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===Ew,flipSided:o.side===xw,depthPacking:void 0!==o.depthPacking&&o.depthPacking,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.maxBones),e.push(t.morphTargetsCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0);t.supportsVertexTextures&&s.enable(1);t.instancing&&s.enable(2);t.instancingColor&&s.enable(3);t.map&&s.enable(4);t.matcap&&s.enable(5);t.envMap&&s.enable(6);t.envMapCubeUV&&s.enable(7);t.lightMap&&s.enable(8);t.aoMap&&s.enable(9);t.emissiveMap&&s.enable(10);t.bumpMap&&s.enable(11);t.normalMap&&s.enable(12);t.objectSpaceNormalMap&&s.enable(13);t.tangentSpaceNormalMap&&s.enable(14);t.clearcoat&&s.enable(15);t.clearcoatMap&&s.enable(16);t.clearcoatRoughnessMap&&s.enable(17);t.clearcoatNormalMap&&s.enable(18);t.displacementMap&&s.enable(19);t.specularMap&&s.enable(20);t.roughnessMap&&s.enable(21);t.metalnessMap&&s.enable(22);t.gradientMap&&s.enable(23);t.alphaMap&&s.enable(24);t.alphaTest&&s.enable(25);t.vertexColors&&s.enable(26);t.vertexAlphas&&s.enable(27);t.vertexUvs&&s.enable(28);t.vertexTangents&&s.enable(29);t.uvsVertexOnly&&s.enable(30);t.fog&&s.enable(31);e.push(s.mask),s.disableAll(),t.useFog&&s.enable(0);t.flatShading&&s.enable(1);t.logarithmicDepthBuffer&&s.enable(2);t.skinning&&s.enable(3);t.useVertexTexture&&s.enable(4);t.morphTargets&&s.enable(5);t.morphNormals&&s.enable(6);t.premultipliedAlpha&&s.enable(7);t.shadowMapEnabled&&s.enable(8);t.physicallyCorrectLights&&s.enable(9);t.doubleSided&&s.enable(10);t.flipSided&&s.enable(11);t.depthPacking&&s.enable(12);t.dithering&&s.enable(13);t.specularIntensityMap&&s.enable(14);t.specularColorMap&&s.enable(15);t.transmission&&s.enable(16);t.transmissionMap&&s.enable(17);t.thicknessMap&&s.enable(18);t.sheen&&s.enable(19);t.sheenColorMap&&s.enable(20);t.sheenRoughnessMap&&s.enable(21);t.decodeVideoTexture&&s.enable(22);t.transparent&&s.enable(23);e.push(s.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=m[e.type];if(n){var r=kC[n];t=lC.clone(r.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var r,i=0,a=l.length;i<a;i++){var s=l[i];if(s.cacheKey===n){++(r=s).usedTimes;break}}return void 0===r&&(r=new Bk(e,n,t,o),l.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){var t=l.indexOf(e);l[t]=l[l.length-1],l.pop(),e.destroy()}},releaseShaderCache:function(e){u.remove(e)},programs:l,dispose:function(){u.dispose()}}}function Gk(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function zk(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Vk(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Wk(){var e=[],t=0,n=[],r=[],i=[];function o(n,r,i,o,a,s){var u=e[t];return void 0===u?(u={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},e[t]=u):(u.id=n.id,u.object=n,u.geometry=r,u.material=i,u.groupOrder=o,u.renderOrder=n.renderOrder,u.z=a,u.group=s),t++,u}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,a,s,u,l){var c=o(e,t,a,s,u,l);a.transmission>0?r.push(c):!0===a.transparent?i.push(c):n.push(c)},unshift:function(e,t,a,s,u,l){var c=o(e,t,a,s,u,l);a.transmission>0?r.unshift(c):!0===a.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(var n=t,r=e.length;n<r;n++){var i=e[n];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.group=null}},sort:function(e,t){n.length>1&&n.sort(e||zk),r.length>1&&r.sort(t||Vk),i.length>1&&i.sort(t||Vk)}}}function qk(){var e=new WeakMap;return{get:function(t,n){var r;return!1===e.has(t)?(r=new Wk,e.set(t,[r])):n>=e.get(t).length?(r=new Wk,e.get(t).push(r)):r=e.get(t)[n],r},dispose:function(){e=new WeakMap}}}function Kk(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new rA,color:new KS};break;case"SpotLight":n={position:new rA,direction:new rA,color:new KS,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new rA,color:new KS,distance:0,decay:0};break;case"HemisphereLight":n={direction:new rA,skyColor:new KS,groundColor:new KS};break;case"RectAreaLight":n={color:new KS,position:new rA,halfWidth:new rA,halfHeight:new rA}}return e[t.id]=n,n}}}var Jk=0;function Qk(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Xk(e,t){for(var n=new Kk,r=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new NS};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new NS,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},o=0;o<9;o++)i.probe.push(new rA);var a=new rA,s=new NA,u=new NA;return{setup:function(o,a){for(var s=0,u=0,l=0,c=0;c<9;c++)i.probe[c].set(0,0,0);var h=0,f=0,d=0,p=0,v=0,m=0,g=0,y=0;o.sort(Qk);for(var b=!0!==a?Math.PI:1,_=0,w=o.length;_<w;_++){var x=o[_],E=x.color,S=x.intensity,A=x.distance,T=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)s+=E.r*S*b,u+=E.g*S*b,l+=E.b*S*b;else if(x.isLightProbe)for(var C=0;C<9;C++)i.probe[C].addScaledVector(x.sh.coefficients[C],S);else if(x.isDirectionalLight){var M=n.get(x);if(M.color.copy(x.color).multiplyScalar(x.intensity*b),x.castShadow){var k=x.shadow,I=r.get(x);I.shadowBias=k.bias,I.shadowNormalBias=k.normalBias,I.shadowRadius=k.radius,I.shadowMapSize=k.mapSize,i.directionalShadow[h]=I,i.directionalShadowMap[h]=T,i.directionalShadowMatrix[h]=x.shadow.matrix,m++}i.directional[h]=M,h++}else if(x.isSpotLight){var R=n.get(x);if(R.position.setFromMatrixPosition(x.matrixWorld),R.color.copy(E).multiplyScalar(S*b),R.distance=A,R.coneCos=Math.cos(x.angle),R.penumbraCos=Math.cos(x.angle*(1-x.penumbra)),R.decay=x.decay,x.castShadow){var P=x.shadow,D=r.get(x);D.shadowBias=P.bias,D.shadowNormalBias=P.normalBias,D.shadowRadius=P.radius,D.shadowMapSize=P.mapSize,i.spotShadow[d]=D,i.spotShadowMap[d]=T,i.spotShadowMatrix[d]=x.shadow.matrix,y++}i.spot[d]=R,d++}else if(x.isRectAreaLight){var N=n.get(x);N.color.copy(E).multiplyScalar(S),N.halfWidth.set(.5*x.width,0,0),N.halfHeight.set(0,.5*x.height,0),i.rectArea[p]=N,p++}else if(x.isPointLight){var L=n.get(x);if(L.color.copy(x.color).multiplyScalar(x.intensity*b),L.distance=x.distance,L.decay=x.decay,x.castShadow){var O=x.shadow,B=r.get(x);B.shadowBias=O.bias,B.shadowNormalBias=O.normalBias,B.shadowRadius=O.radius,B.shadowMapSize=O.mapSize,B.shadowCameraNear=O.camera.near,B.shadowCameraFar=O.camera.far,i.pointShadow[f]=B,i.pointShadowMap[f]=T,i.pointShadowMatrix[f]=x.shadow.matrix,g++}i.point[f]=L,f++}else if(x.isHemisphereLight){var F=n.get(x);F.skyColor.copy(x.color).multiplyScalar(S*b),F.groundColor.copy(x.groundColor).multiplyScalar(S*b),i.hemi[v]=F,v++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=MC.LTC_FLOAT_1,i.rectAreaLTC2=MC.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=MC.LTC_HALF_1,i.rectAreaLTC2=MC.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=u,i.ambient[2]=l;var U=i.hash;U.directionalLength===h&&U.pointLength===f&&U.spotLength===d&&U.rectAreaLength===p&&U.hemiLength===v&&U.numDirectionalShadows===m&&U.numPointShadows===g&&U.numSpotShadows===y||(i.directional.length=h,i.spot.length=d,i.rectArea.length=p,i.point.length=f,i.hemi.length=v,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotShadowMatrix.length=y,U.directionalLength=h,U.pointLength=f,U.spotLength=d,U.rectAreaLength=p,U.hemiLength=v,U.numDirectionalShadows=m,U.numPointShadows=g,U.numSpotShadows=y,i.version=Jk++)},setupView:function(e,t){for(var n=0,r=0,o=0,l=0,c=0,h=t.matrixWorldInverse,f=0,d=e.length;f<d;f++){var p=e[f];if(p.isDirectionalLight){var v=i.directional[n];v.direction.setFromMatrixPosition(p.matrixWorld),a.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(a),v.direction.transformDirection(h),n++}else if(p.isSpotLight){var m=i.spot[o];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(h),m.direction.setFromMatrixPosition(p.matrixWorld),a.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(a),m.direction.transformDirection(h),o++}else if(p.isRectAreaLight){var g=i.rectArea[l];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(h),u.identity(),s.copy(p.matrixWorld),s.premultiply(h),u.extractRotation(s),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(u),g.halfHeight.applyMatrix4(u),l++}else if(p.isPointLight){var y=i.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(h),r++}else if(p.isHemisphereLight){var b=i.hemi[c];b.direction.setFromMatrixPosition(p.matrixWorld),b.direction.transformDirection(h),b.direction.normalize(),c++}}},state:i}}function Yk(e,t){var n=new Xk(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function Zk(e,t){var n=new WeakMap;return{get:function(r){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(i=new Yk(e,t),n.set(r,[i])):o>=n.get(r).length?(i=new Yk(e,t),n.get(r).push(i)):i=n.get(r)[o],i},dispose:function(){n=new WeakMap}}}var $k=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this)).type="MeshDepthMaterial",r.depthPacking=GE,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.setValues(e),r}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(yT);$k.prototype.isMeshDepthMaterial=!0;var eI=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this)).type="MeshDistanceMaterial",r.referencePosition=new rA,r.nearDistance=1,r.farDistance=1e3,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.fog=!1,r.setValues(e),r}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(yT);eI.prototype.isMeshDistanceMaterial=!0;function tI(e,t,n){var r=new EC,i=new NS,o=new NS,a=new ZS,s=new $k({depthPacking:zE}),u=new eI,l={},c=n.maxTextureSize,h={0:xw,1:ww,2:Ew},f=new cC({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new NS},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=f.clone();d.defines.HORIZONTAL_PASS=1;var p=new jT;p.setAttribute("position",new xT(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var v=new iC(p,f),m=this;function g(n,r){var i=t.update(v);f.defines.VSM_SAMPLES!==n.blurSamples&&(f.defines.VSM_SAMPLES=n.blurSamples,d.defines.VSM_SAMPLES=n.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,f,v,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,d,v,null)}function y(t,n,r,i,o,a,c){var f=null,d=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(f=void 0!==d?d:!0===i.isPointLight?u:s,e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length||r.displacementMap&&0!==r.displacementScale||r.alphaMap&&r.alphaTest>0){var p=f.uuid,v=r.uuid,m=l[p];void 0===m&&(m={},l[p]=m);var g=m[v];void 0===g&&(g=f.clone(),m[v]=g),f=g}return f.visible=r.visible,f.wireframe=r.wireframe,f.side=c===_w?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:h[r.side],f.alphaMap=r.alphaMap,f.alphaTest=r.alphaTest,f.clipShadows=r.clipShadows,f.clippingPlanes=r.clippingPlanes,f.clipIntersection=r.clipIntersection,f.displacementMap=r.displacementMap,f.displacementScale=r.displacementScale,f.displacementBias=r.displacementBias,f.wireframeLinewidth=r.wireframeLinewidth,f.linewidth=r.linewidth,!0===i.isPointLight&&!0===f.isMeshDistanceMaterial&&(f.referencePosition.setFromMatrixPosition(i.matrixWorld),f.nearDistance=o,f.farDistance=a),f}function b(n,i,o,a,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===_w)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var u=t.update(n),l=n.material;if(Array.isArray(l))for(var c=u.groups,h=0,f=c.length;h<f;h++){var d=c[h],p=l[d.materialIndex];if(p&&p.visible){var v=y(n,0,p,a,o.near,o.far,s);e.renderBufferDirect(o,null,u,v,n,d)}}else if(l.visible){var m=y(n,0,l,a,o.near,o.far,s);e.renderBufferDirect(o,null,u,m,n,null)}}for(var g=n.children,_=0,w=g.length;_<w;_++)b(g[_],i,o,a,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=yw,this.render=function(t,n,s){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),l=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),f=e.state;f.setBlending(Tw),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var d=0,p=t.length;d<p;d++){var v=t[d],y=v.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){i.copy(y.mapSize);var _=y.getFrameExtents();if(i.multiply(_),o.copy(y.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(o.x=Math.floor(c/_.x),i.x=o.x*_.x,y.mapSize.x=o.x),i.y>c&&(o.y=Math.floor(c/_.y),i.y=o.y*_.y,y.mapSize.y=o.y)),null===y.map&&!y.isPointLightShadow&&this.type===_w){var w={minFilter:Tx,magFilter:Tx,format:Vx};y.map=new $S(i.x,i.y,w),y.map.texture.name=v.name+".shadowMap",y.mapPass=new $S(i.x,i.y,w),y.camera.updateProjectionMatrix()}if(null===y.map){var x={minFilter:wx,magFilter:wx,format:Vx};y.map=new $S(i.x,i.y,x),y.map.texture.name=v.name+".shadowMap",y.camera.updateProjectionMatrix()}e.setRenderTarget(y.map),e.clear();for(var E=y.getViewportCount(),S=0;S<E;S++){var A=y.getViewport(S);a.set(o.x*A.x,o.y*A.y,o.x*A.z,o.y*A.w),f.viewport(a),y.updateMatrices(v,S),r=y.getFrustum(),b(n,s,y.camera,v,this.type)}y.isPointLightShadow||this.type!==_w||g(y,s),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(u,l,h)}}}function nI(e,t,n){var r,i,o=n.isWebGL2;var a=new function(){var t=!1,n=new ZS,r=null,i=new ZS(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?j(2929):H(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case Jw:e.depthFunc(512);break;case Qw:e.depthFunc(519);break;case Xw:e.depthFunc(513);break;case Yw:e.depthFunc(515);break;case Zw:e.depthFunc(514);break;case $w:e.depthFunc(518);break;case ex:e.depthFunc(516);break;case tx:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},u=new function(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null;return{setTest:function(e){t||(e?j(2960):H(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&u===r||(e.stencilOp(t,n,r),a=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null}}},l={},c={},h=new WeakMap,f=[],d=null,p=!1,v=null,m=null,g=null,y=null,b=null,_=null,w=null,x=!1,E=null,S=null,A=null,T=null,C=null,M=e.getParameter(35661),k=!1,I=0,R=e.getParameter(7938);-1!==R.indexOf("WebGL")?(I=parseFloat(/^WebGL (\d)/.exec(R)[1]),k=I>=1):-1!==R.indexOf("OpenGL ES")&&(I=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),k=I>=2);var P=null,D={},N=e.getParameter(3088),L=e.getParameter(2978),O=(new ZS).fromArray(N),B=(new ZS).fromArray(L);function F(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var a=0;a<r;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}var U={};function j(t){!0!==l[t]&&(e.enable(t),l[t]=!0)}function H(t){!1!==l[t]&&(e.disable(t),l[t]=!1)}U[3553]=F(3553,3553,1),U[34067]=F(34067,34069,6),a.setClear(0,0,0,1),s.setClear(1),u.setClear(0),j(2929),s.setFunc(Yw),q(!1),K(pw),j(2884),W(Tw);var G=(z_(r={},Pw,32774),z_(r,Dw,32778),z_(r,Nw,32779),r);if(o)G[Lw]=32775,G[Ow]=32776;else{var z=t.get("EXT_blend_minmax");null!==z&&(G[Lw]=z.MIN_EXT,G[Ow]=z.MAX_EXT)}var V=(z_(i={},Bw,0),z_(i,Fw,1),z_(i,Uw,768),z_(i,Hw,770),z_(i,Kw,776),z_(i,Ww,774),z_(i,zw,772),z_(i,jw,769),z_(i,Gw,771),z_(i,qw,775),z_(i,Vw,773),i);function W(t,n,r,i,o,a,s,u){if(t!==Tw){if(!1===p&&(j(3042),p=!0),t===Rw)o=o||n,a=a||r,s=s||i,n===m&&o===b||(e.blendEquationSeparate(G[n],G[o]),m=n,b=o),r===g&&i===y&&a===_&&s===w||(e.blendFuncSeparate(V[r],V[i],V[a],V[s]),g=r,y=i,_=a,w=s),v=t,x=null;else if(t!==v||u!==x){if(m===Pw&&b===Pw||(e.blendEquation(32774),m=Pw,b=Pw),u)switch(t){case Cw:e.blendFuncSeparate(1,771,1,771);break;case Mw:e.blendFunc(1,1);break;case kw:e.blendFuncSeparate(0,769,0,1);break;case Iw:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case Cw:e.blendFuncSeparate(770,771,1,771);break;case Mw:e.blendFunc(770,1);break;case kw:e.blendFuncSeparate(0,769,0,1);break;case Iw:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}g=null,y=null,_=null,w=null,v=t,x=u}}else!0===p&&(H(3042),p=!1)}function q(t){E!==t&&(t?e.frontFace(2304):e.frontFace(2305),E=t)}function K(t){t!==dw?(j(2884),t!==S&&(t===pw?e.cullFace(1029):t===vw?e.cullFace(1028):e.cullFace(1032))):H(2884),S=t}function J(t,n,r){t?(j(32823),T===n&&C===r||(e.polygonOffset(n,r),T=n,C=r)):H(32823)}function Q(t){void 0===t&&(t=33984+M-1),P!==t&&(e.activeTexture(t),P=t)}return{buffers:{color:a,depth:s,stencil:u},enable:j,disable:H,bindFramebuffer:function(t,n){return c[t]!==n&&(e.bindFramebuffer(t,n),c[t]=n,o&&(36009===t&&(c[36160]=n),36160===t&&(c[36009]=n)),!0)},drawBuffers:function(r,i){var o=f,a=!1;if(r)if(void 0===(o=h.get(i))&&(o=[],h.set(i,o)),r.isWebGLMultipleRenderTargets){var s=r.texture;if(o.length!==s.length||36064!==o[0]){for(var u=0,l=s.length;u<l;u++)o[u]=36064+u;o.length=s.length,a=!0}}else 36064!==o[0]&&(o[0]=36064,a=!0);else 1029!==o[0]&&(o[0]=1029,a=!0);a&&(n.isWebGL2?e.drawBuffers(o):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))},useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:W,setMaterial:function(e,t){e.side===Ew?H(2884):j(2884);var n=e.side===xw;t&&(n=!n),q(n),e.blending===Cw&&!1===e.transparent?W(Tw):W(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),a.setMask(e.colorWrite);var r=e.stencilWrite;u.setTest(r),r&&(u.setMask(e.stencilWriteMask),u.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),u.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),J(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?j(32926):H(32926)},setFlipSided:q,setCullFace:K,setLineWidth:function(t){t!==A&&(k&&e.lineWidth(t),A=t)},setPolygonOffset:J,setScissorTest:function(e){e?j(3089):H(3089)},activeTexture:Q,bindTexture:function(t,n){null===P&&Q();var r=D[P];void 0===r&&(r={type:void 0,texture:void 0},D[P]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||U[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=D[P];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===O.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),O.copy(t))},viewport:function(t){!1===B.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),B.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===o&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),l={},P=null,D={},c={},h=new WeakMap,f=[],d=null,p=!1,v=null,m=null,g=null,y=null,b=null,_=null,w=null,x=!1,E=null,S=null,A=null,T=null,C=null,O.set(0,0,e.canvas.width,e.canvas.height),B.set(0,0,e.canvas.width,e.canvas.height),a.reset(),s.reset(),u.reset()}}}function rI(e,t,n,r,i,o,a){var s,u,l,c=i.isWebGL2,h=i.maxTextures,f=i.maxCubemapSize,d=i.maxTextureSize,p=i.maxSamples,v=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):void 0,m=new WeakMap,g=!1;try{g="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(z){}function y(e,t){return g?new OffscreenCanvas(e,t):US("canvas")}function b(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var o=t?PS:Math.floor,a=o(i*e.width),s=o(i*e.height);void 0===l&&(l=y(a,s));var u=n?y(a,s):l;return u.width=a,u.height=s,u.getContext("2d").drawImage(e,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+s+")."),u}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function _(e){return IS(e.width)&&IS(e.height)}function w(e,t){return e.generateMipmaps&&t&&e.minFilter!==wx&&e.minFilter!==Tx}function x(t){e.generateMipmap(t)}function E(n,r,i,o){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===c)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var s=r;return 6403===r&&(5126===i&&(s=33326),5131===i&&(s=33325),5121===i&&(s=33321)),33319===r&&(5126===i&&(s=33328),5131===i&&(s=33327),5121===i&&(s=33323)),6408===r&&(5126===i&&(s=34836),5131===i&&(s=34842),5121===i&&(s=o===HE&&!1===a?35907:32856),32819===i&&(s=32854),32820===i&&(s=32855)),33325!==s&&33326!==s&&33327!==s&&33328!==s&&34842!==s&&34836!==s||t.get("EXT_color_buffer_float"),s}function S(e,t,n){return!0===w(e,n)||e.isFramebufferTexture&&e.minFilter!==wx&&e.minFilter!==Tx?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function A(e){return e===wx||e===xx||e===Sx?9728:9729}function T(t){var n=t.target;n.removeEventListener("dispose",T),function(t){var n=r.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),r.remove(t)}(n),n.isVideoTexture&&m.delete(n),a.memory.textures--}function C(t){var n=t.target;n.removeEventListener("dispose",C),function(t){var n=t.texture,i=r.get(t),o=r.get(n);if(!t)return;void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),a.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(i.__webglFramebuffer[s]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[s]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(var u=0,l=n.length;u<l;u++){var c=r.get(n[u]);c.__webglTexture&&(e.deleteTexture(c.__webglTexture),a.memory.textures--),r.remove(n[u])}r.remove(n),r.remove(t)}(n)}var M=0;function k(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=a.render.frame;m.get(e)!==t&&(m.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){var o=e.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void L(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function I(t,i){var a=r.get(t);t.version>0&&a.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;N(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);for(var a=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),s=r.image[0]&&r.image[0].isDataTexture,u=[],l=0;l<6;l++)u[l]=a||s?s?r.image[l].image:r.image[l]:b(r.image[l],!1,!0,f),u[l]=j(r,u[l]);var h,d=u[0],p=_(d)||c,v=o.convert(r.format,r.encoding),m=o.convert(r.type),g=E(r.internalFormat,v,m,r.encoding),y=c&&!0!==r.isVideoTexture,A=void 0===t.__version,T=S(r,d,p);if(D(34067,r,p),a){y&&A&&n.texStorage2D(34067,T,g,d.width,d.height);for(var C=0;C<6;C++){h=u[C].mipmaps;for(var M=0;M<h.length;M++){var k=h[M];r.format!==Vx?null!==v?y?n.compressedTexSubImage2D(34069+C,M,0,0,k.width,k.height,v,k.data):n.compressedTexImage2D(34069+C,M,g,k.width,k.height,0,k.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):y?n.texSubImage2D(34069+C,M,0,0,k.width,k.height,v,m,k.data):n.texImage2D(34069+C,M,g,k.width,k.height,0,v,m,k.data)}}}else{h=r.mipmaps,y&&A&&(h.length>0&&T++,n.texStorage2D(34067,T,g,u[0].width,u[0].height));for(var I=0;I<6;I++)if(s){y?n.texSubImage2D(34069+I,0,0,0,u[I].width,u[I].height,v,m,u[I].data):n.texImage2D(34069+I,0,g,u[I].width,u[I].height,0,v,m,u[I].data);for(var R=0;R<h.length;R++){var P=h[R].image[I].image;y?n.texSubImage2D(34069+I,R+1,0,0,P.width,P.height,v,m,P.data):n.texImage2D(34069+I,R+1,g,P.width,P.height,0,v,m,P.data)}}else{y?n.texSubImage2D(34069+I,0,0,0,v,m,u[I]):n.texImage2D(34069+I,0,g,v,m,u[I]);for(var L=0;L<h.length;L++){var O=h[L];y?n.texSubImage2D(34069+I,L+1,0,0,v,m,O.image[I]):n.texImage2D(34069+I,L+1,g,v,m,O.image[I])}}}w(r,p)&&x(34067);t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(a,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture))}var R=(z_(s={},yx,10497),z_(s,bx,33071),z_(s,_x,33648),s),P=(z_(u={},wx,9728),z_(u,xx,9984),z_(u,Sx,9986),z_(u,Tx,9729),z_(u,Cx,9985),z_(u,kx,9987),u);function D(n,o,a){if(a?(e.texParameteri(n,10242,R[o.wrapS]),e.texParameteri(n,10243,R[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,R[o.wrapR]),e.texParameteri(n,10240,P[o.magFilter]),e.texParameteri(n,10241,P[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),o.wrapS===bx&&o.wrapT===bx||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,A(o.magFilter)),e.texParameteri(n,10241,A(o.minFilter)),o.minFilter!==wx&&o.minFilter!==Tx&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(o.type===Bx&&!1===t.has("OES_texture_float_linear"))return;if(!1===c&&o.type===Fx&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function N(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",T),t.__webglTexture=e.createTexture(),a.memory.textures++)}function L(t,r,i){var a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),N(t,r),n.activeTexture(33984+i),n.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);var s,u=function(e){return!c&&(e.wrapS!==bx||e.wrapT!==bx||e.minFilter!==wx&&e.minFilter!==Tx)}(r)&&!1===_(r.image),l=b(r.image,u,!1,d),h=_(l=j(r,l))||c,f=o.convert(r.format,r.encoding),p=o.convert(r.type),v=E(r.internalFormat,f,p,r.encoding,r.isVideoTexture);D(a,r,h);var m=r.mipmaps,g=c&&!0!==r.isVideoTexture,y=void 0===t.__version,A=S(r,l,h);if(r.isDepthTexture)v=6402,c?v=r.type===Bx?36012:r.type===Ox?33190:r.type===Hx?35056:33189:r.type===Bx&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Kx&&6402===v&&r.type!==Nx&&r.type!==Ox&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Nx,p=o.convert(r.type)),r.format===Jx&&6402===v&&(v=34041,r.type!==Hx&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Hx,p=o.convert(r.type))),g&&y?n.texStorage2D(3553,1,v,l.width,l.height):n.texImage2D(3553,0,v,l.width,l.height,0,f,p,null);else if(r.isDataTexture)if(m.length>0&&h){g&&y&&n.texStorage2D(3553,A,v,m[0].width,m[0].height);for(var T=0,C=m.length;T<C;T++)s=m[T],g?n.texSubImage2D(3553,0,0,0,s.width,s.height,f,p,s.data):n.texImage2D(3553,T,v,s.width,s.height,0,f,p,s.data);r.generateMipmaps=!1}else g?(y&&n.texStorage2D(3553,A,v,l.width,l.height),n.texSubImage2D(3553,0,0,0,l.width,l.height,f,p,l.data)):n.texImage2D(3553,0,v,l.width,l.height,0,f,p,l.data);else if(r.isCompressedTexture){g&&y&&n.texStorage2D(3553,A,v,m[0].width,m[0].height);for(var M=0,k=m.length;M<k;M++)s=m[M],r.format!==Vx?null!==f?g?n.compressedTexSubImage2D(3553,M,0,0,s.width,s.height,f,s.data):n.compressedTexImage2D(3553,M,v,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):g?n.texSubImage2D(3553,M,0,0,s.width,s.height,f,p,s.data):n.texImage2D(3553,M,v,s.width,s.height,0,f,p,s.data)}else if(r.isDataTexture2DArray)g?(y&&n.texStorage3D(35866,A,v,l.width,l.height,l.depth),n.texSubImage3D(35866,0,0,0,0,l.width,l.height,l.depth,f,p,l.data)):n.texImage3D(35866,0,v,l.width,l.height,l.depth,0,f,p,l.data);else if(r.isDataTexture3D)g?(y&&n.texStorage3D(32879,A,v,l.width,l.height,l.depth),n.texSubImage3D(32879,0,0,0,0,l.width,l.height,l.depth,f,p,l.data)):n.texImage3D(32879,0,v,l.width,l.height,l.depth,0,f,p,l.data);else if(r.isFramebufferTexture)g&&y?n.texStorage2D(3553,A,v,l.width,l.height):n.texImage2D(3553,0,v,l.width,l.height,0,f,p,null);else if(m.length>0&&h){g&&y&&n.texStorage2D(3553,A,v,m[0].width,m[0].height);for(var I=0,R=m.length;I<R;I++)s=m[I],g?n.texSubImage2D(3553,I,0,0,f,p,s):n.texImage2D(3553,I,v,f,p,s);r.generateMipmaps=!1}else g?(y&&n.texStorage2D(3553,A,v,l.width,l.height),n.texSubImage2D(3553,0,0,0,f,p,l)):n.texImage2D(3553,0,v,f,p,l);w(r,h)&&x(a),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function O(t,i,a,s,u){var l=o.convert(a.format,a.encoding),c=o.convert(a.type),h=E(a.internalFormat,l,c,a.encoding);r.get(i).__hasExternalTextures||(32879===u||35866===u?n.texImage3D(u,0,h,i.width,i.height,i.depth,0,l,c,null):n.texImage2D(u,0,h,i.width,i.height,0,l,c,null)),n.bindFramebuffer(36160,t),i.useRenderToTexture?v.framebufferTexture2DMultisampleEXT(36160,s,u,r.get(a).__webglTexture,0,U(i)):e.framebufferTexture2D(36160,s,u,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function B(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r||n.useRenderToTexture){var a=n.depthTexture;a&&a.isDepthTexture&&(a.type===Bx?i=36012:a.type===Ox&&(i=33190));var s=U(n);n.useRenderToTexture?v.renderbufferStorageMultisampleEXT(36161,s,i,n.width,n.height):e.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){var u=U(n);r&&n.useRenderbuffer?e.renderbufferStorageMultisample(36161,u,35056,n.width,n.height):n.useRenderToTexture?v.renderbufferStorageMultisampleEXT(36161,u,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{var l=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,c=o.convert(l.format,l.encoding),h=o.convert(l.type),f=E(l.internalFormat,c,h,l.encoding),d=U(n);r&&n.useRenderbuffer?e.renderbufferStorageMultisample(36161,d,f,n.width,n.height):n.useRenderToTexture?v.renderbufferStorageMultisampleEXT(36161,d,f,n.width,n.height):e.renderbufferStorage(36161,f,n.width,n.height)}e.bindRenderbuffer(36161,null)}function F(t){var i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),k(i.depthTexture,0);var o=r.get(i.depthTexture).__webglTexture,a=U(i);if(i.depthTexture.format===Kx)i.useRenderToTexture?v.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,a):e.framebufferTexture2D(36160,36096,3553,o,0);else{if(i.depthTexture.format!==Jx)throw new Error("Unknown depthTexture format");i.useRenderToTexture?v.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,a):e.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(var a=0;a<6;a++)n.bindFramebuffer(36160,i.__webglFramebuffer[a]),i.__webglDepthbuffer[a]=e.createRenderbuffer(),B(i.__webglDepthbuffer[a],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),B(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function U(e){return c&&(e.useRenderbuffer||e.useRenderToTexture)?Math.min(p,e.samples):0}function j(e,n){var r=e.encoding,i=e.format,o=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===bS||r!==jE&&(r===HE?!1===c?!0===t.has("EXT_sRGB")&&i===Vx?(e.format=bS,e.minFilter=Tx,e.generateMipmaps=!1):n=JS.sRGBToLinear(n):i===Vx&&o===Rx||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}var H=!1,G=!1;this.allocateTextureUnit=function(){var e=M;return e>=h&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+h),M+=1,e},this.resetTextureUnits=function(){M=0},this.setTexture2D=k,this.setTexture2DArray=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?L(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?L(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=I,this.rebindTextures=function(e,t,n){var i=r.get(e);void 0!==t&&O(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&F(e)},this.setupRenderTarget=function(t){var s=t.texture,u=r.get(t),l=r.get(s);t.addEventListener("dispose",C),!0!==t.isWebGLMultipleRenderTargets&&(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=s.version,a.memory.textures++);var h=!0===t.isWebGLCubeRenderTarget,f=!0===t.isWebGLMultipleRenderTargets,d=s.isDataTexture3D||s.isDataTexture2DArray,p=_(t)||c;if(h){u.__webglFramebuffer=[];for(var v=0;v<6;v++)u.__webglFramebuffer[v]=e.createFramebuffer()}else if(u.__webglFramebuffer=e.createFramebuffer(),f)if(i.drawBuffers)for(var m=t.texture,g=0,y=m.length;g<y;g++){var b=r.get(m[g]);void 0===b.__webglTexture&&(b.__webglTexture=e.createTexture(),a.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(t.useRenderbuffer)if(c){u.__webglMultisampledFramebuffer=e.createFramebuffer(),u.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,u.__webglColorRenderbuffer);var S=o.convert(s.format,s.encoding),A=o.convert(s.type),T=E(s.internalFormat,S,A,s.encoding),M=U(t);e.renderbufferStorageMultisample(36161,M,T,t.width,t.height),n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,u.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(u.__webglDepthRenderbuffer=e.createRenderbuffer(),B(u.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){n.bindTexture(34067,l.__webglTexture),D(34067,s,p);for(var k=0;k<6;k++)O(u.__webglFramebuffer[k],t,s,36064,34069+k);w(s,p)&&x(34067),n.unbindTexture()}else if(f){for(var I=t.texture,R=0,P=I.length;R<P;R++){var N=I[R],L=r.get(N);n.bindTexture(3553,L.__webglTexture),D(3553,N,p),O(u.__webglFramebuffer,t,N,36064+R,3553),w(N,p)&&x(3553)}n.unbindTexture()}else{var j=3553;if(d)if(c)j=s.isDataTexture3D?32879:35866;else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(j,l.__webglTexture),D(j,s,p),O(u.__webglFramebuffer,t,s,36064,j),w(s,p)&&x(j),n.unbindTexture()}t.depthBuffer&&F(t)},this.updateRenderTargetMipmap=function(e){for(var t=_(e)||c,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],o=0,a=i.length;o<a;o++){var s=i[o];if(w(s,t)){var u=e.isWebGLCubeRenderTarget?34067:3553,l=r.get(s).__webglTexture;n.bindTexture(u,l),x(u),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.useRenderbuffer)if(c){var i=t.width,o=t.height,a=16384,s=[36064],u=t.stencilBuffer?33306:36096;t.depthBuffer&&s.push(u),t.ignoreDepthForMultisampleCopy||(t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024));var l=r.get(t);n.bindFramebuffer(36008,l.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,l.__webglFramebuffer),t.ignoreDepthForMultisampleCopy&&(e.invalidateFramebuffer(36008,[u]),e.invalidateFramebuffer(36009,[u])),e.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728),e.invalidateFramebuffer(36008,s),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,l.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=F,this.setupFrameBufferTexture=O,this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===H&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),H=!0),e=e.texture),k(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===G&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),G=!0),e=e.texture),I(e,t)}}function iI(e,t,n){var r=n.isWebGL2;return{convert:function(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e===Rx)return 5121;if(e===Ux)return 32819;if(e===jx)return 32820;if(e===Px)return 5120;if(e===Dx)return 5122;if(e===Nx)return 5123;if(e===Lx)return 5124;if(e===Ox)return 5125;if(e===Bx)return 5126;if(e===Fx)return r?5131:null!==(n=t.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(e===Gx)return 6406;if(e===Vx)return 6408;if(e===Wx)return 6409;if(e===qx)return 6410;if(e===Kx)return 6402;if(e===Jx)return 34041;if(e===Qx)return 6403;if(e===zx)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(e===bS)return null!==(n=t.get("EXT_sRGB"))?n.SRGB_ALPHA_EXT:null;if(e===Xx)return 36244;if(e===Yx)return 33319;if(e===Zx)return 33320;if(e===$x)return 36249;if(e===eE||e===tE||e===nE||e===rE)if(i===HE){if(null===(n=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(e===eE)return n.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===tE)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===nE)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===rE)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(e===eE)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===tE)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===nE)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===rE)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===iE||e===oE||e===aE||e===sE){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(e===iE)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===oE)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===aE)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===sE)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===uE)return null!==(n=t.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if(e===lE||e===cE){if(null===(n=t.get("WEBGL_compressed_texture_etc")))return null;if(e===lE)return i===HE?n.COMPRESSED_SRGB8_ETC2:n.COMPRESSED_RGB8_ETC2;if(e===cE)return i===HE?n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:n.COMPRESSED_RGBA8_ETC2_EAC}if(e===hE||e===fE||e===dE||e===pE||e===vE||e===mE||e===gE||e===yE||e===bE||e===_E||e===wE||e===xE||e===EE||e===SE){if(null===(n=t.get("WEBGL_compressed_texture_astc")))return null;if(e===hE)return i===HE?n.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:n.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===fE)return i===HE?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:n.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===dE)return i===HE?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:n.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===pE)return i===HE?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:n.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===vE)return i===HE?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:n.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===mE)return i===HE?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:n.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===gE)return i===HE?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:n.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===yE)return i===HE?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:n.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===bE)return i===HE?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:n.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===_E)return i===HE?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:n.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===wE)return i===HE?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:n.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===xE)return i===HE?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:n.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===EE)return i===HE?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:n.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===SE)return i===HE?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:n.COMPRESSED_RGBA_ASTC_12x12_KHR}if(e===AE){if(null===(n=t.get("EXT_texture_compression_bptc")))return null;if(e===AE)return i===HE?n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:n.COMPRESSED_RGBA_BPTC_UNORM_EXT}return e===Hx?r?34042:null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}var oI=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Y_(this,n),(e=t.call(this)).cameras=r,e}return $_(n)}(fC);oI.prototype.isArrayCamera=!0;var aI=function(e){tw(n,e);var t=ow(n);function n(){var e;return Y_(this,n),(e=t.call(this)).type="Group",e}return $_(n)}(oT);aI.prototype.isGroup=!0;var sI={type:"move"},uI=function(){function e(){Y_(this,e),this._targetRay=null,this._grip=null,this._hand=null}return $_(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new aI,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new aI,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new rA,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new rA),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new aI,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new rA,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new rA),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,i=null,o=null,a=this._targetRay,s=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&null!==(r=t.getPose(e.targetRaySpace,n))&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(sI)),u&&e.hand){o=!0;var l,c=q_(e.hand.values());try{for(c.s();!(l=c.n()).done;){var h=l.value,f=t.getJointPose(h,n);if(void 0===u.joints[h.jointName]){var d=new aI;d.matrixAutoUpdate=!1,d.visible=!1,u.joints[h.jointName]=d,u.add(d)}var p=u.joints[h.jointName];null!==f&&(p.matrix.fromArray(f.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.jointRadius=f.radius),p.visible=null!==f}}catch(y){c.e(y)}finally{c.f()}var v=u.joints["index-finger-tip"],m=u.joints["thumb-tip"],g=v.position.distanceTo(m.position);u.inputState.pinching&&g>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&g<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1);return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==o),this}}]),e}(),lI=function(e){tw(n,e);var t=ow(n);function n(e,r,i,o,a,s,u,l,c,h){var f;if(Y_(this,n),(h=void 0!==h?h:Kx)!==Kx&&h!==Jx)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===i&&h===Kx&&(i=Nx),void 0===i&&h===Jx&&(i=Hx),(f=t.call(this,null,o,a,s,u,l,h,i,c)).image={width:e,height:r},f.magFilter=void 0!==u?u:wx,f.minFilter=void 0!==l?l:wx,f.flipY=!1,f.generateMipmaps=!1,f}return $_(n)}(XS);lI.prototype.isDepthTexture=!0;var cI=function(e){tw(n,e);var t=ow(n);function n(e,r){var i;Y_(this,n);var o=K_(i=t.call(this)),a=null,s=1,u=null,l="local-floor",c=e.extensions.has("WEBGL_multisampled_render_to_texture"),h=null,f=null,d=null,p=null,v=!1,m=null,g=r.getContextAttributes(),y=null,b=null,_=[],w=new Map,x=new fC;x.layers.enable(1),x.viewport=new ZS;var E=new fC;E.layers.enable(2),E.viewport=new ZS;var S=[x,E],A=new oI;A.layers.enable(1),A.layers.enable(2);var T=null,C=null;function M(e){var t=w.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function k(){w.forEach((function(e,t){e.disconnect(t)})),w.clear(),T=null,C=null,e.setRenderTarget(y),p=null,d=null,f=null,a=null,b=null,L.stop(),o.isPresenting=!1,o.dispatchEvent({type:"sessionend"})}function I(e){for(var t=a.inputSources,n=0;n<_.length;n++)w.set(t[n],_[n]);for(var r=0;r<e.removed.length;r++){var i=e.removed[r],o=w.get(i);o&&(o.dispatchEvent({type:"disconnected",data:i}),w.delete(i))}for(var s=0;s<e.added.length;s++){var u=e.added[s],l=w.get(u);l&&l.dispatchEvent({type:"connected",data:u})}}i.cameraAutoUpdate=!0,i.enabled=!1,i.isPresenting=!1,i.getController=function(e){var t=_[e];return void 0===t&&(t=new uI,_[e]=t),t.getTargetRaySpace()},i.getControllerGrip=function(e){var t=_[e];return void 0===t&&(t=new uI,_[e]=t),t.getGripSpace()},i.getHand=function(e){var t=_[e];return void 0===t&&(t=new uI,_[e]=t),t.getHandSpace()},i.setFramebufferScaleFactor=function(e){s=e,!0===o.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},i.setReferenceSpaceType=function(e){l=e,!0===o.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},i.getReferenceSpace=function(){return u},i.getBaseLayer=function(){return null!==d?d:p},i.getBinding=function(){return f},i.getFrame=function(){return m},i.getSession=function(){return a},i.setSession=function(){var t=sw(uw.mark((function t(n){var i,h,m,_,w;return uw.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(a=n)){t.next=24;break}if(y=e.getRenderTarget(),a.addEventListener("select",M),a.addEventListener("selectstart",M),a.addEventListener("selectend",M),a.addEventListener("squeeze",M),a.addEventListener("squeezestart",M),a.addEventListener("squeezeend",M),a.addEventListener("end",k),a.addEventListener("inputsourceschange",I),!0===g.xrCompatible){t.next=14;break}return t.next=14,r.makeXRCompatible();case 14:return void 0===a.renderState.layers||!1===e.capabilities.isWebGL2?(i={antialias:void 0!==a.renderState.layers||g.antialias,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s},p=new XRWebGLLayer(a,r,i),a.updateRenderState({baseLayer:p}),b=new $S(p.framebufferWidth,p.framebufferHeight,{format:Vx,type:Rx,encoding:e.outputEncoding})):(v=g.antialias,h=null,m=null,_=null,g.depth&&(_=g.stencil?35056:33190,h=g.stencil?Jx:Kx,m=g.stencil?Hx:Nx),w={colorFormat:e.outputEncoding===HE?35907:32856,depthFormat:_,scaleFactor:s},f=new XRWebGLBinding(a,r),d=f.createProjectionLayer(w),a.updateRenderState({layers:[d]}),b=v?new tA(d.textureWidth,d.textureHeight,{format:Vx,type:Rx,depthTexture:new lI(d.textureWidth,d.textureHeight,m,void 0,void 0,void 0,void 0,void 0,void 0,h),stencilBuffer:g.stencil,ignoreDepth:d.ignoreDepthValues,useRenderToTexture:c,encoding:e.outputEncoding}):new $S(d.textureWidth,d.textureHeight,{format:Vx,type:Rx,depthTexture:new lI(d.textureWidth,d.textureHeight,m,void 0,void 0,void 0,void 0,void 0,void 0,h),stencilBuffer:g.stencil,ignoreDepth:d.ignoreDepthValues,encoding:e.outputEncoding})),b.isXRRenderTarget=!0,this.setFoveation(1),t.next=19,a.requestReferenceSpace(l);case 19:u=t.sent,L.setContext(a),L.start(),o.isPresenting=!0,o.dispatchEvent({type:"sessionstart"});case 24:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();var R=new rA,P=new rA;function D(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}i.updateCamera=function(e){if(null!==a){A.near=E.near=x.near=e.near,A.far=E.far=x.far=e.far,T===A.near&&C===A.far||(a.updateRenderState({depthNear:A.near,depthFar:A.far}),T=A.near,C=A.far);var t=e.parent,n=A.cameras;D(A,t);for(var r=0;r<n.length;r++)D(n[r],t);A.matrixWorld.decompose(A.position,A.quaternion,A.scale),e.position.copy(A.position),e.quaternion.copy(A.quaternion),e.scale.copy(A.scale),e.matrix.copy(A.matrix),e.matrixWorld.copy(A.matrixWorld);for(var i=e.children,o=0,s=i.length;o<s;o++)i[o].updateMatrixWorld(!0);2===n.length?function(e,t,n){R.setFromMatrixPosition(t.matrixWorld),P.setFromMatrixPosition(n.matrixWorld);var r=R.distanceTo(P),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(o[8]+1)/o[0],f=a*c,d=a*h,p=r/(-c+h),v=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(v),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var m=a+p,g=s+p,y=f-v,b=d+(r-v),_=u*s/g*m,w=l*s/g*m;e.projectionMatrix.makePerspective(y,b,_,w,m,g)}(A,x,E):A.projectionMatrix.copy(x.projectionMatrix)}},i.getCamera=function(){return A},i.getFoveation=function(){return null!==d?d.fixedFoveation:null!==p?p.fixedFoveation:void 0},i.setFoveation=function(e){null!==d&&(d.fixedFoveation=e),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=e)};var N=null;var L=new SC;return L.setAnimationLoop((function(t,n){if(h=n.getViewerPose(u),m=n,null!==h){var r=h.views;null!==p&&(e.setRenderTargetFramebuffer(b,p.framebuffer),e.setRenderTarget(b));var i=!1;r.length!==A.cameras.length&&(A.cameras.length=0,i=!0);for(var o=0;o<r.length;o++){var s=r[o],l=null;if(null!==p)l=p.getViewport(s);else{var c=f.getViewSubImage(d,s);l=c.viewport,0===o&&(e.setRenderTargetTextures(b,c.colorTexture,d.ignoreDepthValues?void 0:c.depthStencilTexture),e.setRenderTarget(b))}var v=S[o];v.matrix.fromArray(s.transform.matrix),v.projectionMatrix.fromArray(s.projectionMatrix),v.viewport.set(l.x,l.y,l.width,l.height),0===o&&A.matrix.copy(v.matrix),!0===i&&A.cameras.push(v)}}for(var g=a.inputSources,y=0;y<_.length;y++){var w=_[y],x=g[y];w.update(x,n,u)}N&&N(t,n),m=null})),i.setAnimationLoop=function(e){N=e},i.dispose=function(){},i}return $_(n)}(_S);function hI(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap),n.alphaTest>0&&(t.alphaTest.value=n.alphaTest);var r,i,o=e.get(n).envMap;o&&(t.envMap.value=o,t.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,t.reflectivity.value=n.reflectivity,t.ior.value=n.ior,t.refractionRatio.value=n.refractionRatio),n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap?r=n.clearcoatRoughnessMap:n.specularIntensityMap?r=n.specularIntensityMap:n.specularColorMap?r=n.specularColorMap:n.transmissionMap?r=n.transmissionMap:n.thicknessMap?r=n.thicknessMap:n.sheenColorMap?r=n.sheenColorMap:n.sheenRoughnessMap&&(r=n.sheenRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?i=n.aoMap:n.lightMap&&(i=n.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uv2Transform.value.copy(i.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===xw&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===xw&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,o,a){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===xw&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===xw&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===xw&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===xw&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t,r){n(e,t),e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===xw&&e.clearcoatNormalScale.value.negate()));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,a):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===xw&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===xw&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===xw&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===xw&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,o):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function fI(){var e=US("canvas");return e.style.display="block",e}function dI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0!==e.canvas?e.canvas:fI(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,h=null,f=null,d=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=jE,this.physicallyCorrectLights=!1,this.toneMapping=ox,this.toneMappingExposure=1;var v=this,m=!1,g=0,y=0,b=null,_=-1,w=null,x=new ZS,E=new ZS,S=null,A=t.width,T=t.height,C=1,M=null,k=null,I=new ZS(0,0,A,T),R=new ZS(0,0,A,T),P=!1,D=new EC,N=!1,L=!1,O=null,B=new NA,F=new rA,U={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function j(){return null===b?C:1}var H,G,z,V,W,q,K,J,Q,X,Y,Z,$,ee,te,ne,re,ie,oe,ae,se,ue,le,ce=n;function he(e,n){for(var r=0;r<e.length;r++){var i=e[r],o=t.getContext(i,n);if(null!==o)return o}return null}try{var fe={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r".concat(cw)),t.addEventListener("webglcontextlost",me,!1),t.addEventListener("webglcontextrestored",ge,!1),null===ce){var de=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&de.shift(),null===(ce=he(de,fe)))throw he(de)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ce.getShaderPrecisionFormat&&(ce.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Oe){throw console.error("THREE.WebGLRenderer: "+Oe.message),Oe}function pe(){H=new oM(ce),G=new DC(ce,H,e),H.init(G),ue=new iI(ce,H,G),z=new nI(ce,H,G),V=new uM(ce),W=new Gk,q=new rI(ce,H,z,W,G,ue,V),K=new LC(v),J=new iM(v),Q=new AC(ce,G),le=new RC(ce,H,Q,G),X=new aM(ce,Q,V,le),Y=new pM(ce,X,Q,V),oe=new dM(ce,G,q),ne=new NC(W),Z=new Hk(v,K,J,H,G,le,ne),$=new hI(W),ee=new qk,te=new Zk(H,G),ie=new IC(v,K,z,Y,r,s),re=new tI(v,Y,G),ae=new PC(ce,H,V,G),se=new sM(ce,H,V,G),V.programs=Z.programs,v.capabilities=G,v.extensions=H,v.properties=W,v.renderLists=ee,v.shadowMap=re,v.state=z,v.info=V}pe();var ve=new cI(v,ce);function me(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;var e=V.autoReset,t=re.enabled,n=re.autoUpdate,r=re.needsUpdate,i=re.type;pe(),V.autoReset=e,re.enabled=t,re.autoUpdate=n,re.needsUpdate=r,re.type=i}function ye(e){var t=e.target;t.removeEventListener("dispose",ye),be(t)}function be(e){_e(e),W.remove(e)}function _e(e){var t=W.get(e).programs;void 0!==t&&(t.forEach((function(e){Z.releaseProgram(e)})),e.isShaderMaterial&&Z.releaseShaderCache(e))}this.xr=ve,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){var e=H.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=H.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(e){void 0!==e&&(C=e,this.setSize(A,T,!1))},this.getSize=function(e){return e.set(A,T)},this.setSize=function(e,n,r){ve.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(A=e,T=n,t.width=Math.floor(e*C),t.height=Math.floor(n*C),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(A*C,T*C).floor()},this.setDrawingBufferSize=function(e,n,r){A=e,T=n,C=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(x)},this.getViewport=function(e){return e.copy(I)},this.setViewport=function(e,t,n,r){e.isVector4?I.set(e.x,e.y,e.z,e.w):I.set(e,t,n,r),z.viewport(x.copy(I).multiplyScalar(C).floor())},this.getScissor=function(e){return e.copy(R)},this.setScissor=function(e,t,n,r){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,n,r),z.scissor(E.copy(R).multiplyScalar(C).floor())},this.getScissorTest=function(){return P},this.setScissorTest=function(e){z.setScissorTest(P=e)},this.setOpaqueSort=function(e){M=e},this.setTransparentSort=function(e){k=e},this.getClearColor=function(e){return e.copy(ie.getClearColor())},this.setClearColor=function(){ie.setClearColor.apply(ie,arguments)},this.getClearAlpha=function(){return ie.getClearAlpha()},this.setClearAlpha=function(){ie.setClearAlpha.apply(ie,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),ce.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",me,!1),t.removeEventListener("webglcontextrestored",ge,!1),ee.dispose(),te.dispose(),W.dispose(),K.dispose(),J.dispose(),Y.dispose(),le.dispose(),Z.dispose(),ve.dispose(),ve.removeEventListener("sessionstart",Ee),ve.removeEventListener("sessionend",Se),O&&(O.dispose(),O=null),Ae.stop()},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=U);var a=i.isMesh&&i.matrixWorld.determinant()<0,s=De(e,t,n,r,i);z.setMaterial(r,a);var u=n.index,l=n.attributes.position;if(null===u){if(void 0===l||0===l.count)return}else if(0===u.count)return;var c,h=1;!0===r.wireframe&&(u=X.getWireframeAttribute(n),h=2),le.setup(i,r,s,n,u);var f=ae;null!==u&&(c=Q.get(u),(f=se).setIndex(c));var d=null!==u?u.count:l.count,p=n.drawRange.start*h,v=n.drawRange.count*h,m=null!==o?o.start*h:0,g=null!==o?o.count*h:1/0,y=Math.max(p,m),b=Math.min(d,p+v,m+g)-1,_=Math.max(0,b-y+1);if(0!==_){if(i.isMesh)!0===r.wireframe?(z.setLineWidth(r.wireframeLinewidth*j()),f.setMode(1)):f.setMode(4);else if(i.isLine){var w=r.linewidth;void 0===w&&(w=1),z.setLineWidth(w*j()),i.isLineSegments?f.setMode(1):i.isLineLoop?f.setMode(2):f.setMode(3)}else i.isPoints?f.setMode(0):i.isSprite&&f.setMode(4);if(i.isInstancedMesh)f.renderInstances(y,_,i.count);else if(n.isInstancedBufferGeometry){var x=Math.min(n.instanceCount,n._maxInstanceCount);f.renderInstances(y,_,x)}else f.render(y,_)}},this.compile=function(e,t){(f=te.get(e)).init(),p.push(f),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(f.pushLight(e),e.castShadow&&f.pushShadow(e))})),f.setupLights(v.physicallyCorrectLights),e.traverse((function(t){var n=t.material;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++){Re(n[r],e,t)}else Re(n,e,t)})),p.pop(),f=null};var we=null;function xe(e){we&&we(e)}function Ee(){Ae.stop()}function Se(){Ae.start()}var Ae=new SC;function Te(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)f.pushLight(e),e.castShadow&&f.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||D.intersectsSprite(e)){r&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B);var i=Y.update(e),o=e.material;o.visible&&h.push(e,i,o,n,F.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==V.render.frame&&(e.skeleton.update(),e.skeleton.frame=V.render.frame),!e.frustumCulled||D.intersectsObject(e))){r&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B);var a=Y.update(e),s=e.material;if(Array.isArray(s))for(var u=a.groups,l=0,c=u.length;l<c;l++){var d=u[l],p=s[d.materialIndex];p&&p.visible&&h.push(e,a,p,n,F.z,d)}else s.visible&&h.push(e,a,s,n,F.z,null)}for(var v=e.children,m=0,g=v.length;m<g;m++)Te(v[m],t,n,r)}}function Ce(e,t,n,r){var i=e.opaque,o=e.transmissive,a=e.transparent;f.setupLightsView(n),o.length>0&&Me(i,t,n),r&&z.viewport(x.copy(r)),i.length>0&&ke(i,t,n),o.length>0&&ke(o,t,n),a.length>0&&ke(a,t,n)}function Me(e,t,n){if(null===O){var r=!0===a&&!0===G.isWebGL2;O=new(r?tA:$S)(1024,1024,{generateMipmaps:!0,type:null!==ue.convert(Fx)?Fx:Rx,minFilter:kx,magFilter:wx,wrapS:bx,wrapT:bx,useRenderToTexture:H.has("WEBGL_multisampled_render_to_texture")})}var i=v.getRenderTarget();v.setRenderTarget(O),v.clear();var o=v.toneMapping;v.toneMapping=ox,ke(e,t,n),v.toneMapping=o,q.updateMultisampleRenderTarget(O),q.updateRenderTargetMipmap(O),v.setRenderTarget(i)}function ke(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,u=a.geometry,l=null===r?a.material:r,c=a.group;s.layers.test(n.layers)&&Ie(s,t,n,u,l,c)}}function Ie(e,t,n,r,i,o){e.onBeforeRender(v,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(v,t,n,r,e,o),!0===i.transparent&&i.side===Ew?(i.side=xw,i.needsUpdate=!0,v.renderBufferDirect(n,t,r,i,e,o),i.side=ww,i.needsUpdate=!0,v.renderBufferDirect(n,t,r,i,e,o),i.side=Ew):v.renderBufferDirect(n,t,r,i,e,o),e.onAfterRender(v,t,n,r,i,o)}function Re(e,t,n){!0!==t.isScene&&(t=U);var r=W.get(e),i=f.state.lights,o=f.state.shadowsArray,a=i.state.version,s=Z.getParameters(e,i.state,o,t,n),u=Z.getProgramCacheKey(s),l=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?J:K).get(e.envMap||r.environment),void 0===l&&(e.addEventListener("dispose",ye),l=new Map,r.programs=l);var c=l.get(u);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===a)return Pe(e,s),c}else s.uniforms=Z.getUniforms(e),e.onBuild(n,s,v),e.onBeforeCompile(s,v),c=Z.acquireProgram(s,u),l.set(u,c),r.uniforms=s.uniforms;var h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=ne.uniform),Pe(e,s),r.needsLights=Le(e),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);var d=c.getUniforms(),p=bk.seqWithValue(d.seq,h);return r.currentProgram=c,r.uniformsList=p,c}function Pe(e,t){var n=W.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}function De(e,t,n,r,i){!0!==t.isScene&&(t=U),q.resetTextureUnits();var o=t.fog,a=r.isMeshStandardMaterial?t.environment:null,s=null===b?v.outputEncoding:!0===b.isXRRenderTarget?b.texture.encoding:jE,u=(r.isMeshStandardMaterial?J:K).get(r.envMap||a),l=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=n.morphAttributes.position?n.morphAttributes.position.length:0,m=r.toneMapped?v.toneMapping:ox,g=W.get(r),y=f.state.lights;if(!0===N&&(!0===L||e!==w)){var x=e===w&&r.id===_;ne.setState(r,e,x)}var E=!1;r.version===g.__version?g.needsLights&&g.lightsStateVersion!==y.state.version||g.outputEncoding!==s||i.isInstancedMesh&&!1===g.instancing?E=!0:i.isInstancedMesh||!0!==g.instancing?i.isSkinnedMesh&&!1===g.skinning?E=!0:i.isSkinnedMesh||!0!==g.skinning?g.envMap!==u||r.fog&&g.fog!==o?E=!0:void 0===g.numClippingPlanes||g.numClippingPlanes===ne.numPlanes&&g.numIntersection===ne.numIntersection?(g.vertexAlphas!==l||g.vertexTangents!==c||g.morphTargets!==h||g.morphNormals!==d||g.toneMapping!==m||!0===G.isWebGL2&&g.morphTargetsCount!==p)&&(E=!0):E=!0:E=!0:E=!0:(E=!0,g.__version=r.version);var S=g.currentProgram;!0===E&&(S=Re(r,t,i));var A=!1,M=!1,k=!1,I=S.getUniforms(),R=g.uniforms;if(z.useProgram(S.program)&&(A=!0,M=!0,k=!0),r.id!==_&&(_=r.id,M=!0),A||w!==e){if(I.setValue(ce,"projectionMatrix",e.projectionMatrix),G.logarithmicDepthBuffer&&I.setValue(ce,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,M=!0,k=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var P=I.map.cameraPosition;void 0!==P&&P.setValue(ce,F.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&I.setValue(ce,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&I.setValue(ce,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){I.setOptional(ce,i,"bindMatrix"),I.setOptional(ce,i,"bindMatrixInverse");var D=i.skeleton;D&&(G.floatVertexTextures?(null===D.boneTexture&&D.computeBoneTexture(),I.setValue(ce,"boneTexture",D.boneTexture,q),I.setValue(ce,"boneTextureSize",D.boneTextureSize)):I.setOptional(ce,D,"boneMatrices"))}return!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||oe.update(i,n,r,S),(M||g.receiveShadow!==i.receiveShadow)&&(g.receiveShadow=i.receiveShadow,I.setValue(ce,"receiveShadow",i.receiveShadow)),M&&(I.setValue(ce,"toneMappingExposure",v.toneMappingExposure),g.needsLights&&Ne(R,k),o&&r.fog&&$.refreshFogUniforms(R,o),$.refreshMaterialUniforms(R,r,C,T,O),bk.upload(ce,g.uniformsList,R,q)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(bk.upload(ce,g.uniformsList,R,q),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&I.setValue(ce,"center",i.center),I.setValue(ce,"modelViewMatrix",i.modelViewMatrix),I.setValue(ce,"normalMatrix",i.normalMatrix),I.setValue(ce,"modelMatrix",i.matrixWorld),S}function Ne(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function Le(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}Ae.setAnimationLoop(xe),"undefined"!==typeof window&&Ae.setContext(window),this.setAnimationLoop=function(e){we=e,ve.setAnimationLoop(e),null===e?Ae.stop():Ae.start()},ve.addEventListener("sessionstart",Ee),ve.addEventListener("sessionend",Se),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==m){!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===ve.enabled&&!0===ve.isPresenting&&(!0===ve.cameraAutoUpdate&&ve.updateCamera(t),t=ve.getCamera()),!0===e.isScene&&e.onBeforeRender(v,e,t,b),(f=te.get(e,p.length)).init(),p.push(f),B.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),D.setFromProjectionMatrix(B),L=this.localClippingEnabled,N=ne.init(this.clippingPlanes,L,t),(h=ee.get(e,d.length)).init(),d.push(h),Te(e,t,0,v.sortObjects),h.finish(),!0===v.sortObjects&&h.sort(M,k),!0===N&&ne.beginShadows();var n=f.state.shadowsArray;if(re.render(n,e,t),!0===N&&ne.endShadows(),!0===this.info.autoReset&&this.info.reset(),ie.render(h,e),f.setupLights(v.physicallyCorrectLights),t.isArrayCamera)for(var r=t.cameras,i=0,o=r.length;i<o;i++){var a=r[i];Ce(h,e,a,a.viewport)}else Ce(h,e,t);null!==b&&(q.updateMultisampleRenderTarget(b),q.updateRenderTargetMipmap(b)),!0===e.isScene&&e.onAfterRender(v,e,t),z.buffers.depth.setTest(!0),z.buffers.depth.setMask(!0),z.buffers.color.setMask(!0),z.setPolygonOffset(!1),le.resetDefaultState(),_=-1,w=null,p.pop(),f=p.length>0?p[p.length-1]:null,d.pop(),h=d.length>0?d[d.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(e,t,n){W.get(e.texture).__webglTexture=t,W.get(e.depthTexture).__webglTexture=n;var r=W.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||e.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),e.useRenderToTexture=!1,e.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(e,t){var n=W.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;b=e,g=t,y=n;var r=!0;if(e){var i=W.get(e);void 0!==i.__useDefaultFramebuffer?(z.bindFramebuffer(36160,null),r=!1):void 0===i.__webglFramebuffer?q.setupRenderTarget(e):i.__hasExternalTextures&&q.rebindTextures(e,W.get(e.texture).__webglTexture,W.get(e.depthTexture).__webglTexture)}var o=null,a=!1,s=!1;if(e){var u=e.texture;(u.isDataTexture3D||u.isDataTexture2DArray)&&(s=!0);var l=W.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(o=l[t],a=!0):o=e.useRenderbuffer?W.get(e).__webglMultisampledFramebuffer:l,x.copy(e.viewport),E.copy(e.scissor),S=e.scissorTest}else x.copy(I).multiplyScalar(C).floor(),E.copy(R).multiplyScalar(C).floor(),S=P;var c=z.bindFramebuffer(36160,o);if(c&&G.drawBuffers&&r&&z.drawBuffers(e,o),z.viewport(x),z.scissor(E),z.setScissorTest(S),a){var h=W.get(e.texture);ce.framebufferTexture2D(36160,36064,34069+t,h.__webglTexture,n)}else if(s){var f=W.get(e.texture),d=t||0;ce.framebufferTextureLayer(36160,36064,f.__webglTexture,n||0,d)}_=-1},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(e&&e.isWebGLRenderTarget){var s=W.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){z.bindFramebuffer(36160,s);try{var u=e.texture,l=u.format,c=u.type;if(l!==Vx&&ue.convert(l)!==ce.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var h=c===Fx&&(H.has("EXT_color_buffer_half_float")||G.isWebGL2&&H.has("EXT_color_buffer_float"));if(c!==Rx&&ue.convert(c)!==ce.getParameter(35738)&&(c!==Bx||!(G.isWebGL2||H.has("OES_texture_float")||H.has("WEBGL_color_buffer_float")))&&!h)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ce.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ce.readPixels(t,n,r,i,ue.convert(l),ue.convert(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{var f=null!==b?W.get(b).__webglFramebuffer:null;z.bindFramebuffer(36160,f)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!0===t.isFramebufferTexture){var r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r);q.setTexture2D(t,0),ce.copyTexSubImage2D(3553,n,0,0,e.x,e.y,i,o),z.unbindTexture()}else console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.")},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.image.width,o=t.image.height,a=ue.convert(n.format),s=ue.convert(n.type);q.setTexture2D(n,0),ce.pixelStorei(37440,n.flipY),ce.pixelStorei(37441,n.premultiplyAlpha),ce.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ce.texSubImage2D(3553,r,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?ce.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):ce.texSubImage2D(3553,r,e.x,e.y,a,s,t.image),0===r&&n.generateMipmaps&&ce.generateMipmap(3553),z.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(v.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var o,a=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,u=e.max.z-e.min.z+1,l=ue.convert(r.format),c=ue.convert(r.type);if(r.isDataTexture3D)q.setTexture3D(r,0),o=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");q.setTexture2DArray(r,0),o=35866}ce.pixelStorei(37440,r.flipY),ce.pixelStorei(37441,r.premultiplyAlpha),ce.pixelStorei(3317,r.unpackAlignment);var h=ce.getParameter(3314),f=ce.getParameter(32878),d=ce.getParameter(3316),p=ce.getParameter(3315),m=ce.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;ce.pixelStorei(3314,g.width),ce.pixelStorei(32878,g.height),ce.pixelStorei(3316,e.min.x),ce.pixelStorei(3315,e.min.y),ce.pixelStorei(32877,e.min.z),n.isDataTexture||n.isDataTexture3D?ce.texSubImage3D(o,i,t.x,t.y,t.z,a,s,u,l,c,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ce.compressedTexSubImage3D(o,i,t.x,t.y,t.z,a,s,u,l,g.data)):ce.texSubImage3D(o,i,t.x,t.y,t.z,a,s,u,l,c,g),ce.pixelStorei(3314,h),ce.pixelStorei(32878,f),ce.pixelStorei(3316,d),ce.pixelStorei(3315,p),ce.pixelStorei(32877,m),0===i&&r.generateMipmaps&&ce.generateMipmap(o),z.unbindTexture()}},this.initTexture=function(e){q.setTexture2D(e,0),z.unbindTexture()},this.resetState=function(){g=0,y=0,b=null,z.reset(),le.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}dI.prototype.isWebGLRenderer=!0;var pI=function(e){tw(n,e);var t=ow(n);function n(){return Y_(this,n),t.apply(this,arguments)}return $_(n)}(dI);pI.prototype.isWebGL1Renderer=!0;var vI=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;Y_(this,e),this.name="",this.color=new KS(t),this.density=n}return $_(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}();vI.prototype.isFogExp2=!0;var mI=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;Y_(this,e),this.name="",this.color=new KS(t),this.near=n,this.far=r}return $_(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}();mI.prototype.isFog=!0;var gI=function(e){tw(n,e);var t=ow(n);function n(){var e;return Y_(this,n),(e=t.call(this)).type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,e.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:K_(e)})),e}return $_(n,[{key:"copy",value:function(e,t){return X_(J_(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=X_(J_(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}]),n}(oT);gI.prototype.isScene=!0;var yI=function(){function e(t,n){Y_(this,e),this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=uS,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=TS()}return $_(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=TS()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=TS()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}();yI.prototype.isInterleavedBuffer=!0;var bI=new rA,_I=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Y_(this,e),this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=!0===i}return $_(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)bI.x=this.getX(t),bI.y=this.getY(t),bI.z=this.getZ(t),bI.applyMatrix4(e),this.setXYZ(t,bI.x,bI.y,bI.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)bI.x=this.getX(t),bI.y=this.getY(t),bI.z=this.getZ(t),bI.applyNormalMatrix(e),this.setXYZ(t,bI.x,bI.y,bI.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)bI.x=this.getX(t),bI.y=this.getY(t),bI.z=this.getZ(t),bI.transformDirection(e),this.setXYZ(t,bI.x,bI.y,bI.z);return this}},{key:"setX",value:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){return this.data.array[e*this.data.stride+this.offset]}},{key:"getY",value:function(e){return this.data.array[e*this.data.stride+this.offset+1]}},{key:"getZ",value:function(e){return this.data.array[e*this.data.stride+this.offset+2]}},{key:"getW",value:function(e){return this.data.array[e*this.data.stride+this.offset+3]}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,o=0;o<this.itemSize;o++)n.push(this.data.array[i+o]);return new xT(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}();_I.prototype.isInterleavedBufferAttribute=!0;var wI,xI=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this)).type="SpriteMaterial",r.color=new KS(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.setValues(e),r}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}(yT);xI.prototype.isSpriteMaterial=!0;var EI=new rA,SI=new rA,AI=new rA,TI=new NS,CI=new NS,MI=new NA,kI=new rA,II=new rA,RI=new rA,PI=new NS,DI=new NS,NI=new NS,LI=function(e){tw(n,e);var t=ow(n);function n(e){var r;if(Y_(this,n),(r=t.call(this)).type="Sprite",void 0===wI){wI=new jT;var i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),o=new yI(i,5);wI.setIndex([0,1,2,0,2,3]),wI.setAttribute("position",new _I(o,3,0,!1)),wI.setAttribute("uv",new _I(o,2,3,!1))}return r.geometry=wI,r.material=void 0!==e?e:new xI,r.center=new NS(.5,.5),r}return $_(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),SI.setFromMatrixScale(this.matrixWorld),MI.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),AI.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&SI.multiplyScalar(-AI.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var o=this.center;OI(kI.set(-.5,-.5,0),AI,o,SI,n,r),OI(II.set(.5,-.5,0),AI,o,SI,n,r),OI(RI.set(.5,.5,0),AI,o,SI,n,r),PI.set(0,0),DI.set(1,0),NI.set(1,1);var a=e.ray.intersectTriangle(kI,II,RI,!1,EI);if(null!==a||(OI(II.set(-.5,.5,0),AI,o,SI,n,r),DI.set(0,1),null!==(a=e.ray.intersectTriangle(kI,RI,II,!1,EI)))){var s=e.ray.origin.distanceTo(EI);s<e.near||s>e.far||t.push({distance:s,point:EI.clone(),uv:mT.getUV(EI,kI,II,RI,PI,DI,NI,new NS),face:null,object:this})}}},{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n}(oT);function OI(e,t,n,r,i,o){TI.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(CI.x=o*TI.x-i*TI.y,CI.y=i*TI.x+o*TI.y):CI.copy(TI),e.copy(t),e.x+=CI.x,e.y+=CI.y,e.applyMatrix4(MI)}LI.prototype.isSprite=!0;var BI=new rA,FI=new rA,UI=function(e){tw(n,e);var t=ow(n);function n(){var e;return Y_(this,n),(e=t.call(this))._currentLevel=0,e.type="LOD",Object.defineProperties(K_(e),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),e.autoUpdate=!0,e}return $_(n,[{key:"copy",value:function(e){X_(J_(n.prototype),"copy",this).call(this,e,!1);for(var t=e.levels,r=0,i=t.length;r<i;r++){var o=t[r];this.addLevel(o.object.clone(),o.distance)}return this.autoUpdate=e.autoUpdate,this}},{key:"addLevel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t=Math.abs(t);var n,r=this.levels;for(n=0;n<r.length&&!(t<r[n].distance);n++);return r.splice(n,0,{distance:t,object:e}),this.add(e),this}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(e){var t=this.levels;if(t.length>0){var n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null}},{key:"raycast",value:function(e,t){if(this.levels.length>0){BI.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(BI);this.getObjectForDistance(n).raycast(e,t)}}},{key:"update",value:function(e){var t=this.levels;if(t.length>1){BI.setFromMatrixPosition(e.matrixWorld),FI.setFromMatrixPosition(this.matrixWorld);var n,r,i=BI.distanceTo(FI)/e.zoom;for(t[0].object.visible=!0,n=1,r=t.length;n<r&&i>=t[n].distance;n++)t[n-1].object.visible=!1,t[n].object.visible=!0;for(this._currentLevel=n-1;n<r;n++)t[n].object.visible=!1}}},{key:"toJSON",value:function(e){var t=X_(J_(n.prototype),"toJSON",this).call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var r=this.levels,i=0,o=r.length;i<o;i++){var a=r[i];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}]),n}(oT),jI=new rA,HI=new ZS,GI=new ZS,zI=new rA,VI=new NA,WI=function(e){tw(n,e);var t=ow(n);function n(e,r){var i;return Y_(this,n),(i=t.call(this,e,r)).type="SkinnedMesh",i.bindMode="attached",i.bindMatrix=new NA,i.bindMatrixInverse=new NA,i}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new ZS,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){X_(J_(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,r=this.geometry;HI.fromBufferAttribute(r.attributes.skinIndex,e),GI.fromBufferAttribute(r.attributes.skinWeight,e),jI.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var i=0;i<4;i++){var o=GI.getComponent(i);if(0!==o){var a=HI.getComponent(i);VI.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(zI.copy(jI).applyMatrix4(VI),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(iC);WI.prototype.isSkinnedMesh=!0;var qI=function(e){tw(n,e);var t=ow(n);function n(){var e;return Y_(this,n),(e=t.call(this)).type="Bone",e}return $_(n)}(oT);qI.prototype.isBone=!0;var KI=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:wx,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:wx,d=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0;return Y_(this,n),(e=t.call(this,null,u,l,c,h,f,a,s,d,p)).image={data:r,width:i,height:o},e.magFilter=h,e.minFilter=f,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return $_(n)}(XS);KI.prototype.isDataTexture=!0;var JI=new NA,QI=new NA,XI=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Y_(this,e),this.uuid=TS(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return $_(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new NA)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new NA;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var r=0,i=this.bones.length;r<i;r++){var o=this.bones[r];o&&(o.parent&&o.parent.isBone?(o.matrix.copy(o.parent.matrixWorld).invert(),o.matrix.multiply(o.matrixWorld)):o.matrix.copy(o.matrixWorld),o.matrix.decompose(o.position,o.quaternion,o.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,o=e.length;i<o;i++){var a=e[i]?e[i].matrixWorld:QI;JI.multiplyMatrices(a,t[i]),JI.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=RS(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new KI(t,e,e,Vx,Bx);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,r=e.bones.length;n<r;n++){var i=e.bones[n],o=t[i];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),o=new qI),this.bones.push(o),this.boneInverses.push((new NA).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,r=0,i=t.length;r<i;r++){var o=t[r];e.bones.push(o.uuid);var a=n[r];e.boneInverses.push(a.toArray())}return e}}]),e}(),YI=function(e){tw(n,e);var t=ow(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Y_(this,n),"number"===typeof i&&(a=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(o=t.call(this,e,r,i)).meshPerAttribute=a,o}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=X_(J_(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(xT);YI.prototype.isInstancedBufferAttribute=!0;var ZI=new NA,$I=new NA,eR=[],tR=new iC,nR=function(e){tw(n,e);var t=ow(n);function n(e,r,i){var o;return Y_(this,n),(o=t.call(this,e,r)).instanceMatrix=new YI(new Float32Array(16*i),16),o.instanceColor=null,o.count=i,o.frustumCulled=!1,o}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,r=this.count;if(tR.geometry=this.geometry,tR.material=this.material,void 0!==tR.material)for(var i=0;i<r;i++){this.getMatrixAt(i,ZI),$I.multiplyMatrices(n,ZI),tR.matrixWorld=$I,tR.raycast(e,eR);for(var o=0,a=eR.length;o<a;o++){var s=eR[o];s.instanceId=i,s.object=this,t.push(s)}eR.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new YI(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(iC);nR.prototype.isInstancedMesh=!0;var rR=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this)).type="LineBasicMaterial",r.color=new KS(16777215),r.linewidth=1,r.linecap="round",r.linejoin="round",r.setValues(e),r}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}]),n}(yT);rR.prototype.isLineBasicMaterial=!0;var iR=new rA,oR=new rA,aR=new NA,sR=new DA,uR=new AA,lR=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jT,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rR;return Y_(this,n),(e=t.call(this)).type="Line",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)iR.fromBufferAttribute(t,r-1),oR.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=iR.distanceTo(oR);e.setAttribute("lineDistance",new RT(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),uR.copy(n.boundingSphere),uR.applyMatrix4(r),uR.radius+=i,!1!==e.ray.intersectsSphere(uR)){aR.copy(r).invert(),sR.copy(e.ray).applyMatrix4(aR);var a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,u=new rA,l=new rA,c=new rA,h=new rA,f=this.isLineSegments?2:1;if(n.isBufferGeometry){var d=n.index,p=n.attributes.position;if(null!==d)for(var v=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count)-1;v<m;v+=f){var g=d.getX(v),y=d.getX(v+1);if(u.fromBufferAttribute(p,g),l.fromBufferAttribute(p,y),!(sR.distanceSqToSegment(u,l,h,c)>s)){h.applyMatrix4(this.matrixWorld);var b=e.ray.origin.distanceTo(h);b<e.near||b>e.far||t.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(var _=Math.max(0,o.start),w=Math.min(p.count,o.start+o.count)-1;_<w;_+=f){if(u.fromBufferAttribute(p,_),l.fromBufferAttribute(p,_+1),!(sR.distanceSqToSegment(u,l,h,c)>s)){h.applyMatrix4(this.matrixWorld);var x=e.ray.origin.distanceTo(h);x<e.near||x>e.far||t.push({distance:x,point:c.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(oT);lR.prototype.isLine=!0;var cR=new rA,hR=new rA,fR=function(e){tw(n,e);var t=ow(n);function n(e,r){var i;return Y_(this,n),(i=t.call(this,e,r)).type="LineSegments",i}return $_(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)cR.fromBufferAttribute(t,r),hR.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+cR.distanceTo(hR);e.setAttribute("lineDistance",new RT(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),n}(lR);fR.prototype.isLineSegments=!0;var dR=function(e){tw(n,e);var t=ow(n);function n(e,r){var i;return Y_(this,n),(i=t.call(this,e,r)).type="LineLoop",i}return $_(n)}(lR);dR.prototype.isLineLoop=!0;var pR=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this)).type="PointsMaterial",r.color=new KS(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.setValues(e),r}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}(yT);pR.prototype.isPointsMaterial=!0;var vR=new NA,mR=new DA,gR=new AA,yR=new rA,bR=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jT,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pR;return Y_(this,n),(e=t.call(this)).type="Points",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),gR.copy(n.boundingSphere),gR.applyMatrix4(r),gR.radius+=i,!1!==e.ray.intersectsSphere(gR)){vR.copy(r).invert(),mR.copy(e.ray).applyMatrix4(vR);var a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a;if(n.isBufferGeometry){var u=n.index,l=n.attributes.position;if(null!==u)for(var c=Math.max(0,o.start),h=Math.min(u.count,o.start+o.count);c<h;c++){var f=u.getX(c);yR.fromBufferAttribute(l,f),_R(yR,f,s,r,e,t,this)}else for(var d=Math.max(0,o.start),p=Math.min(l.count,o.start+o.count);d<p;d++)yR.fromBufferAttribute(l,d),_R(yR,d,s,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(oT);function _R(e,t,n,r,i,o,a){var s=mR.distanceSqToPoint(e);if(s<n){var u=new rA;mR.closestPointToPoint(e,u),u.applyMatrix4(r);var l=i.ray.origin.distanceTo(u);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:u,index:t,face:null,object:a})}}bR.prototype.isPoints=!0;var wR=function(e){tw(n,e);var t=ow(n);function n(e,r,i,o,a,s,u,l,c){var h;Y_(this,n),(h=t.call(this,e,r,i,o,a,s,u,l,c)).minFilter=void 0!==s?s:Tx,h.magFilter=void 0!==a?a:Tx,h.generateMipmaps=!1;var f=K_(h);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){f.needsUpdate=!0,e.requestVideoFrameCallback(t)})),h}return $_(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(XS);wR.prototype.isVideoTexture=!0;var xR=function(e){tw(n,e);var t=ow(n);function n(e,r,i){var o;return Y_(this,n),(o=t.call(this,{width:e,height:r})).format=i,o.magFilter=wx,o.minFilter=wx,o.generateMipmaps=!1,o.needsUpdate=!0,o}return $_(n)}(XS);xR.prototype.isFramebufferTexture=!0;var ER=function(e){tw(n,e);var t=ow(n);function n(e,r,i,o,a,s,u,l,c,h,f,d){var p;return Y_(this,n),(p=t.call(this,null,s,u,l,c,h,o,a,f,d)).image={width:r,height:i},p.mipmaps=e,p.flipY=!1,p.generateMipmaps=!1,p}return $_(n)}(XS);ER.prototype.isCompressedTexture=!0;var SR=function(e){tw(n,e);var t=ow(n);function n(e,r,i,o,a,s,u,l,c){var h;return Y_(this,n),(h=t.call(this,e,r,i,o,a,s,u,l,c)).needsUpdate=!0,h}return $_(n)}(XS);SR.prototype.isCanvasTexture=!0;var AR=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;Y_(this,n),(e=t.call(this)).type="CircleGeometry",e.parameters={radius:r,segments:i,thetaStart:o,thetaLength:a},i=Math.max(3,i);var s=[],u=[],l=[],c=[],h=new rA,f=new NS;u.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(var d=0,p=3;d<=i;d++,p+=3){var v=o+d/i*a;h.x=r*Math.cos(v),h.y=r*Math.sin(v),u.push(h.x,h.y,h.z),l.push(0,0,1),f.x=(u[p]/r+1)/2,f.y=(u[p+1]/r+1)/2,c.push(f.x,f.y)}for(var m=1;m<=i;m++)s.push(m,m+1,0);return e.setIndex(s),e.setAttribute("position",new RT(u,3)),e.setAttribute("normal",new RT(l,3)),e.setAttribute("uv",new RT(c,2)),e}return $_(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.segments,e.thetaStart,e.thetaLength)}}]),n}(jT),TR=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;Y_(this,n),(e=t.call(this)).type="CylinderGeometry",e.parameters={radiusTop:r,radiusBottom:i,height:o,radialSegments:a,heightSegments:s,openEnded:u,thetaStart:l,thetaLength:c};var h=K_(e);a=Math.floor(a),s=Math.floor(s);var f=[],d=[],p=[],v=[],m=0,g=[],y=o/2,b=0;function _(){for(var e=new rA,t=new rA,n=0,u=(i-r)/o,_=0;_<=s;_++){for(var w=[],x=_/s,E=x*(i-r)+r,S=0;S<=a;S++){var A=S/a,T=A*c+l,C=Math.sin(T),M=Math.cos(T);t.x=E*C,t.y=-x*o+y,t.z=E*M,d.push(t.x,t.y,t.z),e.set(C,u,M).normalize(),p.push(e.x,e.y,e.z),v.push(A,1-x),w.push(m++)}g.push(w)}for(var k=0;k<a;k++)for(var I=0;I<s;I++){var R=g[I][k],P=g[I+1][k],D=g[I+1][k+1],N=g[I][k+1];f.push(R,P,N),f.push(P,D,N),n+=6}h.addGroup(b,n,0),b+=n}function w(e){for(var t=m,n=new NS,o=new rA,s=0,u=!0===e?r:i,g=!0===e?1:-1,_=1;_<=a;_++)d.push(0,y*g,0),p.push(0,g,0),v.push(.5,.5),m++;for(var w=m,x=0;x<=a;x++){var E=x/a*c+l,S=Math.cos(E),A=Math.sin(E);o.x=u*A,o.y=y*g,o.z=u*S,d.push(o.x,o.y,o.z),p.push(0,g,0),n.x=.5*S+.5,n.y=.5*A*g+.5,v.push(n.x,n.y),m++}for(var T=0;T<a;T++){var C=t+T,M=w+T;!0===e?f.push(M,M+1,C):f.push(M+1,M,C),s+=3}h.addGroup(b,s,!0===e?1:2),b+=s}return _(),!1===u&&(r>0&&w(!0),i>0&&w(!1)),e.setIndex(f),e.setAttribute("position",new RT(d,3)),e.setAttribute("normal",new RT(p,3)),e.setAttribute("uv",new RT(v,2)),e}return $_(n,null,[{key:"fromJSON",value:function(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(jT),CR=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return Y_(this,n),(e=t.call(this,0,r,i,o,a,s,u,l)).type="ConeGeometry",e.parameters={radius:r,height:i,radialSegments:o,heightSegments:a,openEnded:s,thetaStart:u,thetaLength:l},e}return $_(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(TR),MR=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Y_(this,n),(e=t.call(this)).type="PolyhedronGeometry",e.parameters={vertices:r,indices:i,radius:o,detail:a};var s=[],u=[];function l(e){for(var t=new rA,n=new rA,r=new rA,o=0;o<i.length;o+=3)v(i[o+0],t),v(i[o+1],n),v(i[o+2],r),c(t,n,r,e)}function c(e,t,n,r){for(var i=r+1,o=[],a=0;a<=i;a++){o[a]=[];for(var s=e.clone().lerp(n,a/i),u=t.clone().lerp(n,a/i),l=i-a,c=0;c<=l;c++)o[a][c]=0===c&&a===i?s:s.clone().lerp(u,c/l)}for(var h=0;h<i;h++)for(var f=0;f<2*(i-h)-1;f++){var d=Math.floor(f/2);f%2===0?(p(o[h][d+1]),p(o[h+1][d]),p(o[h][d])):(p(o[h][d+1]),p(o[h+1][d+1]),p(o[h+1][d]))}}function h(e){for(var t=new rA,n=0;n<s.length;n+=3)t.x=s[n+0],t.y=s[n+1],t.z=s[n+2],t.normalize().multiplyScalar(e),s[n+0]=t.x,s[n+1]=t.y,s[n+2]=t.z}function f(){for(var e=new rA,t=0;t<s.length;t+=3){e.x=s[t+0],e.y=s[t+1],e.z=s[t+2];var n=y(e)/2/Math.PI+.5,r=b(e)/Math.PI+.5;u.push(n,1-r)}m(),d()}function d(){for(var e=0;e<u.length;e+=6){var t=u[e+0],n=u[e+2],r=u[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(u[e+0]+=1),n<.2&&(u[e+2]+=1),r<.2&&(u[e+4]+=1))}}function p(e){s.push(e.x,e.y,e.z)}function v(e,t){var n=3*e;t.x=r[n+0],t.y=r[n+1],t.z=r[n+2]}function m(){for(var e=new rA,t=new rA,n=new rA,r=new rA,i=new NS,o=new NS,a=new NS,l=0,c=0;l<s.length;l+=9,c+=6){e.set(s[l+0],s[l+1],s[l+2]),t.set(s[l+3],s[l+4],s[l+5]),n.set(s[l+6],s[l+7],s[l+8]),i.set(u[c+0],u[c+1]),o.set(u[c+2],u[c+3]),a.set(u[c+4],u[c+5]),r.copy(e).add(t).add(n).divideScalar(3);var h=y(r);g(i,c+0,e,h),g(o,c+2,t,h),g(a,c+4,n,h)}}function g(e,t,n,r){r<0&&1===e.x&&(u[t]=e.x-1),0===n.x&&0===n.z&&(u[t]=r/2/Math.PI+.5)}function y(e){return Math.atan2(e.z,-e.x)}function b(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}return l(a),h(o),f(),e.setAttribute("position",new RT(s,3)),e.setAttribute("normal",new RT(s.slice(),3)),e.setAttribute("uv",new RT(u,2)),0===a?e.computeVertexNormals():e.normalizeNormals(),e}return $_(n,null,[{key:"fromJSON",value:function(e){return new n(e.vertices,e.indices,e.radius,e.details)}}]),n}(jT),kR=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Y_(this,n);var o=(1+Math.sqrt(5))/2,a=1/o,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-o,0,-a,o,0,a,-o,0,a,o,-a,-o,0,-a,o,0,a,-o,0,a,o,0,-o,0,-a,o,0,-a,-o,0,a,o,0,a],u=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];return(e=t.call(this,s,u,r,i)).type="DodecahedronGeometry",e.parameters={radius:r,detail:i},e}return $_(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(MR),IR=new rA,RR=new rA,PR=new rA,DR=new mT,NR=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(Y_(this,n),(e=t.call(this)).type="EdgesGeometry",e.parameters={geometry:r,thresholdAngle:i},null!==r){for(var o=4,a=Math.pow(10,o),s=Math.cos(SS*i),u=r.getIndex(),l=r.getAttribute("position"),c=u?u.count:l.count,h=[0,0,0],f=["a","b","c"],d=new Array(3),p={},v=[],m=0;m<c;m+=3){u?(h[0]=u.getX(m),h[1]=u.getX(m+1),h[2]=u.getX(m+2)):(h[0]=m,h[1]=m+1,h[2]=m+2);var g=DR.a,y=DR.b,b=DR.c;if(g.fromBufferAttribute(l,h[0]),y.fromBufferAttribute(l,h[1]),b.fromBufferAttribute(l,h[2]),DR.getNormal(PR),d[0]="".concat(Math.round(g.x*a),",").concat(Math.round(g.y*a),",").concat(Math.round(g.z*a)),d[1]="".concat(Math.round(y.x*a),",").concat(Math.round(y.y*a),",").concat(Math.round(y.z*a)),d[2]="".concat(Math.round(b.x*a),",").concat(Math.round(b.y*a),",").concat(Math.round(b.z*a)),d[0]!==d[1]&&d[1]!==d[2]&&d[2]!==d[0])for(var _=0;_<3;_++){var w=(_+1)%3,x=d[_],E=d[w],S=DR[f[_]],A=DR[f[w]],T="".concat(x,"_").concat(E),C="".concat(E,"_").concat(x);C in p&&p[C]?(PR.dot(p[C].normal)<=s&&(v.push(S.x,S.y,S.z),v.push(A.x,A.y,A.z)),p[C]=null):T in p||(p[T]={index0:h[_],index1:h[w],normal:PR.clone()})}}for(var M in p)if(p[M]){var k=p[M],I=k.index0,R=k.index1;IR.fromBufferAttribute(l,I),RR.fromBufferAttribute(l,R),v.push(IR.x,IR.y,IR.z),v.push(RR.x,RR.y,RR.z)}e.setAttribute("position",new RT(v,3))}return e}return $_(n)}(jT),LR=function(){function e(){Y_(this,e),this.type="Curve",this.arcLengthDivisions=200}return $_(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),i=0;n.push(0);for(var o=1;o<=e;o++)i+=(t=this.getPoint(o/e)).distanceTo(r),n.push(i),r=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,u=o-1;s<=u;)if((a=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(o-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(o-1)}},{key:"getTangent",value:function(e,t){var n=1e-4,r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);var o=this.getPoint(r),a=this.getPoint(i),s=t||(o.isVector2?new NS:new rA);return s.copy(a).sub(o).normalize(),s}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new rA,r=[],i=[],o=[],a=new rA,s=new NA,u=0;u<=e;u++){var l=u/e;r[u]=this.getTangentAt(l,new rA)}i[0]=new rA,o[0]=new rA;var c=Number.MAX_VALUE,h=Math.abs(r[0].x),f=Math.abs(r[0].y),d=Math.abs(r[0].z);h<=c&&(c=h,n.set(1,0,0)),f<=c&&(c=f,n.set(0,1,0)),d<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(var p=1;p<=e;p++){if(i[p]=i[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(r[p-1],r[p]),a.length()>Number.EPSILON){a.normalize();var v=Math.acos(CS(r[p-1].dot(r[p]),-1,1));i[p].applyMatrix4(s.makeRotationAxis(a,v))}o[p].crossVectors(r[p],i[p])}if(!0===t){var m=Math.acos(CS(i[0].dot(i[e]),-1,1));m/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(m=-m);for(var g=1;g<=e;g++)i[g].applyMatrix4(s.makeRotationAxis(r[g],m*g)),o[g].crossVectors(r[g],i[g])}return{tangents:r,normals:i,binormals:o}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),OR=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return Y_(this,n),(e=t.call(this)).type="EllipseCurve",e.aX=r,e.aY=i,e.xRadius=o,e.yRadius=a,e.aStartAngle=s,e.aEndAngle=u,e.aClockwise=l,e.aRotation=c,e}return $_(n,[{key:"getPoint",value:function(e,t){for(var n=t||new NS,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,f=u-this.aY;s=h*l-f*c+this.aX,u=h*c+f*l+this.aY}return n.set(s,u)}},{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=X_(J_(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return X_(J_(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(LR);OR.prototype.isEllipseCurve=!0;var BR=function(e){tw(n,e);var t=ow(n);function n(e,r,i,o,a,s){var u;return Y_(this,n),(u=t.call(this,e,r,i,i,o,a,s)).type="ArcCurve",u}return $_(n)}(OR);function FR(){var e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){var u=(t-e)/o-(n-e)/(o+a)+(n-t)/a,l=(n-t)/a-(r-t)/(a+s)+(r-n)/s;i(t,n,u*=a,l*=a)},calc:function(i){var o=i*i;return e+t*i+n*o+r*(o*i)}}}BR.prototype.isArcCurve=!0;var UR=new rA,jR=new FR,HR=new FR,GR=new FR,zR=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return Y_(this,n),(e=t.call(this)).type="CatmullRomCurve3",e.points=r,e.closed=i,e.curveType=o,e.tension=a,e}return $_(n,[{key:"getPoint",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rA,i=r,o=this.points,a=o.length,s=(a-(this.closed?0:1))*e,u=Math.floor(s),l=s-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/a)+1)*a:0===l&&u===a-1&&(u=a-2,l=1),this.closed||u>0?t=o[(u-1)%a]:(UR.subVectors(o[0],o[1]).add(o[0]),t=UR);var c=o[u%a],h=o[(u+1)%a];if(this.closed||u+2<a?n=o[(u+2)%a]:(UR.subVectors(o[a-1],o[a-2]).add(o[a-1]),n=UR),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,d=Math.pow(t.distanceToSquared(c),f),p=Math.pow(c.distanceToSquared(h),f),v=Math.pow(h.distanceToSquared(n),f);p<1e-4&&(p=1),d<1e-4&&(d=p),v<1e-4&&(v=p),jR.initNonuniformCatmullRom(t.x,c.x,h.x,n.x,d,p,v),HR.initNonuniformCatmullRom(t.y,c.y,h.y,n.y,d,p,v),GR.initNonuniformCatmullRom(t.z,c.z,h.z,n.z,d,p,v)}else"catmullrom"===this.curveType&&(jR.initCatmullRom(t.x,c.x,h.x,n.x,this.tension),HR.initCatmullRom(t.y,c.y,h.y,n.y,this.tension),GR.initCatmullRom(t.z,c.z,h.z,n.z,this.tension));return i.set(jR.calc(l),HR.calc(l),GR.calc(l)),i}},{key:"copy",value:function(e){X_(J_(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=X_(J_(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){X_(J_(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new rA).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(LR);function VR(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function WR(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function qR(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}zR.prototype.isCatmullRomCurve3=!0;var KR=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new NS,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NS,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new NS,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new NS;return Y_(this,n),(e=t.call(this)).type="CubicBezierCurve",e.v0=r,e.v1=i,e.v2=o,e.v3=a,e}return $_(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NS,n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(qR(e,r.x,i.x,o.x,a.x),qR(e,r.y,i.y,o.y,a.y)),n}},{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=X_(J_(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return X_(J_(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(LR);KR.prototype.isCubicBezierCurve=!0;var JR=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rA,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rA,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new rA,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new rA;return Y_(this,n),(e=t.call(this)).type="CubicBezierCurve3",e.v0=r,e.v1=i,e.v2=o,e.v3=a,e}return $_(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rA,n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(qR(e,r.x,i.x,o.x,a.x),qR(e,r.y,i.y,o.y,a.y),qR(e,r.z,i.z,o.z,a.z)),n}},{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=X_(J_(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return X_(J_(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(LR);JR.prototype.isCubicBezierCurve3=!0;var QR=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new NS,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NS;return Y_(this,n),(e=t.call(this)).type="LineCurve",e.v1=r,e.v2=i,e}return $_(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NS,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var n=t||new NS;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=X_(J_(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return X_(J_(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(LR);QR.prototype.isLineCurve=!0;var XR=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rA,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rA;return Y_(this,n),(e=t.call(this)).type="LineCurve3",e.isLineCurve3=!0,e.v1=r,e.v2=i,e}return $_(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rA,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=X_(J_(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return X_(J_(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(LR),YR=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new NS,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NS,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new NS;return Y_(this,n),(e=t.call(this)).type="QuadraticBezierCurve",e.v0=r,e.v1=i,e.v2=o,e}return $_(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NS,n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(WR(e,r.x,i.x,o.x),WR(e,r.y,i.y,o.y)),n}},{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=X_(J_(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return X_(J_(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(LR);YR.prototype.isQuadraticBezierCurve=!0;var ZR=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rA,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rA,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new rA;return Y_(this,n),(e=t.call(this)).type="QuadraticBezierCurve3",e.v0=r,e.v1=i,e.v2=o,e}return $_(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rA,n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(WR(e,r.x,i.x,o.x),WR(e,r.y,i.y,o.y),WR(e,r.z,i.z,o.z)),n}},{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=X_(J_(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return X_(J_(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(LR);ZR.prototype.isQuadraticBezierCurve3=!0;var $R=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Y_(this,n),(e=t.call(this)).type="SplineCurve",e.points=r,e}return $_(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NS,n=t,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],l=r[o>r.length-2?r.length-1:o+1],c=r[o>r.length-3?r.length-1:o+2];return n.set(VR(a,s.x,u.x,l.x,c.x),VR(a,s.y,u.y,l.y,c.y)),n}},{key:"copy",value:function(e){X_(J_(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=X_(J_(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e}},{key:"fromJSON",value:function(e){X_(J_(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new NS).fromArray(i))}return this}}]),n}(LR);$R.prototype.isSplineCurve=!0;var eP=Object.freeze({__proto__:null,ArcCurve:BR,CatmullRomCurve3:zR,CubicBezierCurve:KR,CubicBezierCurve3:JR,EllipseCurve:OR,LineCurve:QR,LineCurve3:XR,QuadraticBezierCurve:YR,QuadraticBezierCurve3:ZR,SplineCurve:$R}),tP=function(e){tw(n,e);var t=ow(n);function n(){var e;return Y_(this,n),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return $_(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new QR(t,e))}},{key:"getPoint",value:function(e,t){for(var n=e*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=n){var o=r[i]-n,a=this.curves[i],s=a.getLength(),u=0===s?0:1-o/s;return a.getPointAt(u,t)}i++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a),u=0;u<s.length;u++){var l=s[u];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){X_(J_(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=X_(J_(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){X_(J_(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push((new eP[i.type]).fromJSON(i))}return this}}]),n}(LR),nP=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this)).type="Path",r.currentPoint=new NS,e&&r.setFromPoints(e),r}return $_(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new QR(this.currentPoint.clone(),new NS(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){var i=new YR(this.currentPoint.clone(),new NS(e,t),new NS(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,o){var a=new KR(this.currentPoint.clone(),new NS(e,t),new NS(n,r),new NS(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new $R(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this}},{key:"absarc",value:function(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this}},{key:"ellipse",value:function(e,t,n,r,i,o,a,s){var u=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+u,t+l,n,r,i,o,a,s),this}},{key:"absellipse",value:function(e,t,n,r,i,o,a,s){var u=new OR(e,t,n,r,i,o,a,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=X_(J_(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return X_(J_(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(tP),rP=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this,e)).uuid=TS(),r.type="Shape",r.holes=[],r}return $_(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){X_(J_(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=X_(J_(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){X_(J_(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push((new nP).fromJSON(i))}return this}}]),n}(nP),iP=function(e,t){var n,r,i,o,a,s,u,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=t&&t.length,h=c?t[0]*l:e.length,f=oP(e,0,h,l,!0),d=[];if(!f||f.next===f.prev)return d;if(c&&(f=fP(e,t,f,l)),e.length>80*l){n=i=e[0],r=o=e[1];for(var p=l;p<h;p+=l)(a=e[p])<n&&(n=a),(s=e[p+1])<r&&(r=s),a>i&&(i=a),s>o&&(o=s);u=0!==(u=Math.max(i-n,o-r))?1/u:0}return sP(f,d,l,n,r,u),d};function oP(e,t,n,r,i){var o,a;if(i===function(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=CP(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=CP(o,e[o],e[o+1],a);return a&&wP(a,a.next)&&(MP(a),a=a.next),a}function aP(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!wP(r,r.next)&&0!==_P(r.prev,r,r.next))r=r.next;else{if(MP(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function sP(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=mP(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,u,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(e,r,i,o);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,o?lP(e,r,i,o):uP(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),MP(e),e=u.next,l=u.next;else if((e=u)===l){a?1===a?sP(e=cP(aP(e),t,n),t,n,r,i,o,2):2===a&&hP(e,t,n,r,i,o):sP(aP(e),t,n,r,i,o,1);break}}}function uP(e){var t=e.prev,n=e,r=e.next;if(_P(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(yP(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&_P(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function lP(e,t,n,r){var i=e.prev,o=e,a=e.next;if(_P(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=mP(s,u,t,n,r),f=mP(l,c,t,n,r),d=e.prevZ,p=e.nextZ;d&&d.z>=h&&p&&p.z<=f;){if(d!==e.prev&&d!==e.next&&yP(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&_P(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==e.prev&&p!==e.next&&yP(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&_P(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&yP(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&_P(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==e.prev&&p!==e.next&&yP(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&_P(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function cP(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!wP(i,o)&&xP(i,r,r.next,o)&&AP(i,o)&&AP(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),MP(r),MP(r.next),r=e=o),r=r.next}while(r!==e);return aP(r)}function hP(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&bP(a,s)){var u=TP(a,s);return a=aP(a,a.next),u=aP(u,u.next),sP(a,t,n,r,i,o),void sP(u,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function fP(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=oP(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(gP(a));for(s.sort(dP),i=0;i<s.length;i++)pP(s[i],n),n=aP(n,n.next);return n}function dP(e,t){return e.x-t.x}function pP(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n;var u,l=n,c=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&yP(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),AP(r,e)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&vP(n,r)))&&(n=r,f=u)),r=r.next}while(r!==l);return n}(e,t),t){var n=TP(t,e);aP(t,t.next),aP(n,n.next)}}function vP(e,t){return _P(e.prev,e,t.prev)<0&&_P(t.next,e,e.next)<0}function mP(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function gP(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function yP(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function bP(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&xP(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(AP(e,t)&&AP(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(_P(e.prev,e,t.prev)||_P(e,t.prev,t))||wP(e,t)&&_P(e.prev,e,e.next)>0&&_P(t.prev,t,t.next)>0)}function _P(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function wP(e,t){return e.x===t.x&&e.y===t.y}function xP(e,t,n,r){var i=SP(_P(e,t,n)),o=SP(_P(e,t,r)),a=SP(_P(n,r,e)),s=SP(_P(n,r,t));return i!==o&&a!==s||(!(0!==i||!EP(e,n,t))||(!(0!==o||!EP(e,r,t))||(!(0!==a||!EP(n,e,r))||!(0!==s||!EP(n,t,r)))))}function EP(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function SP(e){return e>0?1:e<0?-1:0}function AP(e,t){return _P(e.prev,e,e.next)<0?_P(e,t,e.next)>=0&&_P(e,e.prev,t)>=0:_P(e,t,e.prev)<0||_P(e,e.next,t)<0}function TP(e,t){var n=new kP(e.i,e.x,e.y),r=new kP(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function CP(e,t,n,r){var i=new kP(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function MP(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function kP(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var IP=function(){function e(){Y_(this,e)}return $_(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],r=[],i=[];RP(e),PP(n,e);var o=e.length;t.forEach(RP);for(var a=0;a<t.length;a++)r.push(o),o+=t[a].length,PP(n,t[a]);for(var s=iP(n,r),u=0;u<s.length;u+=3)i.push(s.slice(u,u+3));return i}}]),e}();function RP(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function PP(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var DP=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rP([new NS(.5,.5),new NS(-.5,.5),new NS(-.5,-.5),new NS(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Y_(this,n),(e=t.call(this)).type="ExtrudeGeometry",e.parameters={shapes:r,options:i},r=Array.isArray(r)?r:[r];for(var o=K_(e),a=[],s=[],u=0,l=r.length;u<l;u++){var c=r[u];h(c)}function h(e){var t=[],n=void 0!==i.curveSegments?i.curveSegments:12,r=void 0!==i.steps?i.steps:1,u=void 0!==i.depth?i.depth:1,l=void 0===i.bevelEnabled||i.bevelEnabled,c=void 0!==i.bevelThickness?i.bevelThickness:.2,h=void 0!==i.bevelSize?i.bevelSize:c-.1,f=void 0!==i.bevelOffset?i.bevelOffset:0,d=void 0!==i.bevelSegments?i.bevelSegments:3,p=i.extrudePath,v=void 0!==i.UVGenerator?i.UVGenerator:NP;void 0!==i.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=i.amount);var m,g,y,b,_,w=!1;p&&(m=p.getSpacedPoints(r),w=!0,l=!1,g=p.computeFrenetFrames(r,!1),y=new rA,b=new rA,_=new rA),l||(d=0,c=0,h=0,f=0);var x=e.extractPoints(n),E=x.shape,S=x.holes;if(!IP.isClockWise(E)){E=E.reverse();for(var A=0,T=S.length;A<T;A++){var C=S[A];IP.isClockWise(C)&&(S[A]=C.reverse())}}for(var M=IP.triangulateShape(E,S),k=E,I=0,R=S.length;I<R;I++){var P=S[I];E=E.concat(P)}function D(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var N=E.length,L=M.length;function O(e,t,n){var r,i,o,a=e.x-t.x,s=e.y-t.y,u=n.x-e.x,l=n.y-e.y,c=a*a+s*s,h=a*l-s*u;if(Math.abs(h)>Number.EPSILON){var f=Math.sqrt(c),d=Math.sqrt(u*u+l*l),p=t.x-s/f,v=t.y+a/f,m=((n.x-l/d-p)*l-(n.y+u/d-v)*u)/(a*l-s*u),g=(r=p+a*m-e.x)*r+(i=v+s*m-e.y)*i;if(g<=2)return new NS(r,i);o=Math.sqrt(g/2)}else{var y=!1;a>Number.EPSILON?u>Number.EPSILON&&(y=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(l)&&(y=!0),y?(r=-s,i=a,o=Math.sqrt(c)):(r=a,i=s,o=Math.sqrt(c/2))}return new NS(r/o,i/o)}for(var B=[],F=0,U=k.length,j=U-1,H=F+1;F<U;F++,j++,H++)j===U&&(j=0),H===U&&(H=0),B[F]=O(k[F],k[j],k[H]);for(var G,z=[],V=B.concat(),W=0,q=S.length;W<q;W++){var K=S[W];G=[];for(var J=0,Q=K.length,X=Q-1,Y=J+1;J<Q;J++,X++,Y++)X===Q&&(X=0),Y===Q&&(Y=0),G[J]=O(K[J],K[X],K[Y]);z.push(G),V=V.concat(G)}for(var Z=0;Z<d;Z++){for(var $=Z/d,ee=c*Math.cos($*Math.PI/2),te=h*Math.sin($*Math.PI/2)+f,ne=0,re=k.length;ne<re;ne++){var ie=D(k[ne],B[ne],te);Re(ie.x,ie.y,-ee)}for(var oe=0,ae=S.length;oe<ae;oe++){var se=S[oe];G=z[oe];for(var ue=0,le=se.length;ue<le;ue++){var ce=D(se[ue],G[ue],te);Re(ce.x,ce.y,-ee)}}}for(var he=h+f,fe=0;fe<N;fe++){var de=l?D(E[fe],V[fe],he):E[fe];w?(b.copy(g.normals[0]).multiplyScalar(de.x),y.copy(g.binormals[0]).multiplyScalar(de.y),_.copy(m[0]).add(b).add(y),Re(_.x,_.y,_.z)):Re(de.x,de.y,0)}for(var pe=1;pe<=r;pe++)for(var ve=0;ve<N;ve++){var me=l?D(E[ve],V[ve],he):E[ve];w?(b.copy(g.normals[pe]).multiplyScalar(me.x),y.copy(g.binormals[pe]).multiplyScalar(me.y),_.copy(m[pe]).add(b).add(y),Re(_.x,_.y,_.z)):Re(me.x,me.y,u/r*pe)}for(var ge=d-1;ge>=0;ge--){for(var ye=ge/d,be=c*Math.cos(ye*Math.PI/2),_e=h*Math.sin(ye*Math.PI/2)+f,we=0,xe=k.length;we<xe;we++){var Ee=D(k[we],B[we],_e);Re(Ee.x,Ee.y,u+be)}for(var Se=0,Ae=S.length;Se<Ae;Se++){var Te=S[Se];G=z[Se];for(var Ce=0,Me=Te.length;Ce<Me;Ce++){var ke=D(Te[Ce],G[Ce],_e);w?Re(ke.x,ke.y+m[r-1].y,m[r-1].x+be):Re(ke.x,ke.y,u+be)}}}function Ie(e,t){for(var n=e.length;--n>=0;){var i=n,o=n-1;o<0&&(o=e.length-1);for(var a=0,s=r+2*d;a<s;a++){var u=N*a,l=N*(a+1);De(t+i+u,t+o+u,t+o+l,t+i+l)}}}function Re(e,n,r){t.push(e),t.push(n),t.push(r)}function Pe(e,t,n){Ne(e),Ne(t),Ne(n);var r=a.length/3,i=v.generateTopUV(o,a,r-3,r-2,r-1);Le(i[0]),Le(i[1]),Le(i[2])}function De(e,t,n,r){Ne(e),Ne(t),Ne(r),Ne(t),Ne(n),Ne(r);var i=a.length/3,s=v.generateSideWallUV(o,a,i-6,i-3,i-2,i-1);Le(s[0]),Le(s[1]),Le(s[3]),Le(s[1]),Le(s[2]),Le(s[3])}function Ne(e){a.push(t[3*e+0]),a.push(t[3*e+1]),a.push(t[3*e+2])}function Le(e){s.push(e.x),s.push(e.y)}!function(){var e=a.length/3;if(l){for(var t=0,n=N*t,i=0;i<L;i++){var s=M[i];Pe(s[2]+n,s[1]+n,s[0]+n)}n=N*(t=r+2*d);for(var u=0;u<L;u++){var c=M[u];Pe(c[0]+n,c[1]+n,c[2]+n)}}else{for(var h=0;h<L;h++){var f=M[h];Pe(f[2],f[1],f[0])}for(var p=0;p<L;p++){var v=M[p];Pe(v[0]+N*r,v[1]+N*r,v[2]+N*r)}}o.addGroup(e,a.length/3-e,0)}(),function(){var e=a.length/3,t=0;Ie(k,t),t+=k.length;for(var n=0,r=S.length;n<r;n++){var i=S[n];Ie(i,t),t+=i.length}o.addGroup(e,a.length/3-e,1)}()}return e.setAttribute("position",new RT(a,3)),e.setAttribute("uv",new RT(s,2)),e.computeVertexNormals(),e}return $_(n,[{key:"toJSON",value:function(){var e=X_(J_(n.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,o=e.shapes.length;i<o;i++){var a=t[e.shapes[i]];r.push(a)}var s=e.options.extrudePath;return void 0!==s&&(e.options.extrudePath=(new eP[s.type]).fromJSON(s)),new n(r,e.options)}}]),n}(jT),NP={generateTopUV:function(e,t,n,r,i){var o=t[3*n],a=t[3*n+1],s=t[3*r],u=t[3*r+1],l=t[3*i],c=t[3*i+1];return[new NS(o,a),new NS(s,u),new NS(l,c)]},generateSideWallUV:function(e,t,n,r,i,o){var a=t[3*n],s=t[3*n+1],u=t[3*n+2],l=t[3*r],c=t[3*r+1],h=t[3*r+2],f=t[3*i],d=t[3*i+1],p=t[3*i+2],v=t[3*o],m=t[3*o+1],g=t[3*o+2];return Math.abs(s-c)<Math.abs(a-l)?[new NS(a,1-u),new NS(l,1-h),new NS(f,1-p),new NS(v,1-g)]:[new NS(s,1-u),new NS(c,1-h),new NS(d,1-p),new NS(m,1-g)]}};var LP=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Y_(this,n);var o=(1+Math.sqrt(5))/2,a=[-1,o,0,1,o,0,-1,-o,0,1,-o,0,0,-1,o,0,1,o,0,-1,-o,0,1,-o,o,0,-1,o,0,1,-o,0,-1,-o,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return(e=t.call(this,a,s,r,i)).type="IcosahedronGeometry",e.parameters={radius:r,detail:i},e}return $_(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(MR),OP=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new NS(0,.5),new NS(.5,0),new NS(0,-.5)],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;Y_(this,n),(e=t.call(this)).type="LatheGeometry",e.parameters={points:r,segments:i,phiStart:o,phiLength:a},i=Math.floor(i),a=CS(a,0,2*Math.PI);for(var s=[],u=[],l=[],c=[],h=[],f=1/i,d=new rA,p=new NS,v=new rA,m=new rA,g=new rA,y=0,b=0,_=0;_<=r.length-1;_++)switch(_){case 0:y=r[_+1].x-r[_].x,b=r[_+1].y-r[_].y,v.x=1*b,v.y=-y,v.z=0*b,g.copy(v),v.normalize(),c.push(v.x,v.y,v.z);break;case r.length-1:c.push(g.x,g.y,g.z);break;default:y=r[_+1].x-r[_].x,b=r[_+1].y-r[_].y,v.x=1*b,v.y=-y,v.z=0*b,m.copy(v),v.x+=g.x,v.y+=g.y,v.z+=g.z,v.normalize(),c.push(v.x,v.y,v.z),g.copy(m)}for(var w=0;w<=i;w++)for(var x=o+w*f*a,E=Math.sin(x),S=Math.cos(x),A=0;A<=r.length-1;A++){d.x=r[A].x*E,d.y=r[A].y,d.z=r[A].x*S,u.push(d.x,d.y,d.z),p.x=w/i,p.y=A/(r.length-1),l.push(p.x,p.y);var T=c[3*A+0]*E,C=c[3*A+1],M=c[3*A+0]*S;h.push(T,C,M)}for(var k=0;k<i;k++)for(var I=0;I<r.length-1;I++){var R=I+k*r.length,P=R,D=R+r.length,N=R+r.length+1,L=R+1;s.push(P,D,L),s.push(N,L,D)}return e.setIndex(s),e.setAttribute("position",new RT(u,3)),e.setAttribute("uv",new RT(l,2)),e.setAttribute("normal",new RT(h,3)),e}return $_(n,null,[{key:"fromJSON",value:function(e){return new n(e.points,e.segments,e.phiStart,e.phiLength)}}]),n}(jT),BP=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Y_(this,n);var o=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];return(e=t.call(this,o,a,r,i)).type="OctahedronGeometry",e.parameters={radius:r,detail:i},e}return $_(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(MR),FP=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;Y_(this,n),(e=t.call(this)).type="RingGeometry",e.parameters={innerRadius:r,outerRadius:i,thetaSegments:o,phiSegments:a,thetaStart:s,thetaLength:u},o=Math.max(3,o);for(var l=[],c=[],h=[],f=[],d=r,p=(i-r)/(a=Math.max(1,a)),v=new rA,m=new NS,g=0;g<=a;g++){for(var y=0;y<=o;y++){var b=s+y/o*u;v.x=d*Math.cos(b),v.y=d*Math.sin(b),c.push(v.x,v.y,v.z),h.push(0,0,1),m.x=(v.x/i+1)/2,m.y=(v.y/i+1)/2,f.push(m.x,m.y)}d+=p}for(var _=0;_<a;_++)for(var w=_*(o+1),x=0;x<o;x++){var E=x+w,S=E,A=E+o+1,T=E+o+2,C=E+1;l.push(S,A,C),l.push(A,T,C)}return e.setIndex(l),e.setAttribute("position",new RT(c,3)),e.setAttribute("normal",new RT(h,3)),e.setAttribute("uv",new RT(f,2)),e}return $_(n,null,[{key:"fromJSON",value:function(e){return new n(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}]),n}(jT),UP=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rP([new NS(0,.5),new NS(-.5,-.5),new NS(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;Y_(this,n),(e=t.call(this)).type="ShapeGeometry",e.parameters={shapes:r,curveSegments:i};var o=[],a=[],s=[],u=[],l=0,c=0;if(!1===Array.isArray(r))f(r);else for(var h=0;h<r.length;h++)f(r[h]),e.addGroup(l,c,h),l+=c,c=0;function f(e){var t=a.length/3,n=e.extractPoints(i),r=n.shape,l=n.holes;!1===IP.isClockWise(r)&&(r=r.reverse());for(var h=0,f=l.length;h<f;h++){var d=l[h];!0===IP.isClockWise(d)&&(l[h]=d.reverse())}for(var p=IP.triangulateShape(r,l),v=0,m=l.length;v<m;v++){var g=l[v];r=r.concat(g)}for(var y=0,b=r.length;y<b;y++){var _=r[y];a.push(_.x,_.y,0),s.push(0,0,1),u.push(_.x,_.y)}for(var w=0,x=p.length;w<x;w++){var E=p[w],S=E[0]+t,A=E[1]+t,T=E[2]+t;o.push(S,A,T),c+=3}}return e.setIndex(o),e.setAttribute("position",new RT(a,3)),e.setAttribute("normal",new RT(s,3)),e.setAttribute("uv",new RT(u,2)),e}return $_(n,[{key:"toJSON",value:function(){var e=X_(J_(n.prototype),"toJSON",this).call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,o=e.shapes.length;i<o;i++){var a=t[e.shapes[i]];r.push(a)}return new n(r,e.curveSegments)}}]),n}(jT);var jP=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;Y_(this,n),(e=t.call(this)).type="SphereGeometry",e.parameters={radius:r,widthSegments:i,heightSegments:o,phiStart:a,phiLength:s,thetaStart:u,thetaLength:l},i=Math.max(3,Math.floor(i)),o=Math.max(2,Math.floor(o));for(var c=Math.min(u+l,Math.PI),h=0,f=[],d=new rA,p=new rA,v=[],m=[],g=[],y=[],b=0;b<=o;b++){var _=[],w=b/o,x=0;0==b&&0==u?x=.5/i:b==o&&c==Math.PI&&(x=-.5/i);for(var E=0;E<=i;E++){var S=E/i;d.x=-r*Math.cos(a+S*s)*Math.sin(u+w*l),d.y=r*Math.cos(u+w*l),d.z=r*Math.sin(a+S*s)*Math.sin(u+w*l),m.push(d.x,d.y,d.z),p.copy(d).normalize(),g.push(p.x,p.y,p.z),y.push(S+x,1-w),_.push(h++)}f.push(_)}for(var A=0;A<o;A++)for(var T=0;T<i;T++){var C=f[A][T+1],M=f[A][T],k=f[A+1][T],I=f[A+1][T+1];(0!==A||u>0)&&v.push(C,M,I),(A!==o-1||c<Math.PI)&&v.push(M,k,I)}return e.setIndex(v),e.setAttribute("position",new RT(m,3)),e.setAttribute("normal",new RT(g,3)),e.setAttribute("uv",new RT(y,2)),e}return $_(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),n}(jT),HP=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Y_(this,n);var o=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];return(e=t.call(this,o,a,r,i)).type="TetrahedronGeometry",e.parameters={radius:r,detail:i},e}return $_(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(MR),GP=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;Y_(this,n),(e=t.call(this)).type="TorusGeometry",e.parameters={radius:r,tube:i,radialSegments:o,tubularSegments:a,arc:s},o=Math.floor(o),a=Math.floor(a);for(var u=[],l=[],c=[],h=[],f=new rA,d=new rA,p=new rA,v=0;v<=o;v++)for(var m=0;m<=a;m++){var g=m/a*s,y=v/o*Math.PI*2;d.x=(r+i*Math.cos(y))*Math.cos(g),d.y=(r+i*Math.cos(y))*Math.sin(g),d.z=i*Math.sin(y),l.push(d.x,d.y,d.z),f.x=r*Math.cos(g),f.y=r*Math.sin(g),p.subVectors(d,f).normalize(),c.push(p.x,p.y,p.z),h.push(m/a),h.push(v/o)}for(var b=1;b<=o;b++)for(var _=1;_<=a;_++){var w=(a+1)*b+_-1,x=(a+1)*(b-1)+_-1,E=(a+1)*(b-1)+_,S=(a+1)*b+_;u.push(w,x,S),u.push(x,E,S)}return e.setIndex(u),e.setAttribute("position",new RT(l,3)),e.setAttribute("normal",new RT(c,3)),e.setAttribute("uv",new RT(h,2)),e}return $_(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}]),n}(jT),zP=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;Y_(this,n),(e=t.call(this)).type="TorusKnotGeometry",e.parameters={radius:r,tube:i,tubularSegments:o,radialSegments:a,p:s,q:u},o=Math.floor(o),a=Math.floor(a);for(var l=[],c=[],h=[],f=[],d=new rA,p=new rA,v=new rA,m=new rA,g=new rA,y=new rA,b=new rA,_=0;_<=o;++_){var w=_/o*s*Math.PI*2;P(w,s,u,r,v),P(w+.01,s,u,r,m),y.subVectors(m,v),b.addVectors(m,v),g.crossVectors(y,b),b.crossVectors(g,y),g.normalize(),b.normalize();for(var x=0;x<=a;++x){var E=x/a*Math.PI*2,S=-i*Math.cos(E),A=i*Math.sin(E);d.x=v.x+(S*b.x+A*g.x),d.y=v.y+(S*b.y+A*g.y),d.z=v.z+(S*b.z+A*g.z),c.push(d.x,d.y,d.z),p.subVectors(d,v).normalize(),h.push(p.x,p.y,p.z),f.push(_/o),f.push(x/a)}}for(var T=1;T<=o;T++)for(var C=1;C<=a;C++){var M=(a+1)*(T-1)+(C-1),k=(a+1)*T+(C-1),I=(a+1)*T+C,R=(a+1)*(T-1)+C;l.push(M,k,R),l.push(k,I,R)}function P(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}return e.setIndex(l),e.setAttribute("position",new RT(c,3)),e.setAttribute("normal",new RT(h,3)),e.setAttribute("uv",new RT(f,2)),e}return $_(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}]),n}(jT),VP=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ZR(new rA(-1,-1,0),new rA(-1,1,0),new rA(1,1,0)),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Y_(this,n),(e=t.call(this)).type="TubeGeometry",e.parameters={path:r,tubularSegments:i,radius:o,radialSegments:a,closed:s};var u=r.computeFrenetFrames(i,s);e.tangents=u.tangents,e.normals=u.normals,e.binormals=u.binormals;var l=new rA,c=new rA,h=new NS,f=new rA,d=[],p=[],v=[],m=[];function g(){for(var e=0;e<i;e++)y(e);y(!1===s?i:0),_(),b()}function y(e){f=r.getPointAt(e/i,f);for(var t=u.normals[e],n=u.binormals[e],s=0;s<=a;s++){var h=s/a*Math.PI*2,v=Math.sin(h),m=-Math.cos(h);c.x=m*t.x+v*n.x,c.y=m*t.y+v*n.y,c.z=m*t.z+v*n.z,c.normalize(),p.push(c.x,c.y,c.z),l.x=f.x+o*c.x,l.y=f.y+o*c.y,l.z=f.z+o*c.z,d.push(l.x,l.y,l.z)}}function b(){for(var e=1;e<=i;e++)for(var t=1;t<=a;t++){var n=(a+1)*(e-1)+(t-1),r=(a+1)*e+(t-1),o=(a+1)*e+t,s=(a+1)*(e-1)+t;m.push(n,r,s),m.push(r,o,s)}}function _(){for(var e=0;e<=i;e++)for(var t=0;t<=a;t++)h.x=e/i,h.y=t/a,v.push(h.x,h.y)}return g(),e.setIndex(m),e.setAttribute("position",new RT(d,3)),e.setAttribute("normal",new RT(p,3)),e.setAttribute("uv",new RT(v,2)),e}return $_(n,[{key:"toJSON",value:function(){var e=X_(J_(n.prototype),"toJSON",this).call(this);return e.path=this.parameters.path.toJSON(),e}}],[{key:"fromJSON",value:function(e){return new n((new eP[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}]),n}(jT),WP=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(Y_(this,n),(e=t.call(this)).type="WireframeGeometry",e.parameters={geometry:r},null!==r){var i=[],o=new Set,a=new rA,s=new rA;if(null!==r.index){var u=r.attributes.position,l=r.index,c=r.groups;0===c.length&&(c=[{start:0,count:l.count,materialIndex:0}]);for(var h=0,f=c.length;h<f;++h)for(var d=c[h],p=d.start,v=d.count,m=p,g=p+v;m<g;m+=3)for(var y=0;y<3;y++){var b=l.getX(m+y),_=l.getX(m+(y+1)%3);a.fromBufferAttribute(u,b),s.fromBufferAttribute(u,_),!0===qP(a,s,o)&&(i.push(a.x,a.y,a.z),i.push(s.x,s.y,s.z))}}else for(var w=r.attributes.position,x=0,E=w.count/3;x<E;x++)for(var S=0;S<3;S++){var A=3*x+S,T=3*x+(S+1)%3;a.fromBufferAttribute(w,A),s.fromBufferAttribute(w,T),!0===qP(a,s,o)&&(i.push(a.x,a.y,a.z),i.push(s.x,s.y,s.z))}e.setAttribute("position",new RT(i,3))}return e}return $_(n)}(jT);function qP(e,t,n){var r="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),i="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r,i),!0)}var KP=Object.freeze({__proto__:null,BoxGeometry:aC,BoxBufferGeometry:aC,CircleGeometry:AR,CircleBufferGeometry:AR,ConeGeometry:CR,ConeBufferGeometry:CR,CylinderGeometry:TR,CylinderBufferGeometry:TR,DodecahedronGeometry:kR,DodecahedronBufferGeometry:kR,EdgesGeometry:NR,ExtrudeGeometry:DP,ExtrudeBufferGeometry:DP,IcosahedronGeometry:LP,IcosahedronBufferGeometry:LP,LatheGeometry:OP,LatheBufferGeometry:OP,OctahedronGeometry:BP,OctahedronBufferGeometry:BP,PlaneGeometry:TC,PlaneBufferGeometry:TC,PolyhedronGeometry:MR,PolyhedronBufferGeometry:MR,RingGeometry:FP,RingBufferGeometry:FP,ShapeGeometry:UP,ShapeBufferGeometry:UP,SphereGeometry:jP,SphereBufferGeometry:jP,TetrahedronGeometry:HP,TetrahedronBufferGeometry:HP,TorusGeometry:GP,TorusBufferGeometry:GP,TorusKnotGeometry:zP,TorusKnotBufferGeometry:zP,TubeGeometry:VP,TubeBufferGeometry:VP,WireframeGeometry:WP}),JP=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this)).type="ShadowMaterial",r.color=new KS(0),r.transparent=!0,r.setValues(e),r}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this}}]),n}(yT);JP.prototype.isShadowMaterial=!0;var QP=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this)).defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new KS(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new KS(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=VE,r.normalScale=new NS(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.setValues(e),r}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]),n}(yT);QP.prototype.isMeshStandardMaterial=!0;var XP=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this)).defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new NS(1,1),r.clearcoatNormalMap=null,r.ior=1.5,Object.defineProperty(K_(r),"reflectivity",{get:function(){return CS(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),r.sheenColor=new KS(0),r.sheenColorMap=null,r.sheenRoughness=1,r.sheenRoughnessMap=null,r.transmissionMap=null,r.thickness=0,r.thicknessMap=null,r.attenuationDistance=0,r.attenuationColor=new KS(1,1,1),r.specularIntensity=1,r.specularIntensityMap=null,r.specularColor=new KS(1,1,1),r.specularColorMap=null,r._sheen=0,r._clearcoat=0,r._transmission=0,r.setValues(e),r}return $_(n,[{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}]),n}(QP);XP.prototype.isMeshPhysicalMaterial=!0;var YP=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this)).type="MeshPhongMaterial",r.color=new KS(16777215),r.specular=new KS(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new KS(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=VE,r.normalScale=new NS(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=nx,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.setValues(e),r}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]),n}(yT);YP.prototype.isMeshPhongMaterial=!0;var ZP=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this)).defines={TOON:""},r.type="MeshToonMaterial",r.color=new KS(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new KS(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=VE,r.normalScale=new NS(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(yT);ZP.prototype.isMeshToonMaterial=!0;var $P=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this)).type="MeshNormalMaterial",r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=VE,r.normalScale=new NS(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.flatShading=!1,r.setValues(e),r}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),n}(yT);$P.prototype.isMeshNormalMaterial=!0;var eD=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this)).type="MeshLambertMaterial",r.color=new KS(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new KS(0),r.emissiveIntensity=1,r.emissiveMap=null,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=nx,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(yT);eD.prototype.isMeshLambertMaterial=!0;var tD=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this)).defines={MATCAP:""},r.type="MeshMatcapMaterial",r.color=new KS(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=VE,r.normalScale=new NS(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.flatShading=!1,r.setValues(e),r}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}]),n}(yT);tD.prototype.isMeshMatcapMaterial=!0;var nD=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this)).type="LineDashedMaterial",r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(e),r}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(rR);nD.prototype.isLineDashedMaterial=!0;var rD=Object.freeze({__proto__:null,ShadowMaterial:JP,SpriteMaterial:xI,RawShaderMaterial:BC,ShaderMaterial:cC,PointsMaterial:pR,MeshPhysicalMaterial:XP,MeshStandardMaterial:QP,MeshPhongMaterial:YP,MeshToonMaterial:ZP,MeshNormalMaterial:$P,MeshLambertMaterial:eD,MeshDepthMaterial:$k,MeshDistanceMaterial:eI,MeshBasicMaterial:bT,MeshMatcapMaterial:tD,LineDashedMaterial:nD,LineBasicMaterial:rR,Material:yT}),iD={arraySlice:function(e,t,n){return iD.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,u=0;u!==t;++u)i[a++]=e[s+u];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}},subclip:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,o=e.clone();o.name=t;for(var a=[],s=0;s<o.tracks.length;++s){for(var u=o.tracks[s],l=u.getValueSize(),c=[],h=[],f=0;f<u.times.length;++f){var d=u.times[f]*i;if(!(d<n||d>=r)){c.push(u.times[f]);for(var p=0;p<l;++p)h.push(u.values[f*l+p])}}0!==c.length&&(u.times=iD.convertArray(c,u.times.constructor),u.values=iD.convertArray(h,u.values.constructor),a.push(u))}o.tracks=a;for(var v=1/0,m=0;m<o.tracks.length;++m)v>o.tracks[m].times[0]&&(v=o.tracks[m].times[0]);for(var g=0;g<o.tracks.length;++g)o.tracks[g].shift(-1*v);return o.resetDuration(),o},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var i=n.tracks.length,o=t/r,a=function(t){var r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)return"continue";var a=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===i}));if(void 0===a)return"continue";var s=0,u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3);var l=0,c=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=c/3);var h=r.times.length-1,f=void 0;if(o<=r.times[0]){var d=s,p=u-s;f=iD.arraySlice(r.values,d,p)}else if(o>=r.times[h]){var v=h*u+s,m=v+u-s;f=iD.arraySlice(r.values,v,m)}else{var g=r.createInterpolant(),y=s,b=u-s;g.evaluate(o),f=iD.arraySlice(g.resultBuffer,y,b)}"quaternion"===i&&(new nA).fromArray(f).normalize().conjugate().toArray(f);for(var _=a.times.length,w=0;w<_;++w){var x=w*c+l;if("quaternion"===i)nA.multiplyQuaternionsFlat(a.values,x,f,0,a.values,x);else for(var E=c-2*l,S=0;S<E;++S)a.values[x+S]-=f[S]}},s=0;s<i;++s)a(s);return e.blendMode=OE,e}},oD=function(){function e(t,n,r,i){Y_(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return $_(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,e<(r=t[++n]))break t}o=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var u=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===u)break;if(r=i,e>=(i=t[--n-1]))break t}o=n,n=0}for(;n<o;){var l=n+o>>>1;e<t[l]?o=l:n=l+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}();oD.prototype.beforeStart_=oD.prototype.copySampleValue_,oD.prototype.afterEnd_=oD.prototype.copySampleValue_;var aD=function(e){tw(n,e);var t=ow(n);function n(e,r,i,o){var a;return Y_(this,n),(a=t.call(this,e,r,i,o))._weightPrev=-0,a._offsetPrev=-0,a._weightNext=-0,a._offsetNext=-0,a.DefaultSettings_={endingStart:PE,endingEnd:PE},a}return $_(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case DE:i=e,a=2*t-n;break;case NE:a=t+r[i=r.length-2]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case DE:o=e,s=2*n-t;break;case NE:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=o*l}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-t)/(r-t),p=d*d,v=p*d,m=-h*v+2*h*p-h*d,g=(1+h)*v+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*v+(1.5+f)*p+.5*d,b=f*v-f*p,_=0;_!==a;++_)i[_]=m*o[l+_]+g*o[u+_]+y*o[s+_]+b*o[c+_];return i}}]),n}(oD),sD=function(e){tw(n,e);var t=ow(n);function n(e,r,i,o){return Y_(this,n),t.call(this,e,r,i,o)}return $_(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=(n-t)/(r-t),c=1-l,h=0;h!==a;++h)i[h]=o[u+h]*c+o[s+h]*l;return i}}]),n}(oD),uD=function(e){tw(n,e);var t=ow(n);function n(e,r,i,o){return Y_(this,n),t.call(this,e,r,i,o)}return $_(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(oD),lD=function(){function e(t,n,r,i){if(Y_(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=iD.convertArray(n,this.TimeBufferType),this.values=iD.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return $_(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new uD(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new sD(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new aD(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case kE:t=this.InterpolantFactoryMethodDiscrete;break;case IE:t=this.InterpolantFactoryMethodLinear;break;case RE:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return kE;case this.InterpolantFactoryMethodLinear:return IE;case this.InterpolantFactoryMethodSmooth:return RE}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=iD.arraySlice(n,i,o),this.values=iD.arraySlice(this.values,i*a,o*a)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&iD.isTypedArray(r))for(var u=0,l=r.length;u!==l;++u){var c=r[u];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=iD.arraySlice(this.times),t=iD.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===RE,i=e.length-1,o=1,a=1;a<i;++a){var s=!1,u=e[a];if(u!==e[a+1]&&(1!==a||u!==e[0]))if(r)s=!0;else for(var l=a*n,c=l-n,h=l+n,f=0;f!==n;++f){var d=t[l+f];if(d!==t[c+f]||d!==t[h+f]){s=!0;break}}if(s){if(a!==o){e[o]=e[a];for(var p=a*n,v=o*n,m=0;m!==n;++m)t[v+m]=t[p+m]}++o}}if(i>0){e[o]=e[i];for(var g=i*n,y=o*n,b=0;b!==n;++b)t[y+b]=t[g+b];++o}return o!==e.length?(this.times=iD.arraySlice(e,0,o),this.values=iD.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=iD.arraySlice(this.times,0),t=iD.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:iD.convertArray(e.times,Array),values:iD.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();lD.prototype.TimeBufferType=Float32Array,lD.prototype.ValueBufferType=Float32Array,lD.prototype.DefaultInterpolation=IE;var cD=function(e){tw(n,e);var t=ow(n);function n(){return Y_(this,n),t.apply(this,arguments)}return $_(n)}(lD);cD.prototype.ValueTypeName="bool",cD.prototype.ValueBufferType=Array,cD.prototype.DefaultInterpolation=kE,cD.prototype.InterpolantFactoryMethodLinear=void 0,cD.prototype.InterpolantFactoryMethodSmooth=void 0;var hD=function(e){tw(n,e);var t=ow(n);function n(){return Y_(this,n),t.apply(this,arguments)}return $_(n)}(lD);hD.prototype.ValueTypeName="color";var fD=function(e){tw(n,e);var t=ow(n);function n(){return Y_(this,n),t.apply(this,arguments)}return $_(n)}(lD);fD.prototype.ValueTypeName="number";var dD=function(e){tw(n,e);var t=ow(n);function n(e,r,i,o){return Y_(this,n),t.call(this,e,r,i,o)}return $_(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t),u=e*a,l=u+a;u!==l;u+=4)nA.slerpFlat(i,0,o,u-a,o,u,s);return i}}]),n}(oD),pD=function(e){tw(n,e);var t=ow(n);function n(){return Y_(this,n),t.apply(this,arguments)}return $_(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new dD(this.times,this.values,this.getValueSize(),e)}}]),n}(lD);pD.prototype.ValueTypeName="quaternion",pD.prototype.DefaultInterpolation=IE,pD.prototype.InterpolantFactoryMethodSmooth=void 0;var vD=function(e){tw(n,e);var t=ow(n);function n(){return Y_(this,n),t.apply(this,arguments)}return $_(n)}(lD);vD.prototype.ValueTypeName="string",vD.prototype.ValueBufferType=Array,vD.prototype.DefaultInterpolation=kE,vD.prototype.InterpolantFactoryMethodLinear=void 0,vD.prototype.InterpolantFactoryMethodSmooth=void 0;var mD=function(e){tw(n,e);var t=ow(n);function n(){return Y_(this,n),t.apply(this,arguments)}return $_(n)}(lD);mD.prototype.ValueTypeName="vector";var gD=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:LE;Y_(this,e),this.name=t,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=TS(),this.duration<0&&this.resetDuration()}return $_(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(yD(n[i]).scale(r));var a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},i=0,o=n.length;i!==o;++i)t.push(lD.toJSON(n[i]));return r}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var l=iD.getKeyframeOrder(s);s=iD.sortedArray(s,1,l),u=iD.sortedArray(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new fD(".morphTargetInfluences["+t[a].name+"]",s,u).scale(1/n))}return new this(e,-1,o)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],u=s.name.match(i);if(u&&u.length>1){var l=u[1],c=r[l];c||(r[l]=c=[]),c.push(s)}}var h=[];for(var f in r)h.push(this.CreateFromMorphTargetSequence(f,r[f],t,n));return h}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];iD.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.fps||30,a=e.blendMode,s=e.length||-1,u=e.hierarchy||[],l=0;l<u.length;l++){var c=u[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){var h={},f=void 0;for(f=0;f<c.length;f++)if(c[f].morphTargets)for(var d=0;d<c[f].morphTargets.length;d++)h[c[f].morphTargets[d]]=-1;for(var p in h){for(var v=[],m=[],g=0;g!==c[f].morphTargets.length;++g){var y=c[f];v.push(y.time),m.push(y.morphTarget===p?1:0)}r.push(new fD(".morphTargetInfluence["+p+"]",v,m))}s=h.length*(o||1)}else{var b=".bones["+t[l].name+"]";n(mD,b+".position",c,"pos",r),n(pD,b+".quaternion",c,"rot",r),n(mD,b+".scale",c,"scl",r)}}return 0===r.length?null:new this(i,s,r,a)}}]),e}();function yD(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return fD;case"vector":case"vector2":case"vector3":case"vector4":return mD;case"color":return hD;case"quaternion":return pD;case"bool":case"boolean":return cD;case"string":return vD}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];iD.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var bD={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},_D=$_((function e(t,n,r){Y_(this,e);var i=this,o=!1,a=0,s=0,u=void 0,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){s++,!1===o&&void 0!==i.onStart&&i.onStart(e,a,s),o=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,s),a===s&&(o=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return u?u(e):e},this.setURLModifier=function(e){return u=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){var t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=l.length;t<n;t+=2){var r=l[t],i=l[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}})),wD=new _D,xD=function(){function e(t){Y_(this,e),this.manager=void 0!==t?t:wD,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return $_(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),ED={},SD=function(e){tw(n,e);var t=ow(n);function n(e){return Y_(this,n),t.call(this,e)}return $_(n,[{key:"load",value:function(e,t,n,r){var i=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var o=bD.get(e);if(void 0!==o)return this.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;if(void 0===ED[e]){ED[e]=[],ED[e].push({onLoad:t,onProgress:n,onError:r});var a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,u=this.responseType;fetch(a).then((function(t){if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body.getReader)return t;var n=ED[e],r=t.body.getReader(),i=t.headers.get("Content-Length"),o=i?parseInt(i):0,a=0!==o,s=0,u=new ReadableStream({start:function(e){!function t(){r.read().then((function(r){var i=r.done,u=r.value;if(i)e.close();else{s+=u.byteLength;for(var l=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:o}),c=0,h=n.length;c<h;c++){var f=n[c];f.onProgress&&f.onProgress(l)}e.enqueue(u),t()}}))}()}});return new Response(u)}throw Error('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText))})).then((function(e){switch(u){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((function(e){return(new DOMParser).parseFromString(e,s)}));case"json":return e.json();default:if(void 0===s)return e.text();var t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((function(e){return r.decode(e)}))}})).then((function(t){bD.add(e,t);var n=ED[e];delete ED[e];for(var r=0,i=n.length;r<i;r++){var o=n[r];o.onLoad&&o.onLoad(t)}})).catch((function(t){var n=ED[e];if(void 0===n)throw i.manager.itemError(e),t;delete ED[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e)})).finally((function(){i.manager.itemEnd(e)})),this.manager.itemStart(e)}else ED[e].push({onLoad:t,onProgress:n,onError:r})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(xD),AD=function(e){tw(n,e);var t=ow(n);function n(e){return Y_(this,n),t.call(this,e)}return $_(n,[{key:"load",value:function(e,t,n,r){var i=this,o=new SD(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(lU){r?r(lU):console.error(lU),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=gD.parse(e[n]);t.push(r)}return t}}]),n}(xD),TD=function(e){tw(n,e);var t=ow(n);function n(e){return Y_(this,n),t.call(this,e)}return $_(n,[{key:"load",value:function(e,t,n,r){var i=this,o=[],a=new ER,s=new SD(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);var u=0;function l(l){s.load(e[l],(function(e){var n=i.parse(e,!0);o[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(a.minFilter=Tx),a.image=o,a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,r)}if(Array.isArray(e))for(var c=0,h=e.length;c<h;++c)l(c);else s.load(e,(function(e){var n=i.parse(e,!0);if(n.isCubemap){for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}a.image=o}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=Tx),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,r);return a}}]),n}(xD),CD=function(e){tw(n,e);var t=ow(n);function n(e){return Y_(this,n),t.call(this,e)}return $_(n,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=bD.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;var a=US("img");function s(){l(),bD.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){l(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function l(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}]),n}(xD),MD=function(e){tw(n,e);var t=ow(n);function n(e){return Y_(this,n),t.call(this,e)}return $_(n,[{key:"load",value:function(e,t,n,r){var i=new vC,o=new CD(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,6===++a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var u=0;u<e.length;++u)s(u);return i}}]),n}(xD),kD=function(e){tw(n,e);var t=ow(n);function n(e){return Y_(this,n),t.call(this,e)}return $_(n,[{key:"load",value:function(e,t,n,r){var i=this,o=new KI,a=new SD(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(i.withCredentials),a.load(e,(function(e){var n=i.parse(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:bx,o.wrapT=void 0!==n.wrapT?n.wrapT:bx,o.magFilter=void 0!==n.magFilter?n.magFilter:Tx,o.minFilter=void 0!==n.minFilter?n.minFilter:Tx,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(o.encoding=n.encoding),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=kx),1===n.mipmapCount&&(o.minFilter=Tx),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,t&&t(o,n))}),n,r),o}}]),n}(xD),ID=function(e){tw(n,e);var t=ow(n);function n(e){return Y_(this,n),t.call(this,e)}return $_(n,[{key:"load",value:function(e,t,n,r){var i=new XS,o=new CD(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}]),n}(xD),RD=function(e){tw(n,e);var t=ow(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Y_(this,n),(r=t.call(this)).type="Light",r.color=new KS(e),r.intensity=i,r}return $_(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=X_(J_(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(oT);RD.prototype.isLight=!0;var PD=function(e){tw(n,e);var t=ow(n);function n(e,r,i){var o;return Y_(this,n),(o=t.call(this,e,i)).type="HemisphereLight",o.position.copy(oT.DefaultUp),o.updateMatrix(),o.groundColor=new KS(r),o}return $_(n,[{key:"copy",value:function(e){return RD.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}]),n}(RD);PD.prototype.isHemisphereLight=!0;var DD=new NA,ND=new rA,LD=new rA,OD=function(){function e(t){Y_(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new NS(512,512),this.map=null,this.mapPass=null,this.matrix=new NA,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new EC,this._frameExtents=new NS(1,1),this._viewportCount=1,this._viewports=[new ZS(0,0,1,1)]}return $_(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;ND.setFromMatrixPosition(e.matrixWorld),t.position.copy(ND),LD.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(LD),t.updateMatrixWorld(),DD.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(DD),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),BD=function(e){tw(n,e);var t=ow(n);function n(){var e;return Y_(this,n),(e=t.call(this,new fC(50,1,.5,500))).focus=1,e}return $_(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*AS*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;r===t.fov&&i===t.aspect&&o===t.far||(t.fov=r,t.aspect=i,t.far=o,t.updateProjectionMatrix()),X_(J_(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(OD);BD.prototype.isSpotLightShadow=!0;var FD=function(e){tw(n,e);var t=ow(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return Y_(this,n),(i=t.call(this,e,r)).type="SpotLight",i.position.copy(oT.DefaultUp),i.updateMatrix(),i.target=new oT,i.distance=o,i.angle=a,i.penumbra=s,i.decay=u,i.shadow=new BD,i}return $_(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(RD);FD.prototype.isSpotLight=!0;var UD=new NA,jD=new rA,HD=new rA,GD=function(e){tw(n,e);var t=ow(n);function n(){var e;return Y_(this,n),(e=t.call(this,new fC(90,1,.5,500)))._frameExtents=new NS(4,2),e._viewportCount=6,e._viewports=[new ZS(2,1,1,1),new ZS(0,1,1,1),new ZS(3,1,1,1),new ZS(1,1,1,1),new ZS(3,0,1,1),new ZS(1,0,1,1)],e._cubeDirections=[new rA(1,0,0),new rA(-1,0,0),new rA(0,0,1),new rA(0,0,-1),new rA(0,1,0),new rA(0,-1,0)],e._cubeUps=[new rA(0,1,0),new rA(0,1,0),new rA(0,1,0),new rA(0,1,0),new rA(0,0,1),new rA(0,0,-1)],e}return $_(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),jD.setFromMatrixPosition(e.matrixWorld),n.position.copy(jD),HD.copy(n.position),HD.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(HD),n.updateMatrixWorld(),r.makeTranslation(-jD.x,-jD.y,-jD.z),UD.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(UD)}}]),n}(OD);GD.prototype.isPointLightShadow=!0;var zD=function(e){tw(n,e);var t=ow(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Y_(this,n),(i=t.call(this,e,r)).type="PointLight",i.distance=o,i.decay=a,i.shadow=new GD,i}return $_(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(RD);zD.prototype.isPointLight=!0;var VD=function(e){tw(n,e);var t=ow(n);function n(){return Y_(this,n),t.call(this,new OC(-5,5,5,-5,.5,500))}return $_(n)}(OD);VD.prototype.isDirectionalLightShadow=!0;var WD=function(e){tw(n,e);var t=ow(n);function n(e,r){var i;return Y_(this,n),(i=t.call(this,e,r)).type="DirectionalLight",i.position.copy(oT.DefaultUp),i.updateMatrix(),i.target=new oT,i.shadow=new VD,i}return $_(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(RD);WD.prototype.isDirectionalLight=!0;var qD=function(e){tw(n,e);var t=ow(n);function n(e,r){var i;return Y_(this,n),(i=t.call(this,e,r)).type="AmbientLight",i}return $_(n)}(RD);qD.prototype.isAmbientLight=!0;var KD=function(e){tw(n,e);var t=ow(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return Y_(this,n),(i=t.call(this,e,r)).type="RectAreaLight",i.width=o,i.height=a,i}return $_(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=X_(J_(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(RD);KD.prototype.isRectAreaLight=!0;var JD=function(){function e(){Y_(this,e),this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new rA)}return $_(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*i),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*r*1.092548),t.addScaledVector(o[5],r*i*1.092548),t.addScaledVector(o[6],.315392*(3*i*i-1)),t.addScaledVector(o[7],n*i*1.092548),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*i),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*r),t.addScaledVector(o[5],.858086*r*i),t.addScaledVector(o[6],.743125*i*i-.247708),t.addScaledVector(o[7],.858086*n*i),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}]),e}();JD.prototype.isSphericalHarmonics3=!0;var QD=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new JD,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Y_(this,n),(e=t.call(this,void 0,i)).sh=r,e}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=X_(J_(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(RD);QD.prototype.isLightProbe=!0;var XD=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this,e)).textures={},r}return $_(n,[{key:"load",value:function(e,t,n,r){var i=this,o=new SD(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(lU){r?r(lU):console.error(lU),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new rD[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new KS).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var i in e.uniforms){var o=e.uniforms[i];switch(r.uniforms[i]={},o.type){case"t":r.uniforms[i].value=n(o.value);break;case"c":r.uniforms[i].value=(new KS).setHex(o.value);break;case"v2":r.uniforms[i].value=(new NS).fromArray(o.value);break;case"v3":r.uniforms[i].value=(new rA).fromArray(o.value);break;case"v4":r.uniforms[i].value=(new ZS).fromArray(o.value);break;case"m3":r.uniforms[i].value=(new LS).fromArray(o.value);break;case"m4":r.uniforms[i].value=(new NA).fromArray(o.value);break;default:r.uniforms[i].value=o.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var a in e.extensions)r.extensions[a]=e.extensions[a];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new NS).fromArray(s)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new NS).fromArray(e.clearcoatNormalScale)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}},{key:"setTextures",value:function(e){return this.textures=e,this}}]),n}(xD),YD=function(){function e(){Y_(this,e)}return $_(e,null,[{key:"decodeText",value:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(lU){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}},{key:"resolveURL",value:function(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}]),e}(),ZD=function(e){tw(n,e);var t=ow(n);function n(){var e;return Y_(this,n),(e=t.call(this)).type="InstancedBufferGeometry",e.instanceCount=1/0,e}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e=X_(J_(n.prototype),"toJSON",this).call(this,this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n}(jT);ZD.prototype.isInstancedBufferGeometry=!0;var $D,eN=function(e){tw(n,e);var t=ow(n);function n(e){return Y_(this,n),t.call(this,e)}return $_(n,[{key:"load",value:function(e,t,n,r){var i=this,o=new SD(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(lU){r?r(lU):console.error(lU),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){var t={},n={};function r(e,r){if(void 0!==t[r])return t[r];var i=e.interleavedBuffers[r],o=function(e,t){if(void 0!==n[t])return n[t];var r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),a=FS(i.type,o),s=new yI(a,i.stride);return s.uuid=i.uuid,t[r]=s,s}var i=e.isInstancedBufferGeometry?new ZD:new jT,o=e.data.index;if(void 0!==o){var a=FS(o.type,o.array);i.setIndex(new xT(a,1))}var s=e.data.attributes;for(var u in s){var l=s[u],c=void 0;if(l.isInterleavedBufferAttribute){var h=r(e.data,l.data);c=new _I(h,l.itemSize,l.offset,l.normalized)}else{var f=FS(l.type,l.array);c=new(l.isInstancedBufferAttribute?YI:xT)(f,l.itemSize,l.normalized)}void 0!==l.name&&(c.name=l.name),void 0!==l.usage&&c.setUsage(l.usage),void 0!==l.updateRange&&(c.updateRange.offset=l.updateRange.offset,c.updateRange.count=l.updateRange.count),i.setAttribute(u,c)}var d=e.data.morphAttributes;if(d)for(var p in d){for(var v=d[p],m=[],g=0,y=v.length;g<y;g++){var b=v[g],_=void 0;if(b.isInterleavedBufferAttribute){var w=r(e.data,b.data);_=new _I(w,b.itemSize,b.offset,b.normalized)}else{var x=FS(b.type,b.array);_=new xT(x,b.itemSize,b.normalized)}void 0!==b.name&&(_.name=b.name),m.push(_)}i.morphAttributes[p]=m}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);var E=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==E)for(var S=0,A=E.length;S!==A;++S){var T=E[S];i.addGroup(T.start,T.count,T.materialIndex)}var C=e.data.boundingSphere;if(void 0!==C){var M=new rA;void 0!==C.center&&M.fromArray(C.center),i.boundingSphere=new AA(M,C.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}]),n}(xD),tN=function(e){tw(n,e);var t=ow(n);function n(e){return Y_(this,n),t.call(this,e)}return $_(n,[{key:"load",value:function(e,t,n,r){var i=this,o=""===this.path?YD.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;var a=new SD(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){var o=null;try{o=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}},{key:"loadAsync",value:function(){var e=sw(uw.mark((function e(t,n){var r,i,o,a,s,u;return uw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this,i=""===this.path?YD.extractUrlBase(t):this.path,this.resourcePath=this.resourcePath||i,(o=new SD(this.manager)).setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),e.next=9,o.loadAsync(t,n);case 9:if(a=e.sent,s=JSON.parse(a),void 0!==(u=s.metadata)&&void 0!==u.type&&"geometry"!==u.type.toLowerCase()){e.next=14;break}throw new Error("THREE.ObjectLoader: Can't load "+t);case 14:return e.next=16,r.parseAsync(s);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"parse",value:function(e,t){var n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,(function(){void 0!==t&&t(u)})),a=this.parseTextures(e.textures,o),s=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,i,s,a,n),l=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,l),void 0!==t){var c=!1;for(var h in o)if(o[h]instanceof HTMLImageElement){c=!0;break}!1===c&&t(u)}return u}},{key:"parseAsync",value:function(){var e=sw(uw.mark((function e(t){var n,r,i,o,a,s,u,l;return uw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,r),e.next=5,this.parseImagesAsync(t.images);case 5:return o=e.sent,a=this.parseTextures(t.textures,o),s=this.parseMaterials(t.materials,a),u=this.parseObject(t.object,i,s,a,n),l=this.parseSkeletons(t.skeletons,u),this.bindSkeletons(u,l),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseShapes",value:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new rP).fromJSON(e[n]);t[i.uuid]=i}return t}},{key:"parseSkeletons",value:function(e,t){var n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(var i=0,o=e.length;i<o;i++){var a=(new XI).fromJSON(e[i],r);n[a.uuid]=a}return n}},{key:"parseGeometries",value:function(e,t){var n={};if(void 0!==e)for(var r=new eN,i=0,o=e.length;i<o;i++){var a=void 0,s=e[i];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:s.type in KP?a=KP[s.type].fromJSON(s,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(s.type,'"'))}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}return n}},{key:"parseMaterials",value:function(e,t){var n={},r={};if(void 0!==e){var i=new XD;i.setTextures(t);for(var o=0,a=e.length;o<a;o++){var s=e[o];if("MultiMaterial"===s.type){for(var u=[],l=0;l<s.materials.length;l++){var c=s.materials[l];void 0===n[c.uuid]&&(n[c.uuid]=i.parse(c)),u.push(n[c.uuid])}r[s.uuid]=u}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r}},{key:"parseAnimations",value:function(e){var t={};if(void 0!==e)for(var n=0;n<e.length;n++){var r=e[n],i=gD.parse(r);t[i.uuid]=i}return t}},{key:"parseImages",value:function(e,t){var n,r=this,i={};function o(e){if("string"===typeof e){var t=e;return function(e){return r.manager.itemStart(e),n.load(e,(function(){r.manager.itemEnd(e)}),void 0,(function(){r.manager.itemError(e),r.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:r.resourcePath+t)}return e.data?{data:FS(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){var a=new _D(t);(n=new CD(a)).setCrossOrigin(this.crossOrigin);for(var s=0,u=e.length;s<u;s++){var l=e[s],c=l.url;if(Array.isArray(c)){i[l.uuid]=[];for(var h=0,f=c.length;h<f;h++){var d=o(c[h]);null!==d&&(d instanceof HTMLImageElement?i[l.uuid].push(d):i[l.uuid].push(new KI(d.data,d.width,d.height)))}}else{var p=o(l.url);null!==p&&(i[l.uuid]=p)}}}return i}},{key:"parseImagesAsync",value:function(){var e=sw(uw.mark((function e(t){var n,r,i,o,a,s,u,l,c,h,f,d,p,v;return uw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=function(){return a=sw(uw.mark((function e(t){var r,o;return uw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=8;break}return o=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(r=t)?r:n.resourcePath+r,e.next=5,i.loadAsync(o);case 5:return e.abrupt("return",e.sent);case 8:if(!t.data){e.next=12;break}return e.abrupt("return",{data:FS(t.type,t.data),width:t.width,height:t.height});case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)},o=function(e){return a.apply(this,arguments)},n=this,r={},!(void 0!==t&&t.length>0)){e.next=32;break}(i=new CD(this.manager)).setCrossOrigin(this.crossOrigin),s=0,u=t.length;case 8:if(!(s<u)){e.next=32;break}if(l=t[s],c=l.url,!Array.isArray(c)){e.next=25;break}r[l.uuid]=[],h=0,f=c.length;case 14:if(!(h<f)){e.next=23;break}return d=c[h],e.next=18,o(d);case 18:null!==(p=e.sent)&&(p instanceof HTMLImageElement?r[l.uuid].push(p):r[l.uuid].push(new KI(p.data,p.width,p.height)));case 20:h++,e.next=14;break;case 23:e.next=29;break;case 25:return e.next=27,o(l.url);case 27:null!==(v=e.sent)&&(r[l.uuid]=v);case 29:s++,e.next=8;break;case 32:return e.abrupt("return",r);case 33:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTextures",value:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a=e[i];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var s=void 0,u=t[a.image];Array.isArray(u)?(s=new vC(u),6===u.length&&(s.needsUpdate=!0)):(s=u&&u.data?new KI(u.data,u.width,u.height):new XS(u),u&&(s.needsUpdate=!0)),s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=n(a.mapping,nN)),void 0!==a.offset&&s.offset.fromArray(a.offset),void 0!==a.repeat&&s.repeat.fromArray(a.repeat),void 0!==a.center&&s.center.fromArray(a.center),void 0!==a.rotation&&(s.rotation=a.rotation),void 0!==a.wrap&&(s.wrapS=n(a.wrap[0],rN),s.wrapT=n(a.wrap[1],rN)),void 0!==a.format&&(s.format=a.format),void 0!==a.type&&(s.type=a.type),void 0!==a.encoding&&(s.encoding=a.encoding),void 0!==a.minFilter&&(s.minFilter=n(a.minFilter,iN)),void 0!==a.magFilter&&(s.magFilter=n(a.magFilter,iN)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),void 0!==a.flipY&&(s.flipY=a.flipY),void 0!==a.premultiplyAlpha&&(s.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(s.unpackAlignment=a.unpackAlignment),void 0!==a.userData&&(s.userData=a.userData),r[a.uuid]=s}return r}},{key:"parseObject",value:function(e,t,n,r,i){var o,a,s;function u(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function l(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function c(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":o=new gI,void 0!==e.background&&(Number.isInteger(e.background)?o.background=new KS(e.background):o.background=c(e.background)),void 0!==e.environment&&(o.environment=c(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new mI(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new vI(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new fC(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new OC(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new qD(e.color,e.intensity);break;case"DirectionalLight":o=new WD(e.color,e.intensity);break;case"PointLight":o=new zD(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new KD(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new FD(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new PD(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=(new QD).fromJSON(e);break;case"SkinnedMesh":a=u(e.geometry),s=l(e.material),o=new WI(a,s),void 0!==e.bindMode&&(o.bindMode=e.bindMode),void 0!==e.bindMatrix&&o.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(o.skeleton=e.skeleton);break;case"Mesh":a=u(e.geometry),s=l(e.material),o=new iC(a,s);break;case"InstancedMesh":a=u(e.geometry),s=l(e.material);var h=e.count,f=e.instanceMatrix,d=e.instanceColor;(o=new nR(a,s,h)).instanceMatrix=new YI(new Float32Array(f.array),16),void 0!==d&&(o.instanceColor=new YI(new Float32Array(d.array),d.itemSize));break;case"LOD":o=new UI;break;case"Line":o=new lR(u(e.geometry),l(e.material));break;case"LineLoop":o=new dR(u(e.geometry),l(e.material));break;case"LineSegments":o=new fR(u(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new bR(u(e.geometry),l(e.material));break;case"Sprite":o=new LI(l(e.material));break;case"Group":o=new aI;break;case"Bone":o=new qI;break;default:o=new oT}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(o.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.layers&&(o.layers.mask=e.layers),void 0!==e.children)for(var p=e.children,v=0;v<p.length;v++)o.add(this.parseObject(p[v],t,n,r,i));if(void 0!==e.animations)for(var m=e.animations,g=0;g<m.length;g++){var y=m[g];o.animations.push(i[y])}if("LOD"===e.type){void 0!==e.autoUpdate&&(o.autoUpdate=e.autoUpdate);for(var b=e.levels,_=0;_<b.length;_++){var w=b[_],x=o.getObjectByProperty("uuid",w.object);void 0!==x&&o.addLevel(x,w.distance)}}return o}},{key:"bindSkeletons",value:function(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}},{key:"setTexturePath",value:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}]),n}(xD),nN={UVMapping:hx,CubeReflectionMapping:fx,CubeRefractionMapping:dx,EquirectangularReflectionMapping:px,EquirectangularRefractionMapping:vx,CubeUVReflectionMapping:mx,CubeUVRefractionMapping:gx},rN={RepeatWrapping:yx,ClampToEdgeWrapping:bx,MirroredRepeatWrapping:_x},iN={NearestFilter:wx,NearestMipmapNearestFilter:xx,NearestMipmapLinearFilter:Sx,LinearFilter:Tx,LinearMipmapNearestFilter:Cx,LinearMipmapLinearFilter:kx},oN=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),r=t.call(this,e),"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return $_(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=bD.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;var a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){bD.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}]),n}(xD);oN.prototype.isImageBitmapLoader=!0;var aN={getContext:function(){return void 0===$D&&($D=new(window.AudioContext||window.webkitAudioContext)),$D},setContext:function(e){$D=e}},sN=function(e){tw(n,e);var t=ow(n);function n(e){return Y_(this,n),t.call(this,e)}return $_(n,[{key:"load",value:function(e,t,n,r){var i=this,o=new SD(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{var o=n.slice(0);aN.getContext().decodeAudioData(o,(function(e){t(e)}))}catch(lU){r?r(lU):console.error(lU),i.manager.itemError(e)}}),n,r)}}]),n}(xD),uN=function(e){tw(n,e);var t=ow(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Y_(this,n),i=t.call(this,void 0,o);var a=(new KS).set(e),s=(new KS).set(r),u=new rA(a.r,a.g,a.b),l=new rA(s.r,s.g,s.b),c=Math.sqrt(Math.PI),h=c*Math.sqrt(.75);return i.sh.coefficients[0].copy(u).add(l).multiplyScalar(c),i.sh.coefficients[1].copy(u).sub(l).multiplyScalar(h),i}return $_(n)}(QD);uN.prototype.isHemisphereLightProbe=!0;var lN=function(e){tw(n,e);var t=ow(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Y_(this,n),r=t.call(this,void 0,i);var o=(new KS).set(e);return r.sh.coefficients[0].set(o.r,o.g,o.b).multiplyScalar(2*Math.sqrt(Math.PI)),r}return $_(n)}(QD);lN.prototype.isAmbientLightProbe=!0;var cN=new NA,hN=new NA,fN=new NA,dN=function(){function e(){Y_(this,e),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new fC,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new fC,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return $_(e,[{key:"update",value:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,fN.copy(e.projectionMatrix);var n,r,i=t.eyeSep/2,o=i*t.near/t.focus,a=t.near*Math.tan(SS*t.fov*.5)/t.zoom;hN.elements[12]=-i,cN.elements[12]=i,n=-a*t.aspect+o,r=a*t.aspect+o,fN.elements[0]=2*t.near/(r-n),fN.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(fN),n=-a*t.aspect-o,r=a*t.aspect-o,fN.elements[0]=2*t.near/(r-n),fN.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(fN)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(hN),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(cN)}}]),e}(),pN=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Y_(this,e),this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return $_(e,[{key:"start",value:function(){this.startTime=vN(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=vN();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}();function vN(){return("undefined"===typeof performance?Date:performance).now()}var mN=new rA,gN=new nA,yN=new rA,bN=new rA,_N=function(e){tw(n,e);var t=ow(n);function n(){var e;return Y_(this,n),(e=t.call(this)).type="AudioListener",e.context=aN.getContext(),e.gain=e.context.createGain(),e.gain.connect(e.context.destination),e.filter=null,e.timeDelta=0,e._clock=new pN,e}return $_(n,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(e){X_(J_(n.prototype),"updateMatrixWorld",this).call(this,e);var t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(mN,gN,yN),bN.set(0,0,-1).applyQuaternion(gN),t.positionX){var i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(mN.x,i),t.positionY.linearRampToValueAtTime(mN.y,i),t.positionZ.linearRampToValueAtTime(mN.z,i),t.forwardX.linearRampToValueAtTime(bN.x,i),t.forwardY.linearRampToValueAtTime(bN.y,i),t.forwardZ.linearRampToValueAtTime(bN.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(mN.x,mN.y,mN.z),t.setOrientation(bN.x,bN.y,bN.z,r.x,r.y,r.z)}}]),n}(oT),wN=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this)).type="Audio",r.listener=e,r.context=e.context,r.gain=r.context.createGain(),r.gain.connect(e.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return $_(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(oT),xN=new rA,EN=new nA,SN=new rA,AN=new rA,TN=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this,e)).panner=r.context.createPanner(),r.panner.panningModel="HRTF",r.panner.connect(r.gain),r}return $_(n,[{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(e){return this.panner.refDistance=e,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(e){return this.panner.rolloffFactor=e,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(e){return this.panner.distanceModel=e,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(e){return this.panner.maxDistance=e,this}},{key:"setDirectionalCone",value:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}},{key:"updateMatrixWorld",value:function(e){if(X_(J_(n.prototype),"updateMatrixWorld",this).call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(xN,EN,SN),AN.set(0,0,1).applyQuaternion(EN);var t=this.panner;if(t.positionX){var r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(xN.x,r),t.positionY.linearRampToValueAtTime(xN.y,r),t.positionZ.linearRampToValueAtTime(xN.z,r),t.orientationX.linearRampToValueAtTime(AN.x,r),t.orientationY.linearRampToValueAtTime(AN.y,r),t.orientationZ.linearRampToValueAtTime(AN.z,r)}else t.setPosition(xN.x,xN.y,xN.z),t.setOrientation(AN.x,AN.y,AN.z)}}}]),n}(wN),CN=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;Y_(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return $_(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}(),MN=function(){function e(t,n,r){var i,o,a;switch(Y_(this,e),this.binding=t,this.valueSize=r,n){case"quaternion":i=this._slerp,o=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:i=this._lerp,o=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return $_(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var s=t*this._origIndex;this._mixBufferRegion(n,r,s,1-i,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var u=t,l=t+t;u!==l;++u)if(n[u]!==n[u+t]){a.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]}},{key:"_slerp",value:function(e,t,n,r){nA.slerpFlat(e,t,e,t,e,n,r)}},{key:"_slerpAdditive",value:function(e,t,n,r,i){var o=this._workIndex*i;nA.multiplyQuaternionsFlat(e,o,e,t,e,n),nA.slerpFlat(e,t,e,t,e,o,r)}},{key:"_lerp",value:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}},{key:"_lerpAdditive",value:function(e,t,n,r,i){for(var o=0;o!==i;++o){var a=t+o;e[a]=e[a]+e[n+o]*r}}}]),e}(),kN="\\[\\]\\.:\\/",IN=new RegExp("[\\[\\]\\.:\\/]","g"),RN="[^\\[\\]\\.:\\/]",PN="[^"+kN.replace("\\.","")+"]",DN=/((?:WC+[\/:])*)/.source.replace("WC",RN),NN=/(WCOD+)?/.source.replace("WCOD",PN),LN=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",RN),ON=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",RN),BN=new RegExp("^"+DN+NN+LN+ON+"$"),FN=["material","materials","bones"],UN=function(){function e(t,n,r){Y_(this,e);var i=r||jN.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,i)}return $_(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),jN=function(){function e(t,n,r){Y_(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return $_(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,o=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var a=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===a){a=s;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==a){if(void 0===t[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[a]}}var u=t[i];if(void 0!==u){var l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=o}else void 0!==u.fromArray&&void 0!==u.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(c=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var h=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(IN,"")}},{key:"parseTrackName",value:function(e){var t=BN.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==FN.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var o=e(i.children);if(o)return o}return null}(e.children);if(r)return r}return null}}]),e}();jN.Composite=UN,jN.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},jN.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},jN.prototype.GetterByBindingType=[jN.prototype._getValue_direct,jN.prototype._getValue_array,jN.prototype._getValue_arrayElement,jN.prototype._getValue_toArray],jN.prototype.SetterByBindingTypeAndVersioning=[[jN.prototype._setValue_direct,jN.prototype._setValue_direct_setNeedsUpdate,jN.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[jN.prototype._setValue_array,jN.prototype._setValue_array_setNeedsUpdate,jN.prototype._setValue_array_setMatrixWorldNeedsUpdate],[jN.prototype._setValue_arrayElement,jN.prototype._setValue_arrayElement_setNeedsUpdate,jN.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[jN.prototype._setValue_fromArray,jN.prototype._setValue_fromArray_setNeedsUpdate,jN.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var HN=function(){function e(){Y_(this,e),this.uuid=TS(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}return $_(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length,a=void 0,s=e.length,u=this.nCachedObjects_,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],f=h.uuid,d=t[f];if(void 0===d){d=s++,t[f]=d,e.push(h);for(var p=0,v=o;p!==v;++p)i[p].push(new jN(h,n[p],r[p]))}else if(d<u){a=e[d];var m=--u,g=e[m];t[g.uuid]=d,e[d]=g,t[f]=m,e[m]=h;for(var y=0,b=o;y!==b;++y){var _=i[y],w=_[m],x=_[d];_[d]=w,void 0===x&&(x=new jN(h,n[y],r[y])),_[m]=x}}else e[d]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,l=t[u];if(void 0!==l&&l>=i){var c=i++,h=e[c];t[h.uuid]=l,e[l]=h,t[u]=c,e[c]=s;for(var f=0,d=r;f!==d;++f){var p=n[f],v=p[c],m=p[l];p[l]=v,p[c]=m}}}this.nCachedObjects_=i}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,o=e.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a],l=u.uuid,c=t[l];if(void 0!==c)if(delete t[l],c<i){var h=--i,f=e[h],d=--o,p=e[d];t[f.uuid]=c,e[c]=f,t[p.uuid]=h,e[h]=p,e.pop();for(var v=0,m=r;v!==m;++v){var g=n[v],y=g[h],b=g[d];g[c]=y,g[h]=b,g.pop()}}else{var _=--o,w=e[_];_>0&&(t[w.uuid]=c),e[c]=w,e.pop();for(var x=0,E=r;x!==E;++x){var S=n[x];S[c]=S[_],S.pop()}}}this.nCachedObjects_=i}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=s.length,l=this.nCachedObjects_,c=new Array(u);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(c);for(var h=l,f=s.length;h!==f;++h){var d=s[h];c[h]=new jN(d,e,t)}return c}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}]),e}();HN.prototype.isAnimationObjectGroup=!0;var GN=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;Y_(this,e),this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=i;for(var o=n.tracks,a=o.length,s=new Array(a),u={endingStart:PE,endingEnd:PE},l=0;l!==a;++l){var c=o[l].createInterpolant(null);s[l]=c,c.settings=u}this._interpolantSettings=u,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=CE,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return $_(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,i=r.time,o=this.timeScale,a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,u=a.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/o,u[1]=t/o,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0){var u=this._interpolants,l=this._propertyBindings;if(this.blendMode===OE)for(var c=0,h=u.length;c!==h;++c)u[c].evaluate(a),l[c].accumulateAdditive(s);else for(var f=0,d=u.length;f!==d;++f)u[f].evaluate(a),l[f].accumulate(r,s)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,o=n===ME;if(0===e)return-1===i?r:o&&1===(1&i)?t-r:r;if(n===TE){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){var a=Math.floor(r/t);r-=t*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&1===(1&i))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=DE,r.endingEnd=DE):(r.endingStart=e?this.zeroSlopeAtStart?DE:PE:NE,r.endingEnd=t?this.zeroSlopeAtEnd?DE:PE:NE)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}]),e}(),zN=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this))._root=e,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return $_(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(l={},u[s]=l);for(var c=0;c!==i;++c){var h=r[c],f=h.name,d=l[f];if(void 0!==d)++d.referenceCount,o[c]=d;else{if(void 0!==(d=o[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;++(d=new MN(jN.create(n,f,p),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,f),o[c]=d}a[c].resultBuffer=d.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_addInactiveBinding",value:function(e,t,n){var r=this._bindingsByRootAndName,i=this._bindings,o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=i.length,i.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new sD(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}},{key:"clipAction",value:function(e,t,n){var r=t||this._root,i=r.uuid,o="string"===typeof e?gD.findByName(r,e):e,a=null!==o?o.uuid:e,s=this._actionsByClip[a],u=null;if(void 0===n&&(n=null!==o?o.blendMode:LE),void 0!==s){var l=s.actionByRoot[i];if(void 0!==l&&l.blendMode===n)return l;u=s.knownActions[0],null===o&&(o=u._clip)}if(null===o)return null;var c=new GN(this,o,t,n);return this._bindAction(c,u),this._addInactiveAction(c,a,i),c}},{key:"existingAction",value:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?gD.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){t[a]._update(r,e,i,o)}for(var s=this._bindings,u=this._nActiveBindings,l=0;l!==u;++l)s[l].apply(o);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var l=u._cacheIndex,c=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(_S);zN.prototype._controlInterpolantsResultBuffer=new Float32Array(1);var VN=function(){function e(t){Y_(this,e),"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}return $_(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}(),WN=function(e){tw(n,e);var t=ow(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Y_(this,n),(i=t.call(this,e,r)).meshPerAttribute=o,i}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=X_(J_(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=X_(J_(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(yI);WN.prototype.isInstancedInterleavedBuffer=!0;var qN=function(){function e(t,n,r,i,o){Y_(this,e),this.buffer=t,this.type=n,this.itemSize=r,this.elementSize=i,this.count=o,this.version=0}return $_(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}]),e}();qN.prototype.isGLBufferAttribute=!0;var KN=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;Y_(this,e),this.ray=new DA(t,n),this.near=r,this.far=i,this.camera=null,this.layers=new WA,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return $_(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return QN(e,this,n,t),n.sort(JN),n}},{key:"intersectObjects",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0,i=e.length;r<i;r++)QN(e[r],this,n,t);return n.sort(JN),n}}]),e}();function JN(e,t){return e.distance-t.distance}function QN(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r)for(var i=e.children,o=0,a=i.length;o<a;o++)QN(i[o],t,n,!0)}var XN=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Y_(this,e),this.radius=t,this.phi=n,this.theta=r,this}return $_(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(CS(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),YN=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Y_(this,e),this.radius=t,this.theta=n,this.y=r,this}return $_(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),ZN=new NS,$N=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new NS(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NS(-1/0,-1/0);Y_(this,e),this.min=t,this.max=n}return $_(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=ZN.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return ZN.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();$N.prototype.isBox2=!0;var eL=new rA,tL=new rA,nL=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rA,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rA;Y_(this,e),this.start=t,this.end=n}return $_(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){eL.subVectors(e,this.start),tL.subVectors(this.end,this.start);var n=tL.dot(tL),r=tL.dot(eL)/n;return t&&(r=CS(r,0,1)),r}},{key:"closestPointToPoint",value:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),rL=new rA,iL=function(e){tw(n,e);var t=ow(n);function n(e,r){var i;Y_(this,n),(i=t.call(this)).light=e,i.light.updateMatrixWorld(),i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i.color=r;for(var o=new jT,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],s=0,u=1;s<32;s++,u++){var l=s/32*Math.PI*2,c=u/32*Math.PI*2;a.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}o.setAttribute("position",new RT(a,3));var h=new rR({fog:!1,toneMapped:!1});return i.cone=new fR(o,h),i.add(i.cone),i.update(),i}return $_(n,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),rL.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(rL),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),n}(oT),oL=new rA,aL=new NA,sL=new NA,uL=function(e){tw(n,e);var t=ow(n);function n(e){var r;Y_(this,n);for(var i=lL(e),o=new jT,a=[],s=[],u=new KS(0,0,1),l=new KS(0,1,0),c=0;c<i.length;c++){var h=i[c];h.parent&&h.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),s.push(u.r,u.g,u.b),s.push(l.r,l.g,l.b))}o.setAttribute("position",new RT(a,3)),o.setAttribute("color",new RT(s,3));var f=new rR({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(r=t.call(this,o,f)).type="SkeletonHelper",r.isSkeletonHelper=!0,r.root=e,r.bones=i,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r}return $_(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,r=this.geometry,i=r.getAttribute("position");sL.copy(this.root.matrixWorld).invert();for(var o=0,a=0;o<t.length;o++){var s=t[o];s.parent&&s.parent.isBone&&(aL.multiplyMatrices(sL,s.matrixWorld),oL.setFromMatrixPosition(aL),i.setXYZ(a,oL.x,oL.y,oL.z),aL.multiplyMatrices(sL,s.parent.matrixWorld),oL.setFromMatrixPosition(aL),i.setXYZ(a+1,oL.x,oL.y,oL.z),a+=2)}r.getAttribute("position").needsUpdate=!0,X_(J_(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(fR);function lL(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,lL(e.children[n]));return t}var cL=function(e){tw(n,e);var t=ow(n);function n(e,r,i){var o;Y_(this,n);var a=new jP(r,4,2),s=new bT({wireframe:!0,fog:!1,toneMapped:!1});return(o=t.call(this,a,s)).light=e,o.light.updateMatrixWorld(),o.color=i,o.type="PointLightHelper",o.matrix=o.light.matrixWorld,o.matrixAutoUpdate=!1,o.update(),o}return $_(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),n}(iC),hL=new rA,fL=new KS,dL=new KS,pL=function(e){tw(n,e);var t=ow(n);function n(e,r,i){var o;Y_(this,n),(o=t.call(this)).light=e,o.light.updateMatrixWorld(),o.matrix=e.matrixWorld,o.matrixAutoUpdate=!1,o.color=i;var a=new BP(r);a.rotateY(.5*Math.PI),o.material=new bT({wireframe:!0,fog:!1,toneMapped:!1}),void 0===o.color&&(o.material.vertexColors=!0);var s=a.getAttribute("position"),u=new Float32Array(3*s.count);return a.setAttribute("color",new xT(u,3)),o.add(new iC(a,o.material)),o.update(),o}return $_(n,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");fL.copy(this.light.color),dL.copy(this.light.groundColor);for(var n=0,r=t.count;n<r;n++){var i=n<r/2?fL:dL;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(hL.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),n}(oT),vL=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;Y_(this,n),o=new KS(o),a=new KS(a);for(var s=i/2,u=r/i,l=r/2,c=[],h=[],f=0,d=0,p=-l;f<=i;f++,p+=u){c.push(-l,0,p,l,0,p),c.push(p,0,-l,p,0,l);var v=f===s?o:a;v.toArray(h,d),d+=3,v.toArray(h,d),d+=3,v.toArray(h,d),d+=3,v.toArray(h,d),d+=3}var m=new jT;m.setAttribute("position",new RT(c,3)),m.setAttribute("color",new RT(h,3));var g=new rR({vertexColors:!0,toneMapped:!1});return(e=t.call(this,m,g)).type="GridHelper",e}return $_(n)}(fR),mL=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;Y_(this,n),s=new KS(s),u=new KS(u);for(var l=[],c=[],h=0;h<=i;h++){var f=h/i*(2*Math.PI),d=Math.sin(f)*r,p=Math.cos(f)*r;l.push(0,0,0),l.push(d,0,p);var v=1&h?s:u;c.push(v.r,v.g,v.b),c.push(v.r,v.g,v.b)}for(var m=0;m<=o;m++)for(var g=1&m?s:u,y=r-r/o*m,b=0;b<a;b++){var _=b/a*(2*Math.PI),w=Math.sin(_)*y,x=Math.cos(_)*y;l.push(w,0,x),c.push(g.r,g.g,g.b),_=(b+1)/a*(2*Math.PI),w=Math.sin(_)*y,x=Math.cos(_)*y,l.push(w,0,x),c.push(g.r,g.g,g.b)}var E=new jT;E.setAttribute("position",new RT(l,3)),E.setAttribute("color",new RT(c,3));var S=new rR({vertexColors:!0,toneMapped:!1});return(e=t.call(this,E,S)).type="PolarGridHelper",e}return $_(n)}(fR),gL=new rA,yL=new rA,bL=new rA,_L=function(e){tw(n,e);var t=ow(n);function n(e,r,i){var o;Y_(this,n),(o=t.call(this)).light=e,o.light.updateMatrixWorld(),o.matrix=e.matrixWorld,o.matrixAutoUpdate=!1,o.color=i,void 0===r&&(r=1);var a=new jT;a.setAttribute("position",new RT([-r,r,0,r,r,0,r,-r,0,-r,-r,0,-r,r,0],3));var s=new rR({fog:!1,toneMapped:!1});return o.lightPlane=new lR(a,s),o.add(o.lightPlane),(a=new jT).setAttribute("position",new RT([0,0,0,0,0,1],3)),o.targetLine=new lR(a,s),o.add(o.targetLine),o.update(),o}return $_(n,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){gL.setFromMatrixPosition(this.light.matrixWorld),yL.setFromMatrixPosition(this.light.target.matrixWorld),bL.subVectors(yL,gL),this.lightPlane.lookAt(yL),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(yL),this.targetLine.scale.z=bL.length()}}]),n}(oT),wL=new rA,xL=new hC,EL=function(e){tw(n,e);var t=ow(n);function n(e){var r;Y_(this,n);var i=new jT,o=new rR({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],s=[],u={},l=new KS(16755200),c=new KS(16711680),h=new KS(43775),f=new KS(16777215),d=new KS(3355443);function p(e,t,n){v(e,n),v(t,n)}function v(e,t){a.push(0,0,0),s.push(t.r,t.g,t.b),void 0===u[e]&&(u[e]=[]),u[e].push(a.length/3-1)}return p("n1","n2",l),p("n2","n4",l),p("n4","n3",l),p("n3","n1",l),p("f1","f2",l),p("f2","f4",l),p("f4","f3",l),p("f3","f1",l),p("n1","f1",l),p("n2","f2",l),p("n3","f3",l),p("n4","f4",l),p("p","n1",c),p("p","n2",c),p("p","n3",c),p("p","n4",c),p("u1","u2",h),p("u2","u3",h),p("u3","u1",h),p("c","t",f),p("p","c",d),p("cn1","cn2",d),p("cn3","cn4",d),p("cf1","cf2",d),p("cf3","cf4",d),i.setAttribute("position",new RT(a,3)),i.setAttribute("color",new RT(s,3)),(r=t.call(this,i,o)).type="CameraHelper",r.camera=e,r.camera.updateProjectionMatrix&&r.camera.updateProjectionMatrix(),r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r.pointMap=u,r.update(),r}return $_(n,[{key:"update",value:function(){var e=this.geometry,t=this.pointMap;xL.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),SL("c",t,e,xL,0,0,-1),SL("t",t,e,xL,0,0,1),SL("n1",t,e,xL,-1,-1,-1),SL("n2",t,e,xL,1,-1,-1),SL("n3",t,e,xL,-1,1,-1),SL("n4",t,e,xL,1,1,-1),SL("f1",t,e,xL,-1,-1,1),SL("f2",t,e,xL,1,-1,1),SL("f3",t,e,xL,-1,1,1),SL("f4",t,e,xL,1,1,1),SL("u1",t,e,xL,.7,1.1,-1),SL("u2",t,e,xL,-.7,1.1,-1),SL("u3",t,e,xL,0,2,-1),SL("cf1",t,e,xL,-1,0,1),SL("cf2",t,e,xL,1,0,1),SL("cf3",t,e,xL,0,-1,1),SL("cf4",t,e,xL,0,1,1),SL("cn1",t,e,xL,-1,0,-1),SL("cn2",t,e,xL,1,0,-1),SL("cn3",t,e,xL,0,-1,-1),SL("cn4",t,e,xL,0,1,-1),e.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(fR);function SL(e,t,n,r,i,o,a){wL.set(i,o,a).unproject(r);var s=t[e];if(void 0!==s)for(var u=n.getAttribute("position"),l=0,c=s.length;l<c;l++)u.setXYZ(s[l],wL.x,wL.y,wL.z)}var AL,TL,CL=new aA,ML=function(e){tw(n,e);var t=ow(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;Y_(this,n);var o=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(24),s=new jT;return s.setIndex(new xT(o,1)),s.setAttribute("position",new xT(a,3)),(r=t.call(this,s,new rR({color:i,toneMapped:!1}))).object=e,r.type="BoxHelper",r.matrixAutoUpdate=!1,r.update(),r}return $_(n,[{key:"update",value:function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&CL.setFromObject(this.object),!CL.isEmpty()){var t=CL.min,n=CL.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(e){return this.object=e,this.update(),this}},{key:"copy",value:function(e){return fR.prototype.copy.call(this,e),this.object=e.object,this}}]),n}(fR),kL=function(e){tw(n,e);var t=ow(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;Y_(this,n);var o=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new jT;return s.setIndex(new xT(o,1)),s.setAttribute("position",new RT(a,3)),(r=t.call(this,s,new rR({color:i,toneMapped:!1}))).box=e,r.type="Box3Helper",r.geometry.computeBoundingSphere(),r}return $_(n,[{key:"updateMatrixWorld",value:function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),X_(J_(n.prototype),"updateMatrixWorld",this).call(this,e))}}]),n}(fR),IL=function(e){tw(n,e);var t=ow(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;Y_(this,n);var a=o,s=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],u=new jT;u.setAttribute("position",new RT(s,3)),u.computeBoundingSphere(),(r=t.call(this,u,new rR({color:a,toneMapped:!1}))).type="PlaneHelper",r.plane=e,r.size=i;var l=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],c=new jT;return c.setAttribute("position",new RT(l,3)),c.computeBoundingSphere(),r.add(new iC(c,new bT({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),r}return $_(n,[{key:"updateMatrixWorld",value:function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?xw:ww,this.lookAt(this.plane.normal),X_(J_(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(lR),RL=new rA,PL=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rA(0,0,1),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rA(0,0,0),o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*o,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*s;return Y_(this,n),(e=t.call(this)).type="ArrowHelper",void 0===AL&&((AL=new jT).setAttribute("position",new RT([0,0,0,0,1,0],3)),(TL=new TR(0,.5,1,5,1)).translate(0,-.5,0)),e.position.copy(i),e.line=new lR(AL,new rR({color:a,toneMapped:!1})),e.line.matrixAutoUpdate=!1,e.add(e.line),e.cone=new iC(TL,new bT({color:a,toneMapped:!1})),e.cone.matrixAutoUpdate=!1,e.add(e.cone),e.setDirection(r),e.setLength(o,s,u),e}return $_(n,[{key:"setDirection",value:function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{RL.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(RL,t)}}},{key:"setLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}},{key:"setColor",value:function(e){this.line.material.color.set(e),this.cone.material.color.set(e)}},{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}]),n}(oT),DL=function(e){tw(n,e);var t=ow(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Y_(this,n);var i=[0,0,0,r,0,0,0,0,0,0,r,0,0,0,0,0,0,r],o=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new jT;a.setAttribute("position",new RT(i,3)),a.setAttribute("color",new RT(o,3));var s=new rR({vertexColors:!0,toneMapped:!1});return(e=t.call(this,a,s)).type="AxesHelper",e}return $_(n,[{key:"setColors",value:function(e,t,n){var r=new KS,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(fR),NL=function(){function e(){Y_(this,e),this.type="ShapePath",this.color=new KS,this.subPaths=[],this.currentPath=null}return $_(e,[{key:"moveTo",value:function(e,t){return this.currentPath=new nP,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new rP;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],u=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(a=t[o],u=-u,s=t[i],l=-l),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var c=l*(e.x-a.x)-u*(e.y-a.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i,o,a,s=IP.isClockWise,u=this.subPaths;if(0===u.length)return[];if(!0===t)return n(u);var l=[];if(1===u.length)return o=u[0],(a=new rP).curves=o.curves,l.push(a),l;var c=!s(u[0].getPoints());c=e?!c:c;var h,f,d=[],p=[],v=[],m=0;p[m]=void 0,v[m]=[];for(var g=0,y=u.length;g<y;g++)i=s(h=(o=u[g]).getPoints()),(i=e?!i:i)?(!c&&p[m]&&m++,p[m]={s:new rP,p:h},p[m].s.curves=o.curves,c&&m++,v[m]=[]):v[m].push({h:o,p:h[0]});if(!p[0])return n(u);if(p.length>1){for(var b=!1,_=[],w=0,x=p.length;w<x;w++)d[w]=[];for(var E=0,S=p.length;E<S;E++)for(var A=v[E],T=0;T<A.length;T++){for(var C=A[T],M=!0,k=0;k<p.length;k++)r(C.p,p[k].p)&&(E!==k&&_.push({froms:E,tos:k,hole:T}),M?(M=!1,d[k].push(C)):b=!0);M&&d[E].push(C)}_.length>0&&(b||(v=d))}for(var I=0,R=p.length;I<R;I++){a=p[I].s,l.push(a);for(var P=0,D=(f=v[I]).length;P<D;P++)a.holes.push(f[P].h)}return l}}]),e}(),LL=new Float32Array(1),OL=new Int32Array(LL.buffer),BL=function(){function e(){Y_(this,e)}return $_(e,null,[{key:"toHalfFloat",value:function(e){e>65504&&(console.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),e=65504),LL[0]=e;var t=OL[0],n=t>>16&32768,r=t>>12&2047,i=t>>23&255;return i<103?n:i>142?(n|=31744,n|=(255==i?0:1)&&8388607&t):i<113?n|=((r|=2048)>>114-i)+(r>>113-i&1):(n|=i-112<<10|r>>1,n+=1&r)}}]),e}(),FL=0,UL=1,jL=0,HL=1,GL=2;function zL(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function VL(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function WL(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new bR(e,t)}function qL(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new LI(e)}function KL(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new bR(e,t)}function JL(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new pR(e)}function QL(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new pR(e)}function XL(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new pR(e)}function YL(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new rA(e,t,n)}function ZL(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new xT(e,t).setUsage(lS)}function $L(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new ET(e,t)}function eO(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new ST(e,t)}function tO(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new AT(e,t)}function nO(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new TT(e,t)}function rO(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new CT(e,t)}function iO(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new MT(e,t)}function oO(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new kT(e,t)}function aO(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new RT(e,t)}function sO(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new PT(e,t)}function uO(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new DL(e)}function lO(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new ML(e,t)}function cO(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new fR(new NR(e.geometry),new rR({color:void 0!==t?t:16777215}))}function hO(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new fR(new WP(e.geometry),new rR({color:void 0!==t?t:16777215}))}function fO(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new SD(e)}function dO(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new kD(e)}function pO(e,t,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new mC(e,n)}function vO(){console.error("THREE.CanvasRenderer has been removed")}function mO(){console.error("THREE.JSONLoader has been removed.")}LR.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(LR.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},nP.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},vL.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},uL.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},xD.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),YD.extractUrlBase(e)},xD.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},$N.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},$N.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},$N.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},$N.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},aA.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},aA.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},aA.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},aA.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},aA.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},AA.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},EC.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},nL.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},LS.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},LS.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},LS.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},LS.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},LS.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},LS.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},NA.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},NA.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},NA.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new rA).setFromMatrixColumn(this,3)},NA.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},NA.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},NA.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},NA.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},NA.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},NA.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},NA.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},NA.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},NA.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},NA.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},NA.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},NA.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},NA.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},NA.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},NA.prototype.makeFrustum=function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)},NA.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},_C.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},nA.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},nA.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},DA.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},DA.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},DA.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},mT.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},mT.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},mT.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},mT.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},mT.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},mT.barycoordFromPoint=function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),mT.getBarycoord(e,t,n,r,i)},mT.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),mT.getNormal(e,t,n,r)},rP.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},rP.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new DP(this,e)},rP.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new UP(this,e)},NS.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},NS.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},NS.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},rA.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},rA.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},rA.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},rA.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},rA.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},rA.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},rA.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},rA.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},rA.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ZS.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},ZS.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},oT.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},oT.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},oT.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},oT.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},oT.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(oT.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),iC.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(iC.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),BE},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),WI.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},fC.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(RD.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(xT.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===lS},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(lS)}}}),xT.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?lS:uS),this},xT.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},xT.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},jT.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},jT.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new xT(arguments[1],arguments[2])))},jT.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},jT.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},jT.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},jT.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},jT.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(jT.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),yI.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?lS:uS),this},yI.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},DP.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},DP.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},DP.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},gI.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},VN.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(yT.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new KS}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===Sw}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(cC.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),dI.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},dI.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},dI.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},dI.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},dI.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},dI.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},dI.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},dI.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},dI.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},dI.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},dI.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},dI.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},dI.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},dI.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},dI.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},dI.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},dI.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},dI.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},dI.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},dI.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},dI.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},dI.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},dI.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},dI.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},dI.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(dI.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?HE:jE}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(tI.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties($S.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),wN.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new sN).load(e,(function(e){t.setBuffer(e)})),this},CN.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},pC.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},pC.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},JS.crossOrigin=void 0,JS.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new ID;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},JS.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new MD;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},JS.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},JS.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var gO={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function yO(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}function bO(){return console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),new jT}function _O(){return console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),new jT}function wO(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function xO(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function EO(){console.error("THREE.ImmediateRenderObject has been removed.")}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:cw}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=cw);var SO=function(e){tw(n,e);var t=ow(n);function n(e,r,i,o){return Y_(this,n),t.call(this,e,r,i,o)}return $_(n,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,o=0;o!==r;o++)t[o]=n[i+o];return t}}]),n}(oD);SO.prototype.beforeStart_=SO.prototype.copySampleValue_,SO.prototype.afterEnd_=SO.prototype.copySampleValue_,SO.prototype.interpolate_=function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,u=3*a,l=r-t,c=(n-t)/l,h=c*c,f=h*c,d=e*u,p=d-u,v=-2*f+3*h,m=f-h,g=1-v,y=m-h+c,b=0;b!==a;b++){var _=o[p+b+a],w=o[p+b+s]*l,x=o[d+b+a],E=o[d+b]*l;i[b]=g*_+y*w+v*x+m*E}return i};new nA,Int8Array,Uint8Array,Int16Array,Uint16Array,Uint32Array,Float32Array;function AO(e,t,n){return AO=nw()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ew(i,n.prototype),i},AO.apply(null,arguments)}function TO(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function CO(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function MO(e){return function(e){if(Array.isArray(e))return o(e)}(e)||TO(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kO(e){var t,n=new Set,r=function(e,r){var i="function"===typeof e?e(t):e;if(i!==t){var o=t;t=r?i:Object.assign({},t,i),n.forEach((function(e){return e(t,o)}))}},i=function(){return t},o={setState:r,getState:i,subscribe:function(e,r,o){return r||o?function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");var a=r(t);function s(){var n=r(t);if(!o(a,n)){var i=a;e(a=n,i)}}return n.add(s),function(){return n.delete(s)}}(e,r,o):(n.add(e),function(){return n.delete(e)})},destroy:function(){return n.clear()}};return t=e(r,i,o),o}var IO="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?t.useEffect:t.useLayoutEffect;function RO(e){var n="function"===typeof e?kO(e):e,r=function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.getState,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is,o=(0,t.useReducer)((function(e){return e+1}),0),a=u(o,2),s=a[1],l=n.getState(),c=(0,t.useRef)(l),h=(0,t.useRef)(r),f=(0,t.useRef)(i),d=(0,t.useRef)(!1),p=(0,t.useRef)();void 0===p.current&&(p.current=r(l));var v=!1;(c.current!==l||h.current!==r||f.current!==i||d.current)&&(e=r(l),v=!i(p.current,e)),IO((function(){v&&(p.current=e),c.current=l,h.current=r,f.current=i,d.current=!1}));var m=(0,t.useRef)(l);IO((function(){var e=function(){try{var e=n.getState(),t=h.current(e);f.current(p.current,t)||(c.current=e,p.current=t,s())}catch(r){d.current=!0,s()}},t=n.subscribe(e);return n.getState()!==m.current&&e(),t}),[]);var g=v?e:p.current;return(0,t.useDebugValue)(g),g};return Object.assign(r,n),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");var e=[r,n];return{next:function(){var t=e.length<=0;return{value:e.shift(),done:t}}}},r}var PO=n(258),DO=n.n(PO),NO=n(296),LO=n(262),OO=n.n(LO),BO=[];function FO(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=q_(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(OO()(n,s.args)){if(o)return;if(s.error)throw s.error;if(s.response)return s.response;throw s.promise}}}catch(l){a.e(l)}finally{a.f()}var u={args:n,promise:e.apply(void 0,MO(n)).then((function(e){return u.response=null==e||e})).catch((function(e){return u.error=null!=e?e:"unknown error"})).then((function(){i>0&&setTimeout((function(){var e=t.indexOf(u);-1!==e&&t.splice(e,1)}),i)}))};if(t.push(u),!o)throw u.promise}function UO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(void 0===n||0===n.length)e.splice(0,e.length);else{var i=e.find((function(e){return OO()(n,e.args)}));if(i){var o=e.indexOf(i);-1!==o&&e.splice(o,1)}}}function jO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return FO(e,BO,n,jO.lifespan)}jO.lifespan=0,jO.clear=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return UO.apply(void 0,[BO].concat(t))},jO.preload=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];FO(e,BO,n,jO.lifespan,!0)},jO.peek=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;return null==(r=BO.find((function(e){return OO()(t,e.args)})))?void 0:r.response};var HO=function(e){return function(t){e.forEach((function(e){"function"===typeof e?e(t):null!=e&&(e.current=t)}))}},GO=n(485),zO=n.n(GO);function VO(e){var n=void 0===e?{debounce:0,scroll:!1,offsetSize:!1}:e,r=n.debounce,i=n.scroll,o=n.polyfill,a=n.offsetSize,s=o||("undefined"===typeof window?$_((function e(){Y_(this,e)})):window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");var l=u((0,t.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),2),c=l[0],h=l[1],f=(0,t.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:c}),d=r?"number"===typeof r?r:r.scroll:null,p=r?"number"===typeof r?r:r.resize:null,v=(0,t.useRef)(!1);(0,t.useEffect)((function(){return v.current=!0,function(){v.current=!1}}));var m=u((0,t.useMemo)((function(){var e=function(){if(f.current.element){var e=f.current.element.getBoundingClientRect(),t={left:e.left,top:e.top,width:e.width,height:e.height,bottom:e.bottom,right:e.right,x:e.x,y:e.y};f.current.element instanceof HTMLElement&&a&&(t.height=f.current.element.offsetHeight,t.width=f.current.element.offsetWidth),Object.freeze(t),v.current&&!KO(f.current.lastBounds,t)&&h(f.current.lastBounds=t)}};return[e,p?zO()(e,p):e,d?zO()(e,d):e]}),[h,a,d,p]),3),g=m[0],y=m[1],b=m[2];function _(){f.current.scrollContainers&&(f.current.scrollContainers.forEach((function(e){return e.removeEventListener("scroll",b,!0)})),f.current.scrollContainers=null),f.current.resizeObserver&&(f.current.resizeObserver.disconnect(),f.current.resizeObserver=null)}function w(){f.current.element&&(f.current.resizeObserver=new s(b),f.current.resizeObserver.observe(f.current.element),i&&f.current.scrollContainers&&f.current.scrollContainers.forEach((function(e){return e.addEventListener("scroll",b,{capture:!0,passive:!0})})))}var x,E,S;return x=b,E=Boolean(i),(0,t.useEffect)((function(){if(E){var e=x;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),function(){window.removeEventListener("scroll",e,!0)}}}),[x,E]),S=y,(0,t.useEffect)((function(){var e=S;return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[S]),(0,t.useEffect)((function(){_(),w()}),[i,b,y]),(0,t.useEffect)((function(){return _}),[]),[function(e){e&&e!==f.current.element&&(_(),f.current.element=e,f.current.scrollContainers=WO(e),w())},c,g]}function WO(e){var t=[];if(!e||e===document.body)return t;var n=window.getComputedStyle(e);return[n.overflow,n.overflowX,n.overflowY].some((function(e){return"auto"===e||"scroll"===e}))&&t.push(e),[].concat(t,MO(WO(e.parentElement)))}var qO=["x","y","top","bottom","left","right","width","height"],KO=function(e,t){return qO.every((function(n){return e[n]===t[n]}))},JO=["children","key","ref"],QO=["children","key","ref"],XO=["args"],YO=["args","children"],ZO=["args","children"],$O=["params"],eB=["children","fallback","tabIndex","resize","id","style","className","events"],tB=["gl","size","mode","events","onCreated"],nB={obj:function(e){return e===Object(e)&&!nB.arr(e)&&"function"!==typeof e},fun:function(e){return"function"===typeof e},str:function(e){return"string"===typeof e},num:function(e){return"number"===typeof e},und:function(e){return void 0===e},arr:function(e){return Array.isArray(e)},equ:function(e,t){if(typeof e!==typeof t||!!e!==!!t)return!1;if(nB.str(e)||nB.num(e)||nB.obj(e))return e===t;if(nB.arr(e)&&e==t)return!0;var n;for(n in e)if(!(n in t))return!1;for(n in t)if(e[n]!==t[n])return!1;return!nB.und(n)||e===t}};function rB(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function iB(e,t,n,r){var i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}function oB(e){var t=new rA;function n(e){return e.filter((function(e){return["Move","Over","Enter","Out","Leave"].some((function(t){var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}))}function r(t){var n=e.getState().internal;Array.from(n.hovered.values()).forEach((function(e){if(!t.length||!t.find((function(t){return t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId}))){var r=e.eventObject.__r3f,i=null==r?void 0:r.handlers;if(n.hovered.delete(rB(e)),null!=r&&r.eventCount){var o=W_(W_({},e),{},{intersections:t||[]});null==i.onPointerOut||i.onPointerOut(o),null==i.onPointerLeave||i.onPointerLeave(o)}}}))}function i(e,t){t.forEach((function(t){var n;return null==(n=t.__r3f)||null==n.handlers.onPointerMissed?void 0:n.handlers.onPointerMissed(e)}))}return{handlePointer:function(o){switch(o){case"onPointerLeave":case"onPointerCancel":return function(){return r([])};case"onLostPointerCapture":return function(t){var n=e.getState().internal;"pointerId"in t&&!n.capturedMap.has(t.pointerId)&&(n.capturedMap.delete(t.pointerId),r([]))}}return function(a){var s=e.getState(),u=s.onPointerMissed,l=s.internal;!function(t){var n,r,i,o,a=e.getState(),s=a.raycaster,u=a.mouse,l=a.camera,c=a.size,h=null==s.computeOffsets?void 0:s.computeOffsets(t,a),f=null!=(n=null==h?void 0:h.offsetX)?n:t.offsetX,d=null!=(r=null==h?void 0:h.offsetY)?r:t.offsetY,p=null!=(i=null==h?void 0:h.width)?i:c.width,v=null!=(o=null==h?void 0:h.height)?o:c.height;u.set(f/p*2-1,-d/v*2+1),s.setFromCamera(u,l)}(a),l.lastEvent.current=a;var c="onPointerMove"===o,h="onClick"===o||"onContextMenu"===o||"onDoubleClick"===o,f=function(t,n){var r=e.getState().internal;if("pointerId"in n&&r.capturedMap.has(n.pointerId)){var i,o=q_(r.capturedMap.get(n.pointerId).values());try{for(o.s();!(i=o.n()).done;){var a=i.value;t.push(a.intersection)}}catch(s){o.e(s)}finally{o.f()}}return t}(function(t){var n=e.getState(),r=n.raycaster,i=n.internal;if(!r.enabled)return[];var o=new Set,a=[],s=t?t(i.interaction):i.interaction,u=r.intersectObjects(s,!0).filter((function(e){var t=rB(e);return!o.has(t)&&(o.add(t),!0)}));r.filter&&(u=r.filter(u,n));var l,c=q_(u);try{for(c.s();!(l=c.n()).done;)for(var h=l.value,f=h.object;f;){var d;null!=(d=f.__r3f)&&d.eventCount&&a.push(W_(W_({},h),{},{eventObject:f})),f=f.parent}}catch(p){c.e(p)}finally{c.f()}return a}(c?n:void 0),a),d=h?function(t){var n=e.getState().internal,r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(a):0;"onPointerDown"===o&&(l.initialClick=[a.offsetX,a.offsetY],l.initialHits=f.map((function(e){return e.eventObject}))),h&&!f.length&&d<=2&&(i(a,l.interaction),u&&u(a)),c&&r(f),function(n,i,o,a){var s=e.getState(),u=s.raycaster,l=s.mouse,c=s.camera,h=s.internal;n.length&&function(){var e,s=t.set(l.x,l.y,0).unproject(c),f={stopped:!1},d=q_(n);try{var p=function(){var t=e.value,d=function(e){var n,r;return null!=(n=null==(r=h.capturedMap.get(e))?void 0:r.has(t.eventObject))&&n},p=function(e){var n={intersection:t,target:i.target};h.capturedMap.has(e)?h.capturedMap.get(e).set(t.eventObject,n):h.capturedMap.set(e,new Map([[t.eventObject,n]])),i.target.setPointerCapture(e)},v=function(e){var n=h.capturedMap.get(e);n&&iB(h.capturedMap,t.eventObject,n,e)},m={};for(var g in i){var y=i[g];"function"!==typeof y&&(m[g]=y)}var b=W_(W_(W_({},t),m),{},{spaceX:l.x,spaceY:l.y,intersections:n,stopped:f.stopped,delta:o,unprojectedPoint:s,ray:u.ray,camera:c,stopPropagation:function(){var e="pointerId"in i&&h.capturedMap.get(i.pointerId);if((!e||e.has(t.eventObject))&&(b.stopped=f.stopped=!0,h.hovered.size&&Array.from(h.hovered.values()).find((function(e){return e.eventObject===t.eventObject})))){var o=n.slice(0,n.indexOf(t));r([].concat(MO(o),[t]))}},target:{hasPointerCapture:d,setPointerCapture:p,releasePointerCapture:v},currentTarget:{hasPointerCapture:d,setPointerCapture:p,releasePointerCapture:v},sourceEvent:i,nativeEvent:i});if(a(b),!0===f.stopped)return"break"};for(d.s();!(e=d.n()).done&&"break"!==p(););}catch(v){d.e(v)}finally{d.f()}}()}(f,a,d,(function(e){var t=e.eventObject,n=t.__r3f,r=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(c){if(r.onPointerOver||r.onPointerEnter||r.onPointerOut||r.onPointerLeave){var s=rB(e),u=l.hovered.get(s);u?u.stopped&&e.stopPropagation():(l.hovered.set(s,e),null==r.onPointerOver||r.onPointerOver(e),null==r.onPointerEnter||r.onPointerEnter(e))}null==r.onPointerMove||r.onPointerMove(e)}else{var f=r[o];f?h&&!l.initialHits.includes(t)||(i(a,l.interaction.filter((function(e){return!l.initialHits.includes(e)}))),f(e)):h&&l.initialHits.includes(t)&&i(a,l.interaction.filter((function(e){return!l.initialHits.includes(e)})))}}))}}}}var aB=function(e){return e&&!!e.getState},sB=function(e,t){var n,r;return{root:aB(e)?e:null!=(n=null==(r=e.__r3f)?void 0:r.root)?n:t.__r3f.root,container:aB(e)?e.getState().scene:e}},uB="__default",lB={},cB={};function hB(e,t){return!(!nB.arr(e)||!nB.equ(e,t))||e===t}function fB(e,t){var n=e;return(null!=t&&t.primitive||!n.__r3f)&&(n.__r3f=W_({root:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},t)),e}var dB=function(e){return e&&e.isOrthographicCamera};function pB(e){return Array.isArray(e)?Math.min(Math.max(e[0],window.devicePixelRatio),e[1]):e}var vB,mB=t.createContext(null),gB=function(e,n,r,i){var o=i.gl,a=i.size,s=i.shadows,u=void 0!==s&&s,l=i.linear,c=void 0!==l&&l,h=i.flat,f=void 0!==h&&h,d=i.vr,p=void 0!==d&&d,v=i.orthographic,m=void 0!==v&&v,g=i.frameloop,y=void 0===g?"always":g,b=i.dpr,_=void 0===b?1:b,w=i.performance,x=i.clock,E=void 0===x?new pN:x,S=i.raycaster,A=i.camera,T=i.onPointerMissed;u&&(o.shadowMap.enabled=!0,"object"===typeof u?Object.assign(o.shadowMap,u):o.shadowMap.type=bw),c&&(o.outputEncoding=jE),f&&(o.toneMapping=ox),"never"===y&&(E.stop(),E.elapsedTime=0);var C=RO((function(a,s){var u=new KN,l=S||{},h=l.params,d=CO(l,$O);e(u,W_(W_({enabled:!0},d),{},{params:W_(W_({},u.params),h)}));var v=A instanceof hC,g=v?A:m?new OC(0,0,0,0,.1,1e3):new fC(75,0,.1,1e3);v||(g.position.z=5,A&&e(g,A),null!=A&&A.rotation||g.lookAt(0,0,0));var b=pB(_),x=new rA,C=new rA,M=new rA;function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s().size,r=n.width,i=n.height,o=r/i;t instanceof rA?M.copy(t):M.set.apply(M,MO(t));var a=e.getWorldPosition(x).distanceTo(M);if(dB(e))return{width:r/e.zoom,height:i/e.zoom,factor:1,distance:a,aspect:o};var u=e.fov*Math.PI/180,l=2*Math.tan(u/2)*a,c=l*(r/i);return{width:c,height:l,factor:r/c,distance:a,aspect:o}}var I=void 0,R=function(e){return a((function(t){return{performance:W_(W_({},t.performance),{},{current:e})}}))};return{gl:o,set:a,get:s,invalidate:function(){return n(s())},advance:function(e,t){return r(e,t,s())},linear:c,flat:f,scene:fB(new gI),camera:g,controls:null,raycaster:u,clock:E,mouse:new NS,vr:p,frameloop:y,onPointerMissed:T,performance:W_(W_({current:1,min:.5,max:1,debounce:200},w),{},{regress:function(){var e=s();I&&clearTimeout(I),e.performance.current!==e.performance.min&&R(e.performance.min),I=setTimeout((function(){return R(s().performance.max)}),e.performance.debounce)}}),size:{width:0,height:0},viewport:{initialDpr:b,dpr:b,width:0,height:0,aspect:0,distance:0,factor:0,getCurrentViewport:k},setSize:function(e,t){var n={width:e,height:t};a((function(e){return{size:n,viewport:W_(W_({},e.viewport),k(g,C,n))}}))},setDpr:function(e){return a((function(t){return{viewport:W_(W_({},t.viewport),{},{dpr:pB(e)})}}))},setFrameloop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always";return a((function(){return{frameloop:e}}))},events:{connected:!1},internal:{active:!1,priority:0,frames:0,lastProps:i,lastEvent:t.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return a((function(n){var r=n.internal;return{internal:W_(W_({},r),{},{priority:r.priority+(t>0?1:0),subscribers:[].concat(MO(r.subscribers),[{ref:e,priority:t}]).sort((function(e,t){return e.priority-t.priority}))})}})),function(){a((function(n){var r=n.internal;return{internal:W_(W_({},r),{},{priority:r.priority-(t>0?1:0),subscribers:r.subscribers.filter((function(t){return t.ref!==e}))})}}))}}}}})),M=C.getState(),k=M.size,I=M.viewport.dpr;return C.subscribe((function(){var e=C.getState(),t=e.camera,n=e.size,r=e.viewport,i=e.internal;n===k&&r.dpr===I||(t.manual||i.lastProps.camera instanceof hC||(dB(t)?(t.left=n.width/-2,t.right=n.width/2,t.top=n.height/2,t.bottom=n.height/-2):t.aspect=n.width/n.height,t.updateProjectionMatrix(),t.updateMatrixWorld()),o.setPixelRatio(r.dpr),o.setSize(n.width,n.height),k=n,I=r.dpr)})),a&&M.setSize(a.width,a.height),C.subscribe((function(e){return n(e)})),C};var yB=[],bB=[],_B=[];function wB(e,t){for(vB=0;vB<e.length;vB++)e[vB](t)}function xB(e,t){var n=t.clock.getDelta();for("never"===t.frameloop&&"number"===typeof e&&(n=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),vB=0;vB<t.internal.subscribers.length;vB++)t.internal.subscribers[vB].ref.current(t,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function EB(e){var t=oB(e).handlePointer,n={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};return{connected:!1,handlers:Object.keys(n).reduce((function(e,n){return W_(W_({},e),{},z_({},n,t(n)))}),{}),connect:function(t){var r,i=e.getState(),o=i.set,a=i.events;null==a.disconnect||a.disconnect(),o((function(e){return{events:W_(W_({},e.events),{},{connected:t})}})),Object.entries(null!=(r=null==a?void 0:a.handlers)?r:[]).forEach((function(e){var r=u(e,2),i=r[0],o=r[1],a=u(n[i],2),s=a[0],l=a[1];t.addEventListener(s,o,{passive:l})}))},disconnect:function(){var t,r=e.getState(),i=r.set,o=r.events;o.connected&&(Object.entries(null!=(t=o.handlers)?t:[]).forEach((function(e){var t=u(e,2),r=t[0],i=t[1];if(o&&o.connected instanceof HTMLElement){var a=u(n[r],1)[0];o.connected.removeEventListener(a,i)}})),i((function(e){return{events:W_(W_({},e.events),{},{connected:!1})}})))}}}var SB="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;function AB(e){var t=e.set;return SB((function(){return t(new Promise((function(){return null}))),function(){return t(!1)}}),[]),null}var TB=function(e){tw(n,e);var t=ow(n);function n(){var e;Y_(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={error:!1},e}return $_(n,[{key:"componentDidCatch",value:function(e){this.props.set(e)}},{key:"render",value:function(){return this.state.error?null:this.props.children}}]),n}(t.Component);TB.getDerivedStateFromError=function(){return{error:!0}};var CB=t.forwardRef((function(e,n){var r=e.children,i=e.fallback,o=e.tabIndex,a=e.resize,s=e.id,l=e.style,c=e.className,h=e.events,f=CO(e,eB),d=u(VO(W_({scroll:!0,debounce:{scroll:50,resize:0}},a)),2),p=d[0],v=d[1],m=v.width,g=v.height,y=t.useRef(null),b=u(t.useState(!1),2),_=b[0],w=b[1],x=u(t.useState(!1),2),E=x[0],S=x[1];if(_)throw _;if(E)throw E;return SB((function(){m>0&&g>0&&function(e,n){var r,i,o,a,s,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=u.gl,c=u.size,h=u.mode,f=void 0===h?LB[1]:h,d=u.events,p=u.onCreated,v=CO(u,tB);c||(c={width:null!=(i=null==(o=n.parentElement)?void 0:o.clientWidth)?i:0,height:null!=(a=null==(s=n.parentElement)?void 0:s.clientHeight)?a:0});var m=NB.get(n),g=null==m?void 0:m.fiber,y=null==m?void 0:m.store,b=null==(r=y)?void 0:r.getState();if(g&&b){void 0===v.dpr||nB.equ(b.viewport.dpr,pB(v.dpr))||b.setDpr(v.dpr),b.size.width===c.width&&b.size.height===c.height||b.setSize(c.width,c.height),b.frameloop!==v.frameloop&&b.setFrameloop(v.frameloop),v.linear!==b.internal.lastProps.linear&&(VB(n),g=void 0)}if(!g){var _=GB(l,n);v.vr&&(_.xr.enabled=!0,_.setAnimationLoop((function(e){return FB(e,!0)})));var w=(y=gB(HB,BB,FB,W_({gl:_,size:c},v))).getState();g=jB.createContainer(y,LB.indexOf(f),!1,null),NB.set(n,{fiber:g,store:y}),d&&w.set({events:d(y)})}if(y&&g)return jB.updateContainer(t.createElement(zB,{store:y,element:e,onCreated:p,target:n}),g,null,(function(){})),y;throw"Error creating root!"}(t.createElement(TB,{set:S},t.createElement(t.Suspense,{fallback:t.createElement(AB,{set:w})},r)),y.current,W_(W_({},f),{},{size:{width:m,height:g},events:h||EB}))}),[m,g,r]),SB((function(){var e=y.current;return function(){return VB(e)}}),[]),t.createElement("div",{ref:p,id:s,className:c,tabIndex:o,style:W_({position:"relative",width:"100%",height:"100%",overflow:"hidden"},l)},t.createElement("canvas",{ref:HO([y,n]),style:{display:"block"}},i))}));function MB(){var e=t.useContext(mB);if(!e)throw"R3F hooks can only be used within the Canvas component!";return e}function kB(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1?arguments[1]:void 0;return MB()(e,t)}function IB(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=MB().getState().internal.subscribe,i=t.useRef(e);return t.useLayoutEffect((function(){i.current=e}),[e]),t.useLayoutEffect((function(){return r(i,n)}),[n,r]),null}function RB(e){var t={nodes:{},materials:{}};return e&&e.traverse((function(e){e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}function PB(e,t){return function(n){var r=new n;e&&e(r);for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return Promise.all(o.map((function(e){return new Promise((function(n,i){return r.load(e,(function(e){e.scene&&Object.assign(e,RB(e.scene)),n(e)}),t,(function(t){return i("Could not load ".concat(e,": ").concat(t.message))}))}))})))}}function DB(e,t,n,r){var i=Array.isArray(t)?t:[t],o=jO.apply(void 0,[PB(n,r),e].concat(MO(i)));return Array.isArray(t)?o:o[0]}DB.preload=function(e,t,n){var r=Array.isArray(t)?t:[t];return jO.preload.apply(jO,[PB(n),e].concat(MO(r)))},DB.clear=function(e,t){var n=Array.isArray(t)?t:[t];return jO.clear.apply(jO,[e].concat(MO(n)))};var NB=new Map,LB=["legacy","blocking","concurrent"],OB=function(e){var t,n=!1;function r(i){if(n=!0,t=0,wB(yB,i),e.forEach((function(e){var n=e.store.getState();n.internal.active&&("always"===n.frameloop||n.internal.frames>0)&&(t+=xB(i,n))})),wB(bB,i),t>0)return requestAnimationFrame(r);wB(_B,i),n=!1}return{loop:r,invalidate:function t(i){if(!i)return e.forEach((function(e){return t(e.store.getState())}));!i.vr&&i.internal.active&&"never"!==i.frameloop&&(i.internal.frames=Math.min(60,i.internal.frames+1),n||(n=!0,requestAnimationFrame(r)))},advance:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;n&&wB(yB,t),r?xB(t,r):e.forEach((function(e){return xB(t,e.store.getState())})),n&&wB(bB,t)}}}(NB),BB=OB.invalidate,FB=OB.advance,UB=function(t){function n(e,t){t.children,t.key,t.ref;var n,r=CO(t,JO),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=(i.children,i.key,i.ref,CO(i,QO)),a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=null!=(n=null==e?void 0:e.__r3f)?n:{},l=Object.entries(r),c=[];if(a)for(var h=Object.keys(o),f=0;f<h.length;f++)r.hasOwnProperty(h[f])||l.unshift([h[f],uB+"remove"]);l.forEach((function(t){var n,r=u(t,2),i=r[0],a=r[1];if((null==(n=e.__r3f)||!n.primitive||"object"!==i)&&!hB(a,o[i])){if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(i))return c.push([i,a,!0,[]]);var s=[];i.includes("-")&&(s=i.split("-")),c.push([i,a,!1,s])}}));var d=W_({},r);return s.memoizedProps&&s.memoizedProps.args&&(d.args=s.memoizedProps.args),s.memoizedProps&&s.memoizedProps.attach&&(d.attach=s.memoizedProps.attach),{accumulative:a,memoized:d,changes:c}}function r(e,t){var r,c,h,f,d=null!=(r=null==e?void 0:e.__r3f)?r:{},p=d.root,v=null!=(c=null==p||null==p.getState?void 0:p.getState())?c:{},m=(f=t)&&f.memoized&&f.changes?t:n(e,t),g=m.memoized,y=m.changes,b=d.eventCount;if(e.__r3f&&(e.__r3f.memoizedProps=g),y.forEach((function(t){var n,r,l=u(t,4),c=l[0],h=l[1],f=l[2],p=l[3],m=e,y=m[c];if(p.length&&(y=p.reduce((function(e,t){return e[t]}),e),!y||!y.set)){var b=p.reverse(),_=i(r=b)||TO(r)||a(r)||s(),w=_[0];m=_.slice(1).reverse().reduce((function(e,t){return e[t]}),e),c=w}if(h===uB+"remove")if(y&&y.constructor)h=new y.constructor(g.args);else if(m.constructor){var x=new m.constructor(m.__r3f.memoizedProps.args);h=x[y],x.dispose&&x.dispose()}else h=0;var E=(null==v||null==(n=v.gl)?void 0:n.outputEncoding)===jE;if(f)h?d.handlers[c]=h:delete d.handlers[c],d.eventCount=Object.keys(d.handlers).length;else if(y&&y.set&&(y.copy||y instanceof WA)){var S;if(Array.isArray(h))y.fromArray?y.fromArray(h):(S=y).set.apply(S,MO(h));else if(y.copy&&h&&h.constructor&&y.constructor.name===h.constructor.name)y.copy(h);else if(void 0!==h){var A=y instanceof KS;!A&&y.setScalar?y.setScalar(h):y instanceof WA&&h instanceof WA?y.mask=h.mask:y.set(h),!E&&A&&y.convertSRGBToLinear()}}else m[c]=h,!E&&m[c]instanceof XS&&(m[c].encoding=HE);o(e)})),d.parent&&v.internal&&e.raycast&&b!==d.eventCount){var _=v.internal.interaction.indexOf(e);_>-1&&v.internal.interaction.splice(_,1),d.eventCount&&v.internal.interaction.push(e)}return y.length&&null!=(h=e.__r3f)&&h.parent&&l(e),e}function o(e){var t,n,r=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function l(e){null==e.onUpdate||e.onUpdate(e)}function c(t,n,i,o,a){var s,u=n.args,l=void 0===u?[]:u,c=CO(n,XO),h="".concat(t[0].toUpperCase()).concat(t.slice(1));if(!aB(i)&&a){i=function e(t){return t.return?e(t.return):t.stateNode&&t.stateNode.containerInfo}(a)}if(!i||!aB(i))throw"No valid root for ".concat(h,"!");if("primitive"===t){if(void 0===c.object)throw"Primitives without 'object' are invalid!";s=fB(c.object,{root:i,primitive:!0})}else{var f=cB[h]||e[h];if(!f)throw"".concat(h," is not part of the THREE namespace! Did you forget to extend? See: https://github.com/pmndrs/react-three-fiber/blob/master/markdown/api.md#using-3rd-party-objects-declaratively");if(!Array.isArray(l))throw"The args prop must be an array!";s=fB(AO(f,MO(l)),{root:i,memoizedProps:{args:0===l.length?null:l}})}return"attachFns"in c||(h.endsWith("Geometry")?c=W_({attach:"geometry"},c):h.endsWith("Material")&&(c=W_({attach:"material"},c))),r(s,c),s}function h(e,t){var n=!1;if(t){if(t.attachArray)nB.arr(e[t.attachArray])||(e[t.attachArray]=[]),e[t.attachArray].push(t);else if(t.attachObject)nB.obj(e[t.attachObject[0]])||(e[t.attachObject[0]]={}),e[t.attachObject[0]][t.attachObject[1]]=t;else if(t.attach&&!nB.fun(t.attach))e[t.attach]=t;else if(nB.arr(t.attachFns)){var r=u(t.attachFns,1)[0];nB.str(r)&&nB.fun(e[r])?e[r](t):nB.fun(r)&&r(t,e)}else t.isObject3D&&e.isObject3D&&(e.add(t),n=!0);n||e.__r3f.objects.push(t),t.__r3f||fB(t,{}),t.__r3f.parent=e,l(t),o(t)}}function f(e,t,n){var r=!1;if(t){if(t.attachArray){var i=e[t.attachArray];nB.arr(i)||(e[t.attachArray]=[]),i.splice(i.indexOf(n),0,t)}else{if(t.attachObject||t.attach&&!nB.fun(t.attach))return h(e,t);if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"});var a=e.children.filter((function(e){return e!==t})),s=a.indexOf(n);e.children=[].concat(MO(a.slice(0,s)),[t],MO(a.slice(s))),r=!0}}r||e.__r3f.objects.push(t),t.__r3f||fB(t,{}),t.__r3f.parent=e,l(t),o(t)}}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&MO(e).forEach((function(e){return p(t,e,n)}))}function p(e,t,n){if(t){var r,i;if(t.__r3f&&(t.__r3f.parent=null),null!=(r=e.__r3f)&&r.objects&&(e.__r3f.objects=e.__r3f.objects.filter((function(e){return e!==t}))),t.attachArray)e[t.attachArray]=e[t.attachArray].filter((function(e){return e!==t}));else if(t.attachObject)delete e[t.attachObject[0]][t.attachObject[1]];else if(t.attach&&!nB.fun(t.attach)&&e[t.attach]===t)e[t.attach]=null;else if(nB.arr(t.attachFns)){var a=u(t.attachFns,2)[1];nB.str(a)&&nB.fun(e[a])?e[a](t):nB.fun(a)&&a(t,e)}else if(t.isObject3D&&e.isObject3D){var s;e.remove(t),null!=(s=t.__r3f)&&s.root&&function(e,t){var n=e.getState().internal;n.interaction=n.interaction.filter((function(e){return e!==t})),n.initialHits=n.initialHits.filter((function(e){return e!==t})),n.hovered.forEach((function(e,r){e.eventObject!==t&&e.object!==t||n.hovered.delete(r)})),n.capturedMap.forEach((function(e,r){iB(n.capturedMap,t,e,r)}))}(t.__r3f.root,t)}var l,c=null==(i=t.__r3f)?void 0:i.primitive,h=void 0===n?null!==t.dispose&&!c:n;if(!c)d(null==(l=t.__r3f)?void 0:l.objects,t,h),d(t.children,t,h);t.__r3f&&(delete t.__r3f.root,delete t.__r3f.objects,delete t.__r3f.handlers,delete t.__r3f.memoizedProps,c||delete t.__r3f),h&&t.dispose&&"Scene"!==t.type&&(0,NO.unstable_runWithPriority)(NO.unstable_IdlePriority,(function(){try{t.dispose()}catch(lU){}})),o(e)}}var v=DO()({now:NO.unstable_now,createInstance:c,removeChild:p,appendChild:h,appendInitialChild:h,insertBefore:f,warnsIfNotActing:!0,supportsMutation:!0,isPrimaryRenderer:!1,scheduleTimeout:nB.fun(setTimeout)?setTimeout:void 0,cancelTimeout:nB.fun(clearTimeout)?clearTimeout:void 0,setTimeout:nB.fun(setTimeout)?setTimeout:void 0,clearTimeout:nB.fun(clearTimeout)?clearTimeout:void 0,noTimeout:-1,appendChildToContainer:function(e,t){var n=sB(e,t),r=n.container,i=n.root;r.__r3f.root=i,h(r,t)},removeChildFromContainer:function(e,t){return p(sB(e,t).container,t)},insertInContainerBefore:function(e,t,n){return f(sB(e,t).container,t,n)},prepareUpdate:function(e,t,r,i){if(e.__r3f.primitive&&i.object&&i.object!==e)return[!0];var o=i.args,a=void 0===o?[]:o,s=(i.children,CO(i,YO)),u=r.args,l=void 0===u?[]:u,c=(r.children,CO(r,ZO));if(!Array.isArray(a))throw"The args prop must be an array!";if(a.some((function(e,t){return e!==l[t]})))return[!0];var f=n(e,s,c,!0);if(f.changes.length)return[!1,f];if(e.attach&&"function"!==typeof e.attach){var d=e.__r3f.parent;d&&d[e.attach]!==e&&h(d,e)}return null},commitUpdate:function(e,t,n,i,o,a){var s=u(t,2),l=s[0],f=s[1];l?function(e,t,n,r){var i,o=null==(i=e.__r3f)?void 0:i.parent;if(o){var a=c(t,n,e.__r3f.root);"primitive"!==t&&e.children&&(e.children.forEach((function(e){return h(a,e)})),e.children=[]),e.__r3f.objects.forEach((function(e){return h(a,e)})),e.__r3f.objects=[],p(o,e),h(o,a),a.raycast&&a.__r3f.eventCount&&a.__r3f.root.getState().internal.interaction.push(a),[r,r.alternate].forEach((function(e){null!==e&&(e.stateNode=a,e.ref&&("function"===typeof e.ref?e.ref(a):e.ref.current=a))}))}}(e,n,o,a):r(e,f)},hideInstance:function(e){e.isObject3D&&(e.visible=!1,o(e))},unhideInstance:function(e,t){(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0,o(e))},hideTextInstance:function(){throw new Error("Text is not allowed in the R3F tree.")},getPublicInstance:function(e){return e},getRootHostContext:function(e){return lB},getChildHostContext:function(e){return e},createTextInstance:function(){},finalizeInitialChildren:function(e){var t;return!!(null!=(t=null==e?void 0:e.__r3f)?t:{}).handlers},commitMount:function(e){var t,n=null!=(t=null==e?void 0:e.__r3f)?t:{};e.raycast&&n.handlers&&n.eventCount&&e.__r3f.root.getState().internal.interaction.push(e)},shouldDeprioritizeSubtree:function(){return!1},prepareForCommit:function(){return null},preparePortalMount:function(e){fB(e)},resetAfterCommit:function(){},shouldSetTextContent:function(){return!1},clearContainer:function(){return!1}});return{reconciler:v,applyProps:r}}(),jB=UB.reconciler,HB=UB.applyProps,GB=function(e,t){var n,r="function"===typeof e?e(t):e;if(null!=(n=r)&&n.render)return r;var i=new dI(W_({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0},e));return i.outputEncoding=HE,i.toneMapping=lx,e&&HB(i,e),i};function zB(e){var n=e.store,r=e.element,i=e.onCreated,o=e.target;return t.useEffect((function(){var e=n.getState();e.set((function(e){return{internal:W_(W_({},e.internal),{},{active:!0})}})),null==e.events.connect||e.events.connect(o),i&&i(e)}),[]),t.createElement(mB.Provider,{value:n},r)}function VB(e,t){var n=NB.get(e),r=null==n?void 0:n.fiber;if(r){var i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),jB.updateContainer(null,r,null,(function(){i&&setTimeout((function(){var n,r,o;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(o=i.gl)||null==o.forceContextLoss||o.forceContextLoss(),function(e){e.dispose&&"Scene"!==e.type&&e.dispose();for(var t in e){var n,r;null==(n=(r=t).dispose)||n.call(r),delete e[t]}}(i),NB.delete(e),t&&t(e)}),500)}))}}jB.act;jB.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:"17.0.2"});var WB,qB=new WeakMap,KB=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this,e)).decoderPath="",r.decoderConfig={},r.decoderBinary=null,r.decoderPending=null,r.workerLimit=4,r.workerPool=[],r.workerNextTaskID=1,r.workerSourceURL="",r.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},r.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"},r}return $_(n,[{key:"setDecoderPath",value:function(e){return this.decoderPath=e,this}},{key:"setDecoderConfig",value:function(e){return this.decoderConfig=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerLimit=e,this}},{key:"load",value:function(e,t,n,r){var i=this,o=new SD(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(e){var n={attributeIDs:i.defaultAttributeIDs,attributeTypes:i.defaultAttributeTypes,useUniqueIDs:!1};i.decodeGeometry(e,n).then(t).catch(r)}),n,r)}},{key:"decodeDracoFile",value:function(e,t,n,r){var i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,i).then(t)}},{key:"decodeGeometry",value:function(e,t){var n=this;for(var r in t.attributeTypes){var i=t.attributeTypes[r];void 0!==i.BYTES_PER_ELEMENT&&(t.attributeTypes[r]=i.name)}var o,a=JSON.stringify(t);if(qB.has(e)){var s=qB.get(e);if(s.key===a)return s.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var u=this.workerNextTaskID++,l=e.byteLength,c=this._getWorker(u,l).then((function(n){return o=n,new Promise((function(n,r){o._callbacks[u]={resolve:n,reject:r},o.postMessage({type:"decode",id:u,taskConfig:t,buffer:e},[e])}))})).then((function(e){return n._createGeometry(e.geometry)}));return c.catch((function(){return!0})).then((function(){o&&u&&n._releaseTask(o,u)})),qB.set(e,{key:a,promise:c}),c}},{key:"_createGeometry",value:function(e){var t=new jT;e.index&&t.setIndex(new xT(e.index.array,1));for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n],i=r.name,o=r.array,a=r.itemSize;t.setAttribute(i,new xT(o,a))}return t}},{key:"_loadLibrary",value:function(e,t){var n=new SD(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((function(t,r){n.load(e,t,void 0,r)}))}},{key:"preload",value:function(){return this._initDecoder(),this}},{key:"_initDecoder",value:function(){var e=this;if(this.decoderPending)return this.decoderPending;var t="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then((function(n){var r=n[0];t||(e.decoderConfig.wasmBinary=n[1]);var i=JB.toString(),o=["/* draco decoder */",r,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([o]))})),this.decoderPending}},{key:"_getWorker",value:function(e,t){var n=this;return this._initDecoder().then((function(){if(n.workerPool.length<n.workerLimit){var r=new Worker(n.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:n.decoderConfig}),r.onmessage=function(e){var t=e.data;switch(t.type){case"decode":r._callbacks[t.id].resolve(t);break;case"error":r._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},n.workerPool.push(r)}else n.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));var i=n.workerPool[n.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i}))}},{key:"_releaseTask",value:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}},{key:"debug",value:function(){console.log("Task load: ",this.workerPool.map((function(e){return e._taskLoad})))}},{key:"dispose",value:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}]),n}(xD);function JB(){var e,t;function n(e,t,n,r,i,o){var a=o.num_components(),s=n.num_points()*a,u=s*i.BYTES_PER_ELEMENT,l=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),c=e._malloc(u);t.GetAttributeDataArrayForAllPoints(n,o,l,u,c);var h=new i(e.HEAPF32.buffer,c,s).slice();return e._free(c),{name:r,array:h,itemSize:a}}onmessage=function(r){var i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var o=i.buffer,a=i.taskConfig;t.then((function(e){var t=e.draco,r=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(o),o.byteLength);try{var u=function(e,t,r,i){var o,a,s=i.attributeIDs,u=i.attributeTypes,l=t.GetEncodedGeometryType(r);if(l===e.TRIANGULAR_MESH)o=new e.Mesh,a=t.DecodeBufferToMesh(r,o);else{if(l!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new e.PointCloud,a=t.DecodeBufferToPointCloud(r,o)}if(!a.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+a.error_msg());var c={index:null,attributes:[]};for(var h in s){var f=self[u[h]],d=void 0,p=void 0;if(i.useUniqueIDs)p=s[h],d=t.GetAttributeByUniqueId(o,p);else{if(-1===(p=t.GetAttributeId(o,e[s[h]])))continue;d=t.GetAttribute(o,p)}c.attributes.push(n(e,t,o,h,f,d))}l===e.TRIANGULAR_MESH&&(c.index=function(e,t,n){var r=3*n.num_faces(),i=4*r,o=e._malloc(i);t.GetTrianglesUInt32Array(n,i,o);var a=new Uint32Array(e.HEAPF32.buffer,o,r).slice();return e._free(o),{array:a,itemSize:1}}(e,t,o));return e.destroy(o),c}(t,r,s,a),l=u.attributes.map((function(e){return e.array.buffer}));u.index&&l.push(u.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:u},l)}catch(c){console.error(c),self.postMessage({type:"error",id:i.id,error:c.message})}finally{t.destroy(s),t.destroy(r)}}))}}}var QB=function(){if(WB)return WB;var e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!==typeof WebAssembly)return{supported:!1};var n,r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(e)&&(r="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");var i=WebAssembly.instantiate(function(e){for(var n=new Uint8Array(e.length),r=0;r<e.length;++r){var i=e.charCodeAt(r);n[r]=i>96?i-71:i>64?i-65:i>47?i+4:i>46?63:62}for(var o=0,a=0;a<e.length;++a)n[o++]=n[a]<60?t[n[a]]:64*(n[a]-60)+n[++a];return n.buffer.slice(0,o)}(r),{}).then((function(e){(n=e.instance).exports.__wasm_call_ctors()}));function o(e,t,r,i,o,a){var s=n.exports.sbrk,u=r+3&-4,l=s(u*i),c=s(o.length),h=new Uint8Array(n.exports.memory.buffer);h.set(o,c);var f=e(l,r,i,c,o.length);if(0===f&&a&&a(l,u,i),t.set(h.subarray(l,l+r*i)),s(l-s(0)),0!==f)throw new Error("Malformed buffer data: ".concat(f))}var a={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},s={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return WB={ready:i,supported:!0,decodeVertexBuffer:function(e,t,r,i,s){o(n.exports.meshopt_decodeVertexBuffer,e,t,r,i,n.exports[a[s]])},decodeIndexBuffer:function(e,t,r,i){o(n.exports.meshopt_decodeIndexBuffer,e,t,r,i)},decodeIndexSequence:function(e,t,r,i){o(n.exports.meshopt_decodeIndexSequence,e,t,r,i)},decodeGltfBuffer:function(e,t,r,i,u,l){o(n.exports[s[u]],e,t,r,i,n.exports[a[l]])}}},XB=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this,e)).dracoLoader=null,r.ktx2Loader=null,r.meshoptDecoder=null,r.pluginCallbacks=[],r.register((function(e){return new tF(e)})),r.register((function(e){return new sF(e)})),r.register((function(e){return new uF(e)})),r.register((function(e){return new nF(e)})),r.register((function(e){return new rF(e)})),r.register((function(e){return new iF(e)})),r.register((function(e){return new oF(e)})),r.register((function(e){return new aF(e)})),r.register((function(e){return new $B(e)})),r.register((function(e){return new lF(e)})),r}return $_(n,[{key:"load",value:function(e,t,n,r){var i,o=this;i=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:YD.extractUrlBase(e),this.manager.itemStart(e);var a=function(t){r?r(t):console.error(t),o.manager.itemError(e),o.manager.itemEnd(e)},s=new SD(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{o.parse(n,i,(function(n){t(n),o.manager.itemEnd(e)}),a)}catch(lU){a(lU)}}),n,a)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,r){var i,o={},a={};if("string"===typeof e)i=e;else if(YD.decodeText(new Uint8Array(e,0,4))===cF){try{o[ZB.KHR_BINARY_GLTF]=new dF(e)}catch(p){return void(r&&r(p))}i=o[ZB.KHR_BINARY_GLTF].content}else i=YD.decodeText(new Uint8Array(e));var s=JSON.parse(i);if(void 0===s.asset||s.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var u=new WF(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(var l=0;l<this.pluginCallbacks.length;l++){var c=this.pluginCallbacks[l](u);a[c.name]=c,o[c.name]=!0}if(s.extensionsUsed)for(var h=0;h<s.extensionsUsed.length;++h){var f=s.extensionsUsed[h],d=s.extensionsRequired||[];switch(f){case ZB.KHR_MATERIALS_UNLIT:o[f]=new eF;break;case ZB.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[f]=new gF;break;case ZB.KHR_DRACO_MESH_COMPRESSION:o[f]=new pF(s,this.dracoLoader);break;case ZB.KHR_TEXTURE_TRANSFORM:o[f]=new vF;break;case ZB.KHR_MESH_QUANTIZATION:o[f]=new yF;break;default:d.indexOf(f)>=0&&void 0===a[f]&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}u.setExtensions(o),u.setPlugins(a),u.parse(n,r)}}},{key:"parseAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}]),n}(xD);function YB(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var ZB={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"},$B=function(){function e(t){Y_(this,e),this.parser=t,this.name=ZB.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return $_(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,r=t.length;n<r;n++){var i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,r=t.cache.get(n);if(r)return r;var i,o=t.json,a=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e],s=new KS(16777215);void 0!==a.color&&s.fromArray(a.color);var u=void 0!==a.range?a.range:0;switch(a.type){case"directional":(i=new WD(s)).target.position.set(0,0,-1),i.add(i.target);break;case"point":(i=new zD(s)).distance=u;break;case"spot":(i=new FD(s)).distance=u,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,i.angle=a.spot.outerConeAngle,i.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,i.target.position.set(0,0,-1),i.add(i.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return i.position.set(0,0,0),i.decay=2,void 0!==a.intensity&&(i.intensity=a.intensity),i.name=t.createUniqueName(a.name||"light_"+e),r=Promise.resolve(i),t.cache.add(n,r),r}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}]),e}(),eF=function(){function e(){Y_(this,e),this.name=ZB.KHR_MATERIALS_UNLIT}return $_(e,[{key:"getMaterialType",value:function(){return bT}},{key:"extendParams",value:function(e,t,n){var r=[];e.color=new KS(1,1,1),e.opacity=1;var i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var o=i.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture))}return Promise.all(r)}}]),e}(),tF=function(){function e(t){Y_(this,e),this.parser=t,this.name=ZB.KHR_MATERIALS_CLEARCOAT}return $_(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?XP:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){var a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new NS(a,a)}return Promise.all(i)}}]),e}(),nF=function(){function e(t){Y_(this,e),this.parser=t,this.name=ZB.KHR_MATERIALS_SHEEN}return $_(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?XP:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[];t.sheenColor=new KS(0,0,0),t.sheenRoughness=0,t.sheen=1;var o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture)),void 0!==o.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(i)}}]),e}(),rF=function(){function e(t){Y_(this,e),this.parser=t,this.name=ZB.KHR_MATERIALS_TRANSMISSION}return $_(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?XP:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(i)}}]),e}(),iF=function(){function e(t){Y_(this,e),this.parser=t,this.name=ZB.KHR_MATERIALS_VOLUME}return $_(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?XP:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;var a=o.attenuationColor||[1,1,1];return t.attenuationColor=new KS(a[0],a[1],a[2]),Promise.all(i)}}]),e}(),oF=function(){function e(t){Y_(this,e),this.parser=t,this.name=ZB.KHR_MATERIALS_IOR}return $_(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?XP:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}]),e}(),aF=function(){function e(t){Y_(this,e),this.parser=t,this.name=ZB.KHR_MATERIALS_SPECULAR}return $_(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?XP:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));var a=o.specularColorFactor||[1,1,1];return t.specularColor=new KS(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture).then((function(e){e.encoding=HE}))),Promise.all(i)}}]),e}(),sF=function(){function e(t){Y_(this,e),this.parser=t,this.name=ZB.KHR_TEXTURE_BASISU}return $_(e,[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;var i=r.extensions[this.name],o=n.images[i.source],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,a)}}]),e}(),uF=function(){function e(t){Y_(this,e),this.parser=t,this.name=ZB.EXT_TEXTURE_WEBP,this.isSupported=null}return $_(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;var o=i.extensions[t],a=r.images[o.source],s=n.textureLoader;if(a.uri){var u=n.options.manager.getHandler(a.uri);null!==u&&(s=u)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,a,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),lF=function(){function e(t){Y_(this,e),this.name=ZB.EXT_MESHOPT_COMPRESSION,this.parser=t}return $_(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,o.ready]).then((function(e){var t=r.byteOffset||0,n=r.byteLength||0,i=r.count,a=r.byteStride,s=new ArrayBuffer(i*a),u=new Uint8Array(e[0],t,n);return o.decodeGltfBuffer(new Uint8Array(s),i,a,u,r.mode,r.filter),s}))}return null}}]),e}(),cF="glTF",hF=1313821514,fF=5130562,dF=$_((function e(t){Y_(this,e),this.name=ZB.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,12);if(this.header={magic:YD.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==cF)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=this.header.length-12,i=new DataView(t,12),o=0;o<r;){var a=i.getUint32(o,!0);o+=4;var s=i.getUint32(o,!0);if(o+=4,s===hF){var u=new Uint8Array(t,12+o,a);this.content=YD.decodeText(u)}else if(s===fF){var l=12+o;this.body=t.slice(l,l+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")})),pF=function(){function e(t,n){if(Y_(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ZB.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}return $_(e,[{key:"decodePrimitive",value:function(e,t){var n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},u={};for(var l in o){var c=DF[l]||l.toLowerCase();a[c]=o[l]}for(var h in e.attributes){var f=DF[h]||h.toLowerCase();if(void 0!==o[h]){var d=n.accessors[e.attributes[h]],p=kF[d.componentType];u[f]=p,s[f]=!0===d.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}t(e)}),a,u)}))}))}}]),e}(),vF=function(){function e(){Y_(this,e),this.name=ZB.KHR_TEXTURE_TRANSFORM}return $_(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}]),e}(),mF=function(e){tw(n,e);var t=ow(n);function n(e){var r;Y_(this,n),(r=t.call(this)).isGLTFSpecularGlossinessMaterial=!0;var i=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),o=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),a=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),u=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),l={specular:{value:(new KS).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};return r._extraUniforms=l,r.onBeforeCompile=function(e){for(var t in l)e.uniforms[t]=l[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",i).replace("#include <metalnessmap_pars_fragment>",o).replace("#include <roughnessmap_fragment>",a).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",u)},Object.defineProperties(K_(r),{specular:{get:function(){return l.specular.value},set:function(e){l.specular.value=e}},specularMap:{get:function(){return l.specularMap.value},set:function(e){l.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return l.glossiness.value},set:function(e){l.glossiness.value=e}},glossinessMap:{get:function(){return l.glossinessMap.value},set:function(e){l.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete r.metalness,delete r.roughness,delete r.metalnessMap,delete r.roughnessMap,r.setValues(e),r}return $_(n,[{key:"copy",value:function(e){return X_(J_(n.prototype),"copy",this).call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}]),n}(QP),gF=function(){function e(){Y_(this,e),this.name=ZB.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}return $_(e,[{key:"getMaterialType",value:function(){return mF}},{key:"extendParams",value:function(e,t,n){var r=t.extensions[this.name];e.color=new KS(1,1,1),e.opacity=1;var i=[];if(Array.isArray(r.diffuseFactor)){var o=r.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(void 0!==r.diffuseTexture&&i.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new KS(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new KS(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var a=r.specularGlossinessTexture;i.push(n.assignTexture(e,"glossinessMap",a)),i.push(n.assignTexture(e,"specularMap",a))}return Promise.all(i)}},{key:"createMaterial",value:function(e){var t=new mF(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=VE,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}]),e}(),yF=$_((function e(){Y_(this,e),this.name=ZB.KHR_MESH_QUANTIZATION})),bF=function(e){tw(n,e);var t=ow(n);function n(e,r,i,o){return Y_(this,n),t.call(this,e,r,i,o)}return $_(n,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,o=0;o!==r;o++)t[o]=n[i+o];return t}}]),n}(oD);bF.prototype.beforeStart_=bF.prototype.copySampleValue_,bF.prototype.afterEnd_=bF.prototype.copySampleValue_,bF.prototype.interpolate_=function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,u=3*a,l=r-t,c=(n-t)/l,h=c*c,f=h*c,d=e*u,p=d-u,v=-2*f+3*h,m=f-h,g=1-v,y=m-h+c,b=0;b!==a;b++){var _=o[p+b+a],w=o[p+b+s]*l,x=o[d+b+a],E=o[d+b]*l;i[b]=g*_+y*w+v*x+m*E}return i};var _F=new nA,wF=function(e){tw(n,e);var t=ow(n);function n(){return Y_(this,n),t.apply(this,arguments)}return $_(n,[{key:"interpolate_",value:function(e,t,r,i){var o=X_(J_(n.prototype),"interpolate_",this).call(this,e,t,r,i);return _F.fromArray(o).normalize().toArray(o),o}}]),n}(bF),xF=0,EF=1,SF=2,AF=3,TF=4,CF=5,MF=6,kF={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},IF={9728:wx,9729:Tx,9984:xx,9985:Cx,9986:Sx,9987:kx},RF={33071:bx,33648:_x,10497:yx},PF={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},DF={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},NF={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},LF={CUBICSPLINE:void 0,LINEAR:IE,STEP:kE},OF="OPAQUE",BF="MASK",FF="BLEND";function UF(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function jF(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function HF(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(var o=0,a=i.length;o<a;o++)e.morphTargetDictionary[i[o]]=o}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function GF(e){var t=e.extensions&&e.extensions[ZB.KHR_DRACO_MESH_COMPRESSION];return t?"draco:"+t.bufferView+":"+t.indices+":"+zF(t.attributes):e.indices+":"+zF(e.attributes)+":"+e.mode}function zF(e){for(var t="",n=Object.keys(e).sort(),r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function VF(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var WF=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Y_(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new YB,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!==typeof createImageBitmap&&!1===/Firefox|^((?!chrome|android).)*safari/i.test(navigator.userAgent)?this.textureLoader=new oN(this.options.manager):this.textureLoader=new ID(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new SD(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return $_(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var o={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};UF(i,o,r),jF(o,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){e(o)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r=0,i=t.length;r<i;r++)for(var o=t[r].joints,a=0,s=o.length;a<s;a++)e[o[a]].isBone=!0;for(var u=0,l=e.length;u<l;u++){var c=e[u];void 0!==c.mesh&&(this._addNodeRef(this.meshCache,c.mesh),void 0!==c.skin&&(n[c.mesh].isSkinnedMesh=!0)),void 0!==c.camera&&this._addNodeRef(this.cameraCache,c.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){var r=this;if(e.refs[t]<=1)return n;var i=n.clone();return function e(t,n){var i=r.associations.get(t);null!=i&&r.associations.set(n,i);var o,a=q_(t.children.entries());try{for(a.s();!(o=a.n()).done;){var s=u(o.value,2),l=s[0];e(s[1],n.children[l])}}catch(c){a.e(c)}finally{a.f()}}(n,i),i.name+="_instance_"+e.uses[t]++,i}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],r=0;r<t.length;r++){var i=e(t[r]);i&&n.push(i)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[ZB.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(e,i){n.load(YD.resolveURL(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(e){var i,o,a=e[0],s=PF[r.type],u=kF[r.componentType],l=u.BYTES_PER_ELEMENT,c=l*s,h=r.byteOffset||0,f=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,d=!0===r.normalized;if(f&&f!==c){var p=Math.floor(h/f),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+p+":"+r.count,m=t.cache.get(v);m||(i=new u(a,p*f,r.count*f/l),m=new yI(i,f/l),t.cache.add(v,m)),o=new _I(m,s,h%f/l,d)}else i=null===a?new u(r.count*s):new u(a,h,r.count*s),o=new xT(i,s,d);if(void 0!==r.sparse){var g=PF.SCALAR,y=kF[r.sparse.indices.componentType],b=r.sparse.indices.byteOffset||0,_=r.sparse.values.byteOffset||0,w=new y(e[1],b,r.sparse.count*g),x=new u(e[2],_,r.sparse.count*s);null!==a&&(o=new xT(o.array.slice(),o.itemSize,o.normalized));for(var E=0,S=w.length;E<S;E++){var A=w[E];if(o.setX(A,x[E*s]),s>=2&&o.setY(A,x[E*s+1]),s>=3&&o.setZ(A,x[E*s+2]),s>=4&&o.setW(A,x[E*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o}))}},{key:"loadTexture",value:function(e){var t=this.json,n=this.options,r=t.textures[e],i=t.images[r.source],o=this.textureLoader;if(i.uri){var a=n.manager.getHandler(i.uri);null!==a&&(o=a)}return this.loadTextureImage(e,i,o)}},{key:"loadTextureImage",value:function(e,t,n){var r=this,i=this.json,o=this.options,a=i.textures[e],s=(t.uri||t.bufferView)+":"+a.sampler;if(this.textureCache[s])return this.textureCache[s];var u=self.URL||self.webkitURL,l=t.uri||"",c=!1;if(void 0!==t.bufferView)l=r.getDependency("bufferView",t.bufferView).then((function(e){c=!0;var n=new Blob([e],{type:t.mimeType});return l=u.createObjectURL(n)}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var h=Promise.resolve(l).then((function(e){return new Promise((function(t,r){var i=t;!0===n.isImageBitmapLoader&&(i=function(e){var n=new XS(e);n.needsUpdate=!0,t(n)}),n.load(YD.resolveURL(e,o.path),i,void 0,r)}))})).then((function(t){!0===c&&u.revokeObjectURL(l),t.flipY=!1,a.name&&(t.name=a.name);var n=(i.samplers||{})[a.sampler]||{};return t.magFilter=IF[n.magFilter]||Tx,t.minFilter=IF[n.minFilter]||kx,t.wrapS=RF[n.wrapS]||yx,t.wrapT=RF[n.wrapT]||yx,r.associations.set(t,{textures:e}),t})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",l),null}));return this.textureCache[s]=h,h}},{key:"assignTexture",value:function(e,t,n){var r=this;return this.getDependency("texture",n.index).then((function(i){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),r.extensions[ZB.KHR_TEXTURE_TRANSFORM]){var o=void 0!==n.extensions?n.extensions[ZB.KHR_TEXTURE_TRANSFORM]:void 0;if(o){var a=r.associations.get(i);i=r.extensions[ZB.KHR_TEXTURE_TRANSFORM].extendTexture(i,o),r.associations.set(i,a)}}return e[t]=i,i}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){var a="PointsMaterial:"+n.uuid,s=this.cache.get(a);s||(s=new pR,yT.prototype.copy.call(s,n),s.color.copy(n.color),s.map=n.map,s.sizeAttenuation=!1,this.cache.add(a,s)),n=s}else if(e.isLine){var u="LineBasicMaterial:"+n.uuid,l=this.cache.get(u);l||(l=new rR,yT.prototype.copy.call(l,n),l.color.copy(n.color),this.cache.add(u,l)),n=l}if(r||i||o){var c="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(c+="specular-glossiness:"),r&&(c+="derivative-tangents:"),i&&(c+="vertex-colors:"),o&&(c+="flat-shading:");var h=this.cache.get(c);h||(h=n.clone(),i&&(h.vertexColors=!0),o&&(h.flatShading=!0),r&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(c,h),this.associations.set(h,this.associations.get(n))),n=h}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}},{key:"getMaterialType",value:function(){return QP}},{key:"loadMaterial",value:function(e){var t,n=this,r=this.json,i=this.extensions,o=r.materials[e],a={},s=o.extensions||{},u=[];if(s[ZB.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var l=i[ZB.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=l.getMaterialType(),u.push(l.extendParams(a,o,n))}else if(s[ZB.KHR_MATERIALS_UNLIT]){var c=i[ZB.KHR_MATERIALS_UNLIT];t=c.getMaterialType(),u.push(c.extendParams(a,o,n))}else{var h=o.pbrMetallicRoughness||{};if(a.color=new KS(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){var f=h.baseColorFactor;a.color.fromArray(f),a.opacity=f[3]}void 0!==h.baseColorTexture&&u.push(n.assignTexture(a,"map",h.baseColorTexture)),a.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,a.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture&&(u.push(n.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),u.push(n.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),u.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)}))))}!0===o.doubleSided&&(a.side=Ew);var d=o.alphaMode||OF;if(d===FF?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,d===BF&&(a.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&t!==bT&&(u.push(n.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new NS(1,1),void 0!==o.normalTexture.scale)){var p=o.normalTexture.scale;a.normalScale.set(p,p)}return void 0!==o.occlusionTexture&&t!==bT&&(u.push(n.assignTexture(a,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(a.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&t!==bT&&(a.emissive=(new KS).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&t!==bT&&u.push(n.assignTexture(a,"emissiveMap",o.emissiveTexture)),Promise.all(u).then((function(){var r;return r=t===mF?i[ZB.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new t(a),o.name&&(r.name=o.name),r.map&&(r.map.encoding=HE),r.emissiveMap&&(r.emissiveMap.encoding=HE),jF(r,o),n.associations.set(r,{materials:e}),o.extensions&&UF(i,r,o),r}))}},{key:"createUniqueName",value:function(e){for(var t=jN.sanitizeNodeName(e||""),n=t,r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[ZB.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return KF(n,e,t)}))}for(var o=[],a=0,s=e.length;a<s;a++){var u=e[a],l=GF(u),c=r[l];if(c)o.push(c.promise);else{var h=void 0;h=u.extensions&&u.extensions[ZB.KHR_DRACO_MESH_COMPRESSION]?i(u):KF(new jT,u,t),r[l]={primitive:u,promise:h},o.push(h)}}return Promise.all(o)}},{key:"loadMesh",value:function(e){for(var t,n=this,r=this.json,i=this.extensions,o=r.meshes[e],a=o.primitives,s=[],u=0,l=a.length;u<l;u++){var c=void 0===a[u].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new QP({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ww})),t.DefaultMaterial):this.getDependency("material",a[u].material);s.push(c)}return s.push(n.loadGeometries(a)),Promise.all(s).then((function(t){for(var r=t.slice(0,t.length-1),s=t[t.length-1],u=[],l=0,c=s.length;l<c;l++){var h=s[l],f=a[l],d=void 0,p=r[l];if(f.mode===TF||f.mode===CF||f.mode===MF||void 0===f.mode)!0!==(d=!0===o.isSkinnedMesh?new WI(h,p):new iC(h,p)).isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),f.mode===CF?d.geometry=JF(d.geometry,FE):f.mode===MF&&(d.geometry=JF(d.geometry,UE));else if(f.mode===EF)d=new fR(h,p);else if(f.mode===AF)d=new lR(h,p);else if(f.mode===SF)d=new dR(h,p);else{if(f.mode!==xF)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);d=new bR(h,p)}Object.keys(d.geometry.morphAttributes).length>0&&HF(d,o),d.name=n.createUniqueName(o.name||"mesh_"+e),jF(d,o),f.extensions&&UF(i,d,f),n.assignFinalMaterial(d),u.push(d)}for(var v=0,m=u.length;v<m;v++)n.associations.set(u[v],{meshes:e,primitives:v});if(1===u.length)return u[0];var g=new aI;n.associations.set(g,{meshes:e});for(var y=0,b=u.length;y<b;y++)g.add(u[y]);return g}))}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new fC(DS.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new OC(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),jF(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}},{key:"loadAnimation",value:function(e){for(var t=this.json.animations[e],n=[],r=[],i=[],o=[],a=[],s=0,u=t.channels.length;s<u;s++){var l=t.channels[s],c=t.samplers[l.sampler],h=l.target,f=void 0!==h.node?h.node:h.id,d=void 0!==t.parameters?t.parameters[c.input]:c.input,p=void 0!==t.parameters?t.parameters[c.output]:c.output;n.push(this.getDependency("node",f)),r.push(this.getDependency("accessor",d)),i.push(this.getDependency("accessor",p)),o.push(c),a.push(h)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(i),Promise.all(o),Promise.all(a)]).then((function(n){for(var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=[],l=function(e,t){var n=r[e],l=i[e],c=o[e],h=a[e],f=s[e];if(void 0===n)return"continue";n.updateMatrix(),n.matrixAutoUpdate=!0;var d=void 0;switch(NF[f.path]){case NF.weights:d=fD;break;case NF.rotation:d=pD;break;default:d=mD}var p=n.name?n.name:n.uuid,v=void 0!==h.interpolation?LF[h.interpolation]:IE,m=[];NF[f.path]===NF.weights?n.traverse((function(e){e.morphTargetInfluences&&m.push(e.name?e.name:e.uuid)})):m.push(p);var g=c.array;if(c.normalized){for(var y=VF(g.constructor),b=new Float32Array(g.length),_=0,w=g.length;_<w;_++)b[_]=g[_]*y;g=b}for(var x=0,E=m.length;x<E;x++){var S=new d(m[x]+"."+NF[f.path],l.array,g,v);"CUBICSPLINE"===h.interpolation&&(S.createInterpolant=function(e){return new(this instanceof pD?wF:bF)(this.times,this.values,this.getValueSize()/3,e)},S.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(S)}},c=0,h=r.length;c<h;c++)l(c);var f=t.name?t.name:"animation_"+e;return new gD(f,void 0,u)}))}},{key:"createNodeMesh",value:function(e){var t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}},{key:"loadNode",value:function(e){var t=this.json,n=this.extensions,r=this,i=t.nodes[e],o=i.name?r.createUniqueName(i.name):"";return function(){var t=[],n=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==i.camera&&t.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){var a;if((a=!0===i.isBone?new qI:t.length>1?new aI:1===t.length?t[0]:new oT)!==t[0])for(var s=0,u=t.length;s<u;s++)a.add(t[s]);if(i.name&&(a.userData.name=i.name,a.name=o),jF(a,i),i.extensions&&UF(n,a,i),void 0!==i.matrix){var l=new NA;l.fromArray(i.matrix),a.applyMatrix4(l)}else void 0!==i.translation&&a.position.fromArray(i.translation),void 0!==i.rotation&&a.quaternion.fromArray(i.rotation),void 0!==i.scale&&a.scale.fromArray(i.scale);return r.associations.has(a)||r.associations.set(a,{}),r.associations.get(a).nodes=e,a}))}},{key:"loadScene",value:function(e){var t=this.json,n=this.extensions,r=this.json.scenes[e],i=this,o=new aI;r.name&&(o.name=i.createUniqueName(r.name)),jF(o,r),r.extensions&&UF(n,o,r);for(var a=r.nodes||[],s=[],l=0,c=a.length;l<c;l++)s.push(qF(a[l],o,t,i));return Promise.all(s).then((function(){return i.associations=function(e){var t,n=new Map,r=q_(i.associations);try{for(r.s();!(t=r.n()).done;){var o=u(t.value,2),a=o[0],s=o[1];(a instanceof yT||a instanceof XS)&&n.set(a,s)}}catch(l){r.e(l)}finally{r.f()}return e.traverse((function(e){var t=i.associations.get(e);null!=t&&n.set(e,t)})),n}(o),o}))}}]),e}();function qF(e,t,n,r){var i=n.nodes[e];return r.getDependency("node",e).then((function(e){return void 0===i.skin?e:r.getDependency("skin",i.skin).then((function(e){for(var n=[],i=0,o=(t=e).joints.length;i<o;i++)n.push(r.getDependency("node",t.joints[i]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(e.isMesh){for(var r=[],i=[],o=0,a=n.length;o<a;o++){var s=n[o];if(s){r.push(s);var u=new NA;void 0!==t.inverseBindMatrices&&u.fromArray(t.inverseBindMatrices.array,16*o),i.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}e.bind(new XI(r,i),e.matrixWorld)}})),e}));var t})).then((function(e){t.add(e);var o=[];if(i.children)for(var a=i.children,s=0,u=a.length;s<u;s++){var l=a[s];o.push(qF(l,e,n,r))}return Promise.all(o)}))}function KF(e,t,n){var r=t.attributes,i=[];function o(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(var a in r){var s=DF[a]||a.toLowerCase();s in e.attributes||i.push(o(r[a],s))}if(void 0!==t.indices&&!e.index){var u=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(u)}return jF(e,t),function(e,t,n){var r=t.attributes,i=new aA;if(void 0!==r.POSITION){var o=n.json.accessors[r.POSITION],a=o.min,s=o.max;if(void 0!==a&&void 0!==s){if(i.set(new rA(a[0],a[1],a[2]),new rA(s[0],s[1],s[2])),o.normalized){var u=VF(kF[o.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}var l=t.targets;if(void 0!==l){for(var c=new rA,h=new rA,f=0,d=l.length;f<d;f++){var p=l[f];if(void 0!==p.POSITION){var v=n.json.accessors[p.POSITION],m=v.min,g=v.max;if(void 0!==m&&void 0!==g){if(h.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),h.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),h.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),v.normalized){var y=VF(kF[v.componentType]);h.multiplyScalar(y)}c.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(c)}e.boundingBox=i;var b=new AA;i.getCenter(b.center),b.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=b}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){for(var r=!1,i=!1,o=0,a=t.length;o<a;o++){var s=t[o];if(void 0!==s.POSITION&&(r=!0),void 0!==s.NORMAL&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(e);for(var u=[],l=[],c=0,h=t.length;c<h;c++){var f=t[c];if(r){var d=void 0!==f.POSITION?n.getDependency("accessor",f.POSITION):e.attributes.position;u.push(d)}if(i){var p=void 0!==f.NORMAL?n.getDependency("accessor",f.NORMAL):e.attributes.normal;l.push(p)}}return Promise.all([Promise.all(u),Promise.all(l)]).then((function(t){var n=t[0],o=t[1];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function JF(e,t){var n=e.getIndex();if(null===n){var r=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var o=0;o<i.count;o++)r.push(o);e.setIndex(r),n=e.getIndex()}var a=n.count-2,s=[];if(t===UE)for(var u=1;u<=a;u++)s.push(n.getX(0)),s.push(n.getX(u)),s.push(n.getX(u+1));else for(var l=0;l<a;l++)l%2===0?(s.push(n.getX(l)),s.push(n.getX(l+1)),s.push(n.getX(l+2))):(s.push(n.getX(l+2)),s.push(n.getX(l+1)),s.push(n.getX(l)));s.length/3!==a&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(s),c}var QF=null;function XF(e,t,n){return function(r){n&&n(r),e&&(QF||(QF=new KB),QF.setDecoderPath("string"===typeof e?e:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),r.setDRACOLoader(QF)),t&&r.setMeshoptDecoder(QB())}}function YF(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0,i=DB(XB,e,XF(t,n,r));return i}YF.preload=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0;return DB.preload(XB,e,XF(t,n,r))},YF.clear=function(e){return DB.clear(XB,e)};var ZF=function(e){tw(n,e);var t=ow(n);function n(e){var r;return Y_(this,n),(r=t.call(this,e)).type=Fx,r}return $_(n,[{key:"parse",value:function(e){var t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},n=function(e,t,n){t=t||1024;for(var r=e.pos,i=-1,o=0,a="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));0>(i=s.indexOf("\n"))&&o<t&&r<e.byteLength;)a+=s,o+=s.length,r+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<i&&(!1!==n&&(e.pos+=o+i+1),a+s.slice(0,i))},r=function(e,t,n,r){var i=e[t+3],o=Math.pow(2,i-128)/255;n[r+0]=e[t+0]*o,n[r+1]=e[t+1]*o,n[r+2]=e[t+2]*o,n[r+3]=1},i=function(e,t,n,r){var i=e[t+3],o=Math.pow(2,i-128)/255;n[r+0]=BL.toHalfFloat(Math.min(e[t+0]*o,65504)),n[r+1]=BL.toHalfFloat(Math.min(e[t+1]*o,65504)),n[r+2]=BL.toHalfFloat(Math.min(e[t+2]*o,65504)),n[r+3]=BL.toHalfFloat(1)},o=new Uint8Array(e);o.pos=0;var a=function(e){var r,i,o=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,u=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,l={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(r=n(e)))return t(1,"no header found");if(!(i=r.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(l.valid|=1,l.programtype=i[1],l.string+=r+"\n";!1!==(r=n(e));)if(l.string+=r+"\n","#"!==r.charAt(0)){if((i=r.match(o))&&(l.gamma=parseFloat(i[1],10)),(i=r.match(a))&&(l.exposure=parseFloat(i[1],10)),(i=r.match(s))&&(l.valid|=2,l.format=i[1]),(i=r.match(u))&&(l.valid|=4,l.height=parseInt(i[1],10),l.width=parseInt(i[2],10)),2&l.valid&&4&l.valid)break}else l.comments+=r+"\n";return 2&l.valid?4&l.valid?l:t(3,"missing image size specifier"):t(3,"missing format specifier")}(o);if(-1!==a){var s=a.width,u=a.height,l=function(e,n,r){var i=n;if(i<8||i>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(i!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");var o=new Uint8Array(4*n*r);if(!o.length)return t(4,"unable to allocate buffer space");for(var a=0,s=0,u=4*i,l=new Uint8Array(4),c=new Uint8Array(u),h=r;h>0&&s<e.byteLength;){if(s+4>e.byteLength)return t(1);if(l[0]=e[s++],l[1]=e[s++],l[2]=e[s++],l[3]=e[s++],2!=l[0]||2!=l[1]||(l[2]<<8|l[3])!=i)return t(3,"bad rgbe scanline format");for(var f=0,d=void 0;f<u&&s<e.byteLength;){var p=(d=e[s++])>128;if(p&&(d-=128),0===d||f+d>u)return t(3,"bad scanline data");if(p)for(var v=e[s++],m=0;m<d;m++)c[f++]=v;else c.set(e.subarray(s,s+d),f),f+=d,s+=d}for(var g=i,y=0;y<g;y++){var b=0;o[a]=c[y+b],b+=i,o[a+1]=c[y+b],b+=i,o[a+2]=c[y+b],b+=i,o[a+3]=c[y+b],a+=4}h--}return o}(o.subarray(o.pos),s,u);if(-1!==l){var c,h,f;switch(this.type){case Bx:f=l.length/4;for(var d=new Float32Array(4*f),p=0;p<f;p++)r(l,4*p,d,4*p);c=d,h=Bx;break;case Fx:f=l.length/4;for(var v=new Uint16Array(4*f),m=0;m<f;m++)i(l,4*m,v,3*m);c=v,h=Fx;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:s,height:u,data:c,header:a.string,gamma:a.gamma,exposure:a.exposure,format:undefined,type:h}}}return null}},{key:"setDataType",value:function(e){return this.type=e,this}},{key:"load",value:function(e,t,r,i){return X_(J_(n.prototype),"load",this).call(this,e,(function(e,n){switch(e.type){case Bx:case Fx:e.encoding=jE,e.minFilter=Tx,e.magFilter=Tx,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),r,i)}}]),n}(kD),$F={sunset:"venice/venice_sunset_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",night:"dikhololo/dikhololo_night_1k.hdr",warehouse:"empty-wharehouse/empty_warehouse_01_1k.hdr",forest:"forrest-slope/forest_slope_1k.hdr",apartment:"lebombo/lebombo_1k.hdr",studio:"studio-small-3/studio_small_03_1k.hdr",city:"potsdamer-platz/potsdamer_platz_1k.hdr",park:"rooitou/rooitou_park_1k.hdr",lobby:"st-fagans/st_fagans_interior_1k.hdr"};function eU(e){var n=e.background,r=void 0!==n&&n,i=e.files,o=void 0===i?["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"]:i,a=e.path,s=void 0===a?"":a,u=e.preset,l=void 0===u?void 0:u,c=e.scene,h=e.extensions;if(l){if(!(l in $F))throw new Error("Preset must be one of: "+Object.keys($F).join(", "));o=$F[l],s="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/"}var f=kB((function(e){return e.scene})),d=Array.isArray(o),p=DB(d?MD:ZF,d?[o]:o,(function(e){e.setPath(s),null==e.setDataType||e.setDataType(Bx),h&&h(e)})),v=d?p[0]:p;return v.mapping=px,t.useLayoutEffect((function(){var e=c?c.background:f.background,t=c?c.environment:f.environment;return c?(c.environment=v,r&&(c.background=v)):(f.environment=v,r&&(f.background=v)),function(){c?(c.environment=t,c.background=e):(f.environment=t,f.background=e),v.dispose()}}),[v,r,c]),null}var tU={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n      varying vec2 vUv;\n\n      void main() {\n\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n      }\n  ",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform float h;\n\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvec4 sum = vec4( 0.0 );\n\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n    \tgl_FragColor = sum;\n\n    }\n  "},nU={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n    varying vec2 vUv;\n\n    void main() {\n\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n  ",fragmentShader:"\n  \n  uniform sampler2D tDiffuse;\n  uniform float v;\n\n  varying vec2 vUv;\n\n  void main() {\n\n    vec4 sum = vec4( 0.0 );\n\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n    gl_FragColor = sum;\n\n  }\n  "},rU=["scale","frames","opacity","width","height","blur","far","resolution","smooth"],iU=t.forwardRef((function(e,n){var r=e.scale,i=e.frames,o=void 0===i?1/0:i,a=e.opacity,s=void 0===a?1:a,l=e.width,c=void 0===l?1:l,h=e.height,f=void 0===h?1:h,d=e.blur,p=void 0===d?1:d,v=e.far,m=void 0===v?10:v,g=e.resolution,y=void 0===g?256:g,b=e.smooth,_=void 0===b||b,w=CO(e,rU),x=kB((function(e){return e.scene})),E=kB((function(e){return e.gl})),S=t.useRef(null);c*=Array.isArray(r)?r[0]:r||1,f*=Array.isArray(r)?r[1]:r||1;var A=t.useMemo((function(){var e=new $S(y,y),t=new $S(y,y);t.texture.generateMipmaps=e.texture.generateMipmaps=!1;var n=new TC(c,f).rotateX(Math.PI/2),r=new iC(n),i=new $k;i.depthTest=i.depthWrite=!1,i.onBeforeCompile=function(e){return e.fragmentShader=e.fragmentShader.replace("1.0 - fragCoordZ ), opacity );","0.0 ), ( 1.0 - fragCoordZ ) * 1.0 );")};var o=new cC(tU),a=new cC(nU);return a.depthTest=o.depthTest=!1,[e,n,i,r,o,a,t]}),[y,c,f,r]),T=u(A,7),C=T[0],M=T[1],k=T[2],I=T[3],R=T[4],P=T[5],D=T[6],N=t.useCallback((function(e){I.visible=!0,I.material=R,R.uniforms.tDiffuse.value=C.texture,R.uniforms.h.value=1*e/256,E.setRenderTarget(D),E.render(I,S.current),I.material=P,P.uniforms.tDiffuse.value=D.texture,P.uniforms.v.value=1*e/256,E.setRenderTarget(C),E.render(I,S.current),I.visible=!1}),[]),L=0;return IB((function(){if(S.current&&(o===1/0||L<o)){var e=x.background;x.background=null,x.overrideMaterial=k,E.setRenderTarget(C),E.render(x,S.current),x.overrideMaterial=null,N(p),_&&N(.4*p),E.setRenderTarget(null),x.background=e,L++}})),t.createElement("group",Wb({"rotation-x":Math.PI/2},w,{ref:n}),t.createElement("mesh",{geometry:M,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},t.createElement("meshBasicMaterial",{map:C.texture,transparent:!0,opacity:s})),t.createElement("orthographicCamera",{ref:S,args:[-c/2,c/2,f/2,-f/2,0,m]}))})),oU=function(e,t){return(e%t+t)%t},aU=function(e){tw(n,e);var t=ow(n);function n(e,r){var i;Y_(this,n),z_(K_(i=t.call(this)),"object",void 0),z_(K_(i),"domElement",void 0),z_(K_(i),"enabled",!0),z_(K_(i),"target",new rA),z_(K_(i),"minDistance",0),z_(K_(i),"maxDistance",1/0),z_(K_(i),"minZoom",0),z_(K_(i),"maxZoom",1/0),z_(K_(i),"minPolarAngle",0),z_(K_(i),"maxPolarAngle",Math.PI),z_(K_(i),"minAzimuthAngle",-1/0),z_(K_(i),"maxAzimuthAngle",1/0),z_(K_(i),"enableDamping",!1),z_(K_(i),"dampingFactor",.05),z_(K_(i),"enableZoom",!0),z_(K_(i),"zoomSpeed",1),z_(K_(i),"enableRotate",!0),z_(K_(i),"rotateSpeed",1),z_(K_(i),"enablePan",!0),z_(K_(i),"panSpeed",1),z_(K_(i),"screenSpacePanning",!0),z_(K_(i),"keyPanSpeed",7),z_(K_(i),"autoRotate",!1),z_(K_(i),"autoRotateSpeed",2),z_(K_(i),"reverseOrbit",!1),z_(K_(i),"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),z_(K_(i),"mouseButtons",{LEFT:hw.ROTATE,MIDDLE:hw.DOLLY,RIGHT:hw.PAN}),z_(K_(i),"touches",{ONE:fw.ROTATE,TWO:fw.DOLLY_PAN}),z_(K_(i),"target0",void 0),z_(K_(i),"position0",void 0),z_(K_(i),"zoom0",void 0),z_(K_(i),"_domElementKeyEvents",null),z_(K_(i),"getPolarAngle",void 0),z_(K_(i),"getAzimuthalAngle",void 0),z_(K_(i),"setPolarAngle",void 0),z_(K_(i),"setAzimuthalAngle",void 0),z_(K_(i),"getDistance",void 0),z_(K_(i),"listenToKeyEvents",void 0),z_(K_(i),"saveState",void 0),z_(K_(i),"reset",void 0),z_(K_(i),"update",void 0),z_(K_(i),"connect",void 0),z_(K_(i),"dispose",void 0),i.object=e,i.domElement=r,i.target0=i.target.clone(),i.position0=i.object.position.clone(),i.zoom0=i.object instanceof fC?i.object.zoom:1,i.getPolarAngle=function(){return f.phi},i.getAzimuthalAngle=function(){return f.theta},i.setPolarAngle=function(e){var t=oU(e,2*Math.PI),n=f.phi;n<0&&(n+=2*Math.PI),t<0&&(t+=2*Math.PI);var r=Math.abs(t-n);2*Math.PI-r<r&&(t<n?t+=2*Math.PI:n+=2*Math.PI),d.phi=t-n,o.update()},i.setAzimuthalAngle=function(e){var t=oU(e,2*Math.PI),n=f.theta;n<0&&(n+=2*Math.PI),t<0&&(t+=2*Math.PI);var r=Math.abs(t-n);2*Math.PI-r<r&&(t<n?t+=2*Math.PI:n+=2*Math.PI),d.theta=t-n,o.update()},i.getDistance=function(){return o.object.position.distanceTo(o.target)},i.listenToKeyEvents=function(e){e.addEventListener("keydown",Q),i._domElementKeyEvents=e},i.saveState=function(){o.target0.copy(o.target),o.position0.copy(o.object.position),o.zoom0=o.object instanceof fC?o.object.zoom:1},i.reset=function(){o.target.copy(o.target0),o.object.position.copy(o.position0),o.object instanceof fC&&(o.object.zoom=o.zoom0,o.object.updateProjectionMatrix()),o.dispatchEvent(a),o.update(),c=l.NONE},i.update=function(){var t=new rA,n=(new nA).setFromUnitVectors(e.up,new rA(0,1,0)),r=n.clone().invert(),i=new rA,s=new nA,u=2*Math.PI;return function(){var e=o.object.position;t.copy(e).sub(o.target),t.applyQuaternion(n),f.setFromVector3(t),o.autoRotate&&c===l.NONE&&k(2*Math.PI/60/60*o.autoRotateSpeed),o.enableDamping?(f.theta+=d.theta*o.dampingFactor,f.phi+=d.phi*o.dampingFactor):(f.theta+=d.theta,f.phi+=d.phi);var g=o.minAzimuthAngle,y=o.maxAzimuthAngle;return isFinite(g)&&isFinite(y)&&(g<-Math.PI?g+=u:g>Math.PI&&(g-=u),y<-Math.PI?y+=u:y>Math.PI&&(y-=u),f.theta=g<=y?Math.max(g,Math.min(y,f.theta)):f.theta>(g+y)/2?Math.max(g,f.theta):Math.min(y,f.theta)),f.phi=Math.max(o.minPolarAngle,Math.min(o.maxPolarAngle,f.phi)),f.makeSafe(),f.radius*=p,f.radius=Math.max(o.minDistance,Math.min(o.maxDistance,f.radius)),!0===o.enableDamping?o.target.addScaledVector(v,o.dampingFactor):o.target.add(v),t.setFromSpherical(f),t.applyQuaternion(r),e.copy(o.target).add(t),o.object.lookAt(o.target),!0===o.enableDamping?(d.theta*=1-o.dampingFactor,d.phi*=1-o.dampingFactor,v.multiplyScalar(1-o.dampingFactor)):(d.set(0,0,0),v.set(0,0,0)),p=1,!!(m||i.distanceToSquared(o.object.position)>h||8*(1-s.dot(o.object.quaternion))>h)&&(o.dispatchEvent(a),i.copy(o.object.position),s.copy(o.object.quaternion),m=!1,!0)}}(),i.connect=function(e){e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),o.domElement=e,o.domElement.style.touchAction="none",o.domElement.addEventListener("contextmenu",X),o.domElement.addEventListener("pointerdown",V),o.domElement.addEventListener("pointercancel",K),o.domElement.addEventListener("wheel",J)},i.dispose=function(){var e,t,n,r,i,a;null===(e=o.domElement)||void 0===e||e.removeEventListener("contextmenu",X),null===(t=o.domElement)||void 0===t||t.removeEventListener("pointerdown",V),null===(n=o.domElement)||void 0===n||n.removeEventListener("pointercancel",K),null===(r=o.domElement)||void 0===r||r.removeEventListener("wheel",J),null===(i=o.domElement)||void 0===i||i.ownerDocument.removeEventListener("pointermove",W),null===(a=o.domElement)||void 0===a||a.ownerDocument.removeEventListener("pointerup",q),null!==o._domElementKeyEvents&&o._domElementKeyEvents.removeEventListener("keydown",Q)};var o=K_(i),a={type:"change"},s={type:"start"},u={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},c=l.NONE,h=1e-6,f=new XN,d=new XN,p=1,v=new rA,m=!1,g=new NS,y=new NS,b=new NS,_=new NS,w=new NS,x=new NS,E=new NS,S=new NS,A=new NS,T=[],C={};function M(){return Math.pow(.95,o.zoomSpeed)}function k(e){o.reverseOrbit?d.theta+=e:d.theta-=e}function I(e){o.reverseOrbit?d.phi+=e:d.phi-=e}var R=function(){var e=new rA;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),v.add(e)}}(),P=function(){var e=new rA;return function(t,n){!0===o.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(o.object.up,e)),e.multiplyScalar(t),v.add(e)}}(),D=function(){var e=new rA;return function(t,n){var r=o.domElement;if(r&&o.object instanceof fC&&o.object.isPerspectiveCamera){var i=o.object.position;e.copy(i).sub(o.target);var a=e.length();a*=Math.tan(o.object.fov/2*Math.PI/180),R(2*t*a/r.clientHeight,o.object.matrix),P(2*n*a/r.clientHeight,o.object.matrix)}else r&&o.object instanceof OC&&o.object.isOrthographicCamera?(R(t*(o.object.right-o.object.left)/o.object.zoom/r.clientWidth,o.object.matrix),P(n*(o.object.top-o.object.bottom)/o.object.zoom/r.clientHeight,o.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),o.enablePan=!1)}}();function N(e){o.object instanceof fC&&o.object.isPerspectiveCamera?p/=e:o.object instanceof OC&&o.object.isOrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom*e)),o.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function L(e){o.object instanceof fC&&o.object.isPerspectiveCamera?p*=e:o.object instanceof OC&&o.object.isOrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/e)),o.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function O(e){g.set(e.clientX,e.clientY)}function B(e){_.set(e.clientX,e.clientY)}function F(){if(1==T.length)g.set(T[0].pageX,T[0].pageY);else{var e=.5*(T[0].pageX+T[1].pageX),t=.5*(T[0].pageY+T[1].pageY);g.set(e,t)}}function U(){if(1==T.length)_.set(T[0].pageX,T[0].pageY);else{var e=.5*(T[0].pageX+T[1].pageX),t=.5*(T[0].pageY+T[1].pageY);_.set(e,t)}}function j(){var e=T[0].pageX-T[1].pageX,t=T[0].pageY-T[1].pageY,n=Math.sqrt(e*e+t*t);E.set(0,n)}function H(e){if(1==T.length)y.set(e.pageX,e.pageY);else{var t=$(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);y.set(n,r)}b.subVectors(y,g).multiplyScalar(o.rotateSpeed);var i=o.domElement;i&&(k(2*Math.PI*b.x/i.clientHeight),I(2*Math.PI*b.y/i.clientHeight)),g.copy(y)}function G(e){if(1==T.length)w.set(e.pageX,e.pageY);else{var t=$(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);w.set(n,r)}x.subVectors(w,_).multiplyScalar(o.panSpeed),D(x.x,x.y),_.copy(w)}function z(e){var t=$(e),n=e.pageX-t.x,r=e.pageY-t.y,i=Math.sqrt(n*n+r*r);S.set(0,i),A.set(0,Math.pow(S.y/E.y,o.zoomSpeed)),N(A.y),E.copy(S)}function V(e){if(!1!==o.enabled){var t,n;if(0===T.length)null===(t=o.domElement)||void 0===t||t.ownerDocument.addEventListener("pointermove",W),null===(n=o.domElement)||void 0===n||n.ownerDocument.addEventListener("pointerup",q);!function(e){T.push(e)}(e),"touch"===e.pointerType?function(e){switch(Z(e),T.length){case 1:switch(o.touches.ONE){case fw.ROTATE:if(!1===o.enableRotate)return;F(),c=l.TOUCH_ROTATE;break;case fw.PAN:if(!1===o.enablePan)return;U(),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(o.touches.TWO){case fw.DOLLY_PAN:if(!1===o.enableZoom&&!1===o.enablePan)return;o.enableZoom&&j(),o.enablePan&&U(),c=l.TOUCH_DOLLY_PAN;break;case fw.DOLLY_ROTATE:if(!1===o.enableZoom&&!1===o.enableRotate)return;o.enableZoom&&j(),o.enableRotate&&F(),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&o.dispatchEvent(s)}(e):function(e){var t;switch(e.button){case 0:t=o.mouseButtons.LEFT;break;case 1:t=o.mouseButtons.MIDDLE;break;case 2:t=o.mouseButtons.RIGHT;break;default:t=-1}switch(t){case hw.DOLLY:if(!1===o.enableZoom)return;!function(e){E.set(e.clientX,e.clientY)}(e),c=l.DOLLY;break;case hw.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===o.enablePan)return;B(e),c=l.PAN}else{if(!1===o.enableRotate)return;O(e),c=l.ROTATE}break;case hw.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===o.enableRotate)return;O(e),c=l.ROTATE}else{if(!1===o.enablePan)return;B(e),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&o.dispatchEvent(s)}(e)}}function W(e){!1!==o.enabled&&("touch"===e.pointerType?function(e){switch(Z(e),c){case l.TOUCH_ROTATE:if(!1===o.enableRotate)return;H(e),o.update();break;case l.TOUCH_PAN:if(!1===o.enablePan)return;G(e),o.update();break;case l.TOUCH_DOLLY_PAN:if(!1===o.enableZoom&&!1===o.enablePan)return;!function(e){o.enableZoom&&z(e),o.enablePan&&G(e)}(e),o.update();break;case l.TOUCH_DOLLY_ROTATE:if(!1===o.enableZoom&&!1===o.enableRotate)return;!function(e){o.enableZoom&&z(e),o.enableRotate&&H(e)}(e),o.update();break;default:c=l.NONE}}(e):function(e){if(!1===o.enabled)return;switch(c){case l.ROTATE:if(!1===o.enableRotate)return;!function(e){y.set(e.clientX,e.clientY),b.subVectors(y,g).multiplyScalar(o.rotateSpeed);var t=o.domElement;t&&(k(2*Math.PI*b.x/t.clientHeight),I(2*Math.PI*b.y/t.clientHeight)),g.copy(y),o.update()}(e);break;case l.DOLLY:if(!1===o.enableZoom)return;!function(e){S.set(e.clientX,e.clientY),A.subVectors(S,E),A.y>0?N(M()):A.y<0&&L(M()),E.copy(S),o.update()}(e);break;case l.PAN:if(!1===o.enablePan)return;!function(e){w.set(e.clientX,e.clientY),x.subVectors(w,_).multiplyScalar(o.panSpeed),D(x.x,x.y),_.copy(w),o.update()}(e)}}(e))}function q(e){var t,n,r;(Y(e),0===T.length)&&(null===(t=o.domElement)||void 0===t||t.releasePointerCapture(e.pointerId),null===(n=o.domElement)||void 0===n||n.ownerDocument.removeEventListener("pointermove",W),null===(r=o.domElement)||void 0===r||r.ownerDocument.removeEventListener("pointerup",q));o.dispatchEvent(u),c=l.NONE}function K(e){Y(e)}function J(e){!1===o.enabled||!1===o.enableZoom||c!==l.NONE&&c!==l.ROTATE||(e.preventDefault(),o.dispatchEvent(s),function(e){e.deltaY<0?L(M()):e.deltaY>0&&N(M()),o.update()}(e),o.dispatchEvent(u))}function Q(e){!1!==o.enabled&&!1!==o.enablePan&&function(e){var t=!1;switch(e.code){case o.keys.UP:D(0,o.keyPanSpeed),t=!0;break;case o.keys.BOTTOM:D(0,-o.keyPanSpeed),t=!0;break;case o.keys.LEFT:D(o.keyPanSpeed,0),t=!0;break;case o.keys.RIGHT:D(-o.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),o.update())}(e)}function X(e){!1!==o.enabled&&e.preventDefault()}function Y(e){delete C[e.pointerId];for(var t=0;t<T.length;t++)if(T[t].pointerId==e.pointerId)return void T.splice(t,1)}function Z(e){var t=C[e.pointerId];void 0===t&&(t=new NS,C[e.pointerId]=t),t.set(e.pageX,e.pageY)}function $(e){var t=e.pointerId===T[0].pointerId?T[1]:T[0];return C[t.pointerId]}return void 0!==r&&i.connect(r),i.update(),i}return $_(n)}(_S),sU=["makeDefault","camera","regress","domElement","enableDamping","onChange","onStart","onEnd"],uU=(0,t.forwardRef)((function(e,n){var r=e.makeDefault,i=e.camera,o=e.regress,a=e.domElement,s=e.enableDamping,u=void 0===s||s,l=e.onChange,c=e.onStart,h=e.onEnd,f=CO(e,sU),d=kB((function(e){return e.invalidate})),p=kB((function(e){return e.camera})),v=kB((function(e){return e.gl})),m=kB((function(e){return e.events})),g=kB((function(e){return e.set})),y=kB((function(e){return e.get})),b=kB((function(e){return e.performance})),_=i||p,w=a||("boolean"!==typeof m.connected?m.connected:v.domElement),x=(0,t.useMemo)((function(){return new aU(_)}),[_]);return IB((function(){x.enabled&&x.update()})),(0,t.useEffect)((function(){var e=function(e){d(),o&&b.regress(),l&&l(e)};return x.connect(w),x.addEventListener("change",e),c&&x.addEventListener("start",c),h&&x.addEventListener("end",h),function(){x.removeEventListener("change",e),c&&x.removeEventListener("start",c),h&&x.removeEventListener("end",h),x.dispose()}}),[w,l,c,h,o,x,d]),(0,t.useEffect)((function(){if(r){var e=y().controls;return g({controls:x}),function(){return g({controls:e})}}}),[r,x]),t.createElement("primitive",Wb({ref:n,object:x,enableDamping:u},f))})),lU=Symbol(),cU=Symbol(),hU=Symbol(),fU=Object.getPrototypeOf,dU=new WeakMap,pU=function(e){return e&&(dU.has(e)?dU.get(e):fU(e)===Object.prototype||fU(e)===Array.prototype)},vU=function(e){return"object"==typeof e&&null!==e},mU=function(e,t){var n=!1,r=function(t,r){if(!n){var i=t.a.get(e);i||(i=new Set,t.a.set(e,i)),i.add(r)}},i={f:t,get:function(t,n){return n===hU?e:(r(this,n),gU(t[n],this.a,this.c))},has:function(t,i){return i===cU?(n=!0,this.a.delete(e),!0):(r(this,i),i in t)},ownKeys:function(e){return r(this,lU),Reflect.ownKeys(e)}};return t&&(i.set=i.deleteProperty=function(){return!1}),i},gU=function(e,t,n){if(!pU(e))return e;var r=e[hU]||e,i=function(e){return Object.isFrozen(e)||Object.values(Object.getOwnPropertyDescriptors(e)).some((function(e){return!e.writable}))}(r),o=n&&n.get(r);return o&&o.f===i||((o=mU(r,i)).p=new Proxy(i?function(e){if(Array.isArray(e))return Array.from(e);var t=Object.getOwnPropertyDescriptors(e);return Object.values(t).forEach((function(e){e.configurable=!0})),Object.create(fU(e),t)}(r):r,o),n&&n.set(r,o)),o.a=t,o.c=n,o.p},yU=function(e,t){var n=Reflect.ownKeys(e),r=Reflect.ownKeys(t);return n.length!==r.length||n.some((function(e,t){return e!==r[t]}))},bU=function e(t,n,r,i){if(Object.is(t,n))return!1;if(!vU(t)||!vU(n))return!0;var o=r.get(t);if(!o)return!0;if(i){var a=i.get(t);if(a&&a.n===n)return a.g;i.set(t,{n:n,g:!1})}var s,u=null,l=q_(o);try{for(l.s();!(s=l.n()).done;){var c=s.value,h=c===lU?yU(t,n):e(t[c],n[c],r,i);if(!0!==h&&!1!==h||(u=h),u)break}}catch(f){l.e(f)}finally{l.f()}return null===u&&(u=!0),i&&i.set(t,{n:n,g:u}),u},_U=function(e){return pU(e)&&e[hU]||null},wU=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];dU.set(e,t)},xU=Symbol(),EU=Symbol(),SU=Symbol(),AU=Symbol(),TU=Symbol(),CU=Symbol(),MU=new WeakSet;var kU=function(e){return"object"===typeof e&&null!==e},IU=function(e){return kU(e)&&!MU.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)},RU=new WeakMap,PU=1,DU=new WeakMap;function NU(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!kU(e))throw new Error("object required");var t=RU.get(e);if(t)return t;var n=PU,r=new Set,i=function(e,t){t||(t=++PU),n!==t&&(n=t,r.forEach((function(n){return n(e,t)})))},o=new Map,a=function(e){var t=o.get(e);return t||(t=function(t,n){var r=MO(t);r[1]=[e].concat(MO(r[1])),i(r,n)},o.set(e,t)),t},s=function(e){var t=o.get(e);return o.delete(e),t},u=function(e,t){var r=DU.get(t);if((null==r?void 0:r[0])===n)return r[1];var i=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return wU(i,!0),DU.set(t,[n,i]),Reflect.ownKeys(e).forEach((function(n){var r=Reflect.get(e,n,t);if(MU.has(r))wU(r,!1),i[n]=r;else if(r instanceof Promise)if(TU in r)i[n]=r[TU];else{var o=r[CU]||r;Object.defineProperty(i,n,{get:function(){if(TU in r)return r[TU];throw o}})}else(null==r?void 0:r[EU])?i[n]=r[SU]:i[n]=r})),Object.freeze(i),i},l=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e)),c={get:function(e,t,i){return t===xU?n:t===EU?r:t===SU?u(e,i):t===AU?c:Reflect.get(e,t,i)},deleteProperty:function(e,t){var n=Reflect.get(e,t),r=null==n?void 0:n[EU];r&&r.delete(s(t));var o=Reflect.deleteProperty(e,t);return o&&i(["delete",[t],n]),o},is:Object.is,canProxy:IU,set:function(e,t,n,r){var o,u=Reflect.get(e,t,r);if(this.is(u,n))return!0;var l,c=null==u?void 0:u[EU];return c&&c.delete(s(t)),kU(n)&&(n=_U(n)||n),(null==(o=Object.getOwnPropertyDescriptor(e,t))?void 0:o.set)?l=n:n instanceof Promise?l=n.then((function(e){return l[TU]=e,i(["resolve",[t],e]),e})).catch((function(e){l[CU]=e,i(["reject",[t],e])})):(null==n?void 0:n[EU])?(l=n)[EU].add(a(t)):this.canProxy(n)?(l=NU(n))[EU].add(a(t)):l=n,Reflect.set(e,t,l,r),i(["set",[t],n,u]),!0}},h=new Proxy(l,c);return RU.set(e,h),Reflect.ownKeys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);n.get||n.set?Object.defineProperty(l,t,n):h[t]=e[t]})),h}function LU(e){return kU(e)?e[xU]:void 0}function OU(e){return(null==e?void 0:e[SU])||console.warn("Please use proxy object"),e[SU]}var BU="_uMS_T",FU="_uMS_V";var UU="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?t.useEffect:t.useLayoutEffect,jU=function(e,n){var r=(0,t.useRef)();(0,t.useEffect)((function(){r.current=function(e,t){var n=[];return function e(r,i){var o=t.get(r);o?o.forEach((function(t){e(r[t],i?[].concat(MO(i),[t]):[t])})):i&&n.push(i)}(e),n}(e,n)})),(0,t.useDebugValue)(r.current)},HU=new WeakMap,GU=function(e){return HU.has(e)||HU.set(e,function(e,t){var n;return z_(n={},BU,e),z_(n,FU,t),n}(e,LU)),HU.get(e)};function zU(e,n){var r=(0,t.useReducer)((function(e){return e+1}),0)[1],i=new WeakMap,o=(0,t.useRef)(),a=(0,t.useRef)(),s=(0,t.useRef)();UU((function(){s.current=a.current=OU(e)}),[e]),UU((function(){o.current=i,a.current!==s.current&&bU(a.current,s.current,i,new WeakMap)&&(a.current=s.current,r())}));var l=null==n?void 0:n.sync,c=(0,t.useCallback)((function(e,t){return function(e,t,n){var r;(null==e?void 0:e[EU])||console.warn("Please use proxy object");var i=[],o=function(e){i.push(e),n?t(i.splice(0)):r||(r=Promise.resolve().then((function(){r=void 0,t(i.splice(0))})))};return e[EU].add(o),function(){e[EU].delete(o)}}(e,(function(){var n=OU(e);s.current=n;try{if(o.current&&!bU(a.current,n,o.current,new WeakMap))return}catch(lU){}a.current=n,t()}),l)}),[l]),h=function(e,n,r){var i=(0,t.useRef)(),o=e._uMS_V(e._uMS_T),a=u((0,t.useState)((function(){return[e,n,r,o,n(e._uMS_T)]})),2),s=a[0],l=a[1],c=s[4];return s[0]!==e||s[1]!==n||s[2]!==r?(c=n(e._uMS_T),l([e,n,r,o,c])):o!==s[3]&&o!==i.current&&(c=n(e._uMS_T),Object.is(c,s[4])||l([e,n,r,o,c])),(0,t.useEffect)((function(){var t=!1,o=function(){if(!t)try{var o=n(e._uMS_T),a=e._uMS_V(e._uMS_T);i.current=a,l((function(t){return t[0]!==e||t[1]!==n||t[2]!==r||Object.is(t[4],o)?t:[t[0],t[1],t[2],a,o]}))}catch(lU){l((function(e){return MO(e)}))}},a=r(e._uMS_T,o);return o(),function(){t=!0,a()}}),[e,n,r]),c}(GU(e),OU,c);jU(h,i);var f=(0,t.useMemo)((function(){return new WeakMap}),[]);return gU(h,i,f)}var VU=NU({current:null});function WU(e){var n=Object.assign({},e),r=(0,t.useRef)(),i=YF("/brain_project/scene.gltf"),o=i.nodes,a=(i.materials,u((0,t.useState)(null),2)),s=a[0],l=a[1];return console.log(s),(0,D_.jsx)("group",W_(W_({ref:r},n),{},{dispose:null,onPointerOver:function(e){return e.stopPropagation(),l(e.object.material.name)},onPointerOut:function(e){return 0===e.intersections.length&&l(null)},onPointerMissed:function(){return VU.current=null},onPointerDown:function(e){return e.stopPropagation(),VU.current=e.object.material.name},children:(0,D_.jsx)("group",{rotation:[-Math.PI/2,0,0],children:(0,D_.jsxs)("group",{rotation:[Math.PI/2,0,0],children:[(0,D_.jsx)("mesh",{geometry:o.Brain_Part_01_Colour_Brain_Texture_0.geometry,material:o.Brain_Part_01_Colour_Brain_Texture_0.material}),(0,D_.jsx)("mesh",{geometry:o.Brain_Part_02_Colour_Brain_Texture_0.geometry,material:o.Brain_Part_02_Colour_Brain_Texture_0.material}),(0,D_.jsx)("mesh",{geometry:o.Brain_Part_03_Colour_Brain_Texture_0.geometry,material:o.Brain_Part_03_Colour_Brain_Texture_0.material}),(0,D_.jsx)("mesh",{geometry:o.Brain_Part_04_Colour_Brain_Texture_0.geometry,material:o.Brain_Part_04_Colour_Brain_Texture_0.material}),(0,D_.jsx)("mesh",{geometry:o.Brain_Part_05_Colour_Brain_Texture_0.geometry,material:o.Brain_Part_05_Colour_Brain_Texture_0.material}),(0,D_.jsx)("mesh",{geometry:o.Brain_Part_06_Colour_Brain_Texture_0.geometry,material:o.Brain_Part_06_Colour_Brain_Texture_0.material})]})})}))}function qU(){return"Colour_Brain_Texture_0"===zU(VU).current?(0,D_.jsx)("div",{className:"h-full md:flex md:flex-col md:justify-center",children:(0,D_.jsx)("h1",{className:"text-3xl uppercase",children:"Front Lobe"})}):(0,D_.jsxs)("div",{className:"h-full md:flex md:flex-col md:justify-center",children:[(0,D_.jsx)("h1",{className:"text-2xl tracking-wider",children:"Click on diffrent parts of 3D model to know more"}),(0,D_.jsx)("p",{className:"self-center mx-8 text-xl tracking-wide text-justify",children:"To view the 3D model in AR, scan the QR code or click on the button below."}),(0,D_.jsxs)("div",{className:"grid justify-center grid-cols-1 gap-2 pb-8 mx-8 md:grid-cols-2 lg:grid-cols-2",children:[(0,D_.jsx)("img",{className:"flex p-6 text-6xl rounded-xl h-48 w-48",src:"https://storage.echo3d.co/morning-hill-2019/5b4aded6-0a68-4f72-9446-2b31a6366f5a.png",alt:"QR Code"}),(0,D_.jsx)("a",{href:"https://go.echo3d.co/xmyz",target:"_blank",rel:"noreferrer",children:(0,D_.jsx)("button",{className:"h-12 px-8 ml-8 text-base font-semibold tracking-wider text-white border rounded-full shadow-sm mt-16 bg-red-50 bg-gradient-to-r from-purple-400 via-purple-500 to-pink-500  hover:shadow-lg",children:"View in AR"})})]})]})}function KU(){return(0,D_.jsx)(D_.Fragment,{children:(0,D_.jsxs)("div",{className:"pt-8 text-white",children:[(0,D_.jsx)(P_,{to:"/learn",className:"ml-8",children:"Go Back"}),(0,D_.jsxs)("div",{className:"grid w-full py-10 place-items-center",children:[(0,D_.jsx)("h1",{className:"pb-2 text-5xl font-semibold tracking-wide font-carattere lg:text-6xl",children:"Brain"}),(0,D_.jsx)("div",{className:"inline-flex h-1 bg-secondary rounded-full w-36"}),(0,D_.jsx)("div",{className:"text-justify text-xl w-86 mt-2 mx-4 md:mx-44",children:"A brain is an organ that serves as the center of the nervous system in all vertebrate and most invertebrate animals. It is located in the head, usually close to the sensory organs for senses such as vision. It is the most complex organ in a vertebrate's body. In a human, the cerebral cortex contains approximately 14-16 billion neurons, and the estimated number of neurons in the cerebellum is 55-70 billion."})]}),(0,D_.jsxs)("div",{className:"md:grid md:grid-cols-3 md:pr-15 pr-1",children:[(0,D_.jsx)("div",{className:"w-full h-128 px-4 outline-none cursor-grab md:col-span-2 lg:block",children:(0,D_.jsxs)(CB,{shadows:!0,dpr:[1,2],camera:{position:[0,0,4],fov:50},children:[(0,D_.jsx)("ambientLight",{intensity:.7}),(0,D_.jsx)("spotLight",{intensity:.5,angle:.1,penumbra:1,position:[10,10,10],castShadow:!0}),(0,D_.jsxs)(t.Suspense,{fallback:null,children:[(0,D_.jsx)(WU,{scale:1.5}),(0,D_.jsx)(eU,{preset:"city"}),(0,D_.jsx)(iU,{"rotation-x":Math.PI/2,position:[0,-.8,0],opacity:.25,width:10,height:10,blur:1.5,far:.8})]}),(0,D_.jsx)(uU,{autoRotate:!0})]})}),(0,D_.jsx)("div",{className:"mt-16 md:mt-0 md:col-span-1 p-4",children:(0,D_.jsx)(qU,{})})]})]})})}var JU=NU({current:null});function QU(e){var n=Object.assign({},e),r=(0,t.useRef)(),i=YF("/siddartha_human_lungs/scene.gltf"),o=i.nodes,a=i.materials,s=function(e,n){var r=t.useRef(),i=u(t.useState((function(){return n?n instanceof oT?{current:n}:n:r})),1)[0],o=u(t.useState((function(){return new zN(void 0)})),1)[0],a=t.useRef({}),s=t.useState((function(){var t={};return e.forEach((function(e){return Object.defineProperty(t,e.name,{enumerable:!0,get:function(){if(i.current)return a.current[e.name]||(a.current[e.name]=o.clipAction(e,i.current))}})})),{ref:i,clips:e,actions:t,names:e.map((function(e){return e.name})),mixer:o}})),l=u(s,1)[0];return IB((function(e,t){return o.update(t)})),t.useEffect((function(){var e=i.current;return function(){a.current={},Object.values(l.actions).forEach((function(t){e&&o.uncacheAction(t,e)}))}}),[e]),l}(i.animations,r),l=(s.actions,u((0,t.useState)(null),2)),c=l[0],h=l[1];return console.log(c),(0,D_.jsx)("group",W_(W_({ref:r},n),{},{dispose:null,onPointerOver:function(e){return e.stopPropagation(),h(e.object.material.name)},onPointerOut:function(e){return 0===e.intersections.length&&h(null)},onPointerMissed:function(){return JU.current=null},onPointerDown:function(e){return e.stopPropagation(),JU.current=e.object.material.name},children:(0,D_.jsx)("group",{rotation:[-Math.PI/2,0,0],children:(0,D_.jsxs)("group",{rotation:[Math.PI/2,0,0],children:[(0,D_.jsx)("group",{position:[0,.1,-.01],children:(0,D_.jsx)("mesh",{geometry:o.Object_16.geometry,material:a["Material.007"]})}),(0,D_.jsx)("group",{rotation:[Math.PI/2,0,0],scale:.01,children:(0,D_.jsx)("mesh",{geometry:o.Object_4.geometry,material:o.Object_4.material})}),(0,D_.jsx)("group",{rotation:[Math.PI/2,0,0],scale:.01,children:(0,D_.jsx)("mesh",{geometry:o.Object_6.geometry,material:a["Material.002"]})}),(0,D_.jsx)("group",{rotation:[Math.PI/2,0,0],scale:.01,children:(0,D_.jsx)("mesh",{geometry:o.Object_8.geometry,material:o.Object_8.material})}),(0,D_.jsx)("group",{rotation:[Math.PI/2,0,0],scale:.01,children:(0,D_.jsx)("mesh",{geometry:o.Object_10.geometry,material:o.Object_10.material})}),(0,D_.jsx)("group",{rotation:[Math.PI/2,0,0],scale:.01,children:(0,D_.jsx)("mesh",{geometry:o.Object_12.geometry,material:a["Material.001"]})}),(0,D_.jsx)("group",{rotation:[Math.PI/2,0,0],scale:.01,children:(0,D_.jsx)("mesh",{geometry:o.Object_14.geometry,material:a.pasted__Respiratoy_Bronchi_mat})})]})})}))}function XU(){var e=zU(JU);return"Material.007"===e.current?(0,D_.jsx)("div",{className:"h-full md:flex md:flex-col md:justify-center",children:(0,D_.jsx)("h1",{className:"text-3xl uppercase",children:"Lung"})}):"Material.001"===e.current?(0,D_.jsx)("div",{className:"h-full md:flex md:flex-col md:justify-center",children:(0,D_.jsx)("h1",{className:"text-3xl uppercase",children:"Trachea"})}):"Material.009"===e.current?(0,D_.jsx)("div",{className:"h-full md:flex md:flex-col md:justify-center",children:(0,D_.jsx)("h1",{className:"text-3xl uppercase",children:"Larynx"})}):(0,D_.jsxs)("div",{className:"h-full md:flex md:flex-col md:justify-center",children:[(0,D_.jsx)("h1",{className:"text-2xl tracking-wider",children:"Click on diffrent parts of 3D model to know more"}),(0,D_.jsx)("p",{className:"self-center mx-8 text-xl tracking-wide text-justify",children:"To view the 3D model in AR, scan the QR code or click on the button below."}),(0,D_.jsxs)("div",{className:"grid justify-center grid-cols-1 gap-2 pb-8 mx-8 md:grid-cols-2 lg:grid-cols-2",children:[(0,D_.jsx)("img",{className:"flex p-6 text-6xl rounded-xl h-48 w-48",src:"https://storage.echo3d.co/morning-hill-2019/5b4aded6-0a68-4f72-9446-2b31a6366f5a.png",alt:"QR Code"}),(0,D_.jsx)("a",{href:"https://go.echo3d.co/xmyz",target:"_blank",rel:"noreferrer",children:(0,D_.jsx)("button",{className:"h-12 px-8 ml-8 text-base font-semibold tracking-wider text-white border rounded-full shadow-sm mt-16 bg-red-50 bg-gradient-to-r from-purple-400 via-purple-500 to-pink-500  hover:shadow-lg",children:"View in AR"})})]})]})}function YU(){return(0,D_.jsx)(D_.Fragment,{children:(0,D_.jsxs)("div",{className:"pt-8 text-white",children:[(0,D_.jsx)(P_,{to:"/learn",className:"ml-8",children:"Go Back"}),(0,D_.jsxs)("div",{className:"grid w-full py-10 place-items-center",children:[(0,D_.jsx)("h1",{className:"pb-2 text-5xl font-semibold tracking-wide font-carattere lg:text-6xl",children:"Lungs"}),(0,D_.jsx)("div",{className:"inline-flex h-1 bg-secondary rounded-full w-36"}),(0,D_.jsx)("div",{className:"text-justify text-xl w-86 mt-2 mx-4 md:mx-44",children:'The lungs are the primary organs of the respiratory system in humans and most animals including a few fish, and some snails. In mammals and most other vertebrates, two lungs are located near the backbone on either side of the heart. This work is based on "Siddartha_Human Lungs" (https://sketchfab.com/3d-models/siddartha-human-lungs-ae95a945bc0340699d4d6df88e1148c3) by siddu stone 777 (https://sketchfab.com/siddustone777) licensed under CC-BY-4.0 (http://creativecommons.org/licenses/by/4.0/)'})]}),(0,D_.jsxs)("div",{className:"md:grid md:grid-cols-3 md:pr-15 pr-1",children:[(0,D_.jsx)("div",{className:"w-full h-128 px-4 outline-none cursor-grab md:col-span-2 lg:block",children:(0,D_.jsxs)(CB,{shadows:!0,dpr:[1,2],camera:{position:[0,0,4],fov:50},children:[(0,D_.jsx)("ambientLight",{intensity:.7}),(0,D_.jsx)("spotLight",{intensity:.5,angle:.1,penumbra:1,position:[10,10,10],castShadow:!0}),(0,D_.jsxs)(t.Suspense,{fallback:null,children:[(0,D_.jsx)(QU,{scale:5.5}),(0,D_.jsx)(eU,{preset:"city"}),(0,D_.jsx)(iU,{"rotation-x":Math.PI/2,position:[0,-.8,0],opacity:.25,width:10,height:10,blur:1.5,far:.8})]}),(0,D_.jsx)(uU,{autoRotate:!0})]})}),(0,D_.jsx)("div",{className:"mt-16 md:mt-0 md:col-span-1 p-4",children:(0,D_.jsx)(XU,{})})]})]})})}var ZU=NU({current:null});function $U(e){var n=Object.assign({},e),r=(0,t.useRef)(),i=YF("/human_ecorche/scene.gltf"),o=i.nodes,a=i.materials,s=u((0,t.useState)(null),2),l=s[0],c=s[1];return console.log(l),(0,D_.jsx)("group",W_(W_({ref:r},n),{},{dispose:null,onPointerOver:function(e){return e.stopPropagation(),c(e.object.material.name)},onPointerOut:function(e){return 0===e.intersections.length&&c(null)},onPointerMissed:function(){return ZU.current=null},onPointerDown:function(e){return e.stopPropagation(),ZU.current=e.object.material.name},children:(0,D_.jsx)("group",{rotation:[-Math.PI/2,0,0],children:(0,D_.jsx)("mesh",{geometry:o.mesh_0.geometry,material:a.material_0})})}))}function ej(){return"material_0"===zU(ZU).current?(0,D_.jsx)("div",{className:"h-full md:flex md:flex-col md:justify-center",children:(0,D_.jsx)("h1",{className:"text-3xl uppercase",children:"Deltoid muscle"})}):(0,D_.jsxs)("div",{className:"h-full md:flex md:flex-col md:justify-center",children:[(0,D_.jsx)("h1",{className:"text-2xl tracking-wider",children:"Click on diffrent parts of 3D model to know more"}),(0,D_.jsx)("p",{className:"self-center mx-8 text-xl tracking-wide text-justify",children:"To view the 3D model in AR, scan the QR code or click on the button below."}),(0,D_.jsxs)("div",{className:"grid justify-center grid-cols-1 gap-2 pb-8 mx-8 md:grid-cols-2 lg:grid-cols-2",children:[(0,D_.jsx)("img",{className:"flex p-6 text-6xl rounded-xl h-48 w-48",src:"https://storage.echo3d.co/morning-hill-2019/cd71b14e-e392-49db-a2f9-e563e22620d0.png",alt:"QR Code"}),(0,D_.jsx)("a",{href:"https://go.echo3d.co/3qN7",target:"_blank",rel:"noreferrer",children:(0,D_.jsx)("button",{className:"h-12 px-8 ml-8 text-base font-semibold tracking-wider text-white border rounded-full shadow-sm mt-16 bg-red-50 bg-gradient-to-r from-purple-400 via-purple-500 to-pink-500  hover:shadow-lg",children:"View in AR"})})]})]})}function tj(){return(0,D_.jsx)(D_.Fragment,{children:(0,D_.jsxs)("div",{className:"pt-8 text-white",children:[(0,D_.jsx)(P_,{to:"/learn",className:"ml-8",children:"Go Back"}),(0,D_.jsxs)("div",{className:"grid w-full py-10 place-items-center",children:[(0,D_.jsx)("h1",{className:"pb-2 text-5xl font-semibold tracking-wide font-carattere lg:text-6xl",children:"Human Muscle"}),(0,D_.jsx)("div",{className:"inline-flex h-1 bg-secondary rounded-full w-72"}),(0,D_.jsx)("div",{className:"text-justify text-xl w-86 mt-2 mx-4 md:mx-44",children:"There are around 650 skeletal muscles within the typical human body. Almost every muscle constitutes one part of a pair of identical bilateral muscles, found on both sides, resulting in approximately 320 pairs of muscles, as presented in this article. Nevertheless, the exact number is difficult to define."})]}),(0,D_.jsxs)("div",{className:"md:grid md:grid-cols-3 md:pr-15 pr-1",children:[(0,D_.jsx)("div",{className:"w-full h-128 px-4 outline-none cursor-grab md:col-span-2 lg:block",children:(0,D_.jsxs)(CB,{shadows:!0,dpr:[1,2],camera:{position:[0,0,4],fov:50},children:[(0,D_.jsx)("ambientLight",{intensity:.7}),(0,D_.jsx)("spotLight",{intensity:.5,angle:.1,penumbra:1,position:[10,15,10],castShadow:!0}),(0,D_.jsxs)(t.Suspense,{fallback:null,children:[(0,D_.jsx)($U,{scale:.085}),(0,D_.jsx)(eU,{preset:"city"}),(0,D_.jsx)(iU,{"rotation-x":Math.PI/2,position:[0,-.8,0],opacity:.25,width:10,height:10,blur:1.5,far:.8})]}),(0,D_.jsx)(uU,{autoRotate:!0})]})}),(0,D_.jsx)("div",{className:"mt-16 md:mt-0 md:col-span-1 p-4",children:(0,D_.jsx)(ej,{})})]})]})})}var nj=NU({current:null});function rj(e){var n=Object.assign({},e),r=(0,t.useRef)(),i=YF("/human_skull/scene.gltf"),o=i.nodes,a=(i.materials,u((0,t.useState)(null),2)),s=a[0],l=a[1];return console.log(s),(0,D_.jsx)("group",W_(W_({ref:r},n),{},{dispose:null,onPointerOver:function(e){return e.stopPropagation(),l(e.object.material.name)},onPointerOut:function(e){return 0===e.intersections.length&&l(null)},onPointerMissed:function(){return nj.current=null},onPointerDown:function(e){return e.stopPropagation(),nj.current=e.object.material.name},children:(0,D_.jsx)("group",{rotation:[-Math.PI/2,0,0],children:(0,D_.jsxs)("group",{rotation:[Math.PI/2,0,0],children:[(0,D_.jsx)("mesh",{geometry:o.defaultMaterial.geometry,material:o.defaultMaterial.material}),(0,D_.jsx)("mesh",{geometry:o.defaultMaterial_1.geometry,material:o.defaultMaterial_1.material}),(0,D_.jsx)("mesh",{geometry:o.defaultMaterial_2.geometry,material:o.defaultMaterial_2.material}),(0,D_.jsx)("mesh",{geometry:o.defaultMaterial_3.geometry,material:o.defaultMaterial_3.material})]})})}))}function ij(){return"DefaultMaterial"===zU(nj).current?(0,D_.jsx)("div",{className:"h-full md:flex md:flex-col md:justify-center",children:(0,D_.jsx)("h1",{className:"text-3xl uppercase",children:"Frontal Bone"})}):(0,D_.jsxs)("div",{className:"h-full md:flex md:flex-col md:justify-center",children:[(0,D_.jsx)("h1",{className:"text-2xl tracking-wider",children:"Click on diffrent parts of 3D model to know more"}),(0,D_.jsx)("p",{className:"self-center mx-8 text-xl tracking-wide text-justify",children:"To view the 3D model in AR, scan the QR code or click on the button below."}),(0,D_.jsxs)("div",{className:"grid justify-center grid-cols-1 gap-2 pb-8 mx-8 md:grid-cols-2 lg:grid-cols-2",children:[(0,D_.jsx)("img",{className:"flex p-6 text-6xl rounded-xl h-48 w-48",src:"https://storage.echo3d.co/morning-hill-2019/5b4aded6-0a68-4f72-9446-2b31a6366f5a.png",alt:"QR Code"}),(0,D_.jsx)("a",{href:"https://go.echo3d.co/xmyz",target:"_blank",rel:"noreferrer",children:(0,D_.jsx)("button",{className:"h-12 px-8 ml-8 text-base font-semibold tracking-wider text-white border rounded-full shadow-sm mt-16 bg-red-50 bg-gradient-to-r from-purple-400 via-purple-500 to-pink-500  hover:shadow-lg",children:"View in AR"})})]})]})}function oj(){return(0,D_.jsx)(D_.Fragment,{children:(0,D_.jsxs)("div",{className:"pt-8 text-white",children:[(0,D_.jsx)(P_,{to:"/learn",className:"ml-8",children:"Go Back"}),(0,D_.jsxs)("div",{className:"grid w-full py-10 place-items-center",children:[(0,D_.jsx)("h1",{className:"pb-2 text-5xl font-semibold tracking-wide font-carattere lg:text-6xl",children:"Human Skull"}),(0,D_.jsx)("div",{className:"inline-flex h-1 bg-secondary rounded-full w-72"}),(0,D_.jsx)("div",{className:"text-justify text-xl w-86 mt-2 mx-4 md:mx-44",children:"The skull is a bony structure that supports the face and forms a protective cavity for the brain. It is comprised of many bones, which are formed by intramembranous ossification, and joined by sutures (fibrous joints). The bones of the skull can be considered as two groups: those of the cranium (which consist of the cranial roof and cranial base) and those of the face. In this article, we shall look at the anatomy of the bones of the skull - their orientation, articulations, and clinical relevance."})]}),(0,D_.jsxs)("div",{className:"md:grid md:grid-cols-3 md:pr-15 pr-1",children:[(0,D_.jsx)("div",{className:"w-full h-screen px-4 outline-none cursor-grab md:col-span-2 lg:block",children:(0,D_.jsxs)(CB,{shadows:!0,dpr:[1,2],camera:{position:[0,0,4],fov:50},children:[(0,D_.jsx)("ambientLight",{intensity:.7}),(0,D_.jsx)("spotLight",{intensity:.5,angle:.1,penumbra:1,position:[10,15,10],castShadow:!0}),(0,D_.jsxs)(t.Suspense,{fallback:null,children:[(0,D_.jsx)(rj,{scale:1}),(0,D_.jsx)(eU,{preset:"city"}),(0,D_.jsx)(iU,{"rotation-x":Math.PI/2,position:[0,-.8,0],opacity:.25,width:10,height:10,blur:1.5,far:.8})]}),(0,D_.jsx)(uU,{autoRotate:!0})]})}),(0,D_.jsx)("div",{className:"mt-16 md:mt-0 md:col-span-1 p-4",children:(0,D_.jsx)(ij,{})})]})]})})}var aj=NU({current:null});function sj(e){var n=Object.assign({},e),r=(0,t.useRef)(),i=YF("/stomach/scene.gltf"),o=i.nodes,a=(i.materials,u((0,t.useState)(null),2)),s=a[0],l=a[1];return console.log(s),(0,D_.jsx)("group",W_(W_({ref:r},n),{},{dispose:null,onPointerOver:function(e){return e.stopPropagation(),l(e.object.material.name)},onPointerOut:function(e){return 0===e.intersections.length&&l(null)},onPointerMissed:function(){return aj.current=null},onPointerDown:function(e){return e.stopPropagation(),aj.current=e.object.material.name},children:(0,D_.jsx)("group",{rotation:[-Math.PI/2,0,0],children:(0,D_.jsx)("group",{rotation:[Math.PI/2,0,0],children:(0,D_.jsxs)("group",{position:[-.05,3.38,0],scale:[.4,1,.41],children:[(0,D_.jsx)("mesh",{geometry:o.mesh_0.geometry,material:o.mesh_0.material}),(0,D_.jsx)("mesh",{geometry:o.mesh_1.geometry,material:o.mesh_1.material}),(0,D_.jsx)("mesh",{geometry:o.mesh_2.geometry,material:o.mesh_2.material}),(0,D_.jsx)("mesh",{geometry:o.mesh_3.geometry,material:o.mesh_3.material}),(0,D_.jsx)("mesh",{geometry:o.mesh_4.geometry,material:o.mesh_4.material}),(0,D_.jsx)("mesh",{geometry:o.mesh_5.geometry,material:o.mesh_5.material}),(0,D_.jsx)("mesh",{geometry:o.mesh_6.geometry,material:o.mesh_6.material})]})})})}))}function uj(){return"Material.001"===zU(aj).current?(0,D_.jsx)("div",{className:"h-full md:flex md:flex-col md:justify-center",children:(0,D_.jsx)("h1",{className:"text-3xl uppercase",children:"Esophagus"})}):(0,D_.jsxs)("div",{className:"h-full md:flex md:flex-col md:justify-center",children:[(0,D_.jsx)("h1",{className:"text-2xl tracking-wider",children:"Click on diffrent parts of 3D model to know more"}),(0,D_.jsx)("p",{className:"self-center mx-8 text-xl tracking-wide text-justify",children:"To view the 3D model in AR, scan the QR code or click on the button below."}),(0,D_.jsxs)("div",{className:"grid justify-center grid-cols-1 gap-2 pb-8 mx-8 md:grid-cols-2 lg:grid-cols-2",children:[(0,D_.jsx)("img",{className:"flex p-6 text-6xl rounded-xl h-48 w-48",src:"https://storage.echo3d.co/morning-hill-2019/5b4aded6-0a68-4f72-9446-2b31a6366f5a.png",alt:"QR Code"}),(0,D_.jsx)("a",{href:"https://go.echo3d.co/xmyz",target:"_blank",rel:"noreferrer",children:(0,D_.jsx)("button",{className:"h-12 px-8 ml-8 text-base font-semibold tracking-wider text-white border rounded-full shadow-sm mt-16 bg-red-50 bg-gradient-to-r from-purple-400 via-purple-500 to-pink-500  hover:shadow-lg",children:"View in AR"})})]})]})}function lj(){return(0,D_.jsx)(D_.Fragment,{children:(0,D_.jsxs)("div",{className:"pt-8 text-white",children:[(0,D_.jsx)(P_,{to:"/learn",className:"ml-8",children:"Go Back"}),(0,D_.jsxs)("div",{className:"grid w-full py-10 place-items-center",children:[(0,D_.jsx)("h1",{className:"pb-2 text-5xl font-semibold tracking-wide font-carattere lg:text-6xl",children:"Stomach"}),(0,D_.jsx)("div",{className:"inline-flex h-1 bg-secondary rounded-full w-72"}),(0,D_.jsx)("div",{className:"text-justify text-xl w-86 mt-2 mx-4 md:mx-44",children:"The stomach is a muscular organ located on the left side of the upper abdomen. The stomach receives food from the esophagus. As food reaches the end of the esophagus, it enters the stomach through a muscular valve called the lower esophageal sphincter. The stomach secretes acid and enzymes that digest food. Ridges of muscle tissue called rugae line the stomach. The stomach muscles contract periodically, churning food to enhance digestion. The pyloric sphincter is a muscular valve that opens to allow food to pass from the stomach to the small intestine."})]}),(0,D_.jsxs)("div",{className:"md:grid md:grid-cols-3 md:pr-15 pr-1",children:[(0,D_.jsx)("div",{className:"w-full h-screen px-4 outline-none cursor-grab md:col-span-2 lg:block",children:(0,D_.jsxs)(CB,{shadows:!0,dpr:[1,2],camera:{position:[0,0,4],fov:50},children:[(0,D_.jsx)("ambientLight",{intensity:.7}),(0,D_.jsx)("spotLight",{intensity:.5,angle:.1,penumbra:1,position:[10,15,10],castShadow:!0}),(0,D_.jsxs)(t.Suspense,{fallback:null,children:[(0,D_.jsx)(sj,{scale:.3}),(0,D_.jsx)(eU,{preset:"city"}),(0,D_.jsx)(iU,{"rotation-x":Math.PI/2,position:[0,-.8,0],opacity:.25,width:10,height:10,blur:1.5,far:.8})]}),(0,D_.jsx)(uU,{autoRotate:!0})]})}),(0,D_.jsx)("div",{className:"mt-16 md:mt-0 md:col-span-1 p-4",children:(0,D_.jsx)(uj,{})})]})]})})}var cj=function(e){var n=e.scroll,r=u((0,t.useState)(""),2),i=r[0],o=r[1];function a(){return a=sw(lw().mark((function e(t){var r,a,s;return lw().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=Hb.currentUser,a=r.uid,s=r.photoURL,e.next=4,jb.collection("messages").add({text:i,photoURL:s,uid:a,createdAt:l.default.firestore.FieldValue.serverTimestamp()});case 4:o(""),n.current.scrollIntoView({behavior:"smooth"});case 6:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}return(0,D_.jsx)("div",{className:"border-2 border-indigo-500 rounded-b-md",children:(0,D_.jsxs)("form",{onSubmit:function(e){return a.apply(this,arguments)},className:"w-full flex justify-center",children:[(0,D_.jsx)("input",{className:"h-8 p-2 w-full focus:outline-none rounded-bl-lg",value:i,onChange:function(e){return o(e.target.value)}}),(0,D_.jsx)("button",{type:"submit",className:"w-16 font-bold tracking-wider text-white bg-gradient-to-r from-purple-400 via-pink-500 to-red-500",children:"SEND"})]})})};var hj=function(){var e=(0,t.useRef)(),n=u((0,t.useState)([]),2),r=n[0],i=n[1];return(0,t.useEffect)((function(){jb.collection("messages").orderBy("createdAt").limit(50).onSnapshot((function(e){i(e.docs.map((function(e){return e.data()})))}))}),[]),(0,D_.jsxs)("div",{className:"flex flex-col",children:[(0,D_.jsx)("div",{className:"border-2 border-indigo-500 rounded-t-md bg-gray-500 p-4 w-96 overflow-y-scroll flex flex-col h-128 max-w-7xl min-w-7xl",children:r.map((function(e){var t=e.id,n=e.text,r=e.photoURL,i=e.uid;e.name;return(0,D_.jsx)("div",{children:(0,D_.jsxs)("div",{className:"flex p-5 items-center my-2 rounded-full ".concat(i===Hb.currentUser.uid?"sent":"received"),children:[(0,D_.jsx)("div",{className:"group",children:(0,D_.jsx)("img",{className:"bg-black rounded-full h-12 w-12 border-2 border-black",src:r,alt:""})}),(0,D_.jsx)("p",{className:"font-medium text-md break-words",children:n})]},t)})}))}),(0,D_.jsx)(cj,{scroll:e}),(0,D_.jsx)("div",{ref:e})]})};function fj(){return(0,D_.jsxs)("div",{className:"mx-4 pt-8 pb-12",children:[(0,D_.jsxs)("div",{className:"grid w-full py-10 place-items-center",children:[(0,D_.jsx)("h1",{className:"pb-2 text-5xl text-white font-semibold tracking-wide",children:"Chatroom"}),(0,D_.jsx)("div",{className:"inline-flex h-1 bg-secondary rounded-full w-56"})]}),(0,D_.jsx)("div",{className:"flex justify-center items-center h-screen mx-4",children:(0,D_.jsx)(hj,{})})]})}function dj(){return(0,D_.jsxs)(R_,{children:[(0,D_.jsx)(N_,{}),(0,D_.jsxs)(s_,{children:[(0,D_.jsx)(o_,{path:"/",element:(0,D_.jsx)(O_,{})}),(0,D_.jsx)(o_,{path:"/learn",element:(0,D_.jsx)(G_,{})}),(0,D_.jsx)(o_,{path:"/brain",element:(0,D_.jsx)(KU,{})}),(0,D_.jsx)(o_,{path:"/lungs",element:(0,D_.jsx)(YU,{})}),(0,D_.jsx)(o_,{path:"/muscle",element:(0,D_.jsx)(tj,{})}),(0,D_.jsx)(o_,{path:"/skull",element:(0,D_.jsx)(oj,{})}),(0,D_.jsx)(o_,{path:"/stomach",element:(0,D_.jsx)(lj,{})}),(0,D_.jsx)(o_,{path:"/chatroom",element:(0,D_.jsx)(fj,{})})]})]})}var pj=n.p+"static/media/login.4b49e1145e8d37452cc34bd7ddcc065b.svg",vj=n(355);var mj=function(){return(0,D_.jsxs)("div",{className:"relative",children:[(0,D_.jsx)("div",{className:"z-10 mt-16 bg-tertiary md:h-96 md:w-96 md:mt-16 md:ml-44 rounded-3xl"}),(0,D_.jsx)("div",{className:"z-20 p-4 m-8 origin-bottom-right transform border-4 border-secondary lg:mx-56 md:mx-8 lg:-mt-80 rounded-2xl bg-gray-800",children:(0,D_.jsxs)("div",{className:"p-4 space-y-10 md:space-y-0 md:grid md:grid-cols-2",children:[(0,D_.jsx)("div",{className:"w-11/12 p-8 rounded-lg lg:-ml-4 sm:ml-16",children:(0,D_.jsx)("img",{width:"600px",height:"400px",src:pj,alt:"img"})}),(0,D_.jsxs)("div",{className:"md:flex md:flex-col md:justify-center lg:pr-16",children:[(0,D_.jsx)("h2",{className:"mb-4 text-6xl self-center font-bold tracking-wider text-white",children:"EdTech"}),(0,D_.jsxs)("div",{className:"relative mt-4 outline-transparent outline",children:[(0,D_.jsx)("input",{type:"email",name:"email",placeholder:" ",className:"block w-full pb-2 pl-3 text-lg text-gray-200 placeholder-gray-400 bg-transparent border-b-2 border-gray-400 appearance-none rounded-xl focus:border-green-400 focus:outline-none",required:!0}),(0,D_.jsx)("label",{className:"absolute top-0 p-2 text-lg text-gray-200 duration-300 md:text-lg -z-1 origin-0",children:"Email"})]}),(0,D_.jsxs)("div",{className:"relative mt-8 outline-transparent outline",children:[(0,D_.jsx)("input",{type:"password",name:"password",placeholder:" ",className:"block w-full pb-2 pl-3 text-lg text-gray-200 placeholder-gray-400 bg-transparent border-b-2 border-gray-400 appearance-none rounded-xl focus:border-green-400 focus:outline-none",required:!0}),(0,D_.jsx)("label",{className:"absolute top-0 p-2 text-lg text-gray-200 duration-300 md:text-lg -z-1 origin-0",children:"Password"})]}),(0,D_.jsxs)("div",{className:"grid justify-center grid-cols-1 gap-1 md:gap-4 mx-4 md:grid-cols-2",children:[(0,D_.jsx)("button",{type:"button",className:"h-12 px-8 text-base font-semibold tracking-wider text-white border rounded-full shadow-sm font-fontVollkorn my-6 bg-red-50 bg-gradient-to-r from-purple-400 via-purple-500 to-pink-500 hover:shadow-lg",children:"Sign In"}),(0,D_.jsx)("button",{type:"button",className:"h-12 px-8 text-base font-semibold tracking-wider text-white border rounded-full shadow-sm font-fontVollkorn my-6 bg-red-50 bg-gradient-to-r from-purple-400 via-purple-500 to-pink-500 hover:shadow-lg",children:"Sign Up"})]}),(0,D_.jsxs)("div",{className:"w-full flex items-center justify-center text-lg mb-4 text-white",children:[(0,D_.jsx)("div",{className:"inline-flex h-1 mx-4 bg-pink-500 rounded-full w-52"}),"or",(0,D_.jsx)("div",{className:"inline-flex h-1 mx-4 bg-pink-500 rounded-full w-52"})]}),(0,D_.jsx)("div",{className:"w-full block bg-white hover:bg-gray-100 focus:bg-gray-100 text-gray-900 font-semibold rounded-lg px-4 py-3 border border-gray-300 cursor-pointer shadow-lg",onClick:function(){var e=new l.default.auth.GoogleAuthProvider;Hb.signInWithPopup(e)},children:(0,D_.jsxs)("div",{className:"flex items-center justify-center bg-white",children:[(0,D_.jsx)("img",{src:vj,alt:"google",className:"bg-white w-4"}),(0,D_.jsx)("span",{className:"bg-white ml-4",children:"Sign in with Google"})]})})]})]})}),(0,D_.jsx)("div",{className:"z-10 float-right w-40 h-40 mr-48 -mt-40 bg-tertiary rounded-3xl md:block hidden"})]})};function gj(){var e=function(e){var n=Vb((function(){return e.currentUser})),r=n.error,i=n.loading,o=n.setError,a=n.setValue,s=n.value;return(0,t.useEffect)((function(){var t=e.onAuthStateChanged(a,o);return function(){t()}}),[e]),[s,i,r]}(Hb),n=u(e,1)[0];return(0,D_.jsx)("div",{className:"font-montserrat",children:n?(0,D_.jsx)(dj,{}):(0,D_.jsx)(mj,{})})}var yj=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),r(e),i(e),o(e),a(e)}))};r.render((0,D_.jsx)(t.StrictMode,{children:(0,D_.jsx)(gj,{})}),document.getElementById("root")),yj()}()}();
//# sourceMappingURL=main.d8b1be43.js.map